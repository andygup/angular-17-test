import{c as f}from"./chunk-RUOXPMWE.js";import{$ as o,H as p,Ia as g,Ja as F,Ka as j,La as L,Ma as v,Na as V,S as T,_ as m,b as d,c as u,ga as s,ma as y,oa as b,ua as A,va as x,wa as w}from"./chunk-WMY3KSI4.js";import"./chunk-HURWQVHY.js";import"./chunk-O5IGEGOS.js";import"./chunk-YH4Z47PR.js";import"./chunk-WUM4JBII.js";import"./chunk-U62SHMHB.js";import"./chunk-55ESOXMJ.js";import"./chunk-BCREO4Q5.js";import"./chunk-EJ3VIBAJ.js";import"./chunk-4LHUJTP5.js";import"./chunk-NBRBW7H5.js";import"./chunk-URPCXPAW.js";import"./chunk-KBFIYTBH.js";import"./chunk-PEPXQ7N3.js";import"./chunk-6QIKBCPR.js";import"./chunk-AHKJJNRE.js";import"./chunk-HBTOKQC5.js";import"./chunk-A52LT7YB.js";import"./chunk-CZPMRK53.js";import"./chunk-IDSF2RZ6.js";import"./chunk-2BBIRZVO.js";import"./chunk-WQAXQD4X.js";import"./chunk-IUPUERVS.js";import"./chunk-XF4NUYV7.js";import"./chunk-FNDPIYNC.js";import"./chunk-WMYPRHRR.js";import"./chunk-IAMDMFZ7.js";import"./chunk-53MWZ23O.js";import"./chunk-PT7S6WNL.js";import"./chunk-XDTDVCGP.js";import"./chunk-JPDAKIWT.js";import"./chunk-465DRXTW.js";import"./chunk-AC62Z3FX.js";import{g as c}from"./chunk-ESDYQQXO.js";function D(a,e){return a&&a.domain?a.domain.type==="coded-value"||a.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:a.domain.name,dataType:p[a.field.type],codedValues:a.domain.codedValues.map(t=>({name:t.name,code:t.code}))},v(e)):f.convertObjectToArcadeDictionary({type:"range",name:a.domain.name,dataType:p[a.field.type],min:a.domain.min,max:a.domain.max},v(e)):null}function C(a){a.mode==="async"&&(a.functions.domain=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,3,e,t),m(n[0]))return D(g(n[0],y(n[1]),n[2]===void 0?void 0:n[2]),e);if(o(n[0]))return yield n[0]._ensureLoaded(),D(w(y(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),e);throw new u(e,d.InvalidParameter,t)}))},a.functions.subtypes=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),m(n[0])){let r=F(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}if(o(n[0])){yield n[0]._ensureLoaded();let r=n[0].subtypes();return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new u(e,d.InvalidParameter,t)}))},a.functions.domainname=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,4,e,t),m(n[0]))return j(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(o(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return A(r,n[2])}throw new u(e,d.InvalidParameter,t)}))},a.signatures.push({name:"domainname",min:2,max:4}),a.functions.domaincode=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,4,e,t),m(n[0]))return L(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(o(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return x(r,n[2])}throw new u(e,d.InvalidParameter,t)}))},a.signatures.push({name:"domaincode",min:2,max:4})),a.functions.text=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>{if(s(n,1,2,e,t),!o(n[0]))return b(n[0],n[1]);{let r=T(n[1],"");if(r==="")return n[0].castToText();if(r.toLowerCase()==="schema")return n[0].convertToText("schema",i.abortSignal);if(r.toLowerCase()==="featureset")return n[0].convertToText("featureset",i.abortSignal)}})},a.functions.gdbversion=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),m(n[0]))return n[0].gdbVersion();if(o(n[0]))return(yield n[0].load()).gdbVersion;throw new u(e,d.InvalidParameter,t)}))},a.functions.schema=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),o(n[0]))return yield n[0].load(),f.convertObjectToArcadeDictionary(n[0].schema(),v(e));if(m(n[0])){let r=V(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new u(e,d.InvalidParameter,t)}))}}export{C as registerFunctions};
