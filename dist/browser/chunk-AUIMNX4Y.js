import{i as L}from"./chunk-N7PHAMWX.js";import{a as i,d as o,e as d,g as n}from"./chunk-NKBP5F7I.js";import{r as z}from"./chunk-465DRXTW.js";import{a as l,b as S}from"./chunk-ESDYQQXO.js";function P(s,t,e){let r=o.SIZE_FIELD_STOPS|o.SIZE_MINMAX_VALUE|o.SIZE_SCALE_STOPS|o.SIZE_UNIT_VALUE,a=(t&(d.FIELD_TARGETS_OUTLINE|d.MINMAX_TARGETS_OUTLINE|d.SCALE_TARGETS_OUTLINE|d.UNIT_TARGETS_OUTLINE))>>>4;return s===i.LINE&&e.isOutline||s===i.FILL&&K(e.symbologyType)?r&a:r&~a}var M=0,E=8,X=7,b=8,I=11,_=11,O=12,F=13,f=14,A=15,x=16,U=17,B=18,R=19,w=20,N=21,C=26,Z=Object.keys(n).filter(s=>typeof n[s]=="number").reduce((s,t)=>S(l({},s),{[t]:n[t]}),{});function k(s){return s===n.SIMPLE||s===n.OUTLINE_FILL_SIMPLE}function K(s){return s===n.OUTLINE_FILL||s===n.OUTLINE_FILL_SIMPLE}function H(s){return k(s.symbologyType)}function $(s){return K(s.symbologyType)}function j(s,t){switch(s){case i.FILL:return h.from(t);case i.LINE:return y.from(t);case i.MARKER:return u.from(t);case i.TEXT:return p.from(t);case i.LABEL:return V.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${s}`)}}function q(s){switch(v.load(s).geometryType){case i.MARKER:return new u(s);case i.FILL:return new h(s);case i.LINE:return new y(s);case i.TEXT:return new p(s);case i.LABEL:return new V(s)}}var v=class{static load(t){let e=this.shared;return e.data=t,e}constructor(t){this._data=0,this._data=t}set data(t){this._data=t??0}get data(){return this._data}get geometryType(){return this.bits(b,I)}set geometryType(t){this.setBits(t,b,I)}get mapAligned(){return!!this.bit(w)}set mapAligned(t){this.setBit(w,t)}get sdf(){return!!this.bit(_)}set sdf(t){this.setBit(_,t??!1)}get pattern(){return!!this.bit(O)}set pattern(t){this.setBit(O,t)}get textureBinding(){return this.bits(M,E)}set textureBinding(t){this.setBits(t,M,E)}get symbologyType(){return this.bits(N,C)}set symbologyType(t){this.setBits(t,N,C)}get geometryTypeString(){switch(this.geometryType){case i.FILL:return"fill";case i.MARKER:return"marker";case i.LINE:return"line";case i.TEXT:return"text";case i.LABEL:return"label";default:throw new z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){let r=1<<t;e?this._data|=r:this._data&=~r}bit(t){return(this._data&1<<t)>>t}setBits(t,e,r){for(let a=e,c=0;a<r;a++,c++)this.setBit(a,(t&1<<c)!=0)}bits(t,e){let r=0;for(let a=t,c=0;a<e;a++,c++)r|=this.bit(a)<<c;return r}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:n[this.symbologyType],options:Z,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(X&this.textureBinding)}};v.shared=new v(0);var g=s=>class extends s{get vvSizeMinMaxValue(){return this.bit(x)!==0}set vvSizeMinMaxValue(t){this.setBit(x,t)}get vvSizeScaleStops(){return this.bit(U)!==0}set vvSizeScaleStops(t){this.setBit(U,t)}get vvSizeFieldStops(){return this.bit(B)!==0}set vvSizeFieldStops(t){this.setBit(B,t)}get vvSizeUnitValue(){return this.bit(R)!==0}set vvSizeUnitValue(t){this.setBit(R,t)}hasSizeVV(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}hasVV(){return super.hasVV()||this.hasSizeVV()}setVV(t,e){super.setVV(t,e);let r=P(this.geometryType,t,e)&t;this.vvSizeMinMaxValue=!!(r&o.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&o.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&o.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&o.SIZE_SCALE_STOPS)}},G=s=>class extends s{get vvRotation(){return this.bit(A)!==0}set vvRotation(t){this.setBit(A,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e.isOutline&&!!(t&o.ROTATION)}},T=s=>class extends s{get vvColor(){return this.bit(F)!==0}set vvColor(t){this.setBit(F,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e.isOutline&&!!(t&o.COLOR)}},m=s=>class extends s{get vvOpacity(){return this.bit(f)!==0}set vvOpacity(t){this.setBit(f,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e.isOutline&&!!(t&o.OPACITY)}},h=class extends T(m(g(v))){static load(t){let e=this.shared;return e.data=t,e}static from(t){let{symbologyType:e,vvFlags:r}=t,a=this.load(0);return a.geometryType=i.FILL,a.symbologyType=e,e!==n.DOT_DENSITY&&a.setVV(r,t),a.data}getVariation(){return S(l({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}};h.shared=new h(0);var u=class extends T(m(G(g(v)))){static load(t){let e=this.shared;return e.data=t,e}static from(t){let{symbologyType:e,vvFlags:r}=t,a=this.load(0);return a.geometryType=i.MARKER,a.symbologyType=e,e!==n.HEATMAP&&a.setVV(r,t),a.data}getVariation(){return S(l({},super.getVariation()),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}};u.shared=new u(0);var y=class extends T(m(g(v))){static load(t){let e=this.shared;return e.data=t,e}static from(t){let e=this.load(0);return e.geometryType=i.LINE,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data}getVariation(){return S(l({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}};y.shared=new y(0);var p=class extends T(m(G(g(v)))){static load(t){let e=this.shared;return e.data=t,e}static from(t){let e=this.load(0);return e.geometryType=i.TEXT,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data}getVariation(){return S(l({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}};p.shared=new p(0);var V=class extends g(v){static load(t){let e=this.shared;return e.data=t,e}static from(t){let e=this.load(0);return e.geometryType=i.LABEL,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.mapAligned=L(t.placement),e.data}getVariation(){return S(l({},super.getVariation()),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}};V.shared=new V(0);export{K as a,H as b,$ as c,j as d,q as e,v as f,h as g,u as h,y as i,p as j,V as k};
