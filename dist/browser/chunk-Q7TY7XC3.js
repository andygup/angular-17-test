import{m as H}from"./chunk-MYYAF3XU.js";import{a as q,b as U}from"./chunk-DWAHQUVA.js";import{a as F}from"./chunk-PUCLHWWW.js";import{a as G,d as S,e as R,f as L,g as P}from"./chunk-DMYB246F.js";import{a as N}from"./chunk-HPJ6EQFO.js";import{l as O,q as h}from"./chunk-OOYAVZJN.js";import{$ as C,V as E}from"./chunk-XF4NUYV7.js";import{a as B}from"./chunk-XDTDVCGP.js";import{r as T}from"./chunk-465DRXTW.js";import{a as I}from"./chunk-AC62Z3FX.js";var lt="http://www.w3.org/2000/svg",ht=0,ct=0,W=I("android"),ft=I("chrome")||W&&W>=4?"auto":"optimizeLegibility",dt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ut=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,d={},l={},Y={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},gt=Math.PI,yt=1;function A(t,e){let i=t*(gt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function K(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function X(t,e,i,o){if(t){if(t.type==="circle")return h("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return h("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return h("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return h("image",{height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){let r=typeof t.path!="string"?K(t.path):t.path;return h("path",{d:r,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return B(o),h("text",{"dominant-baseline":o.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":o.font.family,"font-size":o.font.size,"font-style":o.font.style,"font-variant":o.font.variant,"font-weight":o.font.weight,kerning:o.kerning,rotate:o.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":o.align,"text-decoration":o.decoration,"text-rendering":ft,x:t.x,y:t.y},t.text)}return null}function tt(t){let e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){let i="patternId-"+ ++ht;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){let i="linearGradientId-"+ ++ct;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(o=>({offset:o.offset,color:o.color&&new N(o.color).toString()}))}}else if(t){let i=new N(t);e.fill=i.toString()}}return e}function et(t){let e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new N(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in Y&&(i=Y[t.style]),Array.isArray(i)){i=i.slice(0);let o=t.width??0;for(let r=0;r<i.length;++r)i[r]*=o;if(t.cap!=="butt"){for(let r=0;r<i.length;r+=2)i[r]-=o,i[r]<1&&(i[r]=1);for(let r=1;r<i.length;r+=2)i[r]+=o}i=i.join(",")}e.dashArray=i}return e}function it(t,e){let i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){let o=t.alignBaseline,r=o==="baseline"?"auto":o==="top"?"text-top":o==="bottom"?"hanging":o;i.align=t.align,i.dominantBaseline=r,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",B(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function pt(t){let{pattern:e,linearGradient:i}=t;if(e)return h("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},h("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){let o=i.stops.map((r,n)=>h("stop",{key:`${n}-stop`,offset:r.offset,"stop-color":r.color}));return h("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},o)}return null}function mt(t,e){if(!t||t.length===0)return null;let i=[];for(let o of t){let{shape:r,fill:n,stroke:a,font:c}=o,s=tt(n),y=et(a),u=r.type==="text"?it(r,c):null,g=X(r,s.fill,y,u);g&&i.push(g)}return h("mask",{id:e,maskUnits:"userSpaceOnUse"},h("g",null,i))}function _(t,e,i){return P(t,G(t),[e,i])}function Q(t,e,i,o,r){return L(t,G(t),[e,i]),t[4]=t[4]*e-o*e+o,t[5]=t[5]*i-r*i+r,t}function xt(t,e,i,o){let r=e%360*Math.PI/180;R(t,G(t),r);let n=Math.cos(r),a=Math.sin(r),c=t[4],s=t[5];return t[4]=c*n-s*a+o*a-i*n+i,t[5]=s*n+c*a-i*a-o*n+o,t}function x(t,e){d&&"left"in d?(d.left!=null&&d.left>t&&(d.left=t),(d.right==null||d.right<t)&&(d.right=t),(d.top==null||d.top>e)&&(d.top=e),(d.bottom==null||d.bottom<e)&&(d.bottom=e)):d={left:t,bottom:e,right:t,top:e}}function Z(t){let e=t.args,i=e.length,o;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(o=0;o<i;o+=2)x(e[o],e[o+1]);l.x=e[i-2],l.y=e[i-1];break;case"H":for(o=0;o<i;++o)x(e[o],l.y);l.x=e[i-1];break;case"V":for(o=0;o<i;++o)x(l.x,e[o]);l.y=e[i-1];break;case"m":{let r=0;for(("x"in l)||(x(l.x=e[0],l.y=e[1]),r=2),o=r;o<i;o+=2)x(l.x+=e[o],l.y+=e[o+1]);break}case"l":case"t":for(o=0;o<i;o+=2)x(l.x+=e[o],l.y+=e[o+1]);break;case"h":for(o=0;o<i;++o)x(l.x+=e[o],l.y);break;case"v":for(o=0;o<i;++o)x(l.x,l.y+=e[o]);break;case"c":for(o=0;o<i;o+=6)x(l.x+e[o],l.y+e[o+1]),x(l.x+e[o+2],l.y+e[o+3]),x(l.x+=e[o+4],l.y+=e[o+5]);break;case"s":case"q":for(o=0;o<i;o+=4)x(l.x+e[o],l.y+e[o+1]),x(l.x+=e[o+2],l.y+=e[o+3]);break;case"A":for(o=0;o<i;o+=7)x(e[o+5],e[o+6]);l.x=e[i-2],l.y=e[i-1];break;case"a":for(o=0;o<i;o+=7)x(l.x+=e[o+5],l.y+=e[o+6])}}function J(t,e,i){let o=dt[t.toLowerCase()],r;typeof o=="number"&&(o?e.length>=o&&(r={action:t,args:e.slice(0,e.length-e.length%o)},i.push(r),Z(r)):(r={action:t,args:[]},i.push(r),Z(r)))}function wt(t){let e=(typeof t.path!="string"?K(t.path):t.path).match(ut),i=[];if(d={},l={},!e)return null;let o="",r=[],n=e.length;for(let c=0;c<n;++c){let s=e[c],y=parseFloat(s);isNaN(y)?(o&&J(o,r,i),r=[],o=s):r.push(y)}J(o,r,i);let a={x:0,y:0,width:0,height:0};return d&&"left"in d&&(a.x=d.left,a.y=d.top,a.width=d.right-d.left,a.height=d.bottom-d.top),a}function kt(t){let e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){let i=wt(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function bt(t){let e={x:0,y:0,width:0,height:0},i=null,o=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),o=Math.max(o,n.x+n.width),r=Math.max(r,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,o=n.x+n.width,r=n.y+n.height);return i&&(i.width=o-i.x,i.height=r-i.y),i}function Mt(t,e,i,o,r,n,a,c,s){let y=(a&&n?A(n,e):e)/2,u=(a&&n?A(n,i):i)/2;if(s){let w=s[0],m=s[1];y=(a&&n?A(n,w):w)/2,u=(a&&n?A(n,m):m)/2}let g=t.width+o,p=t.height+o,k=F(),f=F(),j=!1;if(r&&g!==0&&p!==0){let w=e!==i?e/i:g/p,m=e>i?e:i,b=1,$=1;isNaN(m)||(w>1?(b=m/g,$=m/w/p):($=m/p,b=m*w/g)),S(f,f,Q(k,b,$,y,u)),j=!0}let M=t.x+(g-o)/2,v=t.y+(p-o)/2;if(S(f,f,_(k,y-M,u-v)),!j&&(g>e||p>i)){let w=g/e>p/i,m=(w?e:i)/(w?g:p);S(f,f,Q(k,m,m,M,v))}return n&&S(f,f,xt(k,n,M,v)),c&&S(f,f,_(k,c[0],c[1])),`matrix(${f[0]},${f[1]},${f[2]},${f[3]},${f[4]},${f[5]})`}function vt(t,e,i){let o=t?.effects.find(y=>y.type==="bloom");if(!o)return null;let{strength:r,radius:n}=o,a=r>0?n:0,c=(r+a)*e,s=4*r+1;return h("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},h("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(r+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),h("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:c/25}),h("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:c/50}),h("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},h("feFuncR",{slope:s,type:"linear"}),h("feFuncG",{slope:s,type:"linear"}),h("feFuncB",{slope:s,type:"linear"})),h("feMerge",null,h("feMergeNode",{in:"intensityBlur"}),h("feMergeNode",{in:"intensityBrightness"}),h("feGaussianBlur",{stdDeviation:r/10})))}function ot(t,e,i,o={}){let r=[],n=[],a=++yt,c=vt(o.effectView,e,a),s=null;if(c){let u=o.effectView?.effects.find(f=>f.type==="bloom"),g=(u.strength?u.strength+u.radius/2:0)/3,p=e+e*g,k=i+i*g;s=[Math.max(p,10),Math.max(k,10)]}for(let u=0;u<t.length;u++){let g=t[u],p=[],k=[],f=0,j=0,M=0;for(let m of g){let{shape:b,fill:$,stroke:V,font:nt,offset:z}=m;o.ignoreStrokeWidth||b.type==="text"||(f+=V?.width||0);let D=tt($),at=et(V),st=b.type==="text"?it(b,nt):null;r.push(pt(D)),p.push(X(b,D.fill,at,st)),k.push(kt(b)),z&&(j+=z[0],M+=z[1])}let v=Mt(bt(k),e,i,f,o.scale??!1,o.rotation,o.useRotationSize??!1,[j,M],s),w=null;if(o.masking){let m=`mask-${u}`,b=o.masking[u];r.push(mt(b,m)),w=`url(#${m})`}n.push(w?h("g",{mask:w},h("g",{transform:v},p)):h("g",{transform:v},p))}o.useRotationSize&&o.rotation&&(e=A(o.rotation,e),i=A(o.rotation,i)),c&&(B(s),e=s[0],i=s[1]);let y="display: block;";return h("svg",{"aria-labelledby":o.ariaLabel,focusable:!1,height:i,role:"img",style:y,width:e,xmlns:lt},c,h("defs",null,r),c?h("g",{filter:`url(#bloom${a})`},n):n)}var rt=O();function St(t,e){rt.append(t,e),rt.detach(e)}function Wt(t,e,i){let o=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;let n=i?.node||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.effectView!=null&&(n.style.filter=H(i.effectView)),St(n,()=>ot(t,o,r,i)),n}function At(t,e){t=Math.ceil(t),e=Math.ceil(e);let i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";let o=i.getContext("2d");return o.clearRect(0,0,t,e),o}function jt(t,e,i){return t?C(t,{responseType:"image"}).then(o=>{let r=o.data,n=r.width,a=r.height,c=n/a,s=e;if(i){let y=Math.max(n,a);s=Math.min(s,y)}return{image:r,width:c<=1?Math.ceil(s*c):s,height:c<=1?s:Math.ceil(s/c)}}):Promise.reject(new T("renderUtils: imageDataSize","href not provided."))}function $t(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function It(t,e,i,o,r){switch(r){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{let n=U({r:t[e],g:t[e+1],b:t[e+2]});n.h=o.h,n.s=o.s,n.v=n.v/100*o.v;let a=q(n);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function Yt(t,e,i,o,r){return jt(t,e,r).then(n=>{let a=n.width??e,c=n.height??e;if(n.image&&$t(i,o)){let s=n.image.width,y=n.image.height;I("edge")&&/\.svg$/i.test(t)&&(s-=1,y-=1);let u=At(a,c);u.drawImage(n.image,0,0,s,y,0,0,a,c);let g=u.getImageData(0,0,a,c),p=[i.r/255,i.g/255,i.b/255,i.a],k=U(i);for(let f=0;f<g.data.length;f+=4)It(g.data,f,p,k,o);u.putImageData(g,0,0),t=u.canvas.toDataURL("image/png")}else{let s=E?.findCredential(t);if(s?.token){let y=t.includes("?")?"&":"?";t=`${t}${y}token=${s.token}`}}return{url:t,width:a,height:c}}).catch(()=>({url:t,width:e,height:e}))}export{Wt as a,Yt as b};
