import{c as et}from"./chunk-Y4SWPZQY.js";import{c as $}from"./chunk-DUAAYE7V.js";import{c as tt}from"./chunk-6B6VO6EC.js";import{a as st}from"./chunk-YW3L7OMP.js";import{c as W}from"./chunk-ZOTIMGGE.js";import{a as H,b as E,c as J}from"./chunk-SREKDU6P.js";import{j as G}from"./chunk-IXIJFOEL.js";import{a as d}from"./chunk-BCREO4Q5.js";import{i as A,m as R}from"./chunk-EJ3VIBAJ.js";import{A as w,B as x,C as P,D,E as F,a as c,b as C,e as Y,k as f,l as y,m as k,n as l,o as m,v as p,w as K,x as T,y as U,z as X}from"./chunk-4LHUJTP5.js";import{a as Z,e as B,o as O}from"./chunk-NBRBW7H5.js";import{r as b}from"./chunk-IAMDMFZ7.js";import{p as Q}from"./chunk-465DRXTW.js";var j=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&b(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){let e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*rt);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,rt));e++)this._items.push(this._allocator())}},rt=1024;var h=class t{constructor(e,s,r){this._itemByteSize=e,this._itemCreate=s,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this._itemByteSize)}get(){this._itemsPtr===0&&b(()=>this._reset());let e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){let s=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(s,r*this._itemByteSize));this._buffers.push(s)}return this._items[this._itemsPtr++]}_reset(){let e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=_){return new t(16,W,e)}static createVec3f64(e=_){return new t(24,Y,e)}static createVec4f64(e=_){return new t(32,J,e)}static createMat3f64(e=_){return new t(72,$,e)}static createMat4f64(e=_){return new t(128,tt,e)}static createQuatf64(e=_){return new t(32,et,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}},_=4*st.KILOBYTES;var Ht=h.createVec2f64(),g=h.createVec3f64(),Jt=h.createVec4f64(),Wt=h.createMat3f64(),it=h.createMat4f64(),$t=h.createQuatf64();function ot(t){return t?nt(C(t.origin),C(t.direction)):nt(c(),c())}function nt(t,e){return{origin:t,direction:e}}function ae(t,e){let s=_t.get();return s.origin=t,s.direction=e,s}function at(t,e,s=ot()){return y(s.origin,t),m(s.direction,e,t),s}function ct(t,e,s){let r=x(t.direction,m(s,e,t.origin));return l(s,t.origin,p(s,t.direction,r)),s}var _t=new j(()=>ot());function ut(t,e){let s=x(t,e)/(f(t)*f(e));return-A(s)}var he=c(),ge=c();var dt=M();function M(){return H()}var Pt=O,Mt=O;function ft(t,e=M()){return B(e,t)}function St(t,e){return E(t[0],t[1],t[2],e)}function bt(t){return t}function yt(t){t[0]=t[1]=t[2]=t[3]=0}function wt(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function V(t){return t[3]}function xt(t){return t}function Bt(t,e,s,r){return E(t,e,s,r)}function At(t,e,s){return t!==s&&y(s,t),s[3]=t[3]+e,s}function jt(t,e,s){return Q.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===s?s:ft(t,s)}function v(t,e,s){if(e==null||!mt(t,e,q))return!1;let{t0:r,t1:i}=q;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(s){let{origin:n,direction:o}=e;s[0]=n[0]+o[0]*r,s[1]=n[1]+o[1]*r,s[2]=n[2]+o[2]*r}return!0}function qt(t,e,s){let r=at(e,s);if(!mt(t,r,q))return[];let{origin:i,direction:n}=r,{t0:o,t1:a}=q,u=S=>{let z=c();return K(z,i,n,S),N(t,z,z)};return Math.abs(o-a)<Z()?[u(o)]:[u(o),u(a)]}var q={t0:0,t1:0};function mt(t,e,s){let{origin:r,direction:i}=e,n=Vt;n[0]=r[0]-t[0],n[1]=r[1]-t[1],n[2]=r[2]-t[2];let o=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(o===0)return!1;let a=2*(i[0]*n[0]+i[1]*n[1]+i[2]*n[2]),u=a*a-4*o*(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]-t[3]*t[3]);if(u<0)return!1;let S=Math.sqrt(u);return s.t0=(-a-S)/(2*o),s.t1=(-a+S)/(2*o),!0}var Vt=c();function vt(t,e){return v(t,e,null)}function zt(t,e,s){if(v(t,e,s))return s;let r=ht(t,e,g.get());return l(s,e.origin,p(g.get(),e.direction,T(e.origin,r)/f(e.direction))),s}function ht(t,e,s){let r=g.get(),i=it.get();P(r,e.origin,e.direction);let n=V(t);P(s,r,e.origin),p(s,s,1/f(s)*n);let o=gt(t,e.origin),a=ut(e.origin,s);return G(i,a+o,r),F(s,s,i),s}function Ct(t,e,s){return v(t,e,s)?s:(ct(e,t,s),N(t,s,s))}function N(t,e,s){let r=m(g.get(),e,t),i=p(g.get(),r,t[3]/f(r));return l(s,i,t)}function kt(t,e){let s=m(g.get(),e,t),r=X(s),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))}function gt(t,e){let s=m(g.get(),e,t),r=f(s),i=V(t),n=i+Math.abs(i-r);return A(i/n)}var L=c();function pt(t,e,s,r){let i=m(L,e,t);switch(s){case d.X:{let n=R(i,L)[2];return k(r,-Math.sin(n),Math.cos(n),0)}case d.Y:{let n=R(i,L),o=n[1],a=n[2],u=Math.sin(o);return k(r,-u*Math.cos(a),-u*Math.sin(a),Math.cos(o))}case d.Z:return w(r,i);default:return}}function lt(t,e){let s=m(I,e,t);return f(s)-t[3]}function Tt(t,e,s,r){let i=lt(t,e),n=pt(t,e,d.Z,I),o=p(I,n,s-i);return l(r,e,o)}function Ot(t,e){let s=U(t,e),r=V(t);return s<=r*r}function Rt(t,e,s=M()){let r=T(t,e),i=t[3],n=e[3];return r+n<i?(B(s,t),s):r+i<n?(B(s,e),s):(D(s,t,e,(r+n-i)/(2*r)),s[3]=(r+i+n)/2,s)}var I=c(),Et=M(),qe=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:dt,altitudeAt:lt,angleToSilhouette:gt,axisAt:pt,clear:yt,closestPoint:Ct,closestPointOnSilhouette:ht,containsPoint:Ot,copy:ft,create:M,distanceToSilhouette:kt,elevate:At,equals:Mt,exactEquals:Pt,fromCenterAndRadius:St,fromRadius:wt,fromValues:Bt,getCenter:xt,getRadius:V,intersectLine:qt,intersectRay:v,intersectRayClosestSilhouette:zt,intersectsRay:vt,projectPoint:N,setAltitudeAt:Tt,setExtent:jt,tmpSphere:Et,union:Rt,wrap:bt},Symbol.toStringTag,{value:"Module"}));export{j as a,g as b,ot as c,ae as d,M as e,ft as f,V as g,vt as h,Ot as i};
