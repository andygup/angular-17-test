import{a as p}from"./chunk-HBDWL3B4.js";import{R as d}from"./chunk-IAMDMFZ7.js";import{a as c}from"./chunk-53MWZ23O.js";var R=t=>{let e=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new p(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return e=c([d("esri.views.2d.layers.BitmapTileLayerView2D")],e),e};function V(t){return t instanceof HTMLImageElement?t.naturalWidth:t.width}function C(t){return t instanceof HTMLImageElement?t.naturalHeight:t.height}function O(t,e,o,a){if(o.level===a.level)return e;let i=t.tileInfo.size,r=t.getTileResolution(o.level),l=t.getTileResolution(a.level),n=t.getLODInfoAt(a.level),u=n.getXForColumn(a.col),w=n.getYForRow(a.row);n=t.getLODInfoAt(o.level);let g=n.getXForColumn(o.col),f=n.getYForRow(o.row),s=V(e)/i[0],m=C(e)/i[1],v=Math.round(s*((u-g)/r)),I=Math.round(m*(-(w-f)/r)),L=Math.round(s*i[0]*(l/r)),T=Math.round(m*i[1]*(l/r)),h=M(i);return h.getContext("2d").drawImage(e,v,I,L,T,0,0,i[0],i[1]),h}function M(t){let e=document.createElement("canvas");return[e.width,e.height]=t,e}export{R as a,O as b,M as c};
