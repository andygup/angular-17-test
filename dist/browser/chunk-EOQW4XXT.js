import{a as j,b as S}from"./chunk-QB2WNRL5.js";import{b as v,c as g,d as F,e as h,f as P}from"./chunk-IFUI4HFB.js";import{c as D}from"./chunk-JOOJSGLF.js";import{g as d,h as N,u as T}from"./chunk-MYELF7MV.js";import{a as c}from"./chunk-O5K35OSE.js";import{c as U}from"./chunk-B4PK7RBX.js";import{G as b,g as u}from"./chunk-XF4NUYV7.js";import{r as p}from"./chunk-465DRXTW.js";function K(t,e,l,r){let o=t.name;return o==null?Promise.reject(new p("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?R(o,e,r):v(t,e,r).then(a=>M(a,o,e,l,F,r))}function J(t,e){return e.items.find(l=>l.name===t)}function M(t,e,l,r,o,a){let n=l?.portal!=null?l.portal:U.getDefault(),w={portal:n,url:u(t.baseUrl),origin:"portal-item"},s=J(e,t.data);if(!s){let f=`The symbol name '${e}' could not be found`;return Promise.reject(new p("symbolstyleutils:symbol-name-not-found",f,{symbolName:e}))}let i=c(o(s,r),w),y=s.thumbnail?.href??null,O=s.thumbnail?.imageData;j()&&(i=S(i)??"",y=S(y));let I={portal:n,url:u(b(i)),origin:"portal-item"};return h(i,a).then(f=>{let A=r==="cimRef"?g(f.data):f.data,m=D(A,I);if(m&&T(m)){if(y){let E=c(y,w);m.thumbnail=new N({url:E})}else O&&(m.thumbnail=new N({url:`data:image/png;base64,${O}`}));t.styleUrl?m.styleOrigin=new d({portal:l.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(m.styleOrigin=new d({portal:l.portal,styleName:t.styleName,name:e}))}return m})}function R(t,e,l){let r=P.replaceAll(/\{SymbolName\}/gi,t),o=e.portal!=null?e.portal:U.getDefault();return h(r,l).then(a=>{let n=g(a.data);return D(n,{portal:o,url:u(b(r)),origin:"portal-item"})})}export{K as a,J as b,M as c};
