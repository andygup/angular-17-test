import{$ as h,P as m,s as n}from"./chunk-XF4NUYV7.js";import{r as d}from"./chunk-465DRXTW.js";import{g as i}from"./chunk-ESDYQQXO.js";function q(a){return i(this,arguments,function*(e,t={},r){yield e.load(r);let s=n(e.itemUrl,"resources"),{start:u=1,num:l=10,sortOrder:c="asc",sortField:o="created"}=t,y={query:{start:u,num:l,sortOrder:c,sortField:o,token:e.apiKey},signal:r?.signal},p=yield e.portal.request(s,y);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map(({created:w,size:b,resource:v})=>({created:new Date(w),size:b,resource:e.resourceFromPath(v)}))}})}function F(e,t,r,a){return i(this,null,function*(){if(!e.hasPath())throw new d(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");let s=e.portalItem;yield s.load(a);let u=n(s.userItemUrl,t==="add"?"addResources":"updateResources"),[l,c]=f(e.path),o=new FormData;return l&&l!=="."&&o.append("resourcesPrefix",l),a!=null&&a.compress&&o.append("compress","true"),o.append("fileName",c),o.append("file",r,c),o.append("f","json"),a?.access&&o.append("access",a.access),yield s.portal.request(u,{method:"post",body:o,signal:a?.signal}),e})}function S(e,t,r){return i(this,null,function*(){if(!t.hasPath())throw new d("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield e.load(r);let a=n(e.userItemUrl,"removeResources");yield e.portal.request(a,{method:"post",query:{resource:t.path},signal:r?.signal}),t.portalItem=null})}function O(e,t){return i(this,null,function*(){yield e.load(t);let r=n(e.userItemUrl,"removeResources");return e.portal.request(r,{method:"post",query:{deleteAll:!0},signal:t?.signal})})}function f(e){let t=e.lastIndexOf("/");return t===-1?[".",e]:[e.slice(0,t),e.slice(t+1)]}function g(e){let[t,r]=P(e),[a,s]=f(t);return[a,s,r]}function P(e){let t=m(e);return t==null?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}function j(e){return i(this,null,function*(){return e.type==="blob"?e.blob:e.type==="json"?new Blob([e.jsonString],{type:"application/json"}):(yield h(e.url,{responseType:"blob"})).data})}function U(e,t){if(!e.hasPath())return null;let[r,,a]=g(e.path);return e.portalItem.resourceFromPath(n(r,t+a))}function T(e,t){if(!e.hasPath())return null;let[r,,a]=g(e.path);return e.portalItem.resourceFromPath(n(r,t+a))}export{q as a,F as b,S as c,O as d,g as e,j as f,U as g,T as h};
