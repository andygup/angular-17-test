import{a as O,b as sv,c as av,d as qa}from"./chunk-DAWZQX4A.js";import{a as Xc,b as Dv,c as Cv,d as Ev,e as Iv}from"./chunk-JKCQNJEQ.js";import{a as iv,b as J,c as ov,d as Pn}from"./chunk-XFKEXQXK.js";import{a as ye,b as Wa,c as Za,d as lv,e as Ei,g as uv,h as cv,j as dv,k as pv,l as hv,m as fv,o as mv,p as gv,q as vv,r as Qc,s as yv,u as wv,v as Jc,w as bv,y as _v}from"./chunk-6XBO2ULB.js";import{a as ed}from"./chunk-IRJFYPO2.js";import{a as tv}from"./chunk-GZNT3OHH.js";import{a as nv,b as rv}from"./chunk-NERKAOSY.js";import"./chunk-U3QAV4TV.js";import"./chunk-HZAVPHHR.js";import"./chunk-4CWFI3RM.js";import"./chunk-ZODUYFSC.js";import"./chunk-AG2SJ6BN.js";import"./chunk-DJKXVE6T.js";import{a as Xg}from"./chunk-2UWML3DK.js";import{a as Jg,b as Zc,c as Yc}from"./chunk-R72KC7FJ.js";import{a as Ga}from"./chunk-WKOJXXCZ.js";import{a as Qg}from"./chunk-MNLP6AEE.js";import"./chunk-ZIQX3XYG.js";import{a as Wg,b as za,c as Zg,d as Yg}from"./chunk-SUPBR27R.js";import{a as Wc}from"./chunk-XHOTVM3O.js";import{a as jr}from"./chunk-XW7QX6JS.js";import{b as Ha,c as Gg}from"./chunk-IGLWZTM3.js";import{a as zg}from"./chunk-AM2AYMN3.js";import"./chunk-RH6QQ4K6.js";import"./chunk-QCHQODPK.js";import"./chunk-KYW34JK7.js";import"./chunk-4R7MTAA6.js";import"./chunk-YH5YGPKQ.js";import"./chunk-OJTJKYFK.js";import"./chunk-WSUW6W66.js";import"./chunk-WF5LZUVW.js";import"./chunk-E4G7B7K5.js";import"./chunk-RZU6EEB3.js";import{a as qg}from"./chunk-WHNNLNN4.js";import"./chunk-2YMAK36I.js";import"./chunk-ZVPHD6FG.js";import"./chunk-BHUF7DXK.js";import"./chunk-VYBYHQTJ.js";import{a as Wo}from"./chunk-YKLD6O7Z.js";import"./chunk-2SRHEZDP.js";import"./chunk-4YLYZGNM.js";import"./chunk-PHG7WLHF.js";import"./chunk-3AY2ZIM4.js";import"./chunk-XFFNQH2H.js";import"./chunk-VL6L3PH6.js";import"./chunk-EGQHBYFL.js";import{a as qc}from"./chunk-MXNDRZNB.js";import"./chunk-XWKYTQFT.js";import"./chunk-RAIGRXV3.js";import"./chunk-UULYHJV4.js";import{a as Yo}from"./chunk-WDTJILD4.js";import"./chunk-6J7DCVWC.js";import"./chunk-CIQJCIGH.js";import"./chunk-RI77TKRA.js";import"./chunk-UW2TVJUN.js";import"./chunk-LGUXUFJ7.js";import"./chunk-Z7MKEISX.js";import"./chunk-5L5TH44W.js";import{a as ng}from"./chunk-URPONBMS.js";import"./chunk-QB3NROF7.js";import"./chunk-5WCYRI4X.js";import"./chunk-DR5NPQZL.js";import"./chunk-5P24QCNC.js";import"./chunk-6UF7N5AK.js";import"./chunk-6UQ2Y4IC.js";import"./chunk-KZREEH45.js";import"./chunk-N3XRI3RU.js";import"./chunk-BGARZEEH.js";import"./chunk-B3I4XIHJ.js";import"./chunk-6EFGHIXX.js";import"./chunk-DZ3DW7ED.js";import"./chunk-3XRT3SNQ.js";import"./chunk-TQXEOG45.js";import"./chunk-YEFTRNE3.js";import"./chunk-5OGCWDP4.js";import"./chunk-JBJTQF7V.js";import"./chunk-5JBKPHFU.js";import"./chunk-6JYX4V7N.js";import{c as $g,d as Ug}from"./chunk-7EQBH2NW.js";import{a as Bg}from"./chunk-CN5O6E6T.js";import"./chunk-4KJ462UD.js";import{a as cg,b as Di}from"./chunk-HSB35X5B.js";import"./chunk-7BGNDY2B.js";import{g as Hg}from"./chunk-FBHJEXCM.js";import"./chunk-IFUI4HFB.js";import"./chunk-JOOJSGLF.js";import"./chunk-MYELF7MV.js";import"./chunk-MS3ZOARX.js";import{a as Lg,b as Vg}from"./chunk-KCKP7FIY.js";import"./chunk-BQABCLW6.js";import{a as jg}from"./chunk-HTB4QCFJ.js";import"./chunk-7K4WIBFN.js";import"./chunk-Z77VHNI3.js";import"./chunk-LMIKL5PS.js";import{a as Ag}from"./chunk-OKLB3DLR.js";import"./chunk-DWZPFSNU.js";import"./chunk-MCIUWLYC.js";import"./chunk-EEZEB3RB.js";import"./chunk-45GFWXQC.js";import"./chunk-AUVYUYNK.js";import{a as Fg}from"./chunk-PUCLHWWW.js";import{c as Ng,e as Rg,g as Og,j as Pg}from"./chunk-DMYB246F.js";import{b as Gc}from"./chunk-YEFC7M4L.js";import"./chunk-C7M5MSEL.js";import{a as nn}from"./chunk-HPJ6EQFO.js";import{a as Ua}from"./chunk-ZOTIMGGE.js";import{b as Sg,c as Mg,g as xg,h as zc,i as Tg}from"./chunk-7UQPY7PH.js";import{a as Zo,b as Cg,d as Eg,f as Ig,n as lr}from"./chunk-OHIIU6WS.js";import{a as ur}from"./chunk-RCWJNG4Z.js";import{a as fg,b as mg}from"./chunk-HUZLTBDZ.js";import"./chunk-V2JYXY4D.js";import"./chunk-5MJXKSZ4.js";import"./chunk-TJ3KO5EG.js";import"./chunk-FC6HKZZX.js";import{a as On}from"./chunk-LGGJOMLJ.js";import"./chunk-VVAIF23J.js";import"./chunk-6N5DPLFH.js";import{b as dg}from"./chunk-HI2T2YSZ.js";import"./chunk-O5K35OSE.js";import{a as ke}from"./chunk-D6LLE2YP.js";import{a as kg}from"./chunk-I3S324BU.js";import"./chunk-O5IGEGOS.js";import"./chunk-2UDQ3IWX.js";import{c as Dg}from"./chunk-MXH75ZNY.js";import"./chunk-PQKTT6AH.js";import"./chunk-OM24DGCK.js";import"./chunk-YQRTHGFD.js";import"./chunk-EDSVJRYE.js";import"./chunk-TQYOVOJO.js";import"./chunk-QAVDKCSH.js";import"./chunk-H2AOS66Z.js";import"./chunk-VGGNZXSE.js";import{a as Ba}from"./chunk-YH4Z47PR.js";import"./chunk-CJJRHJ2S.js";import{a as gg,b as vg,c as yg}from"./chunk-HZP7XBNB.js";import{b as ev}from"./chunk-YUZT5LSA.js";import{a as Kg}from"./chunk-725QQXBM.js";import{a as La}from"./chunk-ZYPPRX53.js";import"./chunk-574KRDZU.js";import"./chunk-2APWMENK.js";import"./chunk-ZWFVPWKA.js";import{a as Qm}from"./chunk-JOYABHZZ.js";import{f as pg,g as hg}from"./chunk-IEXZWAIE.js";import"./chunk-VDN3XKL2.js";import"./chunk-SVEGZVCP.js";import{d as be}from"./chunk-AQ74ANSJ.js";import"./chunk-SAOUSUZE.js";import"./chunk-6MGDEI2H.js";import{a as ug}from"./chunk-QSGARGRB.js";import"./chunk-SREKDU6P.js";import"./chunk-IXIJFOEL.js";import"./chunk-QZ4L25WE.js";import{f as lg}from"./chunk-4ATIL3QV.js";import{a as We}from"./chunk-WUM4JBII.js";import{b as wg,c as bg,d as _g,e as Ci,o as $a}from"./chunk-URUYU25U.js";import"./chunk-3S2DT2SI.js";import"./chunk-7PPV2CP7.js";import{d as rg,s as ag}from"./chunk-U62SHMHB.js";import"./chunk-55ESOXMJ.js";import"./chunk-BCREO4Q5.js";import{b as Hc,h as sg}from"./chunk-EJ3VIBAJ.js";import{v as og}from"./chunk-4LHUJTP5.js";import{c as ig}from"./chunk-NBRBW7H5.js";import{a as Na,b as Ra,c as Bc,d as $c,e as sr,f as re,g as qe,h as ot,i as ar,j as Zm,l as Ym,m as Fa,n as Km}from"./chunk-GNHGUIJP.js";import{f as Gm,h as qm,i as Wm,j as Pa,l as Uc,q as y}from"./chunk-OOYAVZJN.js";import"./chunk-225WJVLD.js";import"./chunk-T62VBPHF.js";import"./chunk-RIZAJ3RX.js";import"./chunk-V2KSICSA.js";import{a as E,b as St,c as Xt,d as en,e as Bm,f as rr,g as de,h as Nn}from"./chunk-CBOFHDSC.js";import{c as jm,e as _i}from"./chunk-HB7BVTLV.js";import"./chunk-WZKL6OPG.js";import{b as Hm}from"./chunk-WF37UVOV.js";import{a as or,b as Um,h as Vc,i as jc}from"./chunk-UZQ577CU.js";import{b as Q}from"./chunk-FC3MPJI4.js";import{a as nr}from"./chunk-5ETRXDS4.js";import"./chunk-QDNKD3H5.js";import{a as tg}from"./chunk-F72O5PVM.js";import{c as Kc}from"./chunk-B4PK7RBX.js";import{a as Lr}from"./chunk-6J4Y65BV.js";import{a as Oa,b as zm}from"./chunk-RXHILZH7.js";import"./chunk-KBFIYTBH.js";import"./chunk-PEPXQ7N3.js";import"./chunk-VU5W7W6Y.js";import{a as ja,c as eg,j as tn}from"./chunk-6QIKBCPR.js";import{d as Xm,g as Va,i as je}from"./chunk-AHKJJNRE.js";import{a as Mt}from"./chunk-HBTOKQC5.js";import{a as Ve,b as Rn}from"./chunk-A52LT7YB.js";import{d as Jm,n as Vr}from"./chunk-CZPMRK53.js";import{a as $m,c as Aa}from"./chunk-IDSF2RZ6.js";import{a as Te}from"./chunk-2BBIRZVO.js";import{a as ir}from"./chunk-WQAXQD4X.js";import"./chunk-IUPUERVS.js";import{N as Lm,U as Vm,g as Om,v as Pm,y as Fm}from"./chunk-XF4NUYV7.js";import{c as Nm,f as Rm,h as M}from"./chunk-FNDPIYNC.js";import{H as c,K as _,b as Nc,c as Rc,e as Cm,f as Oc,g as Ia,i as Ma,q as zo,t as km,u as Lt}from"./chunk-WMYPRHRR.js";import{H as qo,L as Lc,R as m,t as tr,y as Am,z as ka}from"./chunk-IAMDMFZ7.js";import{a as l}from"./chunk-53MWZ23O.js";import{a as Sa,c as Jt,e as Em,g as xa,h as Pc,i as et,j as Im,m as Ta,p as bi,q as Fc,s as Sm,v as Mm,w as xm,y as Tm,z as Go}from"./chunk-PT7S6WNL.js";import{b as fe,d as Ge,e as Ho}from"./chunk-XDTDVCGP.js";import"./chunk-JPDAKIWT.js";import{b as ve,i as Ea,p as k,r as A}from"./chunk-465DRXTW.js";import{a as it,p as An}from"./chunk-AC62Z3FX.js";import{a as v,b as L,g as C}from"./chunk-ESDYQQXO.js";var Sv=null;var td=1;function ft(e){let t=Sv;return Sv=e,t}var Mv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hC(e){if(!(id(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===td)){if(!e.producerMustRecompute(e)&&!nd(e)){e.dirty=!1,e.lastCleanEpoch=td;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=td}}function xv(e){return e&&(e.nextProducerIndex=0),ft(e)}function Tv(e,t){if(ft(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(id(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)rd(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function nd(e){Ya(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(hC(n),r!==n.version))return!0}return!1}function kv(e){if(Ya(e),id(e))for(let t=0;t<e.producerNode.length;t++)rd(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function rd(e,t){if(fC(e),Ya(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)rd(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ya(i),i.producerIndexOfThis[r]=t}}function id(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ya(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function fC(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function mC(){throw new Error}var gC=mC;function Av(e){gC=e}function V(e){return typeof e=="function"}function Ii(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ka=Ii(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ko(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Be=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(V(r))try{r()}catch(o){t=o instanceof Ka?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Nv(o)}catch(s){t=t??[],s instanceof Ka?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ka(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Nv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ko(n,t)}remove(t){let{_finalizers:n}=this;n&&Ko(n,t),t instanceof e&&t._removeParent(this)}};Be.EMPTY=(()=>{let e=new Be;return e.closed=!0,e})();var od=Be.EMPTY;function Qa(e){return e instanceof Be||e&&"closed"in e&&V(e.remove)&&V(e.add)&&V(e.unsubscribe)}function Nv(e){V(e)?e():e.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Si={setTimeout(e,t,...n){let{delegate:r}=Si;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Si;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ja(e){Si.setTimeout(()=>{let{onUnhandledError:t}=Vt;if(t)t(e);else throw e})}function Qo(){}var Rv=(()=>sd("C",void 0,void 0))();function Ov(e){return sd("E",void 0,e)}function Pv(e){return sd("N",e,void 0)}function sd(e,t,n){return{kind:e,value:t,error:n}}var Br=null;function Mi(e){if(Vt.useDeprecatedSynchronousErrorHandling){let t=!Br;if(t&&(Br={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Br;if(Br=null,n)throw r}}else e()}function Fv(e){Vt.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=e)}var $r=class extends Be{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Qa(t)&&t.add(this)):this.destination=wC}static create(t,n,r){return new Fn(t,n,r)}next(t){this.isStopped?ld(Pv(t),this):this._next(t)}error(t){this.isStopped?ld(Ov(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ld(Rv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vC=Function.prototype.bind;function ad(e,t){return vC.call(e,t)}var ud=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Xa(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Xa(r)}else Xa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Xa(n)}}},Fn=class extends $r{constructor(t,n,r){super();let i;if(V(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ad(t.next,o),error:t.error&&ad(t.error,o),complete:t.complete&&ad(t.complete,o)}):i=t}this.destination=new ud(i)}};function Xa(e){Vt.useDeprecatedSynchronousErrorHandling?Fv(e):Ja(e)}function yC(e){throw e}function ld(e,t){let{onStoppedNotification:n}=Vt;n&&Si.setTimeout(()=>n(e,t))}var wC={closed:!0,next:Qo,error:yC,complete:Qo};var xi=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function tt(e){return e}function cd(...e){return dd(e)}function dd(e){return e.length===0?tt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var ee=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=_C(n)?n:new Fn(n,r,i);return Mi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Lv(r),new r((i,o)=>{let s=new Fn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xi](){return this}pipe(...n){return dd(n)(this)}toPromise(n){return n=Lv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Lv(e){var t;return(t=e??Vt.Promise)!==null&&t!==void 0?t:Promise}function bC(e){return e&&V(e.next)&&V(e.error)&&V(e.complete)}function _C(e){return e&&e instanceof $r||bC(e)&&Qa(e)}function pd(e){return V(e?.lift)}function G(e){return t=>{if(pd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(e,t,n,r,i){return new hd(e,t,n,r,i)}var hd=class extends $r{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ti(){return G((e,t)=>{let n=null;e._refCount++;let r=Z(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var ki=class extends ee{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,pd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Be;let n=this.getSubject();t.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Be.EMPTY)}return t}refCount(){return Ti()(this)}};var Vv=Ii(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class e extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new el(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vv}next(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?od:(this.currentObservers=null,o.push(n),new Be(()=>{this.currentObservers=null,Ko(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return e.create=(t,n)=>new el(t,n),e})(),el=class extends nt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:od}};var He=class extends nt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var st=new ee(e=>e.complete());function jv(e){return e&&V(e.schedule)}function fd(e){return e[e.length-1]}function Bv(e){return V(fd(e))?e.pop():void 0}function rn(e){return jv(fd(e))?e.pop():void 0}function $v(e,t){return typeof fd(e)=="number"?e.pop():t}function Hv(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function u(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,u)}d((r=r.apply(e,t||[])).next())})}function Uv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ur(e){return this instanceof Ur?(this.v=e,this):new Ur(e)}function zv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(g){return new Promise(function(w,D){o.push([f,g,w,D])>1||a(f,g)})})}function a(f,g){try{u(r[f](g))}catch(w){h(o[0][3],w)}}function u(f){f.value instanceof Ur?Promise.resolve(f.value.v).then(d,p):h(o[0][2],f)}function d(f){a("next",f)}function p(f){a("throw",f)}function h(f,g){f(g),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Gv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Uv=="function"?Uv(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){s=e[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}}var tl=e=>e&&typeof e.length=="number"&&typeof e!="function";function nl(e){return V(e?.then)}function rl(e){return V(e[xi])}function il(e){return Symbol.asyncIterator&&V(e?.[Symbol.asyncIterator])}function ol(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sl=DC();function al(e){return V(e?.[sl])}function ll(e){return zv(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Ur(n.read());if(i)return yield Ur(void 0);yield yield Ur(r)}}finally{n.releaseLock()}})}function ul(e){return V(e?.getReader)}function _e(e){if(e instanceof ee)return e;if(e!=null){if(rl(e))return CC(e);if(tl(e))return EC(e);if(nl(e))return IC(e);if(il(e))return qv(e);if(al(e))return SC(e);if(ul(e))return MC(e)}throw ol(e)}function CC(e){return new ee(t=>{let n=e[xi]();if(V(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EC(e){return new ee(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function IC(e){return new ee(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ja)})}function SC(e){return new ee(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function qv(e){return new ee(t=>{xC(e,t).catch(n=>t.error(n))})}function MC(e){return qv(ll(e))}function xC(e,t){var n,r,i,o;return Hv(this,void 0,void 0,function*(){try{for(n=Gv(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function at(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function cl(e,t=0){return G((n,r)=>{n.subscribe(Z(r,i=>at(r,e,()=>r.next(i),t),()=>at(r,e,()=>r.complete(),t),i=>at(r,e,()=>r.error(i),t)))})}function dl(e,t=0){return G((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Wv(e,t){return _e(e).pipe(dl(t),cl(t))}function Zv(e,t){return _e(e).pipe(dl(t),cl(t))}function Yv(e,t){return new ee(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Kv(e,t){return new ee(n=>{let r;return at(n,t,()=>{r=e[sl](),at(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}function pl(e,t){if(!e)throw new Error("Iterable cannot be null");return new ee(n=>{at(n,t,()=>{let r=e[Symbol.asyncIterator]();at(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Qv(e,t){return pl(ll(e),t)}function Jv(e,t){if(e!=null){if(rl(e))return Wv(e,t);if(tl(e))return Yv(e,t);if(nl(e))return Zv(e,t);if(il(e))return pl(e,t);if(al(e))return Kv(e,t);if(ul(e))return Qv(e,t)}throw ol(e)}function Me(e,t){return t?Jv(e,t):_e(e)}function P(...e){let t=rn(e);return Me(e,t)}function Ai(e,t){let n=V(e)?e:()=>e,r=i=>i.error(n());return new ee(t?i=>t.schedule(r,0,i):r)}function md(e){return!!e&&(e instanceof ee||V(e.lift)&&V(e.subscribe))}var Ln=Ii(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function te(e,t){return G((n,r)=>{let i=0;n.subscribe(Z(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:TC}=Array;function kC(e,t){return TC(t)?e(...t):e(t)}function Xv(e){return te(t=>kC(e,t))}var{isArray:AC}=Array,{getPrototypeOf:NC,prototype:RC,keys:OC}=Object;function ey(e){if(e.length===1){let t=e[0];if(AC(t))return{args:t,keys:null};if(PC(t)){let n=OC(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function PC(e){return e&&typeof e=="object"&&NC(e)===RC}function ty(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function hl(...e){let t=rn(e),n=Bv(e),{args:r,keys:i}=ey(e);if(r.length===0)return Me([],t);let o=new ee(FC(r,t,i?s=>ty(i,s):tt));return n?o.pipe(Xv(n)):o}function FC(e,t,n=tt){return r=>{ny(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ny(t,()=>{let d=Me(e[u],t),p=!1;d.subscribe(Z(r,h=>{o[u]=h,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ny(e,t,n){e?at(n,e,t):t()}function ry(e,t,n,r,i,o,s,a){let u=[],d=0,p=0,h=!1,f=()=>{h&&!u.length&&!d&&t.complete()},g=D=>d<r?w(D):u.push(D),w=D=>{o&&t.next(D),d++;let le=!1;_e(n(D,p++)).subscribe(Z(t,H=>{i?.(H),o?g(H):t.next(H)},()=>{le=!0},void 0,()=>{if(le)try{for(d--;u.length&&d<r;){let H=u.shift();s?at(t,s,()=>w(H)):w(H)}f()}catch(H){t.error(H)}}))};return e.subscribe(Z(t,g,()=>{h=!0,f()})),()=>{a?.()}}function Pe(e,t,n=1/0){return V(t)?Pe((r,i)=>te((o,s)=>t(r,o,i,s))(_e(e(r,i))),n):(typeof t=="number"&&(n=t),G((r,i)=>ry(r,i,e,n)))}function Jo(e=1/0){return Pe(tt,e)}function iy(){return Jo(1)}function Ni(...e){return iy()(Me(e,rn(e)))}function fl(e){return new ee(t=>{_e(e()).subscribe(t)})}function gd(...e){let t=rn(e),n=$v(e,1/0),r=e;return r.length?r.length===1?_e(r[0]):Jo(n)(Me(r,t)):st}function jt(e,t){return G((n,r)=>{let i=0;n.subscribe(Z(r,o=>e.call(t,o,i++)&&r.next(o)))})}function cr(e){return G((t,n)=>{let r=null,i=!1,o;r=t.subscribe(Z(n,void 0,void 0,s=>{o=_e(e(s,cr(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function oy(e,t,n,r,i){return(o,s)=>{let a=n,u=t,d=0;o.subscribe(Z(s,p=>{let h=d++;u=a?e(u,p,h):(a=!0,p),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ri(e,t){return V(t)?Pe(e,t,1):Pe(e,1)}function dr(e){return G((t,n)=>{let r=!1;t.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Vn(e){return e<=0?()=>st:G((t,n)=>{let r=0;t.subscribe(Z(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function vd(e){return te(()=>e)}function yd(e,t=tt){return e=e??LC,G((n,r)=>{let i,o=!0;n.subscribe(Z(r,s=>{let a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function LC(e,t){return e===t}function ml(e=VC){return G((t,n)=>{let r=!1;t.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function VC(){return new Ln}function Xo(e){return G((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function on(e,t){let n=arguments.length>=2;return r=>r.pipe(e?jt((i,o)=>e(i,o,r)):tt,Vn(1),n?dr(t):ml(()=>new Ln))}function Oi(e){return e<=0?()=>st:G((t,n)=>{let r=[];t.subscribe(Z(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wd(e,t){let n=arguments.length>=2;return r=>r.pipe(e?jt((i,o)=>e(i,o,r)):tt,Oi(1),n?dr(t):ml(()=>new Ln))}function bd(e,t){return G(oy(e,t,arguments.length>=2,!0))}function Dd(e={}){let{connector:t=()=>new nt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,d=0,p=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),s=u=void 0,p=h=!1},w=()=>{let D=s;g(),D?.unsubscribe()};return G((D,le)=>{d++,!h&&!p&&f();let H=u=u??t();le.add(()=>{d--,d===0&&!h&&!p&&(a=_d(w,i))}),H.subscribe(le),!s&&d>0&&(s=new Fn({next:ue=>H.next(ue),error:ue=>{h=!0,f(),a=_d(g,n,ue),H.error(ue)},complete:()=>{p=!0,f(),a=_d(g,r),H.complete()}}),_e(D).subscribe(s))})(o)}}function _d(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new Fn({next:()=>{r.unsubscribe(),e()}});return _e(t(...n)).subscribe(r)}function Cd(...e){let t=rn(e);return G((n,r)=>{(t?Ni(e,n,t):Ni(e,n)).subscribe(r)})}function mt(e,t){return G((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Z(r,u=>{i?.unsubscribe();let d=0,p=o++;_e(e(u,p)).subscribe(i=Z(r,h=>r.next(t?t(u,h,p,d++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ed(e){return G((t,n)=>{_e(e).subscribe(Z(n,()=>n.complete(),Qo)),!n.closed&&t.subscribe(n)})}function $e(e,t,n){let r=V(e)||t||n?{next:e,error:t,complete:n}:e;return r?G((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Z(o,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,u),o.error(u)},()=>{var u,d;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):tt}function pe(e){for(let t in e)if(e[t]===pe)return t;throw Error("Could not find renamed property on target object.")}function lt(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(lt).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function sy(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var jC=pe({__forward_ref__:pe});function Vy(e){return e.__forward_ref__=Vy,e.toString=function(){return lt(this())},e}function Tt(e){return jy(e)?e():e}function jy(e){return typeof e=="function"&&e.hasOwnProperty(jC)&&e.__forward_ref__===Vy}function By(e){return e&&!!e.\u0275providers}var j=class extends Error{constructor(t,n){super(mp(t,n)),this.code=t}};function mp(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var BC=pe({\u0275cmp:pe}),$C=pe({\u0275dir:pe}),UC=pe({\u0275pipe:pe}),HC=pe({\u0275mod:pe}),Dl=pe({\u0275fac:pe}),es=pe({__NG_ELEMENT_ID__:pe}),ay=pe({__NG_ENV_ID__:pe});function zC(e){return typeof e=="string"?e:e==null?"":String(e)}function GC(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():zC(e)}function qC(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new j(-200,`Circular dependency in DI detected for ${e}${n}`)}function gp(e,t){let n=t?` in ${t}`:"";throw new j(-201,!1)}function WC(e,t){e==null&&ZC(t,e,null,"!=")}function ZC(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(r==null?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function U(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ll(e){return{providers:e.providers||[],imports:e.imports||[]}}function Vl(e){return ly(e,Uy)||ly(e,Hy)}function $y(e){return Vl(e)!==null}function ly(e,t){return e.hasOwnProperty(t)?e[t]:null}function YC(e){let t=e&&(e[Uy]||e[Hy]);return t||null}function uy(e){return e&&(e.hasOwnProperty(cy)||e.hasOwnProperty(KC))?e[cy]:null}var Uy=pe({\u0275prov:pe}),cy=pe({\u0275inj:pe}),Hy=pe({ngInjectableDef:pe}),KC=pe({ngInjectorDef:pe}),q=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(q||{}),Pd;function QC(){return Pd}function xt(e){let t=Pd;return Pd=e,t}function zy(e,t,n){let r=Vl(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&q.Optional)return null;if(t!==void 0)return t;gp(lt(e),"Injector")}var ts=globalThis;var K=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var JC={},is=JC,XC="__NG_DI_FLAG__",Cl="ngTempTokenPath",eE="ngTokenPath",tE=/\n/gm,nE="\u0275",dy="__source",ns;function pr(e){let t=ns;return ns=e,t}function rE(e,t=q.Default){if(ns===void 0)throw new j(-203,!1);return ns===null?zy(e,void 0,t):ns.get(e,t&q.Optional?null:void 0,t)}function Y(e,t=q.Default){return(QC()||rE)(Tt(e),t)}function x(e,t=q.Default){return Y(e,jl(t))}function jl(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Fd(e){let t=[];for(let n=0;n<e.length;n++){let r=Tt(e[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=q.Default;for(let s=0;s<r.length;s++){let a=r[s],u=iE(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}t.push(Y(i,o))}else t.push(Y(r))}return t}function iE(e){return e[XC]}function oE(e,t,n,r){let i=e[Cl];throw t[dy]&&i.unshift(t[dy]),e.message=sE(`
`+e.message,i,n,r),e[eE]=i,e[Cl]=null,e}function sE(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==nE?e.slice(2):e;let i=lt(t);if(Array.isArray(t))i=t.map(lt).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(tE,`
  `)}`}function Bl(e){return{toString:e}.toString()}var Gy=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Gy||{}),un=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(un||{}),os={},sn=[];function qy(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Ld(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];lE(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function aE(e){return e===3||e===4||e===6}function lE(e){return e.charCodeAt(0)===64}function vp(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?py(e,n,i,null,t[++r]):py(e,n,i,null,null))}}return e}function py(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Wy="ng-template";function uE(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let s=e[r++];if(n&&o==="class"&&qy(s.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Zy(e){return e.type===4&&e.value!==Wy}function cE(e,t,n){let r=e.type===4&&!n?Wy:e.value;return t===r}function dE(e,t,n){let r=4,i=e.attrs||[],o=fE(i),s=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!s&&!Bt(r)&&!Bt(u))return!1;if(s&&Bt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!cE(e,u,n)||u===""&&t.length===1){if(Bt(r))return!1;s=!0}}else{let d=r&8?u:t[++a];if(r&8&&e.attrs!==null){if(!uE(e.attrs,d,n)){if(Bt(r))return!1;s=!0}continue}let p=r&8?"class":u,h=pE(p,i,Zy(e),n);if(h===-1){if(Bt(r))return!1;s=!0;continue}if(d!==""){let f;h>o?f="":f=i[h+1].toLowerCase();let g=r&8?f:null;if(g&&qy(g,d,0)!==-1||r&2&&d!==f){if(Bt(r))return!1;s=!0}}}}return Bt(r)||s}function Bt(e){return(e&1)===0}function pE(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mE(t,e)}function hE(e,t,n=!1){for(let r=0;r<t.length;r++)if(dE(e,t[r],n))return!0;return!1}function fE(e){for(let t=0;t<e.length;t++){let n=e[t];if(aE(n))return t}return e.length}function mE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function hy(e,t){return e?":not("+t.trim()+")":t}function gE(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bt(s)&&(t+=hy(o,i),i=""),r=s,o=o||!Bt(r);n++}return i!==""&&(t+=hy(o,i)),t}function vE(e){return e.map(gE).join(",")}function yE(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Bt(i))break;i=o}r++}return{attrs:t,classes:n}}function $l(e){return Bl(()=>{let t=Xy(e),n=L(v({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Gy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||un.Emulated,styles:e.styles||sn,_:null,schemas:e.schemas||null,tView:null,id:""});ew(n);let r=e.dependencies;return n.directiveDefs=my(r,!1),n.pipeDefs=my(r,!0),n.id=_E(n),n})}function wE(e){return Gr(e)||Yy(e)}function bE(e){return e!==null}function Ul(e){return Bl(()=>({type:e.type,bootstrap:e.bootstrap||sn,declarations:e.declarations||sn,imports:e.imports||sn,exports:e.exports||sn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function fy(e,t){if(e==null)return os;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function yp(e){return Bl(()=>{let t=Xy(e);return ew(t),t})}function Gr(e){return e[BC]||null}function Yy(e){return e[$C]||null}function Ky(e){return e[UC]||null}function Qy(e){let t=Gr(e)||Yy(e)||Ky(e);return t!==null?t.standalone:!1}function Jy(e,t){let n=e[HC]||null;if(!n&&t===!0)throw new Error(`Type ${lt(e)} does not have '\u0275mod' property.`);return n}function Xy(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||os,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||sn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fy(e.inputs,t),outputs:fy(e.outputs),debugInfo:null}}function ew(e){e.features?.forEach(t=>t(e))}function my(e,t){if(!e)return null;let n=t?Ky:wE;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(bE)}function _E(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483647+1,"c"+t}var Bn=0,W=1,F=2,Ne=3,$t=4,Ht=5,El=6,Il=7,fr=8,ji=9,ss=10,cn=11,as=12,gy=13,fs=14,dn=15,ms=16,Pi=17,ln=18,Hl=19,tw=20,rs=21,Id=22,qr=23,Bi=25,nw=1;var Wr=7,Sl=8,$i=9,gt=10,Ui=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e[e.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",e}(Ui||{});function Hr(e){return Array.isArray(e)&&typeof e[nw]=="object"}function Ut(e){return Array.isArray(e)&&e[nw]===!0}function rw(e){return(e.flags&4)!==0}function wp(e){return e.componentOffset>-1}function DE(e){return(e.flags&1)===1}function gs(e){return!!e.template}function CE(e){return(e[F]&512)!==0}function Hi(e,t){let n=e.hasOwnProperty(Dl);return n?e[Dl]:null}var Vd=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function zl(){return iw}function iw(e){return e.type.prototype.ngOnChanges&&(e.setInput=IE),EE}zl.ngInherit=!0;function EE(){let e=sw(this),t=e?.current;if(t){let n=e.previous;if(n===os)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function IE(e,t,n,r){let i=this.declaredInputs[n],o=sw(e)||SE(e,{previous:os,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Vd(u&&u.currentValue,t,a===os),e[r]=t}var ow="__ngSimpleChanges__";function sw(e){return e[ow]||null}function SE(e,t){return e[ow]=t}var vy=null;var hr=function(e,t,n){vy?.(e,t,n)},ME="svg",xE="math";function mr(e){for(;Array.isArray(e);)e=e[Bn];return e}function $n(e,t){return mr(t[e.index])}function TE(e,t){return e.data[t]}function vs(e,t){let n=t[e];return Hr(n)?n:n[Bn]}function kE(e){return(e[F]&4)===4}function bp(e){return(e[F]&128)===128}function AE(e){return Ut(e[Ne])}function yy(e,t){return t==null?null:e[t]}function aw(e){e[Pi]=0}function NE(e){e[F]&1024||(e[F]|=1024,bp(e)&&Gl(e))}function lw(e){return e[F]&9216||e[qr]?.dirty}function uw(e){lw(e)&&Gl(e)}function Gl(e){let t=e[Ne];for(;t!==null&&!(Ut(t)&&t[F]&Ui.HasChildViewsToRefresh||Hr(t)&&t[F]&8192);){if(Ut(t))t[F]|=Ui.HasChildViewsToRefresh;else if(t[F]|=8192,!bp(t))break;t=t[Ne]}}function RE(e,t){if((e[F]&256)===256)throw new j(911,!1);e[rs]===null&&(e[rs]=[]),e[rs].push(t)}var ae={lFrame:gw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function OE(){return ae.lFrame.elementDepthCount}function PE(){ae.lFrame.elementDepthCount++}function FE(){ae.lFrame.elementDepthCount--}function cw(){return ae.bindingsEnabled}function LE(){return ae.skipHydrationRootTNode!==null}function VE(e){return ae.skipHydrationRootTNode===e}function jE(){ae.skipHydrationRootTNode=null}function vt(){return ae.lFrame.lView}function ql(){return ae.lFrame.tView}function Un(){let e=dw();for(;e!==null&&e.type===64;)e=e.parent;return e}function dw(){return ae.lFrame.currentTNode}function BE(){let e=ae.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function _p(e,t){let n=ae.lFrame;n.currentTNode=e,n.isParent=t}function pw(){return ae.lFrame.isParent}function $E(){ae.lFrame.isParent=!1}function UE(e){return ae.lFrame.bindingIndex=e}function HE(){return ae.lFrame.inI18n}function zE(e,t){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=e,jd(t)}function GE(){return ae.lFrame.currentDirectiveIndex}function jd(e){ae.lFrame.currentDirectiveIndex=e}function hw(){return ae.lFrame.currentQueryIndex}function Dp(e){ae.lFrame.currentQueryIndex=e}function qE(e){let t=e[W];return t.type===2?t.declTNode:t.type===1?e[Ht]:null}function fw(e,t,n){if(n&q.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&q.Host);)if(i=qE(o),i===null||(o=o[fs],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=ae.lFrame=mw();return r.currentTNode=t,r.lView=e,!0}function Cp(e){let t=mw(),n=e[W];ae.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function mw(){let e=ae.lFrame,t=e===null?null:e.child;return t===null?gw(e):t}function gw(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function vw(){let e=ae.lFrame;return ae.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var yw=vw;function Ep(){let e=vw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function WE(){return ae.lFrame.selectedIndex}function Zr(e){ae.lFrame.selectedIndex=e}function ZE(){return ae.lFrame.currentNamespace}var ww=!0;function YE(){return ww}function KE(e){ww=e}function QE(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=iw(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function bw(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),d&&((e.viewHooks??=[]).push(n,d),(e.viewCheckHooks??=[]).push(n,d)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function gl(e,t,n){_w(e,t,3,n)}function vl(e,t,n,r){(e[F]&3)===n&&_w(e,t,n,r)}function Sd(e,t){let n=e[F];(n&3)===t&&(n&=16383,n+=1,e[F]=n)}function _w(e,t,n,r){let i=r!==void 0?e[Pi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let u=i;u<s;u++)if(typeof t[u+1]=="number"){if(a=t[u],r!=null&&a>=r)break}else t[u]<0&&(e[Pi]+=65536),(a<o||o==-1)&&(JE(e,n,t,u),e[Pi]=(e[Pi]&4294901760)+u+2),u++}function wy(e,t){hr(4,e,t);let n=ft(null);try{t.call(e)}finally{ft(n),hr(5,e,t)}}function JE(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[F]>>14<e[Pi]>>16&&(e[F]&3)===t&&(e[F]+=16384,wy(a,o)):wy(a,o)}var Vi=-1,ls=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function XE(e){return e instanceof ls}function eI(e){return(e.flags&8)!==0}function tI(e){return(e.flags&16)!==0}function Dw(e){return e!==Vi}function Ml(e){let t=e&32767;return e&32767}function nI(e){return e>>16}function xl(e,t){let n=nI(e),r=t;for(;n>0;)r=r[fs],n--;return r}var Bd=!0;function by(e){let t=Bd;return Bd=e,t}var rI=256,Cw=rI-1,Ew=5,iI=0,an={};function oI(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(es)&&(r=n[es]),r==null&&(r=n[es]=iI++);let i=r&Cw,o=1<<i;t.data[e+(i>>Ew)]|=o}function Iw(e,t){let n=Sw(e,t);if(n!==-1)return n;let r=t[W];r.firstCreatePass&&(e.injectorIndex=t.length,Md(r.data,e),Md(t,null),Md(r.blueprint,null));let i=Ip(e,t),o=e.injectorIndex;if(Dw(i)){let s=Ml(i),a=xl(i,t),u=a[W].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|u[s+d]}return t[o+8]=i,o}function Md(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Sw(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Ip(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Aw(i),r===null)return Vi;if(n++,i=i[fs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Vi}function sI(e,t,n){oI(e,t,n)}function Mw(e,t,n){if(n&q.Optional||e!==void 0)return e;gp(t,"NodeInjector")}function xw(e,t,n,r){if(n&q.Optional&&r===void 0&&(r=null),!(n&(q.Self|q.Host))){let i=e[ji],o=xt(void 0);try{return i?i.get(t,r,n&q.Optional):zy(t,r,n&q.Optional)}finally{xt(o)}}return Mw(r,t,n)}function Tw(e,t,n,r=q.Default,i){if(e!==null){if(t[F]&2048&&!(r&q.Self)){let s=cI(e,t,n,r,an);if(s!==an)return s}let o=kw(e,t,n,r,an);if(o!==an)return o}return xw(t,n,r,i)}function kw(e,t,n,r,i){let o=lI(n);if(typeof o=="function"){if(!fw(t,e,r))return r&q.Host?Mw(i,n,r):xw(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&q.Optional))gp(n);else return s}finally{yw()}}else if(typeof o=="number"){let s=null,a=Sw(e,t),u=Vi,d=r&q.Host?t[dn][Ht]:null;for((a===-1||r&q.SkipSelf)&&(u=a===-1?Ip(e,t):t[a+8],u===Vi||!Dy(r,!1)?a=-1:(s=t[W],a=Ml(u),t=xl(u,t)));a!==-1;){let p=t[W];if(_y(o,a,p.data)){let h=aI(a,t,n,s,r,d);if(h!==an)return h}u=t[a+8],u!==Vi&&Dy(r,t[W].data[a+8]===d)&&_y(o,a,t)?(s=p,a=Ml(u),t=xl(u,t)):a=-1}}return i}function aI(e,t,n,r,i,o){let s=t[W],a=s.data[e+8],u=r==null?wp(a)&&Bd:r!=s&&(a.type&3)!==0,d=i&q.Host&&o===a,p=yl(a,s,n,u,d);return p!==null?zi(t,s,p,a):an}function yl(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,u=e.directiveStart,d=e.directiveEnd,p=o>>20,h=r?a:a+p,f=i?a+p:d;for(let g=h;g<f;g++){let w=s[g];if(g<u&&n===w||g>=u&&w.type===n)return g}if(i){let g=s[u];if(g&&gs(g)&&g.type===n)return u}return null}function zi(e,t,n,r){let i=e[n],o=t.data;if(XE(i)){let s=i;s.resolving&&qC(GC(o[n]));let a=by(s.canSeeViewProviders);s.resolving=!0;let u,d=s.injectImpl?xt(s.injectImpl):null,p=fw(e,r,q.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&QE(n,o[n],t)}finally{d!==null&&xt(d),by(a),s.resolving=!1,yw()}}return i}function lI(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(es)?e[es]:void 0;return typeof t=="number"?t>=0?t&Cw:uI:t}function _y(e,t,n){let r=1<<e;return!!(n[t+(e>>Ew)]&r)}function Dy(e,t){return!(e&q.Self)&&!(e&q.Host&&t)}var zr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Tw(this._tNode,this._lView,t,jl(r),n)}};function uI(){return new zr(Un(),vt())}function Sp(e){return Bl(()=>{let t=e.prototype.constructor,n=t[Dl]||$d(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Dl]||$d(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $d(e){return jy(e)?()=>{let t=$d(Tt(e));return t&&t()}:Hi(e)}function cI(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[F]&2048&&!(s[F]&512);){let a=kw(o,s,n,r|q.Self,an);if(a!==an)return a;let u=o.parent;if(!u){let d=s[tw];if(d){let p=d.get(n,an,r);if(p!==an)return p}u=Aw(s),s=s[fs]}o=u}return i}function Aw(e){let t=e[W],n=t.type;return n===2?t.declTNode:n===1?e[Ht]:null}function dI(e){return typeof e=="function"}function pI(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function hI(e){return e.flat(Number.POSITIVE_INFINITY)}function Mp(e,t){e.forEach(n=>Array.isArray(n)?Mp(n,t):t(n))}function Nw(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Tl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function fI(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}var ys=new K("ENVIRONMENT_INITIALIZER"),Rw=new K("INJECTOR",-1),Ow=new K("INJECTOR_DEF_TYPES"),kl=class{get(t,n=is){if(n===is){let r=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw r.name="NullInjectorError",r}return n}};function Wl(e){return{\u0275providers:e}}function mI(...e){return{\u0275providers:Pw(!0,e),\u0275fromNgModule:!0}}function Pw(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Mp(t,s=>{let a=s;Ud(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Fw(i,o),n}function Fw(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];xp(i,o=>{t(o,r)})}}function Ud(e,t,n,r){if(e=Tt(e),!e)return!1;let i=null,o=uy(e),s=!o&&Gr(e);if(!o&&!s){let u=e.ngModule;if(o=uy(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)Ud(d,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{Mp(o.imports,p=>{Ud(p,t,n,r)&&(d||=[],d.push(p))})}finally{}d!==void 0&&Fw(d,t)}if(!a){let d=Hi(i)||(()=>new i);t({provide:i,useFactory:d,deps:sn},i),t({provide:Ow,useValue:i,multi:!0},i),t({provide:ys,useValue:()=>Y(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let d=e;xp(u,p=>{t(p,d)})}}else return!1;return i!==e&&e.providers!==void 0}function xp(e,t){for(let n of e)By(n)&&(n=n.\u0275providers),Array.isArray(n)?xp(n,t):t(n)}var gI=pe({provide:String,useValue:pe});function Lw(e){return e!==null&&typeof e=="object"&&gI in e}function vI(e){return!!(e&&e.useExisting)}function yI(e){return!!(e&&e.useFactory)}function Hd(e){return typeof e=="function"}var Zl=new K("Set Injector scope."),wl={},wI={},xd;function Tp(){return xd===void 0&&(xd=new kl),xd}var At=class{},us=class extends At{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gd(t,s=>this.processProvider(s)),this.records.set(Rw,Fi(void 0,this)),i.has("environment")&&this.records.set(At,Fi(void 0,this));let o=this.records.get(Zl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ow,sn,q.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=pr(this),r=xt(void 0),i;try{return t()}finally{pr(n),xt(r)}}get(t,n=is,r=q.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(ay))return t[ay](this);r=jl(r);let i,o=pr(this),s=xt(void 0);try{if(!(r&q.SkipSelf)){let u=this.records.get(t);if(u===void 0){let d=II(t)&&Vl(t);d&&this.injectableDefInScope(d)?u=Fi(zd(t),wl):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let a=r&q.Self?Tp():this.parent;return n=r&q.Optional&&n===is?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Cl]=a[Cl]||[]).unshift(lt(t)),o)throw a;return oE(a,t,"R3InjectorError",this.source)}else throw a}finally{xt(s),pr(o)}}resolveInjectorInitializers(){let t=pr(this),n=xt(void 0),r;try{let i=this.get(ys,sn,q.Self);for(let o of i)o()}finally{pr(t),xt(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(lt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(t){t=Tt(t);let n=Hd(t)?t:Tt(t&&t.provide),r=_I(t);if(!Hd(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Fi(void 0,wl,!0),i.factory=()=>Fd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(t,n){return n.value===wl&&(n.value=wI,n.value=n.factory()),typeof n.value=="object"&&n.value&&EI(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Tt(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zd(e){let t=Vl(e),n=t!==null?t.factory:Hi(e);if(n!==null)return n;if(e instanceof K)throw new j(204,!1);if(e instanceof Function)return bI(e);throw new j(204,!1)}function bI(e){let t=e.length;if(t>0){let r=fI(t,"?");throw new j(204,!1)}let n=YC(e);return n!==null?()=>n.factory(e):()=>new e}function _I(e){if(Lw(e))return Fi(void 0,e.useValue);{let t=DI(e);return Fi(t,wl)}}function DI(e,t,n){let r;if(Hd(e)){let i=Tt(e);return Hi(i)||zd(i)}else if(Lw(e))r=()=>Tt(e.useValue);else if(yI(e))r=()=>e.useFactory(...Fd(e.deps||[]));else if(vI(e))r=()=>Y(Tt(e.useExisting));else{let i=Tt(e&&(e.useClass||e.provide));if(CI(e))r=()=>new i(...Fd(e.deps));else return Hi(i)||zd(i)}return r}function Fi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function CI(e){return!!e.deps}function EI(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function II(e){return typeof e=="function"||typeof e=="object"&&e instanceof K}function Gd(e,t){for(let n of e)Array.isArray(n)?Gd(n,t):n&&By(n)?Gd(n.\u0275providers,t):t(n)}function Kr(e,t){e instanceof us&&e.assertNotDestroyed();let n,r=pr(e),i=xt(void 0);try{return t()}finally{pr(r),xt(i)}}function Cy(e,t=null,n=null,r){let i=Vw(e,t,n,r);return i.resolveInjectorInitializers(),i}function Vw(e,t=null,n=null,r,i=new Set){let o=[n||sn,mI(e)];return r=r||(typeof e=="object"?void 0:lt(e)),new us(o,t||Tp(),r||null,i)}var Wi=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return Cy({name:""},i,r,"");{let o=r.name??"";return Cy({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=is,t.NULL=new kl,t.\u0275prov=U({token:t,providedIn:"any",factory:()=>Y(Rw)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})();var qd;function jw(e){qd=e}function SI(){if(qd!==void 0)return qd;if(typeof document<"u")return document;throw new j(210,!1)}var kp=new K("AppId",{providedIn:"root",factory:()=>MI}),MI="ng",Ap=new K("Platform Initializer"),Zi=new K("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Np=new K("CSP nonce",{providedIn:"root",factory:()=>SI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Bw(e){return e instanceof Function?e():e}function $w(e){return(e.flags&128)===128}var Qr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Qr||{});var Uw=new Map,xI=0;function TI(){return xI++}function kI(e){Uw.set(e[Hl],e)}function AI(e){Uw.delete(e[Hl])}var Ey="__ngContext__";function Gi(e,t){Hr(t)?(e[Ey]=t[Hl],kI(t)):e[Ey]=t}var NI;function Rp(e,t){return NI(e,t)}function Op(e){let t=e[Ne];return Ut(t)?t[Ne]:t}function Hw(e){return Gw(e[as])}function zw(e){return Gw(e[$t])}function Gw(e){for(;e!==null&&!Ut(e);)e=e[$t];return e}function Li(e,t,n,r,i){if(r!=null){let o,s=!1;Ut(r)?o=r:Hr(r)&&(s=!0,r=r[Bn]);let a=mr(r);e===0&&n!==null?i==null?Yw(t,n,a):Al(t,n,a,i||null,!0):e===1&&n!==null?Al(t,n,a,i||null,!0):e===2?YI(t,a,s):e===3&&t.destroyNode(a),o!=null&&QI(t,e,o,n,i)}}function qw(e,t,n){return e.createElement(t,n)}function RI(e,t){let n=t[cn];ws(e,t,n,2,null,null),t[Bn]=null,t[Ht]=null}function OI(e,t,n,r,i,o){r[Bn]=i,r[Ht]=t,ws(e,r,n,1,i,o)}function PI(e,t){ws(e,t,t[cn],2,null,null)}function FI(e){let t=e[as];if(!t)return Td(e[W],e);for(;t;){let n=null;if(Hr(t))n=t[as];else{let r=t[gt];r&&(n=r)}if(!n){for(;t&&!t[$t]&&t!==e;)Hr(t)&&Td(t[W],t),t=t[Ne];t===null&&(t=e),Hr(t)&&Td(t[W],t),n=t&&t[$t]}t=n}}function LI(e,t,n,r){let i=gt+r,o=n.length;r>0&&(n[i-1][$t]=t),r<o-gt?(t[$t]=n[i],Nw(n,gt+r,t)):(n.push(t),t[$t]=null),t[Ne]=n;let s=t[ms];s!==null&&n!==s&&VI(s,t);let a=t[ln];a!==null&&a.insertView(e),uw(t),t[F]|=128}function VI(e,t){let n=e[$i],i=t[Ne][Ne][dn];t[dn]!==i&&(e[F]|=Ui.HasTransplantedViews),n===null?e[$i]=[t]:n.push(t)}function Ww(e,t){let n=e[$i],r=n.indexOf(t),i=t[Ne];n.splice(r,1)}function Wd(e,t){if(e.length<=gt)return;let n=gt+t,r=e[n];if(r){let i=r[ms];i!==null&&i!==e&&Ww(i,r),t>0&&(e[n-1][$t]=r[$t]);let o=Tl(e,gt+t);RI(r[W],r);let s=o[ln];s!==null&&s.detachView(o[W]),r[Ne]=null,r[$t]=null,r[F]&=-129}return r}function Zw(e,t){if(!(t[F]&256)){let n=t[cn];n.destroyNode&&ws(e,t,n,3,null,null),FI(t)}}function Td(e,t){if(!(t[F]&256)){t[F]&=-129,t[F]|=256,t[qr]&&kv(t[qr]),BI(e,t),jI(e,t),t[W].type===1&&t[cn].destroy();let n=t[ms];if(n!==null&&Ut(t[Ne])){n!==t[Ne]&&Ww(n,t);let r=t[ln];r!==null&&r.detachView(e)}AI(t)}}function jI(e,t){let n=e.cleanup,r=t[Il];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Il]=null);let i=t[rs];if(i!==null){t[rs]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function BI(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof ls)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];hr(4,a,u);try{u.call(a)}finally{hr(5,a,u)}}else{hr(4,i,o);try{o.call(i)}finally{hr(5,i,o)}}}}}function $I(e,t,n){return UI(e,t.parent,n)}function UI(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[Bn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===un.None||o===un.Emulated)return null}return $n(r,n)}}function Al(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Yw(e,t,n){e.appendChild(t,n)}function Iy(e,t,n,r,i){r!==null?Al(e,t,n,r,i):Yw(e,t,n)}function HI(e,t,n,r){e.removeChild(t,n,r)}function Pp(e,t){return e.parentNode(t)}function zI(e,t){return e.nextSibling(t)}function GI(e,t,n){return WI(e,t,n)}function qI(e,t,n){return e.type&40?$n(e,n):null}var WI=qI,Sy;function ZI(e,t,n,r){let i=$I(e,r,t),o=t[cn],s=r.parent||t[Ht],a=GI(s,r,t);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Iy(o,i,n[u],a,!1);else Iy(o,i,n,a,!1);Sy!==void 0&&Sy(o,r,t,n,i)}function bl(e,t){if(t!==null){let n=t.type;if(n&3)return $n(t,e);if(n&4)return Zd(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return bl(e,r);{let i=e[t.index];return Ut(i)?Zd(-1,i):mr(i)}}else{if(n&32)return Rp(t,e)()||mr(e[t.index]);{let r=Kw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Op(e[dn]);return bl(i,r)}else return bl(e,t.next)}}}return null}function Kw(e,t){if(t!==null){let r=e[dn][Ht],i=t.projection;return r.projection[i]}return null}function Zd(e,t){let n=gt+e+1;if(n<t.length){let r=t[n],i=r[W].firstChild;if(i!==null)return bl(r,i)}return t[Wr]}function YI(e,t,n){let r=Pp(e,t);r&&HI(e,r,t,n)}function Fp(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&t===0&&(a&&Gi(mr(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Fp(e,t,n.child,r,i,o,!1),Li(t,e,i,a,o);else if(u&32){let d=Rp(n,r),p;for(;p=d();)Li(t,e,i,p,o);Li(t,e,i,a,o)}else u&16?KI(e,t,r,n,i,o):Li(t,e,i,a,o);n=s?n.projectionNext:n.next}}function ws(e,t,n,r,i,o){Fp(n,r,e.firstChild,t,i,o,!1)}function KI(e,t,n,r,i,o){let s=n[dn],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let p=u[d];Li(t,e,i,p,o)}else{let d=u,p=s[Ne];$w(r)&&(d.flags|=128),Fp(e,t,d,p,i,o,!0)}}function QI(e,t,n,r,i){let o=n[Wr],s=mr(n);o!==s&&Li(t,e,r,o,i);for(let a=gt;a<n.length;a++){let u=n[a];ws(u[W],u,e,t,r,o)}}function JI(e,t,n){e.setAttribute(t,"style",n)}function Qw(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Jw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ld(e,t,r),i!==null&&Qw(e,t,i),o!==null&&JI(e,t,o)}var XI="h",eS="b";var tS=(e,t,n)=>null;function Lp(e,t,n=!1){return tS(e,t,n)}var Yd=class{},Nl=class{};function nS(e){let t=Error(`No component factory found for ${lt(e)}.`);return t[rS]=e,t}var rS="ngComponent";var Kd=class{resolveComponentFactory(t){throw nS(t)}},Yl=(()=>{let t=class t{};t.NULL=new Kd;let e=t;return e})();function iS(){return Yi(Un(),vt())}function Yi(e,t){return new Jr($n(e,t))}var Jr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=iS;let e=t;return e})();function oS(e){return e instanceof Jr?e.nativeElement:e}var cs=class{};var sS=(()=>{let t=class t{};t.\u0275prov=U({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),qi=class{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}},aS=new qi("17.0.7"),kd={};function Rl(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(mr(o)),Ut(o)&&lS(o,r);let s=n.type;if(s&8)Rl(e,t,n.child,r);else if(s&32){let a=Rp(n,t),u;for(;u=a();)r.push(u)}else if(s&16){let a=Kw(t,n);if(Array.isArray(a))r.push(...a);else{let u=Op(t[dn]);Rl(u[W],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lS(e,t){for(let n=gt;n<e.length;n++){let r=e[n],i=r[W].firstChild;i!==null&&Rl(r[W],r,i,t)}e[Wr]!==e[Bn]&&t.push(e[Wr])}var Xw=[];function uS(e){return e[qr]??cS(e)}function cS(e){let t=Xw.pop()??Object.create(pS);return t.lView=e,t}function dS(e){e.lView[qr]!==e&&(e.lView=null,Xw.push(e))}var pS=L(v({},Mv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Gl(e.lView)},consumerOnSignalRead(){this.lView[qr]=this}}),hS="ngOriginalError";function Ad(e){return e[hS]}var jn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Ad(t);for(;n&&Ad(n);)n=Ad(n);return n||null}},eb=new K("",{providedIn:"root",factory:()=>x(jn).handleError.bind(void 0)});var tb=!1,fS=new K("",{providedIn:"root",factory:()=>tb});var nb={};function mS(e,t,n,r){if(!r)if((t[F]&3)===3){let o=e.preOrderCheckHooks;o!==null&&gl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&vl(t,o,0,n)}Zr(n)}function Vp(e,t=q.Default){let n=vt();if(n===null)return Y(e,t);let r=Un();return Tw(r,n,Tt(e),t)}function gS(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zr(~i);else{let o=i,s=n[++r],a=n[++r];zE(s,o);let u=t[o];a(2,u)}}}finally{Zr(-1)}}function Kl(e,t,n,r,i,o,s,a,u,d,p){let h=t.blueprint.slice();return h[Bn]=i,h[F]=r|4|128|8,(d!==null||e&&e[F]&2048)&&(h[F]|=2048),aw(h),h[Ne]=h[fs]=e,h[fr]=n,h[ss]=s||e&&e[ss],h[cn]=a||e&&e[cn],h[ji]=u||e&&e[ji]||null,h[Ht]=o,h[Hl]=TI(),h[El]=p,h[tw]=d,h[dn]=t.type==2?e[dn]:h,h}function rb(e,t,n,r,i){let o=e.data[t];if(o===null)o=vS(e,t,n,r,i),HE()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=BE();o.injectorIndex=s===null?-1:s.injectorIndex}return _p(o,!0),o}function vS(e,t,n,r,i){let o=dw(),s=pw(),a=s?o:o&&o.parent,u=e.data[t]=IS(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function ib(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ob(e,t,n,r,i){let o=WE(),s=r&2;try{Zr(-1),s&&t.length>Bi&&mS(e,t,Bi,!1),hr(s?2:0,i),n(r,i)}finally{Zr(o),hr(s?3:1,i)}}function sb(e,t,n){if(rw(t)){let r=ft(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ft(r)}}}function yS(e,t,n){cw()&&(kS(e,t,n,$n(n,t)),(n.flags&64)===64&&cb(e,t,n))}function wS(e,t,n=$n){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function ab(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=lb(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function lb(e,t,n,r,i,o,s,a,u,d,p){let h=Bi+r,f=h+i,g=bS(h,f),w=typeof d=="function"?d():d;return g[W]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:p}}function bS(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:nb);return n}function _S(e,t,n,r){let o=r.get(fS,tb)||n===un.ShadowDom,s=e.selectRootElement(t,o);return DS(s),s}function DS(e){CS(e)}var CS=e=>null;function ES(e,t,n,r){let i=$S(t);i.push(n),e.firstCreatePass&&US(e).push(r,i.length-1)}function IS(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return LE()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function My(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=n===null?{}:n;let o=e[i];r===null?xy(n,t,i,o):r.hasOwnProperty(i)&&xy(n,t,r[i],o)}return n}function xy(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function SS(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],u=null,d=null;for(let p=r;p<i;p++){let h=o[p],f=n?n.get(h):null,g=f?f.inputs:null,w=f?f.outputs:null;u=My(h.inputs,p,u,g),d=My(h.outputs,p,d,w);let D=u!==null&&s!==null&&!Zy(t)?jS(u,p,s):null;a.push(D)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=d}function MS(e,t,n,r){if(cw()){let i=r===null?null:{"":-1},o=NS(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ub(e,t,n,s,i,a),i&&RS(n,r,i)}n.mergedAttrs=vp(n.mergedAttrs,n.attrs)}function ub(e,t,n,r,i,o){for(let d=0;d<r.length;d++)sI(Iw(n,t),e,r[d].type);PS(n,e.data.length,r.length);for(let d=0;d<r.length;d++){let p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,u=ib(e,t,r.length,null);for(let d=0;d<r.length;d++){let p=r[d];n.mergedAttrs=vp(n.mergedAttrs,p.hostAttrs),FS(e,n,t,u,p),OS(u,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let h=p.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}SS(e,n,o)}function xS(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;TS(s)!=a&&s.push(a),s.push(n,r,o)}}function TS(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function kS(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;wp(n)&&LS(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Iw(n,t),Gi(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let u=e.data[a],d=zi(t,e,a,n);if(Gi(d,t),s!==null&&VS(t,a-i,d,u,n,s),gs(u)){let p=vs(n.index,t);p[fr]=zi(t,e,a,n)}}}function cb(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=GE();try{Zr(o);for(let a=r;a<i;a++){let u=e.data[a],d=t[a];jd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&AS(u,d)}}finally{Zr(-1),jd(s)}}function AS(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function NS(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(hE(t,s.selectors,!1))if(r||(r=[]),gs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Qd(e,t,u)}else r.unshift(s),Qd(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Qd(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function RS(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new j(-301,!1);r.push(t[i],o)}}}function OS(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;gs(t)&&(n[""]=e)}}function PS(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function FS(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Hi(i.type,!0)),s=new ls(o,gs(i),Vp);e.blueprint[r]=s,n[r]=s,xS(e,t,r,ib(e,n,i.hostVars,nb),i)}function LS(e,t,n){let r=$n(t,e),i=ab(n),o=e[ss].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=jp(e,Kl(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function VS(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],d=s[a++],p=s[a++];db(r,n,u,d,p)}}function db(e,t,n,r,i){let o=ft(null);try{let s=e.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),e.setInput!==null?e.setInput(t,i,n,r):t[r]=i}finally{ft(o)}}function jS(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}return r}function BS(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function pb(e,t){let n=e.contentQueries;if(n!==null){let r=ft(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Dp(o),a.contentQueries(2,t[s],s)}}}finally{ft(r)}}}function jp(e,t){return e[as]?e[gy][$t]=t:e[as]=t,e[gy]=t,t}function Jd(e,t,n){Dp(0);let r=ft(null);try{t(e,n)}finally{ft(r)}}function $S(e){return e[Il]||(e[Il]=[])}function US(e){return e.cleanup||(e.cleanup=[])}function HS(e,t){let n=e[ji],r=n?n.get(jn,null):null;r&&r.handleError(t)}function hb(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=t[s],d=e.data[s];db(d,u,r,a,i)}}var zS=100;function GS(e,t=!0){let n=e[ss],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||(r.begin?.(),i?.begin());try{qS(e)}catch(s){throw t&&HS(e,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function qS(e){Xd(e,0);let t=0;for(;lw(e);){if(t===zS)throw new j(103,!1);t++,Xd(e,1)}}function WS(e,t,n,r){let i=t[F];if((i&256)===256)return;let o=!1;!o&&t[ss].inlineEffectRunner?.flush(),Cp(t);let s=null,a=null;!o&&ZS(e)&&(a=uS(t),s=xv(a));try{aw(t),UE(e.bindingStartIndex),n!==null&&ob(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&gl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&vl(t,h,0,null),Sd(t,0)}if(YS(t),fb(t,0),e.contentQueries!==null&&pb(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&gl(t,h)}else{let h=e.contentHooks;h!==null&&vl(t,h,1),Sd(t,1)}gS(e,t);let d=e.components;d!==null&&gb(t,d,0);let p=e.viewQuery;if(p!==null&&Jd(2,p,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&gl(t,h)}else{let h=e.viewHooks;h!==null&&vl(t,h,2),Sd(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Id]){for(let h of t[Id])h();t[Id]=null}o||(t[F]&=-73)}catch(u){throw Gl(t),u}finally{a!==null&&(Tv(a,s),dS(a)),Ep()}}function ZS(e){return e.type!==2}function fb(e,t){for(let n=Hw(e);n!==null;n=zw(n)){n[F]&=~Ui.HasChildViewsToRefresh;for(let r=gt;r<n.length;r++){let i=n[r];mb(i,t)}}}function YS(e){for(let t=Hw(e);t!==null;t=zw(t)){if(!(t[F]&Ui.HasTransplantedViews))continue;let n=t[$i];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ne];NE(i)}}}function KS(e,t,n){let r=vs(t,e);mb(r,n)}function mb(e,t){bp(e)&&Xd(e,t)}function Xd(e,t){let r=e[W],i=e[F],o=e[qr],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&nd(o)),o&&(o.dirty=!1),e[F]&=-9217,s)WS(r,e,r.template,e[fr]);else if(i&8192){fb(e,1);let a=r.components;a!==null&&gb(e,a,1)}}function gb(e,t,n){for(let r=0;r<t.length;r++)KS(e,t[r],n)}function vb(e){for(;e;){e[F]|=64;let t=Op(e);if(CE(e)&&!t)return e;e=t}return null}var Yr=class{get rootNodes(){let t=this._lView,n=t[W];return Rl(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(t){this._lView[fr]=t}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ne];if(Ut(t)){let n=t[Sl],r=n?n.indexOf(this):-1;r>-1&&(Wd(t,r),Tl(n,r))}this._attachedToViewContainer=!1}Zw(this._lView[W],this._lView)}onDestroy(t){RE(this._lView,t)}markForCheck(){vb(this._cdRefInjectingView||this._lView)}detach(){this._lView[F]&=-129}reattach(){uw(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,GS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,PI(this._lView[W],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=t}},Ql=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=QS;let e=t;return e})();function QS(e){return JS(Un(),vt(),(e&16)===16)}function JS(e,t,n){if(wp(e)&&!n){let r=vs(e.index,t);return new Yr(r,r)}else if(e.type&47){let r=t[dn];return new Yr(r,t)}return null}var Ty=new Set;function yb(e){Ty.has(e)||(Ty.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var ep=class extends nt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Nd(o),i&&(i=Nd(i)),s&&(s=Nd(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Be&&t.add(a),a}};function Nd(e){return t=>{setTimeout(e,void 0,t)}}var kt=ep;function ky(...e){}function XS(){let e=typeof ts.requestAnimationFrame=="function",t=ts[e?"requestAnimationFrame":"setTimeout"],n=ts[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Ae=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kt(!1),this.onMicrotaskEmpty=new kt(!1),this.onStable=new kt(!1),this.onError=new kt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=XS().nativeRequestAnimationFrame,nM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new j(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,eM,ky,ky);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},eM={};function Bp(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function tM(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ts,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,tp(e),e.isCheckStableRunning=!0,Bp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),tp(e))}function nM(e){let t=()=>{tM(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(rM(a))return n.invokeTask(i,o,s,a);try{return Ay(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Ny(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Ay(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ny(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,tp(e),Bp(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function tp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Ay(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ny(e){e._nesting--,Bp(e)}var wb=new K("",{providedIn:"root",factory:bb});function bb(){let e=x(Ae),t=!0,n=new ee(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),r=new ee(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});let s=e.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}});return gd(n,r.pipe(Dd()))}function rM(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var iM=(()=>{let t=class t{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=U({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function oM(e,t){let n=vs(t,e),r=n[W];sM(r,n);let i=n[Bn];i!==null&&n[El]===null&&(n[El]=Lp(i,n[ji])),$p(r,n,n[fr])}function sM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function $p(e,t,n){Cp(t);try{let r=e.viewQuery;r!==null&&Jd(1,r,n);let i=e.template;i!==null&&ob(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&pb(e,t),e.staticViewQueries&&Jd(2,e.viewQuery,n);let o=e.components;o!==null&&aM(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[F]&=-5,Ep()}}function aM(e,t){for(let n=0;n<t.length;n++)oM(e,t[n])}function np(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=sy(i,a);else if(o==2){let u=a,d=t[++s];r=sy(r,u+": "+d+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Ol=class extends Yl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Gr(t);return new ds(n,this.ngModule)}};function Ry(e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push({propName:r,templateName:n})}return t}function lM(e){let t=e.toLowerCase();return t==="svg"?ME:t==="math"?xE:null}var rp=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=jl(r);let i=this.injector.get(t,kd,r);return i!==kd||n===kd?i:this.parentInjector.get(t,n,r)}},ds=class extends Nl{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Ry(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ry(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=vE(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof At?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new rp(t,o):t,a=s.get(cs,null);if(a===null)throw new j(407,!1);let u=s.get(sS,null),d=s.get(iM,null),p={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?_S(h,r,this.componentDef.encapsulation,s):qw(h,f,lM(f)),w=4608,D=this.componentDef.onPush?576:528,le=this.componentDef.signals?w:D,H=null;g!==null&&(H=Lp(g,s,!0));let ue=lb(0,null,null,1,0,null,null,null,null,null,null),z=Kl(null,ue,null,le,null,null,p,h,s,null,H);Cp(z);let ce,Se;try{let he=this.componentDef,Le,Tn=null;he.findHostDirectiveDefs?(Le=[],Tn=new Map,he.findHostDirectiveDefs(he,Le,Tn),Le.push(he)):Le=[he];let Xe=uM(z,g),Pr=cM(Xe,g,he,Le,z,p,h);Se=TE(ue,Bi),g&&hM(h,he,g,r),n!==void 0&&fM(Se,this.ngContentSelectors,n),ce=pM(Pr,he,Le,Tn,z,[mM]),$p(ue,z,null)}finally{Ep()}return new ip(this.componentType,ce,Yi(Se,z),z,Se)}},ip=class extends Yd{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Yr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;hb(o[W],o,i,t,n),this.previousInputValues.set(t,n);let s=vs(this._tNode.index,o);vb(s)}}get injector(){return new zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function uM(e,t){let n=e[W],r=Bi;return e[r]=t,rb(n,r,2,"#host",null)}function cM(e,t,n,r,i,o,s){let a=i[W];dM(r,e,t,s);let u=null;t!==null&&(u=Lp(t,i[ji]));let d=o.rendererFactory.createRenderer(t,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let h=Kl(i,ab(n),null,p,i[e.index],e,o,d,null,null,u);return a.firstCreatePass&&Qd(a,e,r.length-1),jp(i,h),i[e.index]=h}function dM(e,t,n,r){for(let i of e)t.mergedAttrs=vp(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(np(t,t.mergedAttrs,!0),n!==null&&Jw(r,n,t))}function pM(e,t,n,r,i,o){let s=Un(),a=i[W],u=$n(s,i);ub(a,i,s,n,null,r);for(let p=0;p<n.length;p++){let h=s.directiveStart+p,f=zi(i,a,h,s);Gi(f,i)}cb(a,i,s),u&&Gi(u,i);let d=zi(i,a,s.directiveStart+s.componentOffset,s);if(e[fr]=i[fr]=d,o!==null)for(let p of o)p(d,t);return sb(a,s,e),d}function hM(e,t,n,r){if(r)Ld(e,n,["ng-version",aS.full]);else{let{attrs:i,classes:o}=yE(t.selectors[0]);i&&Ld(e,n,i),o&&o.length>0&&Qw(e,n,o.join(" "))}}function fM(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function mM(){let e=Un();bw(vt()[W],e)}function Oy(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";hb(e,n,o[s],s,r)}var rL=new RegExp(`^(\\d+)*(${eS}|${XI})*(.*)`);var gM=(e,t)=>null;function Py(e,t){return gM(e,t)}function vM(e,t,n,r){let i=t.tView,s=e[F]&4096?4096:16,a=Kl(e,i,n,s,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),u=e[t.index];a[ms]=u;let d=e[ln];return d!==null&&(a[ln]=d.createEmbeddedView(i)),$p(i,a,n),a}function Fy(e,t){return!t||t.firstChild===null||$w(e)}function yM(e,t,n,r=!0){let i=t[W];if(LI(i,t,e,n),r){let s=Zd(n,e),a=t[cn],u=Pp(a,e[Wr]);u!==null&&OI(i,e[Ht],a,t,u,s)}let o=t[El];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Ki=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=wM;let e=t;return e})();function wM(){let e=Un();return Db(e,vt())}var bM=Ki,_b=class extends bM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Yi(this._hostTNode,this._hostLView)}get injector(){return new zr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ip(this._hostTNode,this._hostLView);if(Dw(t)){let n=xl(t,this._hostLView),r=Ml(t),i=n[W].data[r+8];return new zr(i,n)}else return new zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ly(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-gt}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Py(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Fy(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!dI(t),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?t:new ds(Gr(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let D=(s?d:this.parentInjector).get(At,null);D&&(o=D)}let p=Gr(u.componentType??{}),h=Py(this._lContainer,p?.id??null),f=h?.firstChild??null,g=u.create(d,i,f,o);return this.insertImpl(g.hostView,a,Fy(this._hostTNode,h)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(AE(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=i[Ne],d=new _b(u,u[Ht],u[Ne]);d.detach(d.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return yM(s,i,o,r),t.attachToViewContainerRef(),Nw(Rd(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ly(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Wd(this._lContainer,n);r&&(Tl(Rd(this._lContainer),n),Zw(r[W],r))}detach(t){let n=this._adjustIndex(t,-1),r=Wd(this._lContainer,n);return r&&Tl(Rd(this._lContainer),n)!=null?new Yr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ly(e){return e[Sl]}function Rd(e){return e[Sl]||(e[Sl]=[])}function Db(e,t){let n,r=t[e.index];return Ut(r)?n=r:(n=BS(r,t,null,e),t[e.index]=n,jp(t,n)),DM(n,t,e,r),new _b(n,e,t)}function _M(e,t){let n=e[cn],r=n.createComment(""),i=$n(t,e),o=Pp(n,i);return Al(n,o,r,zI(n,i),!1),r}var DM=CM;function CM(e,t,n,r){if(e[Wr])return;let i;n.type&8?i=mr(r):i=_M(t,n),e[Wr]=i}function EM(e,t,n,r,i,o){let s=t.consts,a=yy(s,i),u=rb(t,e,2,r,a);return MS(t,n,u,yy(s,o)),u.attrs!==null&&np(u,u.attrs,!1),u.mergedAttrs!==null&&np(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function Cb(e,t,n,r){let i=vt(),o=ql(),s=Bi+e,a=i[cn],u=o.firstCreatePass?EM(s,o,i,t,n,r):o.data[s],d=IM(o,i,u,a,t,e);i[s]=d;let p=DE(u);return _p(u,!0),Jw(a,d,u),(u.flags&32)!==32&&YE()&&ZI(o,i,d,u),OE()===0&&Gi(d,i),PE(),p&&(yS(o,i,u),sb(o,u,i)),r!==null&&wS(i,u),Cb}function Eb(){let e=Un();pw()?$E():(e=e.parent,_p(e,!1));let t=e;VE(t)&&jE(),FE();let n=ql();return n.firstCreatePass&&(bw(n,e),rw(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&eI(t)&&Oy(n,t,vt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&tI(t)&&Oy(n,t,vt(),t.stylesWithoutHost,!1),Eb}function bs(e,t,n,r){return Cb(e,t,n,r),Eb(),bs}var IM=(e,t,n,r,i,o)=>(KE(!0),qw(r,i,ZE()));var Pl="en-US";var SM=Pl;function MM(e){WC(e,"Expected localeId to be defined"),typeof e=="string"&&(SM=e.toLowerCase().replace(/_/g,"-"))}function _s(e){return!!e&&typeof e.then=="function"}function Ib(e){return!!e&&typeof e.subscribe=="function"}var gr=class{},ps=class{};var op=class extends gr{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ol(this);let i=Jy(t);this._bootstrapComponents=Bw(i.bootstrap),this._r3Injector=Vw(t,n,[{provide:gr,useValue:this},{provide:Yl,useValue:this.componentFactoryResolver},...r],lt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},sp=class extends ps{constructor(t){super(),this.moduleType=t}create(t){return new op(this.moduleType,t,[])}};var Fl=class extends gr{constructor(t){super(),this.componentFactoryResolver=new Ol(this),this.instance=null;let n=new us([...t.providers,{provide:gr,useValue:this},{provide:Yl,useValue:this.componentFactoryResolver}],t.parent||Tp(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Up(e,t,n=null){return new Fl({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var xM=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Pw(!1,r.type),o=i.length>0?Up([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(Y(At))});let e=t;return e})();function Jl(e){yb("NgStandalone"),e.getStandaloneInjector=t=>t.get(xM).getOrCreateStandaloneInjector(e)}function TM(){return this._results[Symbol.iterator]()}var ap=class e{get changes(){return this._changes??=new kt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=TM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=hI(t);(this._changesDetected=!pI(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},hs=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=NM;let e=t;return e})(),kM=hs,AM=class extends kM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=vM(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Yr(i)}};function NM(){return Hp(Un(),vt())}function Hp(e,t){return e.type&4?new AM(t,e,Yi(e,t)):null}var lp=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},up=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)xb(t,n).matches!==null&&this.queries[n].setDirty()}},cp=class{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}},dp=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},pp=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,RM(n,o)),this.matchTNodeWithReadOption(t,n,yl(n,t,o,!1,!1))}else r===hs?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,yl(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jr||i===Ki||i===hs&&n.type&4)this.addMatch(n.index,-2);else{let o=yl(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function RM(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function OM(e,t){return e.type&11?Yi(e,t):e.type&4?Hp(e,t):null}function PM(e,t,n,r){return n===-1?OM(t,e):n===-2?FM(e,t,r):zi(e,e[W],n,t)}function FM(e,t,n){if(n===Jr)return Yi(t,e);if(n===hs)return Hp(t,e);if(n===Ki)return Db(t,e)}function Sb(e,t,n,r){let i=t[ln].queries[r];if(i.matches===null){let o=e.data,s=n.matches,a=[];for(let u=0;u<s.length;u+=2){let d=s[u];if(d<0)a.push(null);else{let p=o[d];a.push(PM(t,p,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function hp(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Sb(e,t,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let d=o[a+1],p=t[-u];for(let h=gt;h<p.length;h++){let f=p[h];f[ms]===f[Ne]&&hp(f[W],f,d,r)}if(p[$i]!==null){let h=p[$i];for(let f=0;f<h.length;f++){let g=h[f];hp(g[W],g,d,r)}}}}}return r}function zp(e){let t=vt(),n=ql(),r=hw();Dp(r+1);let i=xb(n,r);if(e.dirty&&kE(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=i.crossesNgTemplate?hp(n,t,r,[]):Sb(n,t,i,r);e.reset(o,oS),e.notifyOnChanges()}return!0}return!1}function Mb(e,t,n){let r=ql();r.firstCreatePass&&(jM(r,new cp(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),VM(r,vt(),t)}function Gp(){return LM(vt(),hw())}function LM(e,t){return e[ln].queries[t].queryList}function VM(e,t,n){let r=new ap((n&4)===4);ES(e,t,r,r.destroy),t[ln]===null&&(t[ln]=new up),t[ln].queries.push(new lp(r))}function jM(e,t,n){e.queries===null&&(e.queries=new dp),e.queries.track(new pp(t,n))}function xb(e,t){return e.queries.getByIndex(t)}var Xl=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})(),qp=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new He(!1)}add(){this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),fp=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Wp=(()=>{let t=class t{compileModuleSync(r){return new sp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Jy(r),s=Bw(o.declarations).reduce((a,u)=>{let d=Gr(u);return d&&a.push(new ds(d)),a},[]);return new fp(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Tb=new K("");var kb=new K("Application Initializer"),Ab=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=x(kb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(_s(s))r.push(s);else if(Ib(s)){let a=new Promise((u,d)=>{s.subscribe({complete:u,error:d})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Zp=new K("appBootstrapListener");function BM(){Av(()=>{throw new j(600,!1)})}function $M(e){return e.isBoundToModule}function UM(e,t,n){try{let r=n();return _s(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Ds=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(eb),this.zoneIsStable=x(wb),this.componentTypes=[],this.components=[],this.isStable=x(qp).hasPendingTasks.pipe(mt(r=>r?P(!1):this.zoneIsStable),yd()),this._injector=x(At)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Nl;if(!this._injector.get(Ab).done){let w="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&Qy(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new j(405,!1)}let a;o?a=r:a=this._injector.get(Yl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=$M(a)?void 0:this._injector.get(gr),d=i||a.selector,p=a.create(Wi.NULL,[],d,u),h=p.location.nativeElement,f=p.injector.get(Tb,null);return f?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),Od(this.components,p),f?.unregisterApplication(h)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Od(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Zp,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Od(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Od(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var HM=(()=>{let t=class t{constructor(){this.zone=x(Ae),this.applicationRef=x(Ds)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function zM(e){return[{provide:Ae,useFactory:e},{provide:ys,multi:!0,useFactory:()=>{let t=x(HM,{optional:!0});return()=>t.initialize()}},{provide:eb,useFactory:GM},{provide:wb,useFactory:bb}]}function GM(){let e=x(Ae),t=x(jn);return n=>e.runOutsideAngular(()=>t.handleError(n))}function qM(e){let t=zM(()=>new Ae(WM(e)));return Wl([[],t])}function WM(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}function ZM(){return typeof $localize<"u"&&$localize.locale||Pl}var Yp=new K("LocaleId",{providedIn:"root",factory:()=>x(Yp,q.Optional|q.SkipSelf)||ZM()});var Nb=new K("PlatformDestroyListeners");var _l=null;function YM(e=[],t){return Wi.create({name:t,providers:[{provide:Zl,useValue:"platform"},{provide:Nb,useValue:new Set([()=>_l=null])},...e]})}function KM(e=[]){if(_l)return _l;let t=YM(e);return _l=t,BM(),QM(t),t}function QM(e){e.get(Ap,null)?.forEach(n=>n())}function Rb(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=KM(r),o=[qM(),...n||[]],a=new Fl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ae);return u.run(()=>{a.resolveInjectorInitializers();let d=a.get(jn,null),p;u.runOutsideAngular(()=>{p=u.onError.subscribe({next:g=>{d.handleError(g)}})});let h=()=>a.destroy(),f=i.get(Nb);return f.add(h),a.onDestroy(()=>{p.unsubscribe(),f.delete(h)}),UM(d,u,()=>{let g=a.get(Ab);return g.runInitializers(),g.donePromise.then(()=>{let w=a.get(Yp,Pl);MM(w||Pl);let D=a.get(Ds);return t!==void 0&&D.bootstrap(t),D})})})}catch(t){return Promise.reject(t)}}var Kp=null;function Qi(){return Kp}function Lb(e){Kp||(Kp=e)}var tu=class{},yt=new K("DocumentToken"),Vb=(()=>{let t=class t{historyGo(r){throw new Error("Not implemented")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(nx))(),providedIn:"platform"});let e=t;return e})();var nx=(()=>{let t=class t extends Vb{constructor(){super(),this._doc=x(yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qi().getBaseHref(this._doc)}onPopState(r){let i=Qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>new t)(),providedIn:"platform"});let e=t;return e})();function jb(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Ob(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Xr(e){return e&&e[0]!=="?"?"?"+e:e}var ru=(()=>{let t=class t{historyGo(r){throw new Error("Not implemented")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(Bb))(),providedIn:"root"});let e=t;return e})(),rx=new K("appBaseHref"),Bb=(()=>{let t=class t extends ru{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??x(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return jb(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Xr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(Y(Vb),Y(rx,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Cs=(()=>{let t=class t{constructor(r){this._subject=new kt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=sx(Ob(Pb(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Xr(i))}normalize(r){return t.stripTrailingSlash(ox(this._basePath,Pb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=Xr,t.joinWithSlash=jb,t.stripTrailingSlash=Ob,t.\u0275fac=function(i){return new(i||t)(Y(ru))},t.\u0275prov=U({token:t,factory:()=>ix(),providedIn:"root"});let e=t;return e})();function ix(){return new Cs(Y(ru))}function ox(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Pb(e){return e.replace(/\/index.html$/,"")}function sx(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function $b(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Qp=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Ul({type:t}),t.\u0275inj=Ll({});let e=t;return e})(),Ub="browser",ax="server";function Jp(e){return e===ax}var nu=class{};var th=class extends tu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},nh=class e extends th{static makeCurrent(){Lb(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=ux();return n==null?null:cx(n)}resetBaseElement(){Es=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $b(document.cookie,t)}},Es=null;function ux(){return Es=Es||document.querySelector("base"),Es?Es.getAttribute("href"):null}function cx(e){return new URL(e,document.baseURI).pathname}var dx=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),rh=new K("EventManagerPlugins"),qb=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(Y(rh),Y(Ae))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),iu=class{constructor(t){this._doc=t}},Xp="ng-app-id",Wb=(()=>{let t=class t{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jp(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Xp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Xp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(Y(yt),Y(kp),Y(Np,8),Y(Zi))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),eh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oh=/%COMP%/g,Zb="%COMP%",px=`_nghost-${Zb}`,hx=`_ngcontent-${Zb}`,fx=!0,mx=new K("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>fx});function gx(e){return hx.replace(oh,e)}function vx(e){return px.replace(oh,e)}function Yb(e,t){return t.map(n=>n.replace(oh,e))}var Hb=(()=>{let t=class t{constructor(r,i,o,s,a,u,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Jp(u),this.defaultRenderer=new Is(r,a,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===un.ShadowDom&&(i=L(v({},i),{encapsulation:un.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ou?o.applyToHost(r):o instanceof Ss&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case un.Emulated:s=new ou(d,p,i,this.appId,h,a,u,f);break;case un.ShadowDom:return new ih(d,p,r,i,a,u,this.nonce,f);default:s=new Ss(d,p,i,h,a,u,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(Y(qb),Y(Wb),Y(kp),Y(mx),Y(yt),Y(Zi),Y(Ae),Y(Np))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Is=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(eh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(zb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(zb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=eh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=eh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Qr.DashCase|Qr.Important)?t.style.setProperty(n,r,i&Qr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Qr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Qi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function zb(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var ih=class extends Is{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=Yb(i.id,i.styles);for(let p of d){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ss=class extends Is{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Yb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ou=class extends Ss{constructor(t,n,r,i,o,s,a,u){let d=i+"-"+r.id;super(t,n,r,o,s,a,u,d),this.contentAttr=gx(d),this.hostAttr=vx(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},yx=(()=>{let t=class t extends iu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(Y(yt))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Gb=["alt","control","meta","shift"],wx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bx={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},_x=(()=>{let t=class t extends iu{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),Gb.forEach(p=>{let h=i.indexOf(p);h>-1&&(i.splice(h,1),a+=p+".")}),a+=s,i.length!=0||s.length===0)return null;let d={};return d.domEventName=o,d.fullKey=a,d}static matchEventFullKeyCode(r,i){let o=wx[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Gb.forEach(a=>{if(a!==o){let u=bx[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{t.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(Y(yt))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})();function Kb(e,t){return Rb(v({rootComponent:e},Dx(t)))}function Dx(e){return{appProviders:[...Mx,...e?.providers??[]],platformProviders:Sx}}function Cx(){nh.makeCurrent()}function Ex(){return new jn}function Ix(){return jw(document),document}var Sx=[{provide:Zi,useValue:Ub},{provide:Ap,useValue:Cx,multi:!0},{provide:yt,useFactory:Ix,deps:[]}];var Mx=[{provide:Zl,useValue:"root"},{provide:jn,useFactory:Ex,deps:[]},{provide:rh,useClass:yx,multi:!0,deps:[yt,Ae,Zi]},{provide:rh,useClass:_x,multi:!0,deps:[yt]},Hb,Wb,qb,{provide:cs,useExisting:Hb},{provide:nu,useClass:dx,deps:[]},[]];function xx(){return new sh(Y(yt))}var sh=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(Y(yt))},t.\u0275prov=U({token:t,factory:function(i){let o=null;return i?o=new i:o=xx(),o},providedIn:"root"});let e=t;return e})();var $="primary",$s=Symbol("RouteTitle"),dh=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function no(e){return new dh(e)}function kx(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ax(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!pn(e[n],t[n]))return!1;return!0}function pn(e,t){let n=e?ph(e):void 0,r=t?ph(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!n_(e[i],t[i]))return!1;return!0}function ph(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function n_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function r_(e){return e.length>0?e[e.length-1]:null}function wr(e){return md(e)?e:_s(e)?Me(Promise.resolve(e)):P(e)}var Nx={exact:o_,subset:s_},i_={exact:Rx,subset:Ox,ignored:()=>!0};function Qb(e,t,n){return Nx[n.paths](e.root,t.root,n.matrixParams)&&i_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Rx(e,t){return pn(e,t)}function o_(e,t,n){if(!ti(e.segments,t.segments)||!lu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!o_(e.children[r],t.children[r],n))return!1;return!0}function Ox(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>n_(e[n],t[n]))}function s_(e,t,n){return a_(e,t,t.segments,n)}function a_(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!ti(i,n)||t.hasChildren()||!lu(i,n,r))}else if(e.segments.length===n.length){if(!ti(e.segments,n)||!lu(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!s_(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!ti(e.segments,i)||!lu(e.segments,i,r)||!e.children[$]?!1:a_(e.children[$],t,o,r)}}function lu(e,t,n){return t.every((r,i)=>i_[n](e[i].parameters,r.parameters))}var vr=class{constructor(t=new ie([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=no(this.queryParams)),this._queryParamMap}toString(){return Lx.serialize(this)}},ie=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uu(this)}},ei=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=no(this.parameters)),this._parameterMap}toString(){return u_(this)}};function Px(e,t){return ti(e,t)&&e.every((n,r)=>pn(n.parameters,t[r].parameters))}function ti(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function Fx(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===$&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==$&&(n=n.concat(t(i,r)))}),n}var Lh=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>new du)(),providedIn:"root"});let e=t;return e})(),du=class{parse(t){let n=new fh(t);return new vr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ms(t.root,!0)}`,r=Bx(t.queryParams),i=typeof t.fragment=="string"?`#${Vx(t.fragment)}`:"";return`${n}${r}${i}`}},Lx=new du;function uu(e){return e.segments.map(t=>u_(t)).join("/")}function Ms(e,t){if(!e.hasChildren())return uu(e);if(t){let n=e.children[$]?Ms(e.children[$],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==$&&r.push(`${i}:${Ms(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Fx(e,(r,i)=>i===$?[Ms(e.children[$],!1)]:[`${i}:${Ms(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[$]!=null?`${uu(e)}/${n[0]}`:`${uu(e)}/(${n.join("//")})`}}function l_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function su(e){return l_(e).replace(/%3B/gi,";")}function Vx(e){return encodeURI(e)}function hh(e){return l_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cu(e){return decodeURIComponent(e)}function Jb(e){return cu(e.replace(/\+/g,"%20"))}function u_(e){return`${hh(e.path)}${jx(e.parameters)}`}function jx(e){return Object.keys(e).map(t=>`;${hh(t)}=${hh(e[t])}`).join("")}function Bx(e){let t=Object.keys(e).map(n=>{let r=e[n];return Array.isArray(r)?r.map(i=>`${su(n)}=${su(i)}`).join("&"):`${su(n)}=${su(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}var $x=/^[^\/()?;#]+/;function ah(e){let t=e.match($x);return t?t[0]:""}var Ux=/^[^\/()?;=#]+/;function Hx(e){let t=e.match(Ux);return t?t[0]:""}var zx=/^[^=?&#]+/;function Gx(e){let t=e.match(zx);return t?t[0]:""}var qx=/^[^&#]+/;function Wx(e){let t=e.match(qx);return t?t[0]:""}var fh=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[$]=new ie(t,n)),r}parseSegment(){let t=ah(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(t),new ei(cu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Hx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ah(this.remaining);i&&(r=i,this.capture(r))}t[cu(n)]=cu(r)}parseQueryParam(t){let n=Gx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Wx(this.remaining);s&&(r=s,this.capture(r))}let i=Jb(n),o=Jb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ah(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=$);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[$]:new ie([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new j(4011,!1)}};function c_(e){return e.segments.length>0?new ie([],{[$]:e}):e}function d_(e){let t={};for(let r of Object.keys(e.children)){let i=e.children[r],o=d_(i);if(r===$&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new ie(e.segments,t);return Zx(n)}function Zx(e){if(e.numberOfChildren===1&&e.children[$]){let t=e.children[$];return new ie(e.segments.concat(t.segments),t.children)}return e}function ro(e){return e instanceof vr}function Yx(e,t,n=null,r=null){let i=p_(e);return h_(i,t,n,r)}function p_(e){let t;function n(o){let s={};for(let u of o.children){let d=n(u);s[u.outlet]=d}let a=new ie(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=c_(r);return t??i}function h_(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return lh(i,i,i,n,r);let o=Kx(t);if(o.toRoot())return lh(i,i,new ie([],{}),n,r);let s=Qx(o,i,e),a=s.processChildren?ks(s.segmentGroup,s.index,o.commands):m_(s.segmentGroup,s.index,o.commands);return lh(i,s.segmentGroup,a,n,r)}function pu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Rs(e){return typeof e=="object"&&e!=null&&e.outlets}function lh(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let s;e===t?s=n:s=f_(e,t,n);let a=c_(d_(s));return new vr(a,o,i)}function f_(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=f_(o,t,n)}),new ie(e.segments,r)}var hu=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&pu(r[0]))throw new j(4003,!1);let i=r.find(Rs);if(i&&i!==r_(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Kx(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new hu(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new hu(n,t,r)}var eo=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Qx(e,t,n){if(e.isAbsolute)return new eo(t,!0,0);if(!n)return new eo(t,!1,NaN);if(n.parent===null)return new eo(n,!0,0);let r=pu(e.commands[0])?0:1,i=n.segments.length-1+r;return Jx(n,i,e.numberOfDoubleDots)}function Jx(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new eo(r,!1,i-o)}function Xx(e){return Rs(e[0])?e[0].outlets:{[$]:e}}function m_(e,t,n){if(e||(e=new ie([],{})),e.segments.length===0&&e.hasChildren())return ks(e,t,n);let r=eT(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ie(e.segments.slice(0,r.pathIndex),{});return o.children[$]=new ie(e.segments.slice(r.pathIndex),e.children),ks(o,0,i)}else return r.match&&i.length===0?new ie(e.segments,{}):r.match&&!e.hasChildren()?mh(e,t,n):r.match?ks(e,0,i):mh(e,t,n)}function ks(e,t,n){if(n.length===0)return new ie(e.segments,{});{let r=Xx(n),i={};if(Object.keys(r).some(o=>o!==$)&&e.children[$]&&e.numberOfChildren===1&&e.children[$].segments.length===0){let o=ks(e.children[$],t,n);return new ie(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=m_(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ie(e.segments,i)}}function eT(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(Rs(a))break;let u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!e_(u,d,s))return o;r+=2}else{if(!e_(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mh(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Rs(o)){let u=tT(o.outlets);return new ie(r,u)}if(i===0&&pu(n[0])){let u=e.segments[t];r.push(new ei(u.path,Xb(n[0]))),i++;continue}let s=Rs(o)?o.outlets[$]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&pu(a)?(r.push(new ei(s,Xb(a))),i+=2):(r.push(new ei(s,{})),i++)}return new ie(r,{})}function tT(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=mh(new ie([],{}),0,r))}),t}function Xb(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function e_(e,t,n){return e==n.path&&pn(t,n.parameters)}var As="imperative",Nt=class{constructor(t,n){this.id=t,this.url=n}},Os=class extends Nt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ni=class extends Nt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yr=class extends Nt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends Nt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}},Ps=class extends Nt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fu=class extends Nt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends Nt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends Nt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yh=class extends Nt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class extends Nt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bh=class{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_h=class{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dh=class{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ih=class{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fs=class{},Ls=class{constructor(t){this.url=t}};var Sh=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bu,this.attachRef=null}},bu=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Sh,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),mu=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Mh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Mh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=xh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return xh(t,this._root).map(n=>n.value)}};function Mh(e,t){if(e===t.value)return t;for(let n of t.children){let r=Mh(e,n);if(r)return r}return null}function xh(e,t){if(e===t.value)return[t];for(let n of t.children){let r=xh(e,n);if(r.length)return r.unshift(t),r}return[]}var wt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var gu=class extends mu{constructor(t,n){super(t),this.snapshot=n,jh(this,t)}toString(){return this.snapshot.toString()}};function g_(e,t){let n=nT(e,t),r=new He([new ei("",{})]),i=new He({}),o=new He({}),s=new He({}),a=new He(""),u=new io(r,i,s,a,o,$,t,n.root);return u.snapshot=n.root,new gu(new wt(u,[]),n)}function nT(e,t){let n={},r={},i={},o="",s=new Vs([],n,i,o,r,$,t,null,{});return new vu("",new wt(s,[]))}var io=class{constructor(t,n,r,i,o,s,a,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(d=>d[$s]))??P(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(te(t=>no(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(te(t=>no(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vh(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:v(v({},t.params),e.params),data:v(v({},t.data),e.data),resolve:v(v(v(v({},e.data),t.data),i?.data),e._resolvedData)}:r={params:e.params,data:e.data,resolve:v(v({},e.data),e._resolvedData??{})},i&&y_(i)&&(r.resolve[$s]=i.title),r}var Vs=class{get title(){return this.data?.[$s]}constructor(t,n,r,i,o,s,a,u,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=no(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=no(this.queryParams)),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},vu=class extends mu{constructor(t,n){super(n),this.url=t,jh(this,n)}toString(){return v_(this._root)}};function jh(e,t){t.value._routerState=e,t.children.forEach(n=>jh(e,n))}function v_(e){let t=e.children.length>0?` { ${e.children.map(v_).join(", ")} } `:"";return`${e.value}${t}`}function uh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,pn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),pn(t.params,n.params)||e.paramsSubject.next(n.params),Ax(t.url,n.url)||e.urlSubject.next(n.url),pn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Th(e,t){let n=pn(e.params,t.params)&&Px(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Th(e.parent,t.parent))}function y_(e){return typeof e.title=="string"||e.title===null}var rT=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=$,this.activateEvents=new kt,this.deactivateEvents=new kt,this.attachEvents=new kt,this.detachEvents=new kt,this.parentContexts=x(bu),this.location=x(Ki),this.changeDetector=x(Ql),this.environmentInjector=x(At),this.inputBinder=x(Bh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new kh(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:d,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=yp({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zl]});let e=t;return e})(),kh=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===io?this.route:t===bu?this.childContexts:this.parent.get(t,n)}},Bh=new K("");function iT(e,t,n){let r=js(e,t._root,n?n._root:void 0);return new gu(r,t)}function js(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=oT(e,t,n);return new wt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>js(e,a)),s}}let r=sT(t.value),i=t.children.map(o=>js(e,o));return new wt(r,i)}}function oT(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return js(e,r,i);return js(e,r)})}function sT(e){return new io(new He(e.url),new He(e.params),new He(e.queryParams),new He(e.fragment),new He(e.data),e.outlet,e.component,e)}var w_="ngNavigationCancelingError";function b_(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=ro(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=__(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function __(e,t,n){let r=new Error("NavigationCancelingError: "+(e||""));return r[w_]=!0,r.cancellationCode=t,n&&(r.url=n),r}function aT(e){return D_(e)&&ro(e.url)}function D_(e){return e&&e[w_]}var lT=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$l({type:t,selectors:[["ng-component"]],standalone:!0,features:[Jl],decls:1,vars:0,template:function(i,o){i&1&&bs(0,"router-outlet")},dependencies:[rT],encapsulation:2});let e=t;return e})();function uT(e,t){return e.providers&&!e._injector&&(e._injector=Up(e.providers,t,`Route: ${e.path}`)),e._injector??t}function $h(e){let t=e.children&&e.children.map($h),n=t?L(v({},e),{children:t}):v({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==$&&(n.component=lT),n}function hn(e){return e.outlet||$}function cT(e,t){let n=e.filter(r=>hn(r)===t);return n.push(...e.filter(r=>hn(r)!==t)),n}function Us(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var dT=(e,t,n,r)=>te(i=>(new Ah(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Ah=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),uh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Xi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Xi(t);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Xi(t);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Xi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ih(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Ch(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(uh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),uh(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Us(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},yu=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},to=class{constructor(t,n){this.component=t,this.route=n}};function pT(e,t,n){let r=e._root,i=t?t._root:null;return xs(r,i,n,[r.value])}function hT(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function so(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!$y(e)?e:t.get(e):r}function xs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xi(t);return e.children.forEach(s=>{fT(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ns(a,n.getContext(s),i)),i}function fT(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=mT(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xs(e,t,a?a.children:null,r,i):xs(e,t,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new to(a.outlet.component,s))}else s&&Ns(t,a,i),i.canActivateChecks.push(new yu(r)),o.component?xs(e,null,a?a.children:null,r,i):xs(e,null,n,r,i);return i}function mT(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!ti(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ti(e.url,t.url)||!pn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Th(e,t)||!pn(e.queryParams,t.queryParams);case"paramsChange":default:return!Th(e,t)}}function Ns(e,t,n){let r=Xi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Ns(s,t.children.getContext(o),n):Ns(s,null,n):Ns(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new to(t.outlet.component,i)):n.canDeactivateChecks.push(new to(null,i)):n.canDeactivateChecks.push(new to(null,i))}function Hs(e){return typeof e=="function"}function gT(e){return typeof e=="boolean"}function vT(e){return e&&Hs(e.canLoad)}function yT(e){return e&&Hs(e.canActivate)}function wT(e){return e&&Hs(e.canActivateChild)}function bT(e){return e&&Hs(e.canDeactivate)}function _T(e){return e&&Hs(e.canMatch)}function C_(e){return e instanceof Ln||e?.name==="EmptyError"}var au=Symbol("INITIAL_VALUE");function oo(){return mt(e=>hl(e.map(t=>t.pipe(Vn(1),Cd(au)))).pipe(te(t=>{for(let n of t)if(n!==!0){if(n===au)return au;if(n===!1||n instanceof vr)return n}return!0}),jt(t=>t!==au),Vn(1)))}function DT(e,t){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?P(L(v({},n),{guardsResult:!0})):CT(s,r,i,e).pipe(Pe(a=>a&&gT(a)?ET(r,o,e,t):P(a)),te(a=>L(v({},n),{guardsResult:a})))})}function CT(e,t,n,r){return Me(e).pipe(Pe(i=>TT(i.component,i.route,n,t,r)),on(i=>i!==!0,!0))}function ET(e,t,n,r){return Me(t).pipe(Ri(i=>Ni(ST(i.route.parent,r),IT(i.route,r),xT(e,i.path,n),MT(e,i.route,n))),on(i=>i!==!0,!0))}function IT(e,t){return e!==null&&t&&t(new Eh(e)),P(!0)}function ST(e,t){return e!==null&&t&&t(new Dh(e)),P(!0)}function MT(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return P(!0);let i=r.map(o=>fl(()=>{let s=Us(t)??n,a=so(o,s),u=yT(a)?a.canActivate(t,e):Kr(s,()=>a(t,e));return wr(u).pipe(on())}));return P(i).pipe(oo())}function xT(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>hT(s)).filter(s=>s!==null).map(s=>fl(()=>{let a=s.guards.map(u=>{let d=Us(s.node)??n,p=so(u,d),h=wT(p)?p.canActivateChild(r,e):Kr(d,()=>p(r,e));return wr(h).pipe(on())});return P(a).pipe(oo())}));return P(o).pipe(oo())}function TT(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return P(!0);let s=o.map(a=>{let u=Us(t)??i,d=so(a,u),p=bT(d)?d.canDeactivate(e,t,n,r):Kr(u,()=>d(e,t,n,r));return wr(p).pipe(on())});return P(s).pipe(oo())}function kT(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return P(!0);let o=i.map(s=>{let a=so(s,e),u=vT(a)?a.canLoad(t,n):Kr(e,()=>a(t,n));return wr(u)});return P(o).pipe(oo(),E_(r))}function E_(e){return cd($e(t=>{if(ro(t))throw b_(e,t)}),te(t=>t===!0))}function AT(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return P(!0);let o=i.map(s=>{let a=so(s,e),u=_T(a)?a.canMatch(t,n):Kr(e,()=>a(t,n));return wr(u)});return P(o).pipe(oo(),E_(r))}var Bs=class{constructor(t){this.segmentGroup=t||null}},wu=class extends Error{constructor(t){super(),this.urlTree=t}};function Ji(e){return Ai(new Bs(e))}function NT(e){return Ai(new j(4e3,!1))}function RT(e){return Ai(__(!1,3))}var Nh=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return P(r);if(i.numberOfChildren>1||!i.children[$])return NT(t.redirectTo);i=i.children[$]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new wu(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new vr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(t,u,r,i)}),new ie(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Rh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OT(e,t,n,r,i){let o=Uh(e,t,n);return o.matched?(r=uT(t,r),AT(r,t,n,i).pipe(te(s=>s===!0?o:v({},Rh)))):P(o)}function Uh(e,t,n){if(t.path==="**")return PT(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?v({},Rh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||kx)(n,e,t);if(!i)return v({},Rh);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?v(v({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function PT(e){return{matched:!0,parameters:e.length>0?r_(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function t_(e,t,n,r){return n.length>0&&VT(e,n,r)?{segmentGroup:new ie(t,LT(r,new ie(n,e.children))),slicedSegments:[]}:n.length===0&&jT(e,n,r)?{segmentGroup:new ie(e.segments,FT(e,t,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ie(e.segments,e.children),slicedSegments:n}}function FT(e,t,n,r,i){let o={};for(let s of r)if(_u(e,n,s)&&!i[hn(s)]){let a=new ie([],{});o[hn(s)]=a}return v(v({},i),o)}function LT(e,t){let n={};n[$]=t;for(let r of e)if(r.path===""&&hn(r)!==$){let i=new ie([],{});n[hn(r)]=i}return n}function VT(e,t,n){return n.some(r=>_u(e,t,r)&&hn(r)!==$)}function jT(e,t,n){return n.some(r=>_u(e,t,r))}function _u(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function BT(e,t,n,r){return hn(e)!==r&&(r===$||!_u(t,n,e))?!1:Uh(t,e,n).matched}function $T(e,t,n){return t.length===0&&!e.children[n]}var Oh=class{};function UT(e,t,n,r,i,o,s="emptyOnly"){return new Ph(e,t,n,r,i,s,o).recognize()}var HT=31,Ph=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Nh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new j(4002,`'${t.segmentGroup}'`)}recognize(){let t=t_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(te(n=>{let r=new Vs([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,{},$,this.rootComponentType,null,{}),i=new wt(r,n),o=new vu("",i),s=Yx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,$).pipe(cr(r=>{if(r instanceof wu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bs?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=Vh(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(te(o=>o instanceof wt?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Me(i).pipe(Ri(o=>{let s=r.children[o],a=cT(n,o);return this.processSegmentGroup(t,a,s,o)}),bd((o,s)=>(o.push(...s),o)),dr(null),wd(),Pe(o=>{if(o===null)return Ji(r);let s=I_(o);return zT(s),P(s)}))}processSegment(t,n,r,i,o,s){return Me(n).pipe(Ri(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(cr(u=>{if(u instanceof Bs)return P(null);throw u}))),on(a=>!!a),cr(a=>{if(C_(a))return $T(r,i,o)?P(new Oh):Ji(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return BT(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Ji(i):Ji(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=Uh(n,i,o);if(!a)return Ji(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HT&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,h).pipe(Pe(f=>this.processSegment(t,r,n,f.concat(p),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=OT(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(mt(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(mt(({routes:u})=>{let d=r._loadedInjector??t,{consumedSegments:p,remainingSegments:h,parameters:f}=a,g=new Vs(p,f,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,qT(r),hn(r),r.component??r._loadedComponent??null,r,WT(r)),{segmentGroup:w,slicedSegments:D}=t_(n,p,h,u);if(D.length===0&&w.hasChildren())return this.processChildren(d,u,w).pipe(te(H=>H===null?null:new wt(g,H)));if(u.length===0&&D.length===0)return P(new wt(g,[]));let le=hn(r)===o;return this.processSegment(d,u,w,D,le?$:o,!0).pipe(te(H=>new wt(g,H instanceof wt?[H]:[])))}))):Ji(n)))}getChildConfig(t,n,r){return n.children?P({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?P({routes:n._loadedRoutes,injector:n._loadedInjector}):kT(t,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(t,n).pipe($e(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):RT(n))):P({routes:[],injector:t})}};function zT(e){e.sort((t,n)=>t.value.outlet===$?-1:n.value.outlet===$?1:t.value.outlet.localeCompare(n.value.outlet))}function GT(e){let t=e.value.routeConfig;return t&&t.path===""}function I_(e){let t=[],n=new Set;for(let r of e){if(!GT(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=I_(r.children);t.push(new wt(r.value,i))}return t.filter(r=>!n.has(r))}function qT(e){return e.data||{}}function WT(e){return e.resolve||{}}function ZT(e,t,n,r,i,o){return Pe(s=>UT(e,t,n,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:u})=>L(v({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function YT(e,t){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return P(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let d of S_(u))s.add(d);let a=0;return Me(s).pipe(Ri(u=>o.has(u)?KT(u,r,e,t):(u.data=Vh(u,u.parent,e).resolve,P(void 0))),$e(()=>a++),Oi(1),Pe(u=>a===s.size?P(n):st))})}function S_(e){let t=e.children.map(n=>S_(n)).flat();return[e,...t]}function KT(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!y_(i)&&(o[$s]=i.title),QT(o,e,t,r).pipe(te(s=>(e._resolvedData=s,e.data=Vh(e,e.parent,n).resolve,null)))}function QT(e,t,n,r){let i=ph(e);if(i.length===0)return P({});let o={};return Me(i).pipe(Pe(s=>JT(e[s],t,n,r).pipe(on(),$e(a=>{o[s]=a}))),Oi(1),vd(o),cr(s=>C_(s)?st:Ai(s)))}function JT(e,t,n,r){let i=Us(t)??r,o=so(e,i),s=o.resolve?o.resolve(t,n):Kr(i,()=>o(t,n));return wr(s)}function ch(e){return mt(t=>{let n=e(t);return n?Me(n).pipe(te(()=>t)):P(t)})}var M_=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===$);return i}getResolvedTitleForRoute(r){return r.data[$s]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(XT))(),providedIn:"root"});let e=t;return e})(),XT=(()=>{let t=class t extends M_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(Y(sh))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Hh=new K("",{providedIn:"root",factory:()=>({})}),zh=new K("ROUTES"),ek=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Wp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return P(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=wr(r.loadComponent()).pipe(te(x_),$e(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Xo(()=>{this.componentLoaders.delete(r)})),o=new ki(i,()=>new nt).pipe(Ti());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return P({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=tk(i,this.compiler,r,this.onLoadEndListener).pipe(Xo(()=>{this.childrenLoaders.delete(i)})),a=new ki(s,()=>new nt).pipe(Ti());return this.childrenLoaders.set(i,a),a}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function tk(e,t,n,r){return wr(e.loadChildren()).pipe(te(x_),Pe(i=>i instanceof ps||Array.isArray(i)?P(i):Me(t.compileModuleAsync(i))),te(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(zh,[],{optional:!0,self:!0}).flat()),{routes:s.map($h),injector:o}}))}function nk(e){return e&&typeof e=="object"&&"default"in e}function x_(e){return nk(e)?e.default:e}var Gh=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(rk))(),providedIn:"root"});let e=t;return e})(),rk=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ik=new K("");var ok=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=x(ek),this.environmentInjector=x(At),this.urlSerializer=x(Lh),this.rootContexts=x(bu),this.location=x(Cs),this.inputBindingEnabled=x(Bh,{optional:!0})!==null,this.titleStrategy=x(M_),this.options=x(Hh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(Gh),this.createViewTransition=x(ik,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>P(void 0),this.rootComponentType=null;let r=o=>this.events.next(new bh(o)),i=o=>this.events.next(new _h(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(L(v(v({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new He({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:As,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jt(s=>s.id!==0),te(s=>L(v({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),mt(s=>{this.currentTransition=s;let a=!1,u=!1;return P(s).pipe($e(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?L(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mt(d=>{let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&h!=="reload"){let f="";return this.events.next(new ri(d.id,this.urlSerializer.serialize(d.rawUrl),f,0)),d.resolve(null),st}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return P(d).pipe(mt(f=>{let g=this.transitions?.getValue();return this.events.next(new Os(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?st:Promise.resolve(f)}),ZT(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=L(v({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new fu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:f,extractedUrl:g,source:w,restoredState:D,extras:le}=d,H=new Os(f,this.urlSerializer.serialize(g),w,D);this.events.next(H);let ue=g_(g,this.rootComponentType).snapshot;return this.currentTransition=s=L(v({},d),{targetSnapshot:ue,urlAfterRedirects:g,extras:L(v({},le),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,P(s)}else{let f="";return this.events.next(new ri(d.id,this.urlSerializer.serialize(d.extractedUrl),f,1)),d.resolve(null),st}}),$e(d=>{let p=new gh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),te(d=>(this.currentTransition=s=L(v({},d),{guards:pT(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),s)),DT(this.environmentInjector,d=>this.events.next(d)),$e(d=>{if(s.guardsResult=d.guardsResult,ro(d.guardsResult))throw b_(this.urlSerializer,d.guardsResult);let p=new vh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),jt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",3),!1)),ch(d=>{if(d.guards.canActivateChecks.length)return P(d).pipe($e(p=>{let h=new yh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}),mt(p=>{let h=!1;return P(p).pipe(YT(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(p,"",2)}}))}),$e(p=>{let h=new wh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}))}),ch(d=>{let p=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe($e(g=>{h.component=g}),te(()=>{})));for(let g of h.children)f.push(...p(g));return f};return hl(p(d.targetSnapshot.root)).pipe(dr(),Vn(1))}),ch(()=>this.afterPreactivation()),mt(()=>{let{currentSnapshot:d,targetSnapshot:p}=s,h=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return h?Me(h).pipe(te(()=>s)):P(s)}),te(d=>{let p=iT(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=s=L(v({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,s}),$e(()=>{this.events.next(new Fs)}),dT(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Vn(1),$e({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ni(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),Ed(this.transitionAbortSubject.pipe($e(d=>{throw d}))),Xo(()=>{if(!a&&!u){let d="";this.cancelNavigationTransition(s,d,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),cr(d=>{if(u=!0,D_(d))this.events.next(new yr(s.id,this.urlSerializer.serialize(s.extractedUrl),d.message,d.cancellationCode)),aT(d)?this.events.next(new Ls(d.url)):s.resolve(!1);else{this.events.next(new Ps(s.id,this.urlSerializer.serialize(s.extractedUrl),d,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(d))}catch(p){s.reject(p)}}return st}))}))}cancelNavigationTransition(r,i,o){let s=new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function sk(e){return e!==As}var ak=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(lk))(),providedIn:"root"});let e=t;return e})(),Fh=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},lk=(()=>{let t=class t extends Fh{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Sp(t)))(o||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),T_=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:()=>(()=>x(uk))(),providedIn:"root"});let e=t;return e})(),uk=(()=>{let t=class t extends T_{constructor(){super(...arguments),this.location=x(Cs),this.urlSerializer=x(Lh),this.options=x(Hh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(Gh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=g_(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Os)this.stateMemento=this.createStateMemento();else if(r instanceof ri)this.rawUrlTree=i.initialUrl;else if(r instanceof fu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Fs?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof yr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof Ps?this.restoreHistory(i,!0):r instanceof ni&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=v(v({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=v(v({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Sp(t)))(o||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ts=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Ts||{});function ck(e,t){e.events.pipe(jt(n=>n instanceof ni||n instanceof yr||n instanceof Ps||n instanceof ri),te(n=>n instanceof ni||n instanceof ri?Ts.COMPLETE:(n instanceof yr?n.code===0||n.code===1:!1)?Ts.REDIRECTING:Ts.FAILED),jt(n=>n!==Ts.REDIRECTING),Vn(1)).subscribe(()=>{t()})}function dk(e){throw e}var pk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},k_=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=x(Xl),this.stateManager=x(T_),this.options=x(Hh,{optional:!0})||{},this.pendingTasks=x(qp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(ok),this.urlSerializer=x(Lh),this.location=x(Cs),this.urlHandlingStrategy=x(Gh),this._events=new nt,this.errorHandler=this.options.errorHandler||dk,this.navigated=!1,this.routeReuseStrategy=x(ak),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(zh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Bh,{optional:!0}),this.eventsSubscription=new Be,this.isNgZoneEnabled=x(Ae)instanceof Ae&&Ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof yr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof ni)this.navigated=!0;else if(i instanceof Ls){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sk(o.source)};this.scheduleNavigation(a,As,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}mk(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),As,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let d=v({},o);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map($h),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:a,h=null;switch(u){case"merge":h=v(v({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=o?o.snapshot:this.routerState.snapshot.root;f=p_(g)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return h_(f,r,h,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=ro(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,As,null,i)}navigate(r,i={skipLocationChange:!1}){return fk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=v({},pk):i===!1?o=v({},hk):o=i,ro(r))return Qb(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Qb(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,d,p;a?(u=a.resolve,d=a.reject,p=a.promise):p=new Promise((f,g)=>{u=f,d=g});let h=this.pendingTasks.add();return ck(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(f=>Promise.reject(f))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function fk(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new j(4008,!1)}function mk(e){return!(e instanceof Fs)&&!(e instanceof Ls)}var gk=new K("");function A_(e,...t){return Wl([{provide:zh,multi:!0,useValue:e},[],{provide:io,useFactory:vk,deps:[k_]},{provide:Zp,multi:!0,useFactory:yk},t.map(n=>n.\u0275providers)])}function vk(e){return e.routerState.root}function yk(){let e=x(Wi);return t=>{let n=e.get(Ds);if(t!==n.components[0])return;let r=e.get(k_),i=e.get(wk);e.get(bk)===1&&r.initialNavigation(),e.get(_k,null,q.Optional)?.setUpPreloading(),e.get(gk,null,q.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wk=new K("",{factory:()=>new nt}),bk=new K("",{providedIn:"root",factory:()=>1});var _k=new K("");var N_=[];var R_={providers:[A_(N_)]};var qh,zs=qh=class extends M{constructor(e){super(e),this.type="none"}clone(){return new qh({type:this.type})}};l([We({none:"none",stayAbove:"stay-above"})],zs.prototype,"type",void 0),zs=qh=l([m("esri.ground.NavigationConstraint")],zs);var Wh,Hn=Wh=class extends Rm(Lr){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Q;let t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&k.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>n(r.item))])}initialize(){this.when().catch(e=>{bi(e)||k.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){let e=this.layers.removeAll();for(let t of e)fe(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=v({},e)).resourceInfo),e}set layers(e){this._set("layers",Qm(e,this._get("layers")))}writeLayers(e,t,n,r){let i=[];e&&(r=L(v({},r),{layerContainerType:"ground"}),e.forEach(o=>{if("write"in o){let s={};kg(o)().write(s,r)&&i.push(s)}else r?.messages&&r.messages.push(new A("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return La(this,e=>{e(this.layers)})}queryElevation(e,t){return C(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-ZKKUMR6I.js");et(t);let r=new n,i=this.layers.filter(O_).toArray();return r.queryAll(i,e,t)})}createElevationSampler(e,t){return C(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-ZKKUMR6I.js");et(t);let r=new n,i=this.layers.filter(O_).toArray();return r.createSamplerAll(i,e,t)})}clone(){let e={opacity:this.opacity,surfaceColor:ve(this.surfaceColor),navigationConstraint:ve(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Wh({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){let t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,n){return C(this,null,function*(){let r=t?.origin||"web-scene",i=t?.portal||null,o=t?.url||null,{populateOperationalLayers:s}=yield import("./chunk-EVUJVD7X.js");et(n);let a=[];if(e.layers&&Array.isArray(e.layers)){let u={context:{origin:r,url:o,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(s(this.layers,e.layers,u))}yield Promise.allSettled(a)})}};function Dk(e){return e&&"createElevationSampler"in e}function O_(e){return e.type==="elevation"||Dk(e)}l([c({json:{read:!1}})],Hn.prototype,"layers",null),l([Ve("layers")],Hn.prototype,"writeLayers",null),l([c({readOnly:!0})],Hn.prototype,"resourceInfo",void 0),l([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:qo,read:{reader:Vg,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Lg(e)},target:"transparency"}}})],Hn.prototype,"opacity",void 0),l([c({type:nn,json:{type:[qo],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Hn.prototype,"surfaceColor",void 0),l([c({type:zs,json:{write:!0}})],Hn.prototype,"navigationConstraint",void 0),Hn=Wh=l([m("esri.Ground")],Hn);var ao=Hn;function P_(e){return!(!(e&&typeof e=="object"&&"loaded"in e&&e.loaded&&pg(e)?.operations?.supportsEditing&&"type"in e)||"editingEnabled"in e&&!hg(e)||e.type==="scene"&&!Ck(e))}function Ck(e){let{associatedLayer:t}=e,n=t?.infoFor3D;if(!n)return!0;let{supportedFormats:r,queryFormats:i}=n,o=$g("model/gltf-binary",r)??Ug("glb",r);if(!(o!=null&&i.includes(o)))return k.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because it does not support GLB queries.`),!1;let s=e.spatialReference,a=t.spatialReference;if(!Vr(s,a))return k.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because its spatial reference (wkid:${s.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${a.wkid}).`),!1;let u=t.sourceJSON.sourceSpatialReference;return!(u!=null&&!Vr(u,a))||(k.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${a.wkid}) is different from its source spatial reference (wkid:${u.wkid}).`),!1)}var F_={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function L_(e){let t=null;if(typeof e=="string")if(e in F_){let n=F_[e];t=new ao({resourceInfo:{data:{layers:[n]}}})}else k.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ka(ao,e);return t}var fn=class extends Yg(Zg(nr.EventedMixin(_))){constructor(e){super(e),this.allLayers=new jr({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Wg(this),this.basemap=null,this.editableLayers=new jr({getCollections:()=>[this.allLayers],itemFilterFunction:P_}),this.ground=new ao,this._basemapCache=gg()}destroy(){vg(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=fe(this.basemap),fe(this.ground),this._set("ground",null)}castBasemap(e){return yg(e,this._basemapCache)}castGround(e){return L_(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([c({readOnly:!0,dependsOn:[]})],fn.prototype,"allLayers",void 0),l([c({readOnly:!0})],fn.prototype,"allTables",void 0),l([c({type:ev,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],fn.prototype,"basemap",void 0),l([Te("basemap")],fn.prototype,"castBasemap",null),l([c({readOnly:!0})],fn.prototype,"editableLayers",void 0),l([c({type:ao,nonNullable:!0})],fn.prototype,"ground",void 0),l([Te("ground")],fn.prototype,"castGround",null),fn=l([m("esri.Map")],fn);var Du=fn;var br=class extends M{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([c({type:String,json:{write:!0}})],br.prototype,"facilityIdField",void 0),l([c({type:String,json:{write:!0}})],br.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],br.prototype,"nameField",void 0),l([c({type:String,json:{write:!0}})],br.prototype,"siteIdField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],br.prototype,"sublayerId",void 0),br=l([m("esri.layers.support.FacilityLayerInfo")],br);var V_=br;var zt=class extends M{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([c({type:String,json:{write:!0}})],zt.prototype,"facilityIdField",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"levelIdField",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"levelNumberField",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"longNameField",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"shortNameField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],zt.prototype,"sublayerId",void 0),l([c({type:String,json:{write:!0}})],zt.prototype,"verticalOrderField",void 0),zt=l([m("esri.layers.support.LevelLayerInfo")],zt);var j_=zt;var ii=class extends M{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([c({type:String,json:{write:!0}})],ii.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],ii.prototype,"nameField",void 0),l([c({type:String,json:{write:!0}})],ii.prototype,"siteIdField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ii.prototype,"sublayerId",void 0),ii=l([m("esri.layers.support.SiteLayerInfo")],ii);var B_=ii;var lo=class extends M{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([c({type:j_,json:{write:!0}})],lo.prototype,"levelLayer",void 0),l([c({type:V_,json:{write:!0}})],lo.prototype,"facilityLayer",void 0),l([c({type:B_,json:{write:!0}})],lo.prototype,"siteLayer",void 0),lo=l([m("esri.support.MapFloorInfo")],lo);var $_=lo;var uo=class extends ke(M){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};l([c({type:String,json:{write:{isRequired:!0}}})],uo.prototype,"expression",void 0),l([c({type:["number","string"],json:{write:!0}})],uo.prototype,"returnType",void 0),l([c({type:String,json:{write:!0}})],uo.prototype,"title",void 0),uo=l([m("esri.webdoc.geotriggersInfo.ExpressionInfo")],uo);var Cu=uo;var Eu=new ir({deviceLocation:"device-location"}),Gs=class extends ke(M){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};l([c({type:Cu,json:{write:!0}})],Gs.prototype,"filterExpression",void 0),l([c({type:Eu.apiValues,readOnly:!0,json:{type:Eu.jsonValues,read:Eu.read,write:Eu.write}})],Gs.prototype,"type",void 0),Gs=l([m("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Gs);var U_=Gs;var qs=class extends ke(M){constructor(e){super(e),this.geometry=null,this.where=null}};l([c({types:ug,json:{read:lg,write:!0}})],qs.prototype,"geometry",void 0),l([c({type:String,json:{write:!0}})],qs.prototype,"where",void 0),qs=l([m("esri.webdoc.geotriggersInfo.FeatureFilter")],qs);var H_=qs;var co=class extends ke(M){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([c({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],co.prototype,"layerId",void 0),l([c({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],co.prototype,"layerUrl",void 0),l([We({featureLayer:"feature-layer"},{readOnly:!0})],co.prototype,"type",void 0),co=l([m("esri.webdoc.geotriggersInfo.FeatureLayerSource")],co);var z_=co;var oi=class extends ke(M){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([c({type:z_,json:{write:{isRequired:!0}}})],oi.prototype,"fenceSource",void 0),l([c({type:H_,json:{write:!0}})],oi.prototype,"filter",void 0),l([c({type:Number,json:{write:!0}})],oi.prototype,"bufferDistance",void 0),l([We({features:"features"},{readOnly:!0})],oi.prototype,"type",void 0),oi=l([m("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],oi);var G_=oi;var Iu=class extends ke(M){constructor(e){super(e),this.type="fence"}};l([We({fence:"fence"},{readOnly:!0})],Iu.prototype,"type",void 0),Iu=l([m("esri.webdoc.geotriggersInfo.Geotrigger")],Iu);var Su=Iu;var Ws=class extends ke(M){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};l([c({type:Cu,json:{write:!0}})],Ws.prototype,"expressionInfo",void 0),l([c({type:[String],json:{write:!0}})],Ws.prototype,"requestedActions",void 0),Ws=l([m("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Ws);var q_=Ws;var W_=new ir({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Z_=new ir({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Zs=new ir({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});var Gt=class extends Su{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([We(W_)],Gt.prototype,"enterExitRule",void 0),l([c({type:U_,json:{write:{isRequired:!0}}})],Gt.prototype,"feed",void 0),l([We(Z_)],Gt.prototype,"feedAccuracyMode",void 0),l([c({type:Zs.apiValues,json:{type:Zs.jsonValues,read:Zs.read,write:{writer:Zs.write,isRequired:!0}}})],Gt.prototype,"fenceNotificationRule",void 0),l([c({type:G_,json:{write:{isRequired:!0}}})],Gt.prototype,"fenceParameters",void 0),l([c({type:String,json:{write:!0}})],Gt.prototype,"name",void 0),l([c({type:q_,json:{write:!0}})],Gt.prototype,"notificationOptions",void 0),l([We({fence:"fence"},{readOnly:!0})],Gt.prototype,"type",void 0),Gt=l([m("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Gt);var Y_=Gt;var K_={base:Su,key:"type",typeMap:{fence:Y_}};var Mu=class extends ke(M){constructor(e){super(e),this.geotriggers=null}};l([c({types:[K_],json:{write:{isRequired:!0}}})],Mu.prototype,"geotriggers",void 0),Mu=l([m("esri.webdoc.GeotriggersInfo")],Mu);var Q_=Mu;var Zh,po=Zh=class extends M{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Zh(ve({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([c({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],po.prototype,"activeRange",void 0),l([c({type:[Number],json:{write:!0}})],po.prototype,"currentRangeExtent",void 0),l([c({type:[Number],json:{write:!0}})],po.prototype,"fullRangeExtent",void 0),po=Zh=l([m("esri.webdoc.RangeInfo")],po);var Ys=po;function J_(e,t){return t.resourceInfo?X_(t,t.resourceInfo,{origin:e.origin}):t.portalItem?.id?Ek(e,t,t.portalItem):Promise.resolve()}function X_(e,t,n){let r={context:L(v({},n),{layerContainerType:"operational-layers"})};return e.portalItem&&(r.context.portal=e.portalItem.portal||Kc.getDefault()),import("./chunk-EVUJVD7X.js").then(({populateOperationalLayers:i})=>{let o=[],s=t.operationalLayers;s?.length&&o.push(i(e.layers,s,r));let a=L(v({},r),{context:L(v({},r.context),{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),u=t.tables;return u?.length&&o.push(i(e.tables,u,a)),Promise.allSettled(o).then(()=>{})})}function Ek(e,t,n){return C(this,null,function*(){if(yield n.load().catch(s=>{throw new A(`${e.name}:load-portal-item`,"Failed to load portal item",{error:s})}),n.type!==e.itemType)throw new A(`${e.name}:invalid-portal-item`,`Invalid portal item type '${n.type}', expected '${e.itemType}'`,{type:n.type});let r=yield n.fetchData();t.resourceInfo=r;let i={origin:e.origin,url:Om(n.itemUrl),portal:n.portal||Kc.getDefault(),portalItem:n,readResourcePaths:[]};yield Ik(e,t,r,i),t.resourceReferences={portalItem:n,paths:i.readResourcePaths};let o=yield Mk(t.initialViewProperties,n,k.getLogger(t));if(o){let s=t.initialViewProperties?.clone()??e.createInitialViewProperties();s.viewpoint=o,t.initialViewProperties=s}})}function Ik(e,t,n,r){let i=Sk(e,n);return t.read(i,r),X_(t,i,r)}function Sk(e,t){let n=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(n),t.version=`${n.major}.${n.minor}`,t}function Mk(e,t,n){return C(this,null,function*(){if(e?.viewpoint?.targetGeometry)return null;let i=yield xk(e,t,n);return i?new ye({targetGeometry:i}):null})}function xk(e,t,n){return C(this,null,function*(){let r=e?.spatialReference,i=t?.extent;if(!r||!i)return null;if(r.isWGS84)return i.clone();if(r.isWebMercator)return Va(i);let{getGeometryServiceURL:o}=yield import("./chunk-364UN34Y.js");try{let s=yield o(t),a=new nv;return a.geometries=[i],a.outSpatialReference=r,(yield rv(s,a))[0]}catch(s){n.error("Error projecting item's extent:",s)}return null})}var Yh,mn=Yh=class extends M{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Yh(ve({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([c({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],mn.prototype,"enabled",void 0),l([c({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],mn.prototype,"longNames",void 0),l([c({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],mn.prototype,"minimized",void 0),l([c({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],mn.prototype,"pinnedLevels",void 0),l([c({type:String,json:{read:{source:"site"},write:{target:"site"}}})],mn.prototype,"site",void 0),l([c({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],mn.prototype,"facility",void 0),l([c({type:String,json:{read:{source:"level"},write:{target:"level"}}})],mn.prototype,"level",void 0),mn=Yh=l([m("esri.webdoc.widgets.FloorFilter")],mn);var eD=mn;var Kh,xu=new ir({slider:"slider",picker:"picker"}),ho=Kh=class extends M{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Kh({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([c({type:xu.apiValues,nonNullable:!0,json:{type:xu.jsonValues,default:null,read:{reader:xu.read},write:{isRequired:!0,writer:xu.write}}})],ho.prototype,"interactionMode",void 0),l([c({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){let e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],ho.prototype,"numStops",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],ho.prototype,"stopInterval",void 0),ho=Kh=l([m("esri.webdoc.widgets.Range")],ho);var tD=ho;var Qh,Fe=Qh=class extends M{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;let t=e[0]!=null?new Date(e[0]):null,n=e[1]!=null?new Date(e[1]):null;return new On({start:t,end:n})}writeCurrentTimeExtent(e,t,n){e&&Ea(n,[e.start!=null?e.start.getTime():null,e.end!=null?e.end.getTime():null],t)}readFullTimeExtent(e,t){let n=t.properties;if(!n)return;let r=n.endTime!=null?new Date(n.endTime):null,i=n.startTime!=null?new Date(n.startTime):null;return new On({start:i,end:r})}writeFullTimeExtent(e,t){if(!e)return;let n=t.properties=t.properties||{},r=e.end,i=e.start;r&&(n.endTime=r!=null?r.getTime():null),i&&(n.startTime=i!=null?i.getTime():null)}readStopInterval(e,t,n){return e?qc.fromJSON({value:e.interval,unit:e.units},n):null}writeStopInterval(e,t,n,r){if(!e)return;let i=e.toJSON(r);Ea(n,{interval:i.value,units:i.unit},t)}readStops(e){return e?.length?e.map(t=>new Date(t)):null}writeStops(e,t,n){e?.length&&Ea(n,e.map(r=>r.getTime()),t)}clone(){return new Qh(ve({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([c({type:On,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Fe.prototype,"currentTimeExtent",void 0),l([Mt("currentTimeExtent")],Fe.prototype,"readCurrentTimeExtent",null),l([Ve("currentTimeExtent")],Fe.prototype,"writeCurrentTimeExtent",null),l([c({type:On,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Fe.prototype,"fullTimeExtent",void 0),l([Mt("fullTimeExtent")],Fe.prototype,"readFullTimeExtent",null),l([Ve("fullTimeExtent")],Fe.prototype,"writeFullTimeExtent",null),l([c({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Fe.prototype,"loop",void 0),l([c({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){let e=!!this.stopInterval,t=!!this.stops?.length,n=!(e||t);return{enabled:n,isRequired:n}}}}})],Fe.prototype,"numStops",void 0),l([c({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Fe.prototype,"numThumbs",void 0),l([c({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Fe.prototype,"stopDelay",void 0),l([c({type:qc,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){let e=this.numStops!=null,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],Fe.prototype,"stopInterval",void 0),l([Mt("stopInterval")],Fe.prototype,"readStopInterval",null),l([Ve("stopInterval")],Fe.prototype,"writeStopInterval",null),l([c({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Fe.prototype,"stops",void 0),l([Mt("stops")],Fe.prototype,"readStops",null),l([Ve("stops")],Fe.prototype,"writeStops",null),Fe=Qh=l([m("esri.webdoc.widgets.TimeSlider")],Fe);var nD=Fe;var Jh,fo=Jh=class extends M{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Jh(ve({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([c({type:tD,json:{write:!0}})],fo.prototype,"range",void 0),l([c({type:nD,json:{write:!0}})],fo.prototype,"timeSlider",void 0),l([c({type:eD,json:{write:!0}})],fo.prototype,"floorFilter",void 0),fo=Jh=l([m("esri.webdoc.Widgets")],fo);var rD=fo;var Tk={width:600,height:400},Tu=1.5;function iD(e,t){t=t||Tk;let{width:n,height:r}=t,i=n/r;return i<Tu?r=n/Tu:i>Tu&&(n=r*Tu),n>e.width&&(r*=e.width/n,n=e.width),r>e.height&&(n*=e.height/r,r=e.height),{width:Math.round(n),height:Math.round(r)}}function Xh(e){return{enabled:!!e?.length}}var ef,mo=ef=class extends M{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new ef({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([c({type:Boolean,json:{write:!0}})],mo.prototype,"exactMatch",void 0),l([c({type:String,json:{write:!0}})],mo.prototype,"name",void 0),l([We(Ba)],mo.prototype,"type",void 0),mo=ef=l([m("esri.webdoc.applicationProperties.SearchLayerField")],mo);var oD=mo;var tf,go=tf=class extends M{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new tf(ve({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([c({type:oD,json:{write:{isRequired:!0}}})],go.prototype,"field",void 0),l([c({type:String,json:{write:{isRequired:!0}}})],go.prototype,"id",void 0),l([c({type:qo,json:{write:!0}})],go.prototype,"subLayer",void 0),go=tf=l([m("esri.webdoc.applicationProperties.SearchLayer")],go);var sD=go;var nf,vo=nf=class extends M{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new nf({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([c({type:Boolean,json:{write:!0}})],vo.prototype,"exactMatch",void 0),l([c({type:String,json:{write:!0}})],vo.prototype,"name",void 0),l([We(Ba)],vo.prototype,"type",void 0),vo=nf=l([m("esri.webdoc.applicationProperties.SearchTableField")],vo);var aD=vo;var rf,Ks=rf=class extends M{constructor(e){super(e),this.field=null,this.id=null}clone(){return new rf(ve({field:this.field,id:this.id}))}};l([c({type:aD,json:{write:{isRequired:!0}}})],Ks.prototype,"field",void 0),l([c({type:String,json:{write:{isRequired:!0}}})],Ks.prototype,"id",void 0),Ks=rf=l([m("esri.webdoc.applicationProperties.SearchTable")],Ks);var lD=Ks;var of,uD=Q.ofType(sD),cD=Q.ofType(lD),gn=of=class extends M{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new uD,this.tables=new cD}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,n){t[n]=!e}clone(){return new of(ve({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([c({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],gn.prototype,"addressSearchEnabled",void 0),l([Mt("addressSearchEnabled")],gn.prototype,"readAddressSearchEnabled",null),l([Ve("addressSearchEnabled")],gn.prototype,"writeAddressSearchEnabled",null),l([c({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],gn.prototype,"enabled",void 0),l([c({type:String,json:{write:!0}})],gn.prototype,"hintText",void 0),l([c({type:uD,json:{write:{overridePolicy:Xh},origins:{"web-scene":{write:{isRequired:!0}}}}})],gn.prototype,"layers",void 0),l([c({type:cD,json:{read:!0,write:{overridePolicy:Xh}}})],gn.prototype,"tables",void 0),gn=of=l([m("esri.webdoc.applicationProperties.Search")],gn);var dD=gn;var sf,ku=sf=class extends M{constructor(e){super(e),this.search=null}clone(){return new sf(ve({search:this.search}))}};l([c({type:dD,json:{write:!0}})],ku.prototype,"search",void 0),ku=sf=l([m("esri.webdoc.applicationProperties.Viewing")],ku);var pD=ku;var af,yo=af=class extends M{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new af(ve({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([c({json:{write:!0}})],yo.prototype,"editing",void 0),l([c({json:{write:!0}})],yo.prototype,"offline",void 0),l([c({type:pD,json:{write:!0}})],yo.prototype,"viewing",void 0),yo=af=l([m("esri.webmap.ApplicationProperties")],yo);var hD=yo;var lf,Rt=lf=class extends M{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new lf({url:this.url})}};l([c({type:String,json:{write:{isRequired:!0}}})],Rt.prototype,"url",void 0),Rt=lf=l([m("esri.webdoc.support.SlideThumbnail")],Rt);var uf,vn=uf=class extends cg(M){constructor(e){super(e),this.name=null,this.thumbnail=new Rt,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Rt({url:e}):ka(Rt,e)}set viewpoint(e){let{targetGeometry:t,scale:n}=e;t!=null&&t.type==="point"&&n==null&&k.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){let{extent:n,viewpoint:r}=t;return ye.fromJSON(r||{targetGeometry:n})}writeViewpoint(e,t,n,r){if(!e)return;let{targetGeometry:i}=e;if(i==null||i.type==="extent")i!=null&&(t.extent=i.toJSON()),t[n]=e.toJSON();else{let o="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r?.messages?r.messages.push(new A("property:unsupported",o)):k.getLogger(this).error(o)}}clone(){return new uf(ve({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([c({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],vn.prototype,"name",void 0),l([c({type:Rt,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],vn.prototype,"thumbnail",void 0),l([Te("thumbnail")],vn.prototype,"castThumbnail",null),l([c({type:On,json:{write:!0}})],vn.prototype,"timeExtent",void 0),l([c({type:ye,nonNullable:!0,json:{write:!0}})],vn.prototype,"viewpoint",null),l([Mt("viewpoint",["extent","viewpoint"])],vn.prototype,"readViewpoint",null),l([Ve("viewpoint")],vn.prototype,"writeViewpoint",null),vn=uf=l([m("esri.webmap.Bookmark")],vn);var Qs=vn;var cf,Au=cf=class extends M{constructor(e){super(e),this.color=new nn([0,0,0,1])}clone(){return new cf(ve({color:this.color}))}};l([c({type:nn,json:{write:!0}})],Au.prototype,"color",void 0),Au=cf=l([m("esri.webmap.background.ColorBackground")],Au);var si=Au;var _r=class extends ke(_){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeZone=or,this.viewpoint=null}};l([c({type:si})],_r.prototype,"background",void 0),l([c({type:Ys})],_r.prototype,"rangeInfo",void 0),l([c({type:Rn})],_r.prototype,"spatialReference",void 0),l([c({nonNullable:!0})],_r.prototype,"timeZone",void 0),l([c({type:ye})],_r.prototype,"viewpoint",void 0),_r=l([m("esri.webmap.InitialViewProperties")],_r);var Js=_r;var zn=class extends jg{constructor(t,n){super(t,n,"webmap")}};var Xs=new zn(2,29),kk="Web Map",Ak="webmap",pf="web-map",fD=Q.ofType(Qs),Nk=Q.ofType(tv),Rk=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Ok="ArcGIS Pro",Pk=Hg.JSAPI,df={currentVersion:Xs,createInitialViewProperties:()=>new Js,parseVersion:zn.parse,itemType:kk,name:Ak,origin:pf},oe=class extends ng(Lr.LoadableMixin(Oa(Du))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new fD,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new Js,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this._debouncedSaveOperations=Tm((t,n,r)=>C(this,null,function*(){let{save:i,saveAs:o}=yield import("./chunk-OCPEKTWR.js");switch(t){case Yo.SAVE:return i(df,this,n);case Yo.SAVE_AS:return o(df,this,r,n)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){if(this.portalItem=fe(this.portalItem),this.utilityNetworks){let e=this.utilityNetworks.removeAll();for(let t of e)t.destroy();this.utilityNetworks.destroy()}}initialize(){if(this.when().catch(e=>{k.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Pk}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=Vm}readInitialViewProperties(e,t){let n=new Js;t.background&&(n.background=si.fromJSON(t.background));let r=t.initialState?.viewpoint;return r&&(r.rotation&&zn.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===Ok&&(r.rotation*=-1),n.viewpoint=ye.fromJSON(r)),t.mapRangeInfo&&(n.rangeInfo=Ys.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=Rn.fromJSON(t.spatialReference)),t.timeZone&&(n.timeZone=t.timeZone),n}writeInitialViewProperties(e,t,n,r){e&&(e.background?.color&&(t.background=e.background.write({},r)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},r)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},r)),t.timeZone=e.timeZone)}writeLayers(e,t,n,r){t[n]=this._writeLayers(e,r,"operational-layers")}readSourceVersion(e,t){let[n,r]=t.version.split(".");return new zn(parseInt(n,10),parseInt(r,10))}writeSourceVersion(e,t,n){t[n]=`${Xs.major}.${Xs.minor}`}writeTables(e,t,n,r){let i=this._writeLayers(e,r,"tables");i.length&&(t[n]=i)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(J_(df,this)),Promise.resolve(this)}loadAll(){return La(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,t){t=L(v({},t),{origin:pf});let n=this._getAuthoringPropsState();Nm(this,e,r=>super.read(e,r),t),this._restoreAuthoringPropsFromState(n)}write(e,t){if(this.loadStatus!=="loaded"){let n=new A("webmap:not-loaded","Web map must be loaded before it can be serialized");throw k.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),n}return this._removeDanglingLayerRefs(),t=L(v({},t),{origin:pf,restrictedWebMapWriting:!0,webmap:this}),super.write(e,t)}save(e){return C(this,null,function*(){return this._debouncedSaveOperations(Yo.SAVE,e)})}saveAs(e,t){return C(this,null,function*(){return this._debouncedSaveOperations(Yo.SAVE_AS,t,e)})}updateFrom(e,t){return C(this,null,function*(){let n=this._updateFromInternal(e,t);this._updateFromPromise=n,yield n,n===this._updateFromPromise&&(this._updateFromPromise=null)})}getLayerJSONFromResourceInfo(e){let t=this.resourceInfo;return this._collectAllLayersJSON([...t?.baseMap?.baseMapLayers||[],...t?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(n=>n.id===e.id)}updateItemThumbnail(){return C(this,null,function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())})}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Lm(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((t,n)=>(t.push(n),n.layerType==="GroupLayer"&&(t=t.concat(this._collectAllLayersJSON(n.layers||[]))),t),[])}_writeLayers(e,t,n){return t=L(v({},t),{layerContainerType:n}),e.map(r=>Kg(r,n==="tables"?null:this.getLayerJSONFromResourceInfo(r),t)).filter(An).toArray()}_validateJSON(e){let t=zn.parse(e.version||"","webmap");return Xs.validate(t),e.version=`${t.major}.${t.minor}`,e}_removeDanglingLayerRefs(){let e=this.applicationProperties,t=e?.viewing?.search,n=i=>this.allLayers.some(o=>o.id===i);if(t&&t.layers&&(t.layers=t.layers.filter(i=>n(i.id))),t&&t.tables&&(t.tables=t.tables.filter(i=>this.tables.some(o=>o.id===i.id))),e){let i=e.editing?.locationTracking;i?.info&&!n(i.info.layerId)&&(e.editing=null)}let r=this.presentation?.slides;r&&r.forEach(i=>{i.visibleLayers&&(i.visibleLayers=i.visibleLayers.filter(o=>n(o.id)))})}_updateFromInternal(e,t){return C(this,null,function*(){if(t??={},yield en(()=>e.ready),this._updateInitialViewProperties(e,t),e.map===this)for(let n of e.allLayerViews)"visible"in n&&"visible"in n.layer&&n._isOverridden("visible")&&(n.layer.visible=n.visible),"featureEffect"in n&&"featureEffect"in n.layer&&n._isOverridden("featureEffect")&&(n.layer.featureEffect=n.featureEffect);yield this._updateThumbnailUrl(e,t)})}_updateInitialViewProperties(e,t){if(t.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,t.viewpointExcluded||(this.initialViewProperties.viewpoint=new ye({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(let n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){let t=e.center.clone().normalize(),n=e.extent.clone(),r=n.width/2;return n.xmin=t.x-r,n.xmax=t.x+r,n}_updateThumbnailUrl(e,t){return C(this,null,function*(){if(t.thumbnailExcluded)return;let n=iD(e,t.thumbnailSize),r=yield e.takeScreenshot({format:"png",width:n.width,height:n.height});this._setAutoGeneratedThumbnail(r.dataUrl)})}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Pm(e)){let t=Fm(e),n=t?.mediaType,r=n&&Rk.get(n.toLowerCase())||null,i=`thumbnail${Date.now()}`;return r?`${i}.${r}`:i}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){let t=e;if(!t)throw new A("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};oe.VERSION=Xs,l([c()],oe.prototype,"_updateFromPromise",void 0),l([c({type:hD,json:{write:!0}})],oe.prototype,"applicationProperties",void 0),l([c({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],oe.prototype,"authoringApp",null),l([Ve("authoringApp")],oe.prototype,"writeAuthoringApp",null),l([c({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],oe.prototype,"authoringAppVersion",null),l([Ve("authoringAppVersion")],oe.prototype,"writeAuthoringAppVersion",null),l([c({type:fD,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],oe.prototype,"bookmarks",void 0),l([c({type:$_,json:{name:"mapFloorInfo",write:!0}})],oe.prototype,"floorInfo",void 0),l([c({type:Q_,json:{write:!0}})],oe.prototype,"geotriggersInfo",void 0),l([c({type:Js,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:si},"initialState.viewpoint":{type:ye},mapRangeInfo:{type:Ys},spatialReference:{type:Rn},"timeZone:":{type:String}}}}})],oe.prototype,"initialViewProperties",void 0),l([Mt("initialViewProperties")],oe.prototype,"readInitialViewProperties",null),l([Ve("initialViewProperties")],oe.prototype,"writeInitialViewProperties",null),l([c({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],oe.prototype,"layers",void 0),l([Ve("layers")],oe.prototype,"writeLayers",null),l([c({type:tg})],oe.prototype,"portalItem",void 0),l([c({json:{write:!0}})],oe.prototype,"presentation",void 0),l([c()],oe.prototype,"resourceInfo",void 0),l([c({readOnly:!0,type:zn,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],oe.prototype,"sourceVersion",void 0),l([Mt("sourceVersion")],oe.prototype,"readSourceVersion",null),l([Ve("sourceVersion")],oe.prototype,"writeSourceVersion",null),l([c({json:{read:!1,write:{ignoreOrigin:!0}}})],oe.prototype,"tables",void 0),l([Ve("tables")],oe.prototype,"writeTables",null),l([c()],oe.prototype,"thumbnailUrl",null),l([c()],oe.prototype,"updatingFromView",null),l([c({type:rD,json:{write:!0}})],oe.prototype,"widgets",void 0),l([c({type:Nk,json:{read:!0,write:!0}})],oe.prototype,"utilityNetworks",void 0),oe=l([m("esri.WebMap")],oe);var mD=oe;var Nu={widthBreakpoint:{getValue(e){let t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){let t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){let t=e.viewSize,n=t[0],r=t[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},hf={xsmall:544,small:768,medium:992,large:1200};function Fk(e){let t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function ff(e,t){return t?Nu[e].valueToClassName[t].split(" "):[]}var gD=e=>{let t=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=hf}initialize(){this.addHandles(E(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),de))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n===this._get("breakpoints"))return;let r=Fk(n);if(!r){let i=JSON.stringify(hf,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i)}n=r?n:hf,this._set("breakpoints",v({},n))}_updateClassNames(){if(!this.container)return;let n=zo.acquire(),r=zo.acquire(),i,o=!1;for(i in Nu){let s=this[i],a=Nu[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});s!==a&&(o=!0,this[i]=a,ff(i,s).forEach(u=>r.push(u)),ff(i,a).forEach(u=>n.push(u)))}o&&(this._applyClassNameChanges(n,r),zo.release(n),zo.release(r))}_applyClassNameChanges(n,r){let i=this.container;i&&(r.forEach(o=>i.classList.remove(o)),n.forEach(o=>i.classList.add(o)))}_removeActiveClassNames(){let n=this.container;if(!n)return;let r;for(r in Nu)ff(r,this[r]).forEach(i=>n.classList.remove(i))}};return l([c()],t.prototype,"breakpoints",null),l([c()],t.prototype,"orientation",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),l([c()],t.prototype,"heightBreakpoint",void 0),t=l([m("esri.views.BreakpointsOwner")],t),t};var Dr=class extends _{constructor(){super(...arguments),this.items=new Q,this._watchUpdatingTracking=new ur,this._callbacks=new Map,this._projector=Uc(),this._hiddenProjector=Uc()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(let n of t.added){let r=()=>n.render();this._callbacks.set(n,r),this._projector.append(this.surface,r)}for(let n of t.removed){let r=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(r.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){let t=this._hiddenSurface,n=this._hiddenProjector,r,i=()=>(r=e.render(),r);n.append(t,i),n.renderNow();let o={left:0,top:0,right:0,bottom:0};if(r?.domNode){let s=r.domNode.getBoundingClientRect();o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom}for(n.detach(i);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){let n=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}prepare(){return C(this,null,function*(){yield document.fonts.load(this._fontString()).catch(()=>{})})}renderCanvas(e,t){let n=!!t?.disableDecorations;if(!this.items.some(i=>i.visible&&!(n&&i.isDecoration)))return;let r=e.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(i=>{n&&i.isDecoration||(r.save(),i.renderCanvas(r),r.restore())}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([c({readOnly:!0})],Dr.prototype,"surface",void 0),l([c({readOnly:!0})],Dr.prototype,"items",void 0),l([c({readOnly:!0})],Dr.prototype,"needsRender",null),l([c({readOnly:!0})],Dr.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],Dr.prototype,"updating",null),Dr=l([m("esri.views.overlay.ViewOverlay")],Dr);var mf=Dr;var gf=[0,0];function Lk(e){let t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return gf[0]=n.left+(t?.pageXOffset??0),gf[1]=n.top+(t?.pageYOffset??0),gf}function vD(e){e&&(Ra(e),e.parentNode&&e.parentNode.removeChild(e))}function Vk(e){let t=document.createElement("div");return e.appendChild(t),t}var ea=16,Ru=750,jk=512,Bk=2,yD=e=>{let t=class extends e{constructor(...n){super(...n),this._freqInfo={freq:ea,time:Ru},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([E(()=>this.cursor,r=>{let{surface:i}=this;i&&i.setAttribute("data-cursor",r)}),E(()=>this.navigating,r=>{let{surface:i}=this;i&&i.setAttribute("data-navigating",r.toString())})])}initialize(){let n=it("mac"),r=()=>C(this,null,function*(){n&&(yield en(()=>this.ready),this.messagesCommon=yield Hm("esri/t9n/common").catch(()=>{}))});r(),this.addHandles([E(()=>this.ui,(i,o)=>this._handleUIChange(i,o),de),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),Aa(r)])}destroy(){this.destroyed||(this.ui=fe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){let r=this._get("container"),i=Na(n);if(i||typeof n!="string"||k.getLogger(this).error("#container",`element with id '${n}' not found`),r===i)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(vD(this.root),this._set("root",null)),this.userContent&&($c(this.userContent,r),vD(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");let o=document.createElement("div");o.className="esri-view-user-storage",$c(i,o),i.appendChild(o),this._set("userContent",o);let s=document.createElement("div");s.className="esri-view-root",i.insertBefore(s,i.firstChild),this._set("root",s);let a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,s.appendChild(a),this._set("surface",a);let u=new mf;s.appendChild(u.surface),this._set("overlay",u),this.addHandles(E(()=>u.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Lt({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Ge(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){let n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(n,r,i){let o=this.position;return n-=o?o[0]:0,r-=o?o[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}containerToPage(n,r,i){let o=this.position;return n+=o?o[0]:0,r+=o?o[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}_handleUIChange(n,r){this.removeHandles("ui"),r&&r!==n&&r.destroy(),n&&(n.view=this,this.addHandles(E(()=>this.root,i=>{n.container=i?Vk(i):null},de),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let n=this._freqInfo;n.freq=ea,n.time=Ru,this.addHandles([Em(window,"resize",()=>{n.freq=ea,n.time=Ru}),Lt({prepare:r=>{let i=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,i&&(o.freq=ea,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;let s=this._position();o.freq=s||i?ea:Math.min(Ru,o.freq*Bk),!i&&o.freq>=jk&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let n=this.container,r=n?n.clientWidth:0,i=n?n.clientHeight:0;if(r===0||i===0)return this.suspended||this._set("suspended",!0),!1;let o=this.width,s=this.height;return r===o&&i===s?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:s,width:r,height:i}),!0)}_position(){let n=this.container,r=this.position,i=n&&Lk(n);return!!i&&(!r||i[0]!==r[0]||i[1]!==r[1])&&(this._set("position",[i[0],i[1]]),!0)}forceDOMReadyCycle(){}};return l([c()],t.prototype,"container",null),l([c({readOnly:!0})],t.prototype,"focused",null),l([c({readOnly:!0})],t.prototype,"height",void 0),l([c()],t.prototype,"messagesCommon",void 0),l([c({type:mf})],t.prototype,"overlay",void 0),l([c({readOnly:!0})],t.prototype,"position",void 0),l([c({readOnly:!0})],t.prototype,"resizing",void 0),l([c({readOnly:!0})],t.prototype,"root",void 0),l([c({value:null,readOnly:!0})],t.prototype,"size",null),l([c({readOnly:!0})],t.prototype,"surface",void 0),l([c({readOnly:!0})],t.prototype,"suspended",void 0),l([c()],t.prototype,"ui",void 0),l([c({readOnly:!0})],t.prototype,"userContent",void 0),l([c({readOnly:!0})],t.prototype,"width",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),t=l([m("esri.views.DOMContainer")],t),t};function yn(e){return e!=null&&"open"in e&&"declaredClass"in e}function wD(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}var bD=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([E(()=>[this.ui,this.popup],([n,r],i)=>{let o="popup",s="manual";if(i){let[a,u]=i;a&&yn(u)&&(u.view=null,wD(u)&&a.remove(u,o))}n&&yn(r)&&(r.view=this,wD(r)&&n.add(r,{key:o,position:s,internal:!0}))},de),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(!yn(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(yn(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(()=>C(this,null,function*(){yield this.setupPopup(),yn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)}))))},Pn.WIDGET)]),en(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{import("./chunk-ZZAYM4LG.js")})}destroy(){this.destroyed||this.closePopup()}openPopup(n){return C(this,null,function*(){if(yn(this.popup))return this.popup.open(n);try{if(yield this.setupPopup(),!this.popup)return void k.getLogger(this).error(new A("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}})}closePopup(){this._popupSetupTask?.abort(),yn(this.popup)&&this.popup.close()}fetchPopupFeatures(n,r){return C(this,null,function*(){yield this.when();let{location:i,queryArea:o,layerViewsAndGraphics:s,clientOnlyGraphics:a}=yield this._prepareFetchPopupFeatures(n,r),u=Promise.resolve(a),d=this._queryLayerPopupFeatures(o,s,r),p=d.map(h=>h.promise);return{location:i,clientOnlyGraphics:a,allGraphicsPromise:Sm([u,...p]).then(h=>Array.from(new Set(h.flat()))),promisesPerLayerView:d}})}setupPopup(){return C(this,null,function*(){if(this._popupSetupTask?.abort(),this.popup&&!yn(this.popup))return this._popupSetupTask=_i(n=>C(this,null,function*(){let{default:r}=yield import("./chunk-ZZAYM4LG.js");if(et(n),!this.popup||yn(this.popup))return;let i=this.popup;delete i.open,delete i.close,this.popup=new r(i)})),this._popupSetupTask.promise})}_queryLayerPopupFeatures(n,r,i){return r.map(({layerView:o,graphics:s})=>{let a={clientGraphics:s,event:i?.event,signal:i?.signal,defaultPopupTemplateEnabled:i!=null&&!!i.defaultPopupTemplateEnabled},u=o.fetchPopupFeatures(n,a);return{layerView:o,promise:u}})}_isValidPopupGraphic(n,r){return n&&!!n.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}_prepareFetchPopupFeatures(n,r){return C(this,null,function*(){let{clientGraphics:i,queryArea:o,location:s}=yield this._popupHitTestGraphics(n,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:u,clientOnlyGraphics:d}=this._graphicsPerFetchPopupLayerView(i,a);return{clientOnlyGraphics:d,layerViewsAndGraphics:u,queryArea:o,location:s}})}_popupHitTestGraphics(n,r){return C(this,null,function*(){let i=yield this.popupHitTest(n),o=i.results,s=i.mapPoint,a=o.filter(d=>d.type==="graphic"&&this._isValidPopupGraphic(d.graphic,r)),u=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(d=>d.graphic),queryArea:s,location:s||u}})}_getFetchPopupLayerViews(){let n=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&n.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&n.push(this.graphicsView),n.reverse()}_isValidPopupLayerView(n){return n!=null&&(!("layer"in n)||!n.suspended)&&"fetchPopupFeatures"in n}_graphicsPerFetchPopupLayerView(n,r){let i=[],o=new Map,s=r.map(a=>{let u=[];return"layer"in a?o.set(a.layer,u):o.set(a.graphics,u),{layerView:a,graphics:u}});for(let a of n){let u=o.get(a.layer)||o.get(a.sourceLayer)||null;u?u.push(a):i.push(a)}return{layerViewsAndGraphics:s,clientOnlyGraphics:i}}};return l([c({cast(n){return!n||yn(n)||typeof n=="object"&&(n.open=r=>(Rc(k.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),n.close=()=>(Rc(k.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),n}})],t.prototype,"popup",void 0),l([c()],t.prototype,"popupEnabled",void 0),t=l([m("esri.views.PopupView")],t),t};var ta=class extends Jg{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(k.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};ta=l([m("esri.support.AnalysesCollection")],ta);var Gn=class extends _{constructor(e){super(e),this.view=null,this.baseLayerViews=new Q,this.referenceLayerViews=new Q,this._loadingHandle=E(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},de)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(let e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(let e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;let e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};l([c({constructOnly:!0})],Gn.prototype,"view",void 0),l([c({readOnly:!0})],Gn.prototype,"baseLayerViews",void 0),l([c({readOnly:!0})],Gn.prototype,"referenceLayerViews",void 0),l([c({readOnly:!0})],Gn.prototype,"suspended",null),l([c({type:Boolean,readOnly:!0})],Gn.prototype,"updating",null),Gn=l([m("esri.views.BasemapView")],Gn);function $k(e){return"tryRecycleWith"in e}var vf=class{constructor(t,n,r){this.layer=t,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Go(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ta(this._controller.signal,()=>{let i=new A("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(i)})}tryRecycle(t){if(!this.done||!this.layerView||!$k(this.layerView))return null;let n=this.layer.type,r=this._controller.signal;for(let i=0;i<t.length;i++){let o=t[i];if(o.type!==n)continue;let s=this.layerView.tryRecycleWith(o,{signal:r});if(s){t.splice(i,1),this.layer=o;let a=this.layerView,u=a.view;return this.promise=Promise.race([s.then(()=>(et(this._controller.signal),o.emit("layerview-destroy",{view:u,layerView:a}),u.emit("layerview-destroy",{view:u,layerView:a}),o.emit("layerview-create",{view:u,layerView:a}),u.emit("layerview-create",{view:u,layerView:a}),a)),new Promise((d,p)=>Ta(this._controller.signal,()=>p(Pc())))]),this.promise}}return null}destroy(){this._controller.abort();let{layerView:t}=this;if(t){let{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:n,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}start(){return C(this,null,function*(){if(this._started)return;this._started=!0;let{_controller:{signal:t},layer:n,view:r}=this;this._map=r.map;try{let i,o;if(yield n.load({signal:t}),n.prefetchResources&&(yield n.prefetchResources({signal:t})),Uk(n))i=yield n.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new A("layer:view-not-supported","No layerview implementation was found");let u=yield this.layerViewImporter.importLayerView(n);et(t),i="default"in u?new u.default({layer:n,view:r}):new u({layer:n,view:r})}let s=()=>{o=Ge(o),i.destroyed||i.destroy(),i.layer=null,i.parent=null,i.view=null,this.done=!0};o=Ta(t,s),et(t);try{yield i.when()}catch(u){throw s(),u}if(!this._map?.allLayers?.includes(n))return s(),void this._deferred.reject(new A("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=i,n.emit("layerview-create",{view:r,layerView:i}),r.emit("layerview-create",{layer:n,layerView:i}),this.done=!0,this._deferred.resolve(i)}catch(i){n.emit("layerview-create-error",{view:r,error:i}),r.emit("layerview-create-error",{layer:n,error:i}),this.done=!0,this._deferred.reject(new A("layerview:create-error","layerview creation failed",{layer:n,error:i}))}})}},Ot=class extends _{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new ur,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let t=this.view.map?.allLayers;if(t)for(let n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Go(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(km(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let n=new Set,r=[],i=this.view.ready,o=a=>{if(a!=null){for(let u of a)if(u){n.add(u);let d=this._layerLayerViewInfoMap.get(u);d&&i?d.start():d||this._recyclingInfoMap.has(u)||r.push(u),"layers"in u&&u.layers&&o(u.layers)}}};for(let a of this._rootCollectionNames)o(Ma(this,a));for(let[a,u]of this._layerLayerViewInfoMap)if(!n.has(a)){this._layerLayerViewInfoMap.delete(u.layer);let d=u.tryRecycle(r);d?(this.notifyChange("updating"),this._recyclingInfoMap.set(u.layer,u),d.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule()})):u.destroy()}for(let[a,u]of this._recyclingInfoMap)n.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy());for(let a of r)this._createLayerView(a);this._refreshCollections();let s=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);n.forEach(a=>"layers"in a&&s.push(a.layers)),this.addHandles(s.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Xt(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),E(()=>{let e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),Nn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),za(this._recyclingInfoMap),za(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Pc()),this._workPromise=null)}get _layersToLayerViews(){let e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||tr(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(let t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(za(this._layerLayerViewInfoMap),this._refreshCollections())}whenLayerView(e){return C(this,null,function*(){if(yield this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new A("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise})}_refreshCollections(){for(let[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(Ma(this,e),Ma(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void(t&&t.removeAll());let r=0;for(let i of e){let o=this._layerLayerViewInfoMap.get(i);if(!o?.layerView)continue;let s=o.layerView;s.layer=i,s.parent=n,t.at(r)!==s&&t.splice(r,0,s),i.layers&&this._populateLayerViewsOwners(i.layers,s.layerViews,s),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);let t=new vf(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),n=>{n&&(bi(n)||n.name==="cancelled:layerview-create")||k.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([c()],Ot.prototype,"_workPromise",void 0),l([c({readOnly:!0})],Ot.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],Ot.prototype,"_layersToLayerViews",null),l([c({readOnly:!0})],Ot.prototype,"_rootCollectionNames",null),l([c()],Ot.prototype,"layerViewImporter",void 0),l([c()],Ot.prototype,"supportsGround",void 0),l([c({readOnly:!0})],Ot.prototype,"updating",null),l([c({readOnly:!0})],Ot.prototype,"updatingRemaining",null),l([c({constructOnly:!0})],Ot.prototype,"view",void 0),Ot=l([m("esri.views.LayerViewManager")],Ot);var _D=Ot;function Uk(e){return"createLayerView"in e&&e.createLayerView!=null}var bt=class extends _{constructor(e){super(e),this.factor=1.5,this.offset=be(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([c({type:Number})],bt.prototype,"factor",void 0),l([c({nonNullable:!0})],bt.prototype,"offset",void 0),l([c()],bt.prototype,"position",void 0),l([c({type:Number,range:{min:0}})],bt.prototype,"size",void 0),l([c()],bt.prototype,"maskUrl",void 0),l([c()],bt.prototype,"maskEnabled",void 0),l([c()],bt.prototype,"overlayUrl",void 0),l([c()],bt.prototype,"overlayEnabled",void 0),l([c({readOnly:!0})],bt.prototype,"version",null),l([c({type:Boolean})],bt.prototype,"visible",void 0),bt=l([m("esri.views.Magnifier")],bt);var yf=bt;var na=class extends ke(_){constructor(e){super(e),this.accentColor=new nn([255,127,0]),this.textColor=new nn([255,255,255])}};l([c({type:nn,nonNullable:!0})],na.prototype,"accentColor",void 0),l([c({type:nn,nonNullable:!0})],na.prototype,"textColor",void 0),na=l([m("esri.views.Theme")],na);var Ou=na;var wf;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(wf||(wf={}));var _f=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],DD={};function CD(e){return!!DD[e]}function Hk(e){for(let t of e)if(!CD(t))return!1;return!0}_f.forEach(e=>{DD[e]=!0});var Pu=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,n,r,i){let o=Array.isArray(t)?t:t.split(",");if(!Hk(o))return o.some(CD)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(n)?a=n:(s=n,a=[]),typeof r=="function"?s=r:i=r,i=i??Pn.DEFAULT;let u=this._createUniqueGroupName(),d=new bf(this.view,o,a,s);this._handlers.set(u,{handler:d,priority:i});for(let p of o){let h=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,h+1)}return this.inputManager&&this.inputManager.installHandlers(u,[d],i),Sa(()=>this._removeHandler(u,o))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,n){if(this._handlers.has(t)){this._handlers.delete(t);for(let r of n){let i=this._handlerCounts.get(r);i===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},bf=class extends J{constructor(t,n,r,i){super(!0),this._latestDragStart=void 0,this.view=t;for(let o of n)switch(o){case"click":this.registerIncoming("click",r,s=>i(this._wrapClick(s)));break;case"double-click":this.registerIncoming("double-click",r,s=>i(this._wrapDoubleClick(s)));break;case"immediate-click":this.registerIncoming("immediate-click",r,s=>i(this._wrapImmediateClick(s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,s=>i(this._wrapImmediateDoubleClick(s)));break;case"hold":this.registerIncoming("hold",r,s=>i(this._wrapHold(s)));break;case"drag":this.registerIncoming("drag",r,s=>{let a=this._wrapDrag(s);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,s=>i(this._wrapKeyDown(s)));break;case"key-up":this.registerIncoming("key-up",r,s=>i(this._wrapKeyUp(s)));break;case"pointer-down":this.registerIncoming("pointer-down",r,s=>i(this._wrapPointer(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,s=>i(this._wrapPointer(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,s=>i(this._wrapPointer(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,s=>i(this._wrapPointerDrag(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,s=>i(this._wrapMouseWheel(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,s=>i(this._wrapPointer(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,s=>i(this._wrapPointer(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,s=>{i(this._wrapGamepad(s))});break;case"focus":this.registerIncoming("focus",r,s=>{i(this._wrapFocus(s))});break;case"blur":this.registerIncoming("blur",r,s=>{i(this._wrapBlur(s))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:n=>t.async(n),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:n=>t.async(n),preventDefault:()=>t.preventDefault()}}_wrapClick(t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:p}=t;return{type:"click",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:p,screenPoint:be(o,s),mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:p}=t;return{type:"double-click",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:p,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-click",pointerId:d,pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-double-click",pointerId:d,pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapHold(t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a}=t.data,{cancelable:u,timestamp:d}=t;return{type:"hold",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:d,mapPoint:this._getMapPoint(o,s),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,n){return this.view.toMap(be(t,n),{exclude:[]})}_wrapDrag(t){let n=t.data,{x:r,y:i}=n.center,{action:o,pointerType:s,button:a}=n;if(o==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;let u=n.pointer.native,d=n.buttons,{cancelable:p,timestamp:h}=t,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:r,y:i,origin:f,pointerType:s,button:a,buttons:d,radius:n.radius,angle:sg(n.angle),native:u,timestamp:h,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){let{key:n,repeat:r,native:i}=t.data,{cancelable:o,timestamp:s}=t;return{type:"key-down",key:n,repeat:r,native:i,timestamp:s,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){let{key:n,native:r}=t.data,{cancelable:i,timestamp:o}=t;return{type:"key-up",key:n,native:r,timestamp:o,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:s=>t.async(s),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,n){let{x:r,y:i,button:o,buttons:s,native:a,eventId:u}=t.data,d=a.pointerId,p=a.pointerType,{cancelable:h,timestamp:f}=t;return{type:n,x:r,y:i,pointerId:d,pointerType:p,button:o,buttons:s,native:a,timestamp:f,eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){let{x:n,y:r,buttons:i,native:o,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,u=t.data.startEvent.native.pointerId,d=t.data.startEvent.native.pointerType,p=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:g}=t;return{type:"pointer-drag",x:n,y:r,pointerId:u,pointerType:d,button:a,buttons:i,action:p,origin:h,native:o,timestamp:g,eventId:s,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:w=>t.async(w),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){let{cancelable:n,data:r,timestamp:i}=t,{x:o,y:s,deltaY:a,native:u}=r;return{type:"mouse-wheel",x:o,y:s,deltaY:a,native:u,timestamp:i,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){let{action:n,state:r,device:i}=t.data,{cancelable:o,timestamp:s}=t,{buttons:a,axes:u}=r;return{type:"gamepad",device:i,timestamp:s,action:n,buttons:a,axes:u,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}};var ai,ED,ID;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(ai||(ai={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(ED||(ED={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(ID||(ID={}));function SD(e){return[e.on("before-add",t=>{let n=t.item;if(n==null||e.includes(n))return k.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on("after-remove",t=>{let n=t.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function ra(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(ai.USER)&&e.getEditableFlag(ai.MANAGER)}function qt(e){return be(e.x,e.y)}function Df(e,t){let n=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return n?be(t.clientX-n.left,t.clientY-n.top):be(0,0)}function Fu(e,t){return t instanceof Event?Df(e,t):qt(t)}function Lu(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}var Vu=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,n){let r=()=>t.stopPropagation();switch(t.type){case"pointer-move":MD(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!xD(t))break;let i=qt(t),o=this._intersect(i,t.pointerType,n.forEachTool);if(o==null)break;let s=o.manipulator,a=o.tool;s==null||a==null||!s.interactive||s.grabbable&&s.grabbableForEvent(t)||!s.grabbing||s.dragging||this._ungrabManipulatorBeforeDragging(s,t,n),s!=null&&a!=null&&s.interactive&&s.grabbable&&s.grabbableForEvent(t)&&!s.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:s,tool:a,start:i,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(o.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,n);break;case"pointer-drag":{if(!xD(t))break;let i=this._grabbedManipulators.get(t.pointerId),o=i?.manipulator,s=i?.tool;if(o==null||s==null)break;let a=qt(t);a.x=Hc(a.x,0,n.view.width),a.y=Hc(a.y,0,n.view.height);let u=i.start,d=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,d?o.events.emit("drag",{action:"update",start:u,screenPoint:a}):o.events.emit("drag",{action:"start",start:u,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:s,manipulator:o,start:u}));break;case"end":o.dragging=!1,d&&o.events.emit("drag",{action:"end",start:u,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,n)}r();break}case"immediate-click":{let i=qt(t),o=this._intersect(i,t.pointerType,n.forEachTool);if(zk(t)||n.forEachTool(d=>{if((o==null||o.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let p=!1;d.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,p=!0)}),p&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}),o==null)break;let{manipulator:s,tool:a}=o;if(!s.interactive)break;s.selectable&&a.automaticManipulatorSelection&&(s.selected=!s.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let u=t.native.shiftKey;s.events.emit("immediate-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:r}),Cf(s,r);break}case"click":{let i=qt(t),o=this._intersect(i,t.pointerType,n.forEachTool),s=o?.manipulator;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{let i=qt(t),o=this._intersect(i,t.pointerType,n.forEachTool),s=o!=null?o.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),Cf(s,r);break}case"immediate-double-click":{let i=qt(t),o=this._intersect(i,t.pointerType,n.forEachTool),s=o!=null?o.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),Cf(s,r);break}}this._onFocusChange(n.forEachTool)}_ungrabManipulatorBeforeDragging(t,n,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:qt(n)}),this._grabbedManipulators.forEach(({manipulator:i},o)=>{i===t&&this._grabbedManipulators.delete(o)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,n){let r=this._grabbedManipulators.get(t.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:qt(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(n.setActiveTool))}_cursorFromMap(t){let n=null;return tr(t,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(n=r.grabCursor,!0):!!r.cursor&&(n=r.cursor,!0))),n}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){let n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>{n.add(i)}),this._hoveredManipulators.forEach(({tool:i})=>{r.add(i)}),t(i=>{i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);let o=this._grabbedManipulators.values(),s=Cm(o,({tool:a})=>a===i);i.firstGrabbedManipulator=s!=null?s.manipulator:null})}clearPointers(t,{forEachTool:n,setActiveTool:r},i=!0,o){let s=(a,u)=>a===t&&(o==null||o===u);this._grabbedManipulators.forEach(({tool:a,manipulator:u,pointerType:d},p)=>{s(a,u)&&(this._grabbedManipulators.delete(p),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:a,manipulator:u},d)=>{s(a,u)&&(this._draggedManipulators.delete(d),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:u},d)=>{s(a,u)&&(this._hoveredManipulators.delete(d),u.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(n)}_intersect(t,n,r){let i=null;return r(o=>{if(o.manipulators==null||!ra(o))return!1;let s=o.manipulators.intersect(t,n);return s!=null&&(i={tool:o,manipulator:s},!0)}),i}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(be(n.x,n.y),r,n.pointerType,t)})}handleHoverEvent(t,n){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!MD(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(qt(t),t.pointerId,t.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(t,n,r,i){let o=this._intersect(t,r,i),s=this._hoveredManipulators.get(n)?.manipulator;o==null||o.manipulator.interactive||(o=null),o!=null&&s===o.manipulator||(s!=null&&(s.hovering=!1),o!=null?(o.manipulator.hovering=!0,this._hoveredManipulators.set(n,o)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function MD(e){return e==="mouse"}function xD(e){return e.pointerType!=="mouse"||e.button===0}function zk(e){return!!e.native.shiftKey}function Cf(e,t){e?.consumesClicks&&t()}var TD="attached",Ef="tools",kD=1e3,Wt=class extends _{constructor(e){super(e),this._updatingHandles=new ur,this._clock=Jt,this._manipulatorState=new Vu,this.tools=new Q,this.cursor=null,this._interacting=!1,this._interactingTimeout=kD,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(let n of this.tools.items)if(t(n))return}}initialize(){this.addHandles([this.view.on(_f,e=>{this._handleInputEvent(e)},Pn.TOOL),...SD(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void k.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;let t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(let n of this.tools){this._updateToolEditableFlag(n);let r=ra(n);this.activeTool!=null&&r||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ge(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([E(()=>{let{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],TD):this.addHandles(E(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(TD),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))})}_handleInputEvent(e){let t=!1,n=L(v({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(n)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Ef),this._forEachTool(e=>{if(e instanceof _){let t=E(()=>[e.cursor,e.visible,e.editable],()=>{ra(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,Ef)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Ef)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(ai.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){let e=this;return{setClock:t=>this._clock=t,set interactingTimeoutEnabled(t){e._interactingTimeout=t?kD:0},get interactingTimeoutEnabled(){return e._interactingTimeout!==0}}}};l([c({constructOnly:!0,nonNullable:!0})],Wt.prototype,"view",void 0),l([c({value:null})],Wt.prototype,"activeTool",null),l([c({readOnly:!0,type:Q})],Wt.prototype,"tools",void 0),l([c({readOnly:!0})],Wt.prototype,"cursor",void 0),l([c({readOnly:!0})],Wt.prototype,"updating",null),l([c()],Wt.prototype,"_interacting",void 0),l([c({readOnly:!0})],Wt.prototype,"interacting",null),Wt=l([m("esri.views.ToolViewManager")],Wt);var wo=class extends _{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Gk.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){let e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return qk[this.deviceType]}};l([c({nonNullable:!0,readOnly:!0})],wo.prototype,"nativeIndex",void 0),l([c({type:String,readOnly:!0})],wo.prototype,"deviceType",null),l([c({type:Number,readOnly:!0})],wo.prototype,"axisThreshold",null),wo=l([m("esri.views.input.gamepad.GamepadInputDevice")],wo);var Gk=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),qk={standard:.15,spacemouse:.025,unknown:0},bo=wo;var ia=class extends _{constructor(...e){super(...e),this.devices=new Q,this.enabledFocusMode="document"}};l([c({type:Q.ofType(bo),readOnly:!0})],ia.prototype,"devices",void 0),l([c({type:["document","view","none"]})],ia.prototype,"enabledFocusMode",void 0),ia=l([m("esri.views.input.gamepad.GamepadSettings")],ia);var AD=ia;var ju=class extends _{constructor(){super(...arguments),this.gamepad=new AD}};l([c({readOnly:!0})],ju.prototype,"gamepad",void 0),ju=l([m("esri.views.input.Input")],ju);var ND=ju;var Cr=class extends _{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([c({type:Boolean,nonNullable:!0})],Cr.prototype,"enabled",void 0),l([c({type:bo})],Cr.prototype,"device",void 0),l([c({type:["pan","zoom"],nonNullable:!0})],Cr.prototype,"mode",void 0),l([c({type:["forward-down","forward-up"],nonNullable:!0})],Cr.prototype,"tiltDirection",void 0),l([c({type:Number,nonNullable:!0})],Cr.prototype,"velocityFactor",void 0),Cr=l([m("esri.views.navigation.gamepad.GamepadSettings")],Cr);var If=Cr;var li=class extends _{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new If,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};l([c({type:Boolean})],li.prototype,"browserTouchPanEnabled",void 0),l([c({type:If,nonNullable:!0})],li.prototype,"gamepad",void 0),l([c({type:Boolean})],li.prototype,"momentumEnabled",void 0),l([c({type:Boolean})],li.prototype,"mouseWheelZoomEnabled",void 0),li=l([m("esri.views.navigation.Navigation")],li);var Sf=li;var RD;function OD(e){let t=e.url?dg(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&PD(e)&&e.heightModelInfo?e.heightModelInfo:Wk(e)?Wo.deriveUnitFromSR(Zk,e.spatialReference):null}function PD(e){return"heightModelInfo"in e}function FD(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Wk(e){return FD(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):VD(e)}function LD(e){return e.layers!=null||VD(e)||FD(e)||PD(e)}function VD(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(RD||(RD={}));var Zk=new Wo({heightModel:"gravity-related-height"});var xf,Mf=null;function Yk(e){return C(this,null,function*(){Mf||(Mf=import("./chunk-364UN34Y.js").then(t=>xf=t)),yield Mf,et(e)})}function Tf(e,t,n,r){return C(this,null,function*(){if(!e)return null;let i=e.spatialReference;return wg()||$a(i,t)?Ci(e,t):xf?xf.projectGeometry(e,t,n,r):(yield Promise.race([Yk(r),_g(r)]),Tf(e,t,n,r))})}var se=class extends _{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Ho(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers,n=null;for(let i of e){let o=this._getSupportedSpatialReferences(i);if(o.length>0){let s=this._narrowDownSpatialReferenceCandidates(n,o);s!=null&&(n=s)}if(n!=null&&n.length===1)break}if(t&&(n==null||n.length!==1))return{updating:!0};let r=this._pickSpatialReferenceCandidate(n);return{spatialReference:r!=null?r.spatialReference:null,viewingMode:r!=null?r.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){let n=e[0].tileInfo;return{tileInfo:n&&n.spatialReference.equals(this.spatialReference)?n:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers;for(let n of e)if(LD(n)){let r=OD(n);if(r)return{heightModelInfo:r,vcsWkid:n.spatialReference?.vcsWkid,latestVcsWkid:n.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let e=this._allLayers,t=e.updating,n=[];for(let r of e.layers){let i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:i[0],s=i.find(a=>a.spatialReference.equals(this.spatialReference))??o;if(s)return{candidates:[{extent:s,layer:r}],updating:!1};if(this._getSupportedSpatialReferences(r).length>0)for(let a of i)n.push({extent:a,layer:r})}return{candidates:n,updating:t}}get _extentTask(){let{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(e),r=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Ho(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:r.clone(),task:_i(i=>C(this,null,function*(){try{let o=yield Tf(n.extent,r,"portalItem"in n.layer?n.layer.portalItem:void 0,i);this._projectExtentTask=L(v({},this._projectExtentTask),{task:null,output:o})}catch{if(Im(i))return;this._projectExtentTask=L(v({},this._projectExtentTask),{task:null})}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;let n=[],r=(i,o)=>i!=null?o!=null?i===o&&i:i:o;for(let i of e)for(let o of t){if(!i.spatialReference.equals(o.spatialReference))continue;let s=r(i.viewingMode,o.viewingMode);if(s!==!1){n.push({spatialReference:i.spatialReference,viewingMode:s});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){let t=this.defaultSpatialReference;return e==null||e.length<1?t!=null?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(t))&&(e=e.filter(({spatialReference:n})=>n.equals(t))),e.length>1&&e.some(({viewingMode:n})=>n!==Wc.Local)&&(e=e.filter(({viewingMode:n})=>n!==Wc.Local)),e[0])}_getSupportedSpatialReferences(e){let t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];let n=[];for(let r of t){let i=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(i!=null){let o=i.constraints!=null?i.constraints:[{spatialReference:r,viewingMode:null}];for(let{spatialReference:s,viewingMode:a}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!s.equals(this.userSpatialReference)||n.push({spatialReference:s,viewingMode:a})}}return n}_pickExtentCandidate(e){let t=this.spatialReference;return e.find(({extent:n})=>t.equals(n.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};let t=new kf;for(let n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(let n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{bi(t)||console.log(t)}),"loading"):e.loadStatus:"loaded"}};l([c()],se.prototype,"required",void 0),l([c({constructOnly:!0})],se.prototype,"map",void 0),l([c({constructOnly:!0})],se.prototype,"getSpatialReferenceSupport",void 0),l([c()],se.prototype,"defaultSpatialReference",void 0),l([c()],se.prototype,"userSpatialReference",void 0),l([c()],se.prototype,"sourcePreloadCount",void 0),l([c()],se.prototype,"priorityCollection",void 0),l([c()],se.prototype,"requiresExtentInSpatialReference",void 0),l([c()],se.prototype,"suspended",void 0),l([c({readOnly:!0})],se.prototype,"ready",null),l([c({readOnly:!0})],se.prototype,"heightModelInfoReady",null),l([c({readOnly:!0})],se.prototype,"spatialReference",null),l([c({readOnly:!0})],se.prototype,"extent",null),l([c({readOnly:!0})],se.prototype,"heightModelInfo",null),l([c({readOnly:!0})],se.prototype,"vcsWkid",null),l([c({readOnly:!0})],se.prototype,"latestVcsWkid",null),l([c({readOnly:!0})],se.prototype,"viewingMode",null),l([c({readOnly:!0})],se.prototype,"tileInfo",null),l([c({readOnly:!0})],se.prototype,"mapCollections",null),l([c({readOnly:!0})],se.prototype,"_allLayers",null),l([c({readOnly:!0})],se.prototype,"_spatialReferenceTask",null),l([c({readOnly:!0})],se.prototype,"_tileInfoTask",null),l([c({readOnly:!0})],se.prototype,"_heightModelInfoTask",null),l([c({readOnly:!0})],se.prototype,"_extentCandidatesTask",null),l([c()],se.prototype,"_extentTask",null),l([c()],se.prototype,"_projectExtentTask",void 0),se=l([m("esri.views.support.DefaultsFromMap")],se);var kf=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var oa,I=oa=class extends nr.EventedMixin(Oa(_)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Ia,this.updatingHandles=new ur,this.allLayerViews=new jr({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:Kk}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Yc,this.analyses=new ta,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Q,this.magnifier=new yf,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ND,this.navigation=new Sf,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Pu(this),this.persistableViewModels=new Q,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(E(()=>this.preconditionsReady,t=>{t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,oa.views.add(this)):(this._lockedSpatialReference=null,oa.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?(this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):t&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},rr))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,en(()=>this.ready)))),this.basemapView=new Gn({view:this}),this.layerViewManager=new _D({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Wt({view:this}),this._setupSpatialReferenceLogger(),this.addHandles([E(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=L(v({},this.defaultsFromMap.required),{extent:e}),{sync:!0,initial:!0}),E(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),E(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([E(()=>this.defaultsFromMap?.ready,t=>{let n=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&n){if(e!=null)return;let r=Sa(()=>e=Ho(e));e=_i(i=>C(this,null,function*(){try{yield Mm(this.spatialReferenceWarningDelay,null,i)}catch{return}finally{e=null}k.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(r,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(oa.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=fe(this.graphics),this.analyses=fe(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),fe(this.analysisViewManager),this.toolViewManager=fe(this.toolViewManager),this.layerViewManager=fe(this.layerViewManager),this.basemapView=fe(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=fe(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return k.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new se(v({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Lr.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(k.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Lr.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.defaultsFromMap?.required?.heightModelInfo&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){let t=!Vr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??or}set timeZone(e){let t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));this._userTimeZone=e,e===or||e===Um||t.has(e.toLowerCase())||n.has(e.toLowerCase())||k.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Ou}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new A("importLayerView() not implemented")}hasLayerViewModule(e){return!1}validate(){return C(this,null,function*(){})}loadAsyncDependencies(){return C(this,null,function*(){})}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport({spatialReference:e})!=null}when(e,t){return this.isResolved()&&!this.ready&&k.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(St(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};I.views=new Q,l([c()],I.prototype,"_userSpatialReference",void 0),l([c()],I.prototype,"activeTool",null),l([c({readOnly:!0})],I.prototype,"allLayerViews",void 0),l([c()],I.prototype,"groundView",void 0),l([c()],I.prototype,"animation",null),l([c()],I.prototype,"basemapView",void 0),l([c()],I.prototype,"center",null),l([c({readOnly:!0})],I.prototype,"_defaultsFromMapSettings",null),l([c()],I.prototype,"defaultsFromMap",null),l([c()],I.prototype,"fatalError",void 0),l([c({type:tn})],I.prototype,"extent",null),l([c(Zc(Yc,"graphics"))],I.prototype,"graphics",void 0),l([c(Zc(ta,"analyses"))],I.prototype,"analyses",void 0),l([c({readOnly:!0,type:Wo})],I.prototype,"heightModelInfo",null),l([c({readOnly:!0})],I.prototype,"interacting",null),l([c({readOnly:!0})],I.prototype,"navigating",null),l([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],I.prototype,"preconditionsReady",null),l([c({readOnly:!0})],I.prototype,"typeSpecificPreconditionsReady",void 0),l([c({type:Q,readOnly:!0})],I.prototype,"layerViews",void 0),l([c()],I.prototype,"resolution",null),l([c({type:yf})],I.prototype,"magnifier",void 0),l([c({value:null,type:Du})],I.prototype,"map",null),l([c()],I.prototype,"padding",void 0),l([c({readOnly:!0})],I.prototype,"ready",void 0),l([c({type:Rn})],I.prototype,"spatialReference",null),l([c()],I.prototype,"spatialReferenceWarningDelay",void 0),l([c()],I.prototype,"stationary",null),l([c({readOnly:!0})],I.prototype,"supportsGround",void 0),l([c({type:On})],I.prototype,"timeExtent",void 0),l([c({type:String,nonNullable:!0})],I.prototype,"timeZone",null),l([c()],I.prototype,"tools",null),l([c()],I.prototype,"toolViewManager",void 0),l([c({readOnly:!0})],I.prototype,"type",void 0),l([c({type:Number})],I.prototype,"scale",void 0),l([c({readOnly:!0})],I.prototype,"updating",void 0),l([c({readOnly:!0})],I.prototype,"initialExtentRequired",void 0),l([c({readOnly:!0})],I.prototype,"initialExtent",null),l([c()],I.prototype,"cursor",null),l([c({readOnly:!0})],I.prototype,"input",void 0),l([c({type:Sf,nonNullable:!0})],I.prototype,"navigation",void 0),l([c()],I.prototype,"layerViewManager",void 0),l([c()],I.prototype,"analysisViewManager",void 0),l([c()],I.prototype,"width",void 0),l([c()],I.prototype,"height",void 0),l([c({readOnly:!0})],I.prototype,"resizing",void 0),l([c({value:null,readOnly:!0})],I.prototype,"size",null),l([c({readOnly:!0})],I.prototype,"suspended",void 0),l([c({readOnly:!0})],I.prototype,"viewEvents",void 0),l([c({readOnly:!0})],I.prototype,"persistableViewModels",void 0),l([c()],I.prototype,"_isValid",void 0),l([c()],I.prototype,"_readyCycleForced",void 0),l([c()],I.prototype,"_lockedSpatialReference",void 0),l([c()],I.prototype,"_userTimeZone",void 0),l([c()],I.prototype,"_lockedTimeZone",void 0),l([c({type:Ou})],I.prototype,"theme",void 0),l([c({readOnly:!0,type:Ou})],I.prototype,"effectiveTheme",null),I=oa=l([m("esri.views.View")],I);var jD=I;function Kk(e){return e.layerViews}var Er=class extends zm{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Go(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new A("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=xm(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([c({readOnly:!0})],Er.prototype,"done",null),l([c({readOnly:!0,type:String})],Er.prototype,"state",void 0),l([c()],Er.prototype,"target",void 0),Er=l([m("esri.views.ViewAnimation")],Er),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Er||(Er={}));var sa=Er;var Af=class{constructor(t,n,r,i){let o=t.targetGeometry,s=n.targetGeometry;i?typeof i=="string"&&(i=Gg(i)||Ha.ease):i=Ha.ease,this.easing=i,this.duration=r,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=s.x,this.tCenterY=s.y,this.tScale=n.scale,this.tRotation=n.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,n){let r=this.easing(n),i,o,s,a;n>=1?(i=this.tCenterX,o=this.tCenterY,s=this.tRotation,a=this.tScale):(i=this.sCenterX+r*this.dCenterX,o=this.sCenterY+r*this.dCenterY,s=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=i,t.targetGeometry.y=o,t.scale=a,t.rotation=s}},qn=class extends _{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ha.ease,this.view=null,this.viewpoint=new ye({targetGeometry:new je,scale:0,rotation:0}),this._updateTask=Lt({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Ge(this._updateTask)}animate(e,t,n){this.stop();let r=this.viewpoint;Ei(r,t),this.transition=new Af(this.viewpoint,e.target,n?.duration||this.duration,n?.easing||this.easing);let i=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;let n=new sa({target:e.clone()}),r=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){let t=this.animation;if(t&&t.state!==sa.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{let n=this.transition,r=(performance.now()-this._startTime)/n.duration,i=r>=1;n.applyRatio(this.viewpoint,r),i&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};l([c()],qn.prototype,"animation",void 0),l([c()],qn.prototype,"duration",void 0),l([c()],qn.prototype,"transition",void 0),l([c()],qn.prototype,"easing",void 0),l([c()],qn.prototype,"view",void 0),l([c()],qn.prototype,"viewpoint",void 0),qn=l([m("esri.views.2d.AnimationManager")],qn);var BD=qn;var Bu=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:n,graphicsView:r,labelManager:i,state:{id:o}}=this.view;n.forEach(this._updateLayerView,this),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=E(()=>t.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=Lt(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();let n=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==n.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=n.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};var aa=class extends _{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}goTo(e,t){return C(this,null,function*(){if(!e)return void k.getLogger(this).error("#goTo()","target cannot be null or undefined");this.view.animation&&(this.view.animation=null);let n=this._createAnimation();yield en(()=>this.view.ready,t);let r=v({animate:!0},t),{extent:i,spatialReference:o,size:s,viewpoint:a,constraints:u,padding:d,allLayerViews:p}=this.view,h=lv(e,{extent:i,spatialReference:o,size:s,viewpoint:a,constraints:u,padding:d,allLayerViews:p,pickClosestTarget:t?.pickClosestTarget??!0});return n?.update(h),this._gotoTask={},r.animate?this._gotoAnimated(h,r):this._gotoImmediate(h,r)})}_gotoImmediate(e,t){let n=this._gotoTask,r=this.view.animation,i=e.then(o=>{if(et(t),n!==this._gotoTask)throw new A("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(n,r,i)}_gotoAnimated(e,t){let n=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();let i=e.then(o=>{if(et(t),n!==this._gotoTask)throw new A("view:goto-interrupted","Goto was interrupted");return r.update(o),this.view.animationManager.animate(r,this.view.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,r,i)}_createAnimation(){return this.view.animation&&!this.view.animation.done||(this.view.animation=new sa),this.view.animation}_cancellableGoTo(e,t,n){let r=()=>e===this._gotoTask;return n.finally(()=>{r()&&(t.done||t.stop(),this.view.animation=null)})}};l([c({constructOnly:!0})],aa.prototype,"view",void 0),aa=l([m("esri.views.2d.GoToManager")],aa);function De(){return Promise.all([import("./chunk-WFVGKFRC.js"),import("./chunk-JWRZG5O2.js")])}var la=()=>De().then(()=>import("./chunk-URJ2GMC5.js")),_o=()=>De().then(()=>import("./chunk-YCV2XY2N.js")),$D={"base-dynamic":()=>De().then(()=>import("./chunk-RWLISPDG.js")),"base-tile":la,"bing-maps":la,csv:_o,"geo-rss":()=>De().then(()=>import("./chunk-KWOJW3PB.js")),feature:_o,geojson:_o,graphics:()=>De().then(()=>import("./chunk-VFRJSZBM.js")),group:()=>De().then(()=>import("./chunk-YC33JXPP.js")),imagery:()=>De().then(()=>import("./chunk-FSOGDH6S.js")),"imagery-tile":()=>De().then(()=>import("./chunk-WBEY7MH3.js")),kml:()=>De().then(()=>import("./chunk-56TXOIY2.js")),"knowledge-graph":()=>De().then(()=>import("./chunk-H3FKFGPZ.js")),"link-chart":()=>De().then(()=>import("./chunk-H3FKFGPZ.js")),"knowledge-graph-sublayer":_o,"map-image":()=>De().then(()=>import("./chunk-RTAEEVKO.js")),"map-notes":()=>De().then(()=>import("./chunk-5BTQ7PKJ.js")),media:()=>De().then(()=>import("./chunk-63OQNMFO.js")),"ogc-feature":()=>De().then(()=>import("./chunk-A3KMOHM2.js")),"open-street-map":la,"oriented-imagery":_o,route:()=>De().then(()=>import("./chunk-TYZXJCZM.js")),stream:()=>De().then(()=>import("./chunk-JLAAENWE.js")),"subtype-group":()=>De().then(()=>import("./chunk-PZ6TMMYV.js")),tile:la,"vector-tile":()=>De().then(()=>import("./chunk-7VGDN4BQ.js")),video:()=>De().then(()=>import("./chunk-3NIURNBQ.js")),wcs:()=>De().then(()=>import("./chunk-WBEY7MH3.js")),"web-tile":la,wfs:_o,wms:()=>De().then(()=>import("./chunk-KTQMPRMH.js")),wmts:()=>De().then(()=>import("./chunk-U4FS56QO.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Qk(e){let t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new A(`${n}:view-not-supported`,`${t} is not supported in 2D`)}var Nf={hasLayerViewModule:e=>$D[e.type]!=null,importLayerView:e=>{let t=$D[e.type];if(t==null)throw Qk(e);return t(e)}};function UD(e,t){let{spatialReference:n}=t,r=[t.x,t.y],i=Number.POSITIVE_INFINITY,o=0,s=0,a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(let d of u)for(let p=0;p<d.length-1;p++){rg(a,r,d,p);let h=Ig(r,a);h<i&&(i=h,o=a[0],s=a[1])}return{coordinate:new je({x:o,y:s,spatialReference:n}),distance:i}}var Rf,Ir=Rf=class extends Di(_){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ci(this.geometry,this.spatialReference)}catch(e){return k.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;let n=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?ja(this.normalizedGeometry,n):eg(this.normalizedGeometry,n))return e;let{coordinate:r}=UD(this.normalizedGeometry,n);return r&&(e.targetGeometry=r),e}clone(){return new Rf({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};l([c({constructOnly:!0})],Ir.prototype,"geometry",void 0),l([c({readOnly:!0})],Ir.prototype,"normalizedGeometry",null),l([c({constructOnly:!0})],Ir.prototype,"spatialReference",void 0),Ir=Rf=l([m("esri.views.2d.constraints.GeometryConstraint")],Ir);var Of,ua=Of=class extends Di(_){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Of({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([c()],ua.prototype,"enabled",void 0),l([c()],ua.prototype,"rotationEnabled",void 0),ua=Of=l([m("esri.views.2d.constraints.RotationConstraint")],ua);var Pf=ua;var Ff,ut=Ff=class extends Di(_){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:r,minZoom:i,maxZoom:o}=this,s=-1,a=-1,u=!1,d=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!t?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);t=t.map(p=>p.clone()),t.sort((p,h)=>h.scale-p.scale),t.forEach((p,h)=>p.level=h);for(let p of t)!u&&n>0&&n>=p.scale&&(s=p.level,u=!0),!d&&r>0&&r>=p.scale&&(a=e?e.level:-1,d=!0),e=p;i===-1&&(i=n===0?0:s),o===-1&&(o=r===0?t.length-1:a),i=Math.max(i,0),i=Math.min(i,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),i>o&&([i,o]=[o,i]),n=t[i].scale,r=t[o].scale,t.splice(0,i),t.splice(o-i+1,t.length),t.forEach((p,h)=>{this._lodByScale[p.scale]=p,this._scales[h]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;let n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,o=t&&t.targetGeometry,s=r!==0&&e.scale<r,a=n!==0&&e.scale>n;if(s||a){let u=a?n:r;if(t&&o){let d=(u-t.scale)/(e.scale-t.scale);i.x=o.x+(i.x-o.x)*d,i.y=o.y+(i.y-o.y)*d}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);let t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);let t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];let n=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[n]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;let t=this._scales,n,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(n=t[i],r=t[i+1],r===e)return i+this.effectiveMinZoom+1;if(n>e&&r<e)return i+this.effectiveMinZoom+1-(e-r)/(n-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;let t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new Ff({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};l([c({readOnly:!0})],ut.prototype,"effectiveLODs",void 0),l([c({readOnly:!0})],ut.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0})],ut.prototype,"effectiveMaxZoom",void 0),l([c({readOnly:!0})],ut.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0})],ut.prototype,"effectiveMaxScale",void 0),l([c()],ut.prototype,"lods",void 0),l([c()],ut.prototype,"minZoom",void 0),l([c()],ut.prototype,"maxZoom",void 0),l([c()],ut.prototype,"minScale",void 0),l([c()],ut.prototype,"maxScale",void 0),l([c()],ut.prototype,"snapToZoom",void 0),ut=Ff=l([m("esri.views.2d.constraints.ZoomConstraint")],ut);var Lf=ut;var Jk={base:null,key:"type",typeMap:{extent:tn,polygon:ag}},Ee=class extends _{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Q}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Ir({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Pf({rotationEnabled:this.rotationEnabled})}get _zoom(){let e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,r=this.maxZoom,i=this.minScale,o=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===r&&e.minScale===i&&e.maxScale===o&&e.snapToZoom===s?e:new Lf({lods:t,minZoom:n,maxZoom:r,minScale:i,maxScale:o,snapToZoom:s})}canZoomInTo(e){let t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){let t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(n=>n.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([c({readOnly:!0})],Ee.prototype,"effectiveLODs",null),l([c({readOnly:!0})],Ee.prototype,"effectiveMinScale",null),l([c({readOnly:!0})],Ee.prototype,"effectiveMaxScale",null),l([c({readOnly:!0})],Ee.prototype,"effectiveMinZoom",null),l([c({readOnly:!0})],Ee.prototype,"effectiveMaxZoom",null),l([c({types:Jk,value:null})],Ee.prototype,"geometry",null),l([c({type:[fg]})],Ee.prototype,"lods",void 0),l([c()],Ee.prototype,"minScale",void 0),l([c()],Ee.prototype,"maxScale",void 0),l([c()],Ee.prototype,"minZoom",void 0),l([c()],Ee.prototype,"maxZoom",void 0),l([c()],Ee.prototype,"rotationEnabled",void 0),l([c()],Ee.prototype,"snapToZoom",void 0),l([c({type:Q})],Ee.prototype,"customConstraints",void 0),l([c()],Ee.prototype,"view",void 0),l([c({readOnly:!0})],Ee.prototype,"version",null),l([c({type:Ir,readOnly:!0})],Ee.prototype,"_geometry",null),l([c({type:Pf})],Ee.prototype,"_rotation",null),l([c({readOnly:!0,type:Lf})],Ee.prototype,"_zoom",null),Ee=l([m("esri.views.2d.MapViewConstraints")],Ee);var Vf=Ee;function Xk(e){return e instanceof Float32Array&&e.length>=2}function eA(e){return Array.isArray(e)&&e.length>=2}function ca(e){return Xk(e)||eA(e)}var jf,Ze=[0,0],Sr=jf=class extends M{constructor(e){super(e),this._viewpoint2D={center:Ua(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new tn,this.id=0,this.inverseTransform=Wa(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Wa(),this.transformNoRotation=Wa(),this.displayMat3=Ga(),this.displayViewMat3=Ga(),this.viewMat3=Ga(),this.viewMat2d=Fg(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){let t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}copy(e){let t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=Ei(n,e.viewpoint),this._set("size",Zo(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new jf({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return ca(t)?lr(e,t,this.inverseTransform):(Ze[0]=t,Ze[1]=n,lr(e,Ze,this.inverseTransform))}toScreen(e,t,n){return ca(t)?lr(e,t,this.transform):(Ze[0]=t,Ze[1]=n,lr(e,Ze,this.transform))}toScreenNoRotation(e,t,n){return ca(t)?lr(e,t,this.transformNoRotation):(Ze[0]=t,Ze[1]=n,lr(e,Ze,this.transformNoRotation))}toScreenClosest(e,t,n){ca(t)?(Ze[0]=t[0],Ze[1]=t[1]):(Ze[0]=t,Ze[1]=n);let[r]=Ze,{center:i,extent:o,spatialReference:s,transform:a}=this;return(r<o.xmin||r>o.xmax)&&(Ze[0]=Dg(r,i[0],s)),lr(e,Ze,a)}getScreenTransform(e,t){let{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return pv(e,n,i,t,0,r),e}_update(){let{center:e,spatialReference:t,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,o=this._get("size"),s=new ye({targetGeometry:new je(e[0],e[1],t),scale:n,rotation:r});if(this._set("viewpoint",s),!o||!t||!n)return;this.resolution=dv(s),this.rotation=r,this.scale=n,this.spatialReference=t,Zo(this.center,e);let a=o[0]!==0?2/o[0]:0,u=o[1]!==0?-2/o[1]:0;Sg(this.displayMat3,a,0,0,0,u,0,-1,1,1);let d=Mg(this.viewMat3),p=Gc(o[0]/2,o[1]/2),h=Gc(-o[0]/2,-o[1]/2),f=ig(r);zc(d,d,p),Tg(d,d,f),zc(d,d,h),xg(this.displayViewMat3,this.displayMat3,d);let g=Pg(this.viewMat2d,p);return Rg(g,g,f),Og(g,g,h),uv(this.extent,s,o),hv(this.transform,s,o,i),Ng(this.inverseTransform,this.transform),fv(this.transformNoRotation,s,o,i),this.worldScreenWidth=mv(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([c({readOnly:!0})],Sr.prototype,"id",void 0),l([c({value:1,json:{write:!0}})],Sr.prototype,"pixelRatio",null),l([c({json:{write:!0}})],Sr.prototype,"size",null),l([c()],Sr.prototype,"spatialReference",void 0),l([c({type:ye,json:{write:!0}})],Sr.prototype,"viewpoint",null),Sr=jf=l([m("esri.views.2d.ViewState")],Sr);var Bf=Sr;var $f,Uf,Wn=$f=class extends _{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new $f({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([c()],Wn.prototype,"left",void 0),l([c()],Wn.prototype,"top",void 0),l([c()],Wn.prototype,"right",void 0),l([c()],Wn.prototype,"bottom",void 0),Wn=$f=l([m("esri.views.2d.PaddedViewState.Padding")],Wn);var Do=Uf=class extends Bf{constructor(...e){super(...e),this.paddedViewState=new Bf,this._updateContent=(()=>{let t=Ua();return()=>{let n=this._get("size"),r=this._get("padding");if(!n||!r)return;let i=this.paddedViewState;Cg(t,r.left+r.right,r.top+r.bottom),Eg(t,n,t),Zo(i.size,t);let o=i.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(E(()=>[this.size,this.padding],()=>this._updateContent(),rr)),this.padding=new Wn,this.size=[0,0]}set padding(e){this._set("padding",e||new Wn)}set viewpoint(e){if(e){let t=e.clone();this.paddedViewState.viewpoint=e,vv(t,e,this._get("size"),this._get("padding"));let n=this._viewpoint2D,r=t.targetGeometry;n.center[0]=r.x,n.center[1]=r.y,n.rotation=t.rotation,n.scale=t.scale,n.spatialReference=r.spatialReference,this._update()}}clone(){return new Uf({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([c()],Do.prototype,"paddedViewState",void 0),l([c({type:Wn})],Do.prototype,"padding",null),l([c()],Do.prototype,"viewpoint",null),Do=Uf=l([m("esri.views.2d.PaddedViewState")],Do);var HD=Do;var Ye=class extends _{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([E(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},rr)])}get center(){if(!this.ready)return this._get("center");let{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new je({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(r){return void k.getLogger(this).error(new A("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}let n=this.viewpoint;Qc(n,n,t),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void k.getLogger(this).error(new A("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(r){return void k.getLogger(this).error(new A("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}let n=this.viewpoint;cv(n,n,t,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);let t=this.viewpoint;wv(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);let n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}let t=this.viewpoint;Jc(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,n;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new A("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new A("mapview:invalid-viewpoint","geometry not defined"))}catch(i){n=new A("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:i})}if(n)return void k.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let r=new ye({targetGeometry:new je,scale:0,rotation:0});Ei(r,t),this.constraints?.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);let r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}let t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);let n=this.viewpoint;Jc(n,n,t),this.viewpoint=n,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:t,constraints:n}=this,r=this._get("center"),i=this._get("extent"),o=this._get("scale"),s=this._get("rotation"),a=this._get("viewpoint"),u=this._get("zoom"),d=u!=null&&n!=null&&n.zoomToScale(u)||void 0,p,h,f,g=a?.rotation,w=a?.targetGeometry;w?.type==="extent"?p=w:w?.type==="point"&&(h=w,f=a?.scale);let D=i??p;return{center:r??h??D?.center,rotation:s??g,scale:(o??d??f??(D&&Za(D,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,n,r){let i=e.targetGeometry;try{this._project(e,n)}catch(o){k.getLogger(this).warn(new Lc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:n,error:o})),e.targetGeometry=r||new je({x:0,y:0,spatialReference:n})}this.constraints?.fit(e),this._set("state",new HD({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);let{center:[e,t],spatialReference:n,rotation:r,scale:i}=this.state.paddedViewState,o=new je({x:e,y:t,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",i),this._set("state",null)}changeSpatialReference(e){let t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{let a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}let n=t.clone(),[r,i]=t.center,o=null;try{o=this._project(new je({x:r,y:i,spatialReference:t.spatialReference}),e)}catch(a){Jm()||k.getLogger(this).warn(new Lc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:a}))}o||(o=new je({x:0,y:0,spatialReference:e}));let s=Qc(new ye({targetGeometry:new je,scale:0,rotation:0}),t.viewpoint,o);n.viewpoint=s;try{let u=[t.size[0]/2,t.size[1]/2],d=[u[0]+20,u[1]],p=t.toMap([0,0],d),{x:h,y:f}=this._project(new je({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=h,p[1]=f,n.toScreen(p,p);let g=gv(u,p,d),w=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(s.rotation=0,s.targetGeometry=new je({x:0,y:0,spatialReference:e})):(s.scale*=w,s.scale>it("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(s,void 0),this._get("state").viewpoint=s}resize(e,t){if(!this.ready)return;let n=this.state,r=this.state.paddedViewState.viewpoint,i=this.state.paddedViewState.size.concat();n.size=[e,t],yv(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints?.constrain(r,void 0)??r,this.state.viewpoint=r}toMap(e){if(!this.ready)return null;let t=[0,0],[n,r]=this.state.toMap(t,[e.x,e.y]),i=this.state.spatialReference;return new je({x:n,y:r,spatialReference:i})}toScreen(e,t){if(!this.ready)return null;let n=this._project(e,this.state.spatialReference),r=[n.x,n.y];return t?.pickClosestTarget===!1?this.state.toScreen(r,r):this.state.toScreenClosest(r,r),be(r[0],r[1])}_project(e,t){let n=e?.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||Vr(t,n.spatialReference))return e;let r=Ci(n,t);if(!r)throw new A("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:t});return tA(e)?(e.targetGeometry=r,e):r}};function tA(e){return e?.declaredClass==="esri.Viewpoint"}l([c({type:je})],Ye.prototype,"center",null),l([c()],Ye.prototype,"constraints",void 0),l([c({type:tn})],Ye.prototype,"extent",null),l([c({value:{top:0,right:0,bottom:0,left:0},cast:e=>v({top:0,right:0,bottom:0,left:0},e)})],Ye.prototype,"padding",null),l([c()],Ye.prototype,"ready",void 0),l([c()],Ye.prototype,"resizeAlign",void 0),l([c({readOnly:!0})],Ye.prototype,"resolution",null),l([c({type:Number})],Ye.prototype,"rotation",null),l([c({type:Number})],Ye.prototype,"scale",null),l([c({readOnly:!0})],Ye.prototype,"state",void 0),l([c({type:ye})],Ye.prototype,"viewpoint",null),l([c()],Ye.prototype,"zoom",null),Ye=l([m("esri.views.2d.ViewStateManager")],Ye);function Co(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}var da=class extends J{constructor(t,n){super(!0),this._view=t,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(t,n){Co(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}};var $u=class extends J{constructor(t,n,r){super(!0),this.view=t,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(t){let{data:n}=t,{pointerType:r}=n;if(r!==this.pointerType)return;t.stopPropagation();let{action:i,delta:o}=n,{view:s}=this,{mapViewNavigation:a}=s;switch(i){case"begin":{let{scale:u}=s;this._startScale=u,this._currentScale=u,this._previousDelta=o,a.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;let u=1.015**o.y,d=this._startScale*u,p=d/this._currentScale;a.setViewpointImmediate(p),this._currentScale=d;break}case"end":{let{constraints:u}=s,{effectiveLODs:d,snapToZoom:p}=u;if(!p||!d)return void a.end();let h=u.snapScale(this._currentScale),f=(o.y>0?Math.max(h,u.snapToPreviousScale(this._startScale)):Math.min(h,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}};var wn=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){let n=t.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}};var Uu=class extends J{constructor(t,n,r){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new wn({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&Co(r.data,this.pointerAction)})}_handleDrag(t){let n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}};var Hu=class extends J{constructor(t,n,r){super(!0),this._view=t,this.pointerAction=n;let i=this._view.mapViewNavigation;this._dragEventSeparator=new wn({start:(o,s)=>{i.rotate.begin(this._view,s.data),s.stopPropagation()},update:(o,s)=>{i.rotate.update(this._view,s.data),s.stopPropagation()},end:(o,s)=>{i.rotate.end(),s.stopPropagation()},condition:(o,s)=>o===1&&Co(s.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this._dragEventSeparator.handle(o))}};function Zt(e){let t=e*e;return e<0&&(t*=-1),t}function zD(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function GD(e,t,n){let r=n,i=e.state,o=e.device,s=t.tiltDirection==="forward-down"?1:-1,a=1;return o.deviceType==="standard"?(r.translation[0]=Zt(i.axes[0]),r.translation[1]=Zt(i.axes[1]),r.translation[2]=Zt(i.buttons[7])-Zt(i.buttons[6]),r.heading=Zt(i.axes[2]),r.tilt=Zt(i.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*Zt(i.axes[0]),r.translation[1]=1.2*Zt(i.axes[1]),r.translation[2]=2*-Zt(i.axes[2]),r.heading=1.2*Zt(i.axes[5]),r.tilt=1.2*Zt(i.axes[3])),r.tilt*=s,og(r.translation,r.translation,a),r}function qD(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}var zu=class extends J{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Ia,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([E(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=Lt({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},de)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){let n=this._view.navigation.gamepad.device;n&&t.data.device!==n||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,zD(this._transformation)):(this._currentDevice=t.data.device,GD(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){let n=this._transformation;if(qD(n))return;let r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,o=rA*i*t;_v(r,r,[n.translation[0]*o,-n.translation[1]*o]);let s=1+n.translation[2]*iA*t,a=this._view.constraints.rotationEnabled?-n.heading*nA*t:0,u=this._view.size,d=[u[0]/2,u[1]];bv(r,r,s,a,d,u);let p=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=p}},nA=.06,rA=.7,iA=6e-4;function Gu(e){let t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),{remove:()=>document.addEventListener("visibilitychange",t)}}var qu=class extends J{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{let o=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Ctrl"))return void this._stopMovement();if(o==null)return;i.stopPropagation(),i.preventDefault();let s=i.type==="key-down";if(this._pressedKeys[s?"add":"delete"](o),s){if(this._direction===o)return;this._direction=o,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let a=this._timeout===void 0,u=this._pressedKeys.size>0;a||u?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Gu(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){let n=this._currentDirection!=null;if(t!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}};var Wu=class extends J{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Gu(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){let r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;let i=this._keyToDirection[t.data.key];if(this._pressed=i!=null,this._pressed){if(t.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Eo;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Eo||(Eo={}));var Zu=class extends J{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=Eo.IN),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=Eo.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){let n=t.modifiers;if(n.size>0&&!n.has("Shift"))return;let{key:r}=t.data;if(!(r in this._keysToZoomAction))return;let i=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view,s=null;switch(i){case Eo.IN:s=o.zoomIn();break;case Eo.OUT:s=o.zoomOut();break;default:return}o.begin(),s.then(()=>o.end()),t.stopPropagation()}};var oA=.6,Yu=class extends J{constructor(t,n){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;let n=this._view.mapViewNavigation,{x:r,y:i,deltaY:o}=t.data,s=1/oA**(1/60*o),a=n.zoom(s,[r,i]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}};var Ku=class extends J{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let n=this.view.mapViewNavigation;this._dragEventSeparator=new wn({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Hf(e){let t=e.native;return t?{buttons:t.buttons.map(n=>n.pressed?n.value||1:0),axes:t.axes.map(n=>sA(n,e.axisThreshold))}:{buttons:[],axes:[]}}function WD(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function ZD(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function sA(e,t){let n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}var Qu=class{constructor(t,n){this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{let s=o.gamepad,a=s.index,u=this._inputDevices[a];u&&(this._emitGamepadEvent(s,Hf(u),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;let r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){let n=new bo(t);n.deviceType!=="unknown"&&(this._inputDevices[t.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Lt({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){let t=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!n;this._forEachGamepad(i=>{let o=this._inputDevices[i.index];if(!o)return;let s=this._latestUpdate[i.index],a=Hf(o),u=r||ZD(a);s&&(s.timestamp===i.timestamp||!s.active&&u||WD(s.state,a))||this._emitGamepadEvent(i,a,!u)})}_forEachGamepad(t){let n=window.navigator.getGamepads();for(let r=0;r<n.length;r++){let i=n[r];this._validate(i)&&t(i)}}_emitGamepadEvent(t,n,r){let i=this._latestUpdate[t.index],o=i&&i.active;if(!o&&!r)return;let s=!o&&r?"start":o&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:n,action:s})}_validate(t){if(!t||!t.connected)return!1;for(let n=0;n<t.axes.length;n++)if(isNaN(t.axes[n]))return!1;return!0}};var YD=it("edge"),aA=it("chrome"),lA=it("ff"),uA=it("safari"),KD="esri-view-surface",Io={touchNone:`${KD}--touch-none`,touchPan:`${KD}--touch-pan`},QD=(()=>{class e{constructor(n,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=n,n.getAttribute("tabindex")||n.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Qu(n,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)}),this._gamepadSource=fe(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=n,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(let r in this._active)if(!n||!n.has(r)){let i=this._active[r];this._element.removeEventListener(zf[r],i),delete this._active[r]}n&&n.forEach(r=>{if(!this._active[r]&&zf[r]){let i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(zf[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,r){r?this._setPointerCatpureSafe(n.pointerId):(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Io.touchNone:Io.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Io.touchPan:Io.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Io.touchNone),this._element.classList.remove(Io.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(n))return;this._element.releasePointerCapture(n)}catch{}}_updateNormalizedPointerLikeEvent(n,r){let i=Df(this._element,n);return e.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(n,r){let i=iv(r);i&&n==="key-up"&&this._keyDownState.delete(i);let o={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&n==="key-down"&&this._keyDownState.add(o.key),this._callback(n,o)}_handlePointer(n,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(n,i)}_handlePointerPreventDefault(n,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(n,i)}_handleMouseWheel(n,r){let i=r.deltaY;switch(r.deltaMode){case 0:YD&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}YD?i*=.7:aA||uA?i*=.6:lA&&(i*=1.375);let o=100,s=Math.abs(i);s>o&&(i=i/s*200/(1+Math.exp(-.02*(s-o))));let a=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(n,a)}_handlePointerCaptureLost(n,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(n,r)}_handleDefault(n,r){let i={native:r};r.preventDefault(),this._callback(n,i)}_preventAltKeyDefault(n){n.key==="Alt"&&n.preventDefault()}_preventMultiTouchPanning(n){n.touches.length>1&&n.preventDefault()}}return e.test={disableSubpixelCoordinates:!1},e})(),zf={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};var Ju=class extends J{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};var xe={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function ui(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function JD(e,t){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function XD(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:be()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){let[z,ce]=e,[Se,he]=[ce.x-z.x,ce.y-z.y];return t.radius=Math.sqrt(Se*Se+he*he)/2,t.center.x=(z.x+ce.x)/2,t.center.y=(z.y+ce.y)/2,t}let n=0,r=0;for(let z=0;z<e.length;z++)n+=e[z].x,r+=e[z].y;n/=e.length,r/=e.length;let i=e.map(z=>z.x-n),o=e.map(z=>z.y-r),s=0,a=0,u=0,d=0,p=0,h=0,f=0;for(let z=0;z<i.length;z++){let ce=i[z],Se=o[z],he=ce*ce,Le=Se*Se;s+=he,a+=Le,u+=ce*Se,d+=he*ce,p+=Le*Se,h+=ce*Le,f+=Se*he}let g=.5*(d+h),w=.5*(p+f),D=s*a-u*u,le=(g*a-w*u)/D,H=(s*w-u*g)/D,ue=be(le+n,H+r);return{radius:Math.sqrt(le*le+H*H+(s+a)/e.length),center:ue}}function bn(e){let{native:t}=e,{pointerId:n,button:r,pointerType:i}=t;return i==="mouse"?`${n}:${r}`:`${i}`}var Xu=class extends J{constructor(t=xe.maximumDoubleClickDelay,n=xe.maximumDoubleClickDistance,r=xe.maximumDoubleTouchDelay,i=xe.maximumDoubleTouchDistance,o=Jt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=be(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new wn({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ge(t.doubleTapTimeout)})}get hasPendingInputs(){return tr(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){let n=this._pointerState.get(t);n&&(n.doubleTapTimeout=Ge(n.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,n,r){let{button:i,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}=r;return{action:t,delta:n,button:i,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}}_dragStart(t,n){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:r,modifiers:i}=n,{center:o}=r;this._dragStartCenter=o;let s=this._createDoubleTapDragData("begin",be(0,0),r);this._doubleTapDrag.emit(s,void 0,i),n.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:r}=t,{center:i}=n,o=be(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("update",o,n);this._doubleTapDrag.emit(s,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:r}=t,{center:i}=n,o=be(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("end",o,n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){let{data:n}=t,r=bn(n),i=this._pointerState.get(r),{pointerType:o}=n.native;if(i){let s=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),ui(i.event.data,n)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){let{data:n}=t,{pointerType:r}=n.native,i=bn(n),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(i),o);this._pointerState.set(i,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}};var nc=class extends J{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,n,r,i){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:cA(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){let n=t.native.pointerId,r=ec(this._activePointerMap).angle,i={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);let o=tc(i,t0(this._activePointerMap));i.initialAngle=o,i.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;let n=t.native.pointerId,r=this._activePointerMap.get(n);r?r.event=t:this._addPointer(t)}_removePointer(t){let n=ec(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(n)}_updatePointerAngles(t){let n=ec(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=tc(r,n)-t,r.lastAngle=tc(r,n)-t})}_emitEvent(t,n,r){let i=ec(this._activePointerMap);this._drag.emit(this._createPayload(t,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){let n=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){let n=t.data,r=n.currentEvent,i=t.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function t0(e){let t=[];return e.forEach(n=>{t.push(be(n.event.x,n.event.y))}),XD(t)}function ec(e){let t=t0(e),n=0;return e.forEach(r=>{let i=tc(r,t),o=i-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;i=r.lastAngle+o,r.lastAngle=i;let s=i-r.initialAngle;n+=s}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function cA(e){let t=new Map;return e.forEach((n,r)=>t.set(r,n.event)),t}function tc(e,t){let n=e.event,r=n.x-t.center.x,i=n.y-t.center.y;return Math.atan2(i,r)}var e0;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(e0||(e0={}));var rc=class extends J{constructor(t=xe.maximumDoubleClickDelay,n=xe.maximumDoubleClickDistance,r=xe.maximumDoubleTouchDelay,i=xe.maximumDoubleTouchDistance,o=Jt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){let n=t.data,r=bn(n);if(!this._pointerState.has(r)){let i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(t){let n=t.data,r=bn(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){let o=i.immediateDoubleClick,s=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;o?(o.timeoutHandle.remove(),ui(o,t.data)>s?this._startImmediateDoubleClick(t,i):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(n))):ui(i,t.data)>s?this._removeState(n):this._startImmediateDoubleClick(t,i)}}_startImmediateDoubleClick(t,n){let r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){let n=bn(t);this._pointerState.delete(n),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};var ic=class extends J{constructor(t=xe.maximumClickDelay,n=xe.movementUntilMouseDrag,r=xe.movementUntilPenDrag,i=xe.movementUntilTouchDrag,o=xe.holdDelay,s=Jt){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=i,this._holdDelay=o,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ge(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){let n=t.data,r=n.native.pointerId,i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{let s=this._pointerState.get(r);if(s){if(!s.isDragging){let a=s.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this._holdDelay));let o={startEvent:n,previousEvent:n,startTimestamp:t.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,n,r){return{action:t,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:r}}_handlePointerMove(t){let n=t.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",i,n),void 0,i.modifiers):JD(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(t),i.previousEvent=n)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){let n=t.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=t.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",i,n)):this._pointerDrag.emit(this._createPointerDragData("start",i,i.previousEvent),t.timestamp))})}_handlePointerLoss(t,n){let r=t.data,i=r.native.pointerId,o=this._pointerState.get(i);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,n==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):n==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};var oc=class extends J{constructor(t=xe.maximumDoubleClickDelay,n=xe.maximumDoubleClickDistance,r=xe.maximumDoubleTouchDelay,i=xe.maximumDoubleTouchDistance,o=Jt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ge(t.doubleClickTimer))}get hasPendingInputs(){return tr(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,n){let r=this._pointerState.get(t);r&&(r.doubleClickTimer=Ge(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){let n=this._pointerState.get(t);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){let{pointerId:n,pointerType:r,button:i}=t.native;return r==="mouse"?`${n}:${i}`:`${r}`}_handleImmediateClick(t){let n=t.data,{pointerType:r}=n.native,i=this._getPointerId(n);if(!this._pointerState.has(i))return void this._startClick(t);let o=this._pointerState.get(i),{data:s,modifiers:a}=o.event,u=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;ui(s,n)>u?(this._clearDoubleClickTimer(i,!0),this._startClick(t)):(this._clearDoubleClickTimer(i,!1),o.pointerDownCount===2&&this._doubleClick.emit(s,void 0,a))}_handlePointerDown(t){let n=bn(t.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(t){let{data:n}=t,{native:{pointerType:r}}=n,i=bn(n),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),o),a=1;this._pointerState.set(i,{event:t,doubleClickTimer:s,pointerDownCount:a}),this.refreshHasPendingInputs()}};var sc={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}},ci=class extends _{initialize(){let e=()=>this.view?.ready;this.addHandles([St(()=>!e(),()=>this._disconnect()),St(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=fe(this._inputManager)}_connect(){let e=this.view.surface,t=new QD(e,this.view.input),n=[new rc,new ic,new oc,new nc(this.view.navigation),new Xu],r=new ov({eventSource:t,recognizers:n});r.installHandlers("prevent-context-menu",[new Ju],Pn.INTERNAL),r.installHandlers("navigation",[new Ku(this.view),new zu(this.view),new Yu(this.view),new da(this.view),new da(this.view,[sc.counter]),new Uu(this.view,"primary"),new qu(this.view,sc.pan),new Zu(this.view,sc.zoom),new Wu(this.view,sc.rotate),new Hu(this.view,"secondary"),new $u(this.view,"touch")],Pn.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,E(()=>this.view?.navigation?.browserTouchPanEnabled,i=>{this._source&&(this._source.browserTouchPanningEnabled=!i)},de)}get test(){return{inputManager:this._inputManager}}};l([c()],ci.prototype,"view",void 0),l([c()],ci.prototype,"latestPointerType",null),l([c()],ci.prototype,"latestPointerLocation",null),l([c()],ci.prototype,"multiTouchActive",null),ci=l([m("esri.views.2d.input.MapViewInputManager")],ci);var n0=ci;function o0(e,t,n){return C(this,null,function*(){let r=Lu(t)?Fu(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,o=new Set,s=!1,a=null,u=null;n?.include?i0(n.include,r0(e,f=>{i.add(f),Gf(f,g=>o.add(g))},(f,g)=>{o.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>s=!0)):(s=!0,i=new Set(e.allLayerViews),i.forEach(f=>{Gf(f,g=>o.add(g))})),n?.exclude&&i0(n.exclude,r0(e,f=>{i.delete(f),Gf(f,g=>o.delete(g))},f=>o.delete(f),f=>{u||(u=new Set),u.add(f)}));let d=e.allLayerViews.filter(f=>!f.suspended&&i.has(f)).reverse(),p=e.toMap(r),h=[...s?e.graphicsView.hitTest(p).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:p})):[],...yield Promise.all(d.map(f=>f.hitTest(p,r)).toArray())].filter(An).flat().filter(An);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||o.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(qf(f.graphic)))),u&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!u?.has(qf(f.graphic)))),{screenPoint:r,results:h}})}function r0(e,t,n,r,i,o){return s=>{if(s instanceof Bg){if(s.layer===e)o?.();else{let a=e.allLayerViews.find(u=>u.layer===s.layer);a&&i?.(a)}r(qf(s))}else if(s.type==="subtype-sublayer"){let a=e.allLayerViews.find(u=>u.layer===s.parent);a&&n(s,a)}else{let a=e.allLayerViews.find(u=>u.layer===s);a&&t(a)}}}function i0(e,t){if(e)if(Oc(e))for(let n of e)if(Oc(n))for(let r of n)t(r);else t(n);else t(e)}function qf(e){let t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function Gf({layer:e},t){e.type==="subtype-group"&&e.sublayers.forEach(n=>{t(n)})}var s0={flipY:!0,premultipliedAlpha:!0};function a0(e,t){return C(this,null,function*(){let n=yield u0(e,t),{format:r,quality:i}=Ev(t?.format,t?.quality);return Dv(n,{format:r,quality:i,rotation:0,disableDecorations:!1},s0)})}function l0(e,t){return C(this,null,function*(){let n=yield u0(e,t);return Cv(n,s0)})}function u0(e,t){let n=hA(t||{},pA(e.stage,e.size),e.size,e.padding),r=dA(t,e.allLayerViews);return e.stage.takeScreenshot(n,r,e.backgroundColor,t?.rotation)}function dA(e={},t){if(!e.layers)return;let n=[];return e.layers.forEach(r=>{let i=t.find(o=>o.layer.id===r.id);i?.container&&n.push(i.container)}),n}function pA(e,t){return Math.min(4,Iv(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function hA(e,t,n,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;e.width!=null&&e.height!=null?i=[e.width,e.height]:e.width==null&&e.height!=null?i=[e.height,e.height]:e.width!=null&&e.height==null?i=[e.width,e.width]:e.width==null&&e.height==null&&(i=null);let o=n[0]-(r.left+r.right),s=n[1]-(r.top+r.bottom),a,u,d=e.area||{x:0,y:0,width:o,height:s};if(i){let p=o/s,h=i[0]/i[1];if(h>p){let f=d.width/h;d={x:d.x,y:Math.round(d.y+(d.height-f)/2),width:d.width,height:Math.round(f)}}else{let f=d.height*h;d={x:Math.round(d.x+(d.width-f)/2),y:d.y,width:Math.round(f),height:d.height}}}else i=[d.width,d.height];return i[0]>d.width?(a=Math.min(i[0]/d.width,t),u=i[0]/d.width/a):(a=1,u=i[0]/d.width),{cropArea:{x:Math.round((d.x+r.left)*a),y:Math.round((d.y+r.top)*a),width:Math.round(d.width*a),height:Math.round(d.height*a)},outputScale:u,resolutionScale:a}}var c0=160,So=class extends _{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=c0&&this.clear()},c0))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([c()],So.prototype,"_timer",void 0),l([c()],So.prototype,"stationary",null),So=l([m("esri.views.2d.support.StationaryManager")],So);function d0(e){let t=Xg(e);if(!t.available)return new A("webgl:required",e==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(e==="3d"&&t.majorPerformanceCaveat)return new A("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new A("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new A("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Qg.WEBGL1){if(!t.supportsElementIndexUint)return new A("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new A("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new A("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function fA(e){return e&&"nodeType"in e}function mA(e){return e&&typeof e.render=="function"}var p0={component:"esri-component"},di=class extends _{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){let t=this._get("node");e!==t&&(e&&e.classList.add(p0.component),t&&t.classList.remove(p0.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||fA(e)?(this._set("widget",null),Na(e)):(mA(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([c()],di.prototype,"id",null),l([c()],di.prototype,"node",null),l([Te("node")],di.prototype,"castNode",null),l([c({readOnly:!0})],di.prototype,"widget",void 0),di=l([m("esri.views.ui.Component")],di);var Mo=di;var gA={left:0,top:0,bottom:0,right:0},h0={bottom:30,top:15,right:15,left:15},Zn="esri-ui",ct={ui:Zn,corner:`${Zn}-corner`,innerContainer:`${Zn}-inner-container`,manualContainer:`${Zn}-manual-container`,cornerContainer:`${Zn}-corner-container`,topLeft:`${Zn}-top-left`,topRight:`${Zn}-top-right`,bottomLeft:`${Zn}-bottom-left`,bottomRight:`${Zn}-bottom-right`};function vA(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function ac(e){return e===0?"0":`${e}px`}function Wf(e){let t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function Zf(e,{top:t,bottom:n,left:r,right:i}){e.style.top=t,e.style.bottom=n,e.style.left=r,e.style.right=i}var _n=class extends nr.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=$m(),this.view=null,this._applyViewPadding=()=>{let t=this.container;t&&Zf(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let t=this._innerContainer;t&&Zf(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([E(()=>[this.view?.padding,this.container],this._applyViewPadding,de),E(()=>this.padding,this._applyUIPadding,de),E(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},de),Aa(e=>{this._locale=e})])}destroy(){this.container=null;for(let e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){let t=this._get("container");e!==t&&(e&&(e.classList.add(ct.ui),Ym(e),this._attachContainers(e)),t&&(t.classList.remove(ct.ui),Zf(t,{top:"",bottom:"",left:"",right:""}),Ra(t)),this._set("container",e))}get height(){let e=this.view?.height??0;if(e===0)return e;let t=this._getViewPadding(),{top:n,bottom:r}=t;return Math.max(e-n-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:v(v({},h0),e)}get width(){let e=this.view?.width??0;if(e===0)return e;let t=this._getViewPadding(),{left:n,right:r}=t;return Math.max(e-n-r,0)}add(e,t){let n,r,i;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));let o=Wf(e);o&&({index:n,position:t,component:e,key:r}=o),t&&typeof t=="object"&&({index:n,key:r,position:t,internal:i}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));let n=this._find(e);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==t)return;let r=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),this._components.splice(r,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(let i of e)this.empty(i,t);return}let n=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(i=>i==null?!1:!(this._componentMap.get(i)?.internal??!1)||t.removeInternal);for(let i of r)this.remove(i)}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let n,r=Wf(e)||Wf(t);if(r&&(n=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;let i=this.remove(e);i&&this.add(i,{position:t,index:n})}find(e){if(!e)return null;let t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,t)):this._getComponentsAtPosition(e,t):this._components.filter(n=>t.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:r})=>n??r)}getPosition(e){for(let t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,r,i){e instanceof Mo||(e=new Mo({node:e})),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:r,internal:i})}_find(e){return e?e instanceof Mo?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??gA}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){let e=document.createElement("div");e.classList.add(ct.innerContainer,ct.cornerContainer);let t=document.createElement("div");t.classList.add(ct.innerContainer,ct.manualContainer);let n=document.createElement("div");n.classList.add(ct.topLeft,ct.corner),e.appendChild(n);let r=document.createElement("div");r.classList.add(ct.topRight,ct.corner),e.appendChild(r);let i=document.createElement("div");i.classList.add(ct.bottomLeft,ct.corner),e.appendChild(i);let o=document.createElement("div");o.classList.add(ct.bottomRight,ct.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;let s=Gm();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":o,"top-leading":s?r:n,"top-trailing":s?n:r,"bottom-leading":s?o:i,"bottom-trailing":s?i:o},this._positionNameToContainerLookup=v({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){let t=e.position??"manual",{component:n,index:r}=e,i=this._positionNameToContainerLookup[t],o=r!=null&&r>-1;if(vA(n.widget)&&n.widget.startup(),!o)return void i.appendChild(n.node);let s=Array.from(i.children);if(r===0)return void(i.firstChild?Bc(n.node,i.firstChild):i.appendChild(n.node));r>=s.length?i.appendChild(n.node):Bc(n.node,s[r])}_toPixelPosition(e){return{top:ac(e.top),left:ac(e.left),right:ac(e.right),bottom:ac(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){let n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(r=>this._findByNode(r)).filter(An).filter(r=>t.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}};l([c()],_n.prototype,"_locale",void 0),l([c()],_n.prototype,"container",null),l([c()],_n.prototype,"height",null),l([c({value:h0})],_n.prototype,"padding",null),l([Te("padding")],_n.prototype,"castPadding",null),l([c()],_n.prototype,"view",void 0),l([c()],_n.prototype,"width",null),_n=l([m("esri.views.ui.UI")],_n);var f0=_n;function m0(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function yA(e,t){return e.length!==t.length||e.some((n,r)=>n.text!==t[r].text)}function lc(e,t,n){!n||!t||e.find(r=>r.layerView===t&&r.text===n)||e.push({text:n,layerView:t})}function wA(e){return e.type==="bing-maps"}var Mr=[],xo=class extends _{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Q,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension");let n=this.view?.allLayerViews;n&&this.addHandles(n.map(r=>E(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),t?.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([Xt(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),St(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){let e=this.view,t=e?.allLayerViews;Mr.length=0,e&&t?(t.forEach(n=>{if(n.suspended||!n.layer?.attributionVisible)return;let r=n.layer;if(m0(r,"user"))return void lc(Mr,n,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(n)){let o=this._fetchedAttributionData.get(n);return void(o?lc(Mr,n,this._getDynamicAttribution(o,e,r)):m0(r)&&lc(Mr,n,r.copyright))}return void this._fetchAttributionData(n)}let i="portalItem"in r?r.portalItem?.accessInformation:void 0;lc(Mr,n,i||r.copyright)}),yA(this.items,Mr)&&(this.items.removeAll(),this.items.addMany(Mr)),Mr.length=0,this.notifyChange("state")):this._clear()}_fetchAttributionData(e){return C(this,null,function*(){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);let t=yield jm(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){let n=t.ok?this._createContributionIndex(t.value,wA(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()})}_createContributionIndex(e,t){let n=e.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){let o=n[i],s=o.coverageAreas;if(!s)return;for(let a of s){let u=a.bbox,d=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),h=new tn({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Rn.WGS84}),f={extent:Va(h),attribution:o.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=d;g<=p;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,n){let{extent:r,scale:i}=t,o=n.tileInfo?.scaleToZoom(i)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!r||o==null||o<=-1)return"";let s=e[o],a=Xm(r.center.clone().normalize(),t.spatialReference),u=new Set;return s?s.filter(d=>{let p=d.id,h=!u.has(p)&&a&&d.extent&&ja(d.extent,a);return h&&u.add(p),h}).sort((d,p)=>p.score-d.score||d.objectId-p.objectId).map(d=>d.attribution).join(", "):""}};l([c({readOnly:!0,type:Q})],xo.prototype,"items",void 0),l([c({readOnly:!0})],xo.prototype,"state",null),l([c()],xo.prototype,"view",void 0),xo=l([m("esri.widgets.Attribution.AttributionViewModel")],xo);var Yf=xo;var To="esri-attribution",pi={base:To,poweredBy:`${To}__powered-by`,sources:`${To}__sources`,open:`${To}--open`,sourcesOpen:`${To}__sources--open`,link:`${To}__link`,widgetIcon:re.description},Ke=class extends qe{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=pi.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Yf}initialize(){this.addHandles(Xt(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[pi.open]:this._isOpen};return y("div",{bind:this,class:this.classes(pi.base,O.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return y("div",{class:pi.poweredBy},"Powered by"," ",y("a",{class:pi.link,href:"http://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let e=this._isOpen,t=this._isInteractive,n=t?0:void 0,{attributionText:r}=this,i={[pi.sourcesOpen]:e,[O.interactive]:t};return y("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(pi.sources,i),innerHTML:r,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1,{clientHeight:n,clientWidth:r,scrollWidth:i}=e,o=i>r,s=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,s&&(t=!0),this._isOpen){let a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([c()],Ke.prototype,"_isOpen",void 0),l([c()],Ke.prototype,"_isInteractive",null),l([c()],Ke.prototype,"_attributionTextOverflowed",void 0),l([c()],Ke.prototype,"_prevSourceNodeHeight",void 0),l([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ke.prototype,"attributionText",null),l([c()],Ke.prototype,"iconClass",void 0),l([c()],Ke.prototype,"icon",void 0),l([c()],Ke.prototype,"itemDelimiter",void 0),l([c()],Ke.prototype,"label",null),l([c(),ot("esri/widgets/Attribution/t9n/Attribution")],Ke.prototype,"messages",void 0),l([c()],Ke.prototype,"view",null),l([c({type:Yf})],Ke.prototype,"viewModel",void 0),l([ar()],Ke.prototype,"_toggleState",null),Ke=l([m("esri.widgets.Attribution")],Ke);var g0=Ke;function v0(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}var bA="esri.widgets.CompassViewModel",hi=class extends qa(_){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(E(()=>this.view,this._updateRotationWatcher,de))}destroy(){this.view=null}get canShowNorth(){return v0(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(!this.view?.ready)return;let e={};this.view?.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;let t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?E(()=>e?.rotation,this._updateForRotation,de):E(()=>e?.camera,this._updateForCamera,de))}};l([c({readOnly:!0})],hi.prototype,"canShowNorth",null),l([c()],hi.prototype,"orientation",void 0),l([c({readOnly:!0})],hi.prototype,"state",null),l([c()],hi.prototype,"view",void 0),hi=l([m(bA)],hi);var Kf=hi;var y0="esri-compass",uc={base:y0,widgetIcon:re.locateCircled,iconContainer:`${y0}__icon-container`};var Dn=class extends qe{constructor(e,t){super(e,t),this.iconClass=uc.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Kf,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return sr({button:()=>import("./chunk-IUBUAUH6.js"),icon:()=>import("./chunk-QKBODARO.js")})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){let{orientation:e,state:t}=this.viewModel,n=t==="rotation"?"arrow-up":"compass-needle",{messages:r}=this;return y("div",{class:this.classes(uc.base,O.widget)},y("calcite-button",{"aria-label":r.reset,class:O.widgetButton,disabled:t==="disabled",kind:"neutral",onclick:this._reset,round:!0,scale:"s",title:r.reset},y("div",{"aria-hidden":"true",class:uc.iconContainer,title:r.reset},y("calcite-icon",{icon:n,scale:"m",styles:this._toRotationTransform(e)}))))}};l([c()],Dn.prototype,"goToOverride",null),l([c()],Dn.prototype,"iconClass",void 0),l([c()],Dn.prototype,"icon",void 0),l([c()],Dn.prototype,"label",null),l([c(),ot("esri/widgets/Compass/t9n/Compass")],Dn.prototype,"messages",void 0),l([c()],Dn.prototype,"view",null),l([c({type:Kf})],Dn.prototype,"viewModel",void 0),Dn=l([m("esri.widgets.Compass")],Dn);var w0=Dn;var ko="esri-navigation-toggle",Cn={base:ko,widgetIcon:re.pan2,button:`${ko}__button`,activeButton:`${ko}__button--active`,panButton:`${ko}__button--pan`,rotateButton:`${ko}__button--rotate`,isLayoutHorizontal:`${ko}--horizontal`};var Ao=class extends _{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(St(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){let e=this.view?.inputManager;e&&(e.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};l([c({readOnly:!0})],Ao.prototype,"state",null),l([c()],Ao.prototype,"navigationMode",void 0),l([c()],Ao.prototype,"view",void 0),Ao=l([m("esri.widgets.NavigationToggleViewModel")],Ao);var Qf=Ao;var Yt=class extends qe{constructor(e,t){super(e,t),this.iconClass=Cn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Qf}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){let e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",n={[O.disabled]:e,[Cn.isLayoutHorizontal]:this.layout==="horizontal"},r={[Cn.activeButton]:t},i={[Cn.activeButton]:!t},o=e?-1:0,s=this.messages.toggle;return y("div",{"aria-label":s,bind:this,class:this.classes(Cn.base,O.widget,n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,title:s},y("div",{class:this.classes(Cn.button,O.widgetButton,Cn.panButton,r)},y("span",{class:re.pan})),y("div",{class:this.classes(Cn.button,O.widgetButton,Cn.rotateButton,i)},y("span",{class:re.rotate})))}_toggle(){this.toggle()}};l([c()],Yt.prototype,"iconClass",void 0),l([c()],Yt.prototype,"icon",void 0),l([c()],Yt.prototype,"label",null),l([c({value:"vertical"})],Yt.prototype,"layout",null),l([c(),ot("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Yt.prototype,"messages",void 0),l([c()],Yt.prototype,"view",null),l([c({type:Qf})],Yt.prototype,"viewModel",void 0),l([ar()],Yt.prototype,"_toggle",null),Yt=l([m("esri.widgets.NavigationToggle")],Yt);var b0=Yt;var Yn=class extends qe{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){let e=this.enabled?0:-1,t={[O.disabled]:!this.enabled,[O.interactive]:this.enabled};return y("div",{bind:this,class:this.classes(O.widgetButton,O.widget,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},y("span",{"aria-hidden":"true",class:this.classes(av.icon,this.iconClass??""),role:"presentation"}),y("span",{class:re.fontFallbackText},this.title))}_triggerAction(){this.action.call(this)}};l([c()],Yn.prototype,"action",void 0),l([c()],Yn.prototype,"enabled",void 0),l([c()],Yn.prototype,"iconClass",void 0),l([c()],Yn.prototype,"icon",void 0),l([c()],Yn.prototype,"title",void 0),l([ar()],Yn.prototype,"_triggerAction",null),Yn=l([m("esri.widgets.IconButton")],Yn);var Jf=Yn;var fi=class extends _{get canZoomIn(){if(!this.view?.ready)return!1;let t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){let{view:e}=this;if(!e?.ready)return!1;let n=e.constraints?.effectiveMinScale;return n===0||this._scale<n}get _scale(){let e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};l([c({readOnly:!0})],fi.prototype,"canZoomIn",null),l([c({readOnly:!0})],fi.prototype,"canZoomOut",null),l([c()],fi.prototype,"view",void 0),l([c()],fi.prototype,"_scale",null),fi=l([m("esri.widgets.Zoom.ZoomConditions2D")],fi);var _0=fi;var No=class extends _{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([c({readOnly:!0})],No.prototype,"canZoomIn",null),l([c({readOnly:!0})],No.prototype,"canZoomOut",null),l([c()],No.prototype,"view",void 0),No=l([m("esri.widgets.Zoom.ZoomConditions3D")],No);var D0=No;var xr=class extends _{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new _0({view:e}):e.type==="3d"&&(this._zoomConditions=new D0({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Fc(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Fc(e.goTo({zoomFactor:.5}))}};l([c()],xr.prototype,"_zoomConditions",void 0),l([c()],xr.prototype,"canZoomIn",null),l([c()],xr.prototype,"canZoomOut",null),l([c({readOnly:!0})],xr.prototype,"state",null),l([c()],xr.prototype,"view",null),xr=l([m("esri.widgets.Zoom.ZoomViewModel")],xr);var Xf=xr;var em={base:"esri-zoom",widgetIcon:re.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"},En=class extends qe{constructor(e,t){super(e,t),this.iconClass=em.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Xf}initialize(){this._zoomInButton=new Jf({action:this.zoomIn.bind(this),iconClass:re.plus}),this._zoomOutButton=new Jf({action:this.zoomOut.bind(this),iconClass:re.minus})}destroy(){this._zoomInButton=fe(this._zoomInButton),this._zoomOutButton=fe(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){let e=this.viewModel,t={[em.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=e;this._zoomInButton.enabled=n,this._zoomOutButton.enabled=r;let{zoomIn:i,zoomOut:o}=this.messages;return this._zoomInButton.title=i,this._zoomOutButton.title=o,y("div",{class:this.classes(em.base,O.widget,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};l([c()],En.prototype,"iconClass",void 0),l([c()],En.prototype,"icon",void 0),l([c()],En.prototype,"label",null),l([c({value:"vertical"})],En.prototype,"layout",null),l([c(),ot("esri/widgets/Zoom/t9n/Zoom")],En.prototype,"messages",void 0),l([c()],En.prototype,"view",null),l([c({type:Xf})],En.prototype,"viewModel",void 0),En=l([m("esri.widgets.Zoom")],En);var C0=En;function _A(e){return e?.view!==void 0}var cc=class extends f0{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(n=>{let r=this._find(n),i=r?.widget;_A(i)&&(i.view=t)})},this._componentsWatcher=(t,n)=>{this._removeComponents(n),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([E(()=>this.components,this._componentsWatcher,de),E(()=>this.view,this._updateViewAwareWidgets,de)])}_add(e,t,n,r,i){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,t,n,r,i)}_removeComponents(e){e.forEach(t=>{let n=this._find(t);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){let{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){let t=this._createWidget(e);return new Mo({id:e,node:t})}_createWidget(e){let{view:t}=this;switch(e){case"attribution":return new g0({view:t});case"compass":return new w0({view:t});case"navigation-toggle":return new b0({view:t});case"zoom":return new C0({view:t})}}};l([c()],cc.prototype,"components",void 0),cc=l([m("esri.views.ui.DefaultUI")],cc);var dc=cc;var pc=class extends dc{constructor(e){super(e),this.components=["attribution","zoom"]}};l([c()],pc.prototype,"components",void 0),pc=l([m("esri.views.ui.2d.DefaultUI2D")],pc);var tm=pc;var I0,S0,M0,x0,T0,k0;function DA(){return C(this,null,function*(){let[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,Stage:o}]=yield Promise.all([import("./chunk-WFVGKFRC.js"),import("./chunk-JWRZG5O2.js")]);S0=e,M0=t,x0=n,T0=r,k0=i,I0=o})}var N=class extends gD(bD(yD(jD))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new jr({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new aa({view:this}),this.graphicsView=null,this.stateManager=new Ye({constraints:new Vf({view:this})}),this.stationaryManager=new So,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Bu(this),this.floors=new Q,this.highlightOptions=new ed,this.inputManager=new n0({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Xc,this.type="2d",this.ui=new tm,this.test={takeScreenshot:t=>C(this,null,function*(){return l0(this._getScreenshotView(t),t)})},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([E(()=>this.viewpoint,()=>this.stationaryManager.flip(),rr),this.on("resize",t=>this.stateManager.resize(t.width,t.height)),E(()=>this.animationManager?.animation,t=>{this.animation=t})]),qg()}destroy(){this._set("preconditionsReady",!1),this.frameTask=fe(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new zg(this.featuresTilingScheme)}get constraintsInfo(){let e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:e,constraints:t,center:n,viewpoint:r,extent:i}=this,o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!i&&(t?.effectiveLODs||(o=-1),(!n||e===0&&o===-1)&&(r?.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){let e=this._getDefaultViewpoint();if(!e)return!1;let t=this.spatialReference,n=e.targetGeometry;return!!$a(n.spatialReference,t)||bg()}set animation(e){let t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;let n=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1};e.when(n,n)}get background(){return E0(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;let t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){let{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){let e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(t=>!t.destroyed&&!("layerViews"in t)&&t.updating===!0));if(it("esri-2d-log-updating")){let t=this.allLayerViews.reduce((n,r)=>L(v({},n),{[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(t)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}hitTest(e,t){return C(this,null,function*(){return o0(this,e,t)})}takeScreenshot(e){return C(this,null,function*(){return a0(this._getScreenshotView(e),e)})}toMap(e){if(!this.ready)return null;let t=Lu(e)?Fu(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,n,r){return this.inputManager&&this.viewEvents.on(e,t,n,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return E0(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return Nf.hasLayerViewModule(e)}importLayerView(e){return Nf.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(k.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>L(v({},t),{mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){return C(this,null,function*(){let e=d0(this.type);if(it("safari")&&it("safari")<9&&(e=new A("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:it("safari")})),e!=null)throw k.getLogger(this).warn("#validate()",e.message),e})}loadAsyncDependencies(){return DA()}_getDefaultViewpoint(){let{constraints:e,initialExtent:t,map:n,padding:r,size:i}=this;if(!e)return null;let o=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,s=this.stateManager.getUserStartupOptions(this.size),a=o?.viewpoint,u=a?.targetGeometry?.extent??t,d=u?.center,p=a?.rotation??0,h=a?.scale||u&&Za(u,[i[0]-r.left-r.right,i[1]-r.top-r.bottom]),f=s.center??d,g=s.rotation??p,w=s.scale??h;return f&&w?new ye({targetGeometry:f,scale:w,rotation:g}):null}_startup(){this.timeline.begin("MapView Startup");let e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let t=new I0(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new k0,this._magnifierView.magnifier=this.magnifier;let n=new x0({view:this});this._set("labelManager",n);let r=new BD({view:this});this._set("animationManager",r);let i=new T0({view:this,animationManager:r});this._set("mapViewNavigation",i),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",s=>this.fatalError=s.error),E(()=>this.stationary,s=>t.stationary=s,Nn),E(()=>this.background,s=>{t.backgroundColor=s?.color,this._magnifierView.backgroundColor=s?.color},Nn),E(()=>this.magnifier,s=>this._magnifierView.magnifier=s,Nn),E(()=>this.renderingOptions,s=>t.renderingOptions=s,Nn),E(()=>this.highlightOptions,s=>t.highlightOptions=s,Nn),E(()=>this.state.id,()=>t.state=this.state,Nn)],"map-view"),this._updateStageChildren();let o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(s=>s(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});let e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let e=new Ag(mg.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);let t=new S0({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new M0(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){let e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){let{allLayerViews:t,padding:n,size:r,stage:i}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:n,size:r,stage:i}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(let t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};N.type="2d",l([c({readOnly:!0})],N.prototype,"animationManager",void 0),l([c({constructOnly:!0})],N.prototype,"deactivatedWebGLExtensions",void 0),l([c({constructOnly:!0})],N.prototype,"debugWebGLExtensions",void 0),l([c({readOnly:!0})],N.prototype,"featuresTilingScheme",void 0),l([c({readOnly:!0})],N.prototype,"fullOpacity",void 0),l([c()],N.prototype,"goToManager",void 0),l([c({readOnly:!0})],N.prototype,"graphicsTileStore",null),l([c()],N.prototype,"graphicsView",void 0),l([c()],N.prototype,"stateManager",void 0),l([c()],N.prototype,"constraintsInfo",null),l([c({readOnly:!0})],N.prototype,"state",null),l([c()],N.prototype,"initialExtentRequired",null),l([c()],N.prototype,"labelManager",void 0),l([c({readOnly:!0})],N.prototype,"mapViewNavigation",void 0),l([c({constructOnly:!0})],N.prototype,"renderCanvas",void 0),l([c()],N.prototype,"renderingOptions",void 0),l([c({constructOnly:!0})],N.prototype,"supersampleScreenshotsEnabled",void 0),l([c({readOnly:!0})],N.prototype,"supportsGround",void 0),l([c()],N.prototype,"_defaultsFromMapSettings",null),l([c({readOnly:!0})],N.prototype,"typeSpecificPreconditionsReady",null),l([c()],N.prototype,"animation",null),l([c({type:si})],N.prototype,"background",null),l([c()],N.prototype,"center",null),l([c({type:Vf})],N.prototype,"constraints",null),l([c()],N.prototype,"extent",null),l([c()],N.prototype,"floors",void 0),l([c({type:ed})],N.prototype,"highlightOptions",void 0),l([c({readOnly:!0})],N.prototype,"inputManager",void 0),l([c()],N.prototype,"map",void 0),l([c()],N.prototype,"padding",null),l([c({readOnly:!0})],N.prototype,"rendering",null),l([c()],N.prototype,"resizeAlign",null),l([c({readOnly:!0})],N.prototype,"resolution",null),l([c()],N.prototype,"rotation",null),l([c()],N.prototype,"scale",null),l([c({constructOnly:!0})],N.prototype,"spatialReferenceLocked",void 0),l([c()],N.prototype,"stationary",null),l([c({type:Xc,readOnly:!0})],N.prototype,"timeline",void 0),l([c({readOnly:!0})],N.prototype,"type",void 0),l([c({readOnly:!0})],N.prototype,"updating",null),l([c()],N.prototype,"viewpoint",null),l([c()],N.prototype,"zoom",null),l([c({readOnly:!0})],N.prototype,"navigating",null),l([c(),Te(e=>e instanceof dc?e:Am(tm,e))],N.prototype,"ui",void 0),N=l([m("esri.views.MapView")],N);var A0=N;function E0(e){return e?.declaredClass==="esri.WebMap"}var Tr=class extends _{constructor(e){super(e)}get editedBookmark(){let{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};l([c()],Tr.prototype,"bookmark",void 0),l([c({readOnly:!0})],Tr.prototype,"editedBookmark",null),l([c()],Tr.prototype,"state",null),l([c()],Tr.prototype,"validationState",void 0),l([c()],Tr.prototype,"loading",void 0),Tr=l([m("esri.widgets.Bookmarks.UserState")],Tr);var hc=Tr;var R0=Q.ofType(Qs),CA={width:128,height:128,format:"png"},fc={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},nm={time:!0},O0="esri.widgets.Bookmarks.BookmarksViewModel",N0=k.getLogger(O0),_t=class extends qa(nr.EventedAccessor){constructor(e){super(e),this.capabilities=v({},nm),this.activeBookmark=null,this.view=null}destroy(){this.view=null,this._set("activeBookmark",null)}get abilities(){return Nc(N0,"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities}set abilities(e){Nc(N0,"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities=e}castAbilities(e){return v(v({},nm),e)}castCapabilities(e){return v(v({},nm),e)}get bookmarks(){return this.view?.map?.bookmarks??new R0}set bookmarks(e){this._overrideIfSome("bookmarks",e)}set defaultCreateOptions(e){this._set("defaultCreateOptions",v(v({},fc),e))}get defaultCreateOptions(){return fc}set defaultEditOptions(e){this._set("defaultEditOptions",v(v({},fc),e))}get defaultEditOptions(){return fc}get state(){let{view:e}=this;return e&&!e.ready?"loading":"ready"}createBookmark(e){return C(this,null,function*(){let{view:t,defaultCreateOptions:n,capabilities:r}=this;if(!t)throw new A("create-bookmark:invalid-view","Cannot create a bookmark without a view.");let{takeScreenshot:i,screenshotSettings:o,captureViewpoint:s,captureRotation:a,captureScale:u,captureTimeExtent:d}=v(v({},n),e),p=i?yield this._createThumbnail(o):void 0,h=r.time&&d&&t.timeExtent!=null?t.timeExtent.clone():void 0;return new Qs(v(v(v({},p&&{thumbnail:p}),d&&{timeExtent:h}),s&&{viewpoint:this._createViewpoint({view:t,captureScale:u,captureRotation:a})}))})}editBookmark(e,t){return C(this,null,function*(){if(!e)return e;let{view:n,defaultEditOptions:r}=this;if(!n)throw new A("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");let{takeScreenshot:i,screenshotSettings:o,captureViewpoint:s,captureRotation:a,captureScale:u,captureTimeExtent:d}=v(v({},r),t),p=i?yield this._createThumbnail(o):void 0;return p&&(e.thumbnail=p),s&&(e.viewpoint=this._createViewpoint({view:n,captureScale:u,captureRotation:a})),d&&n.timeExtent!=null&&(e.timeExtent=n.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:e}),e})}goTo(e){let{capabilities:t,view:n}=this;if(!n)throw new A("go-to:invalid-view","Cannot go to a bookmark without a view");let r=e?.viewpoint;if(!r)throw new A("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});this._set("activeBookmark",e);let i={target:r},o=this.callGoTo(i),s=e?.timeExtent;return t.time&&s&&(n.timeExtent=s),this.emit("bookmark-select",{bookmark:e}),o.catch(()=>{}).then(()=>this._set("activeBookmark",null)),o}_createThumbnail(e){return C(this,null,function*(){let{view:t}=this;if(!t)throw new A("bookmark:invalid-view","Cannot create slide thumbnail without a view");let n=yield t.takeScreenshot(v(v({},CA),e));return new Rt({url:n.dataUrl})})}_createViewpoint({view:e,captureRotation:t,captureScale:n}){let r=e.viewpoint?.clone();return new ye({targetGeometry:e.extent?.clone(),rotation:(t?r?.rotation:null)??0,scale:(n?r?.scale:null)??0})}};l([c()],_t.prototype,"abilities",null),l([Te("abilities")],_t.prototype,"castAbilities",null),l([c()],_t.prototype,"capabilities",void 0),l([Te("capabilities")],_t.prototype,"castCapabilities",null),l([c({readOnly:!0})],_t.prototype,"activeBookmark",void 0),l([c({type:R0})],_t.prototype,"bookmarks",null),l([c()],_t.prototype,"defaultCreateOptions",null),l([c()],_t.prototype,"defaultEditOptions",null),l([c({readOnly:!0})],_t.prototype,"state",null),l([c()],_t.prototype,"view",void 0),_t=l([m(O0)],_t);var rm=_t;var Ue="esri-bookmarks",In=`${Ue}__authoring`,Kt=`${Ue}__bookmark`,pa=`${Ue}__time-extent`,S={base:Ue,widgetIcon:re.bookmark,loaderContainer:`${Ue}__loader-container`,loader:`${Ue}__loader`,fadeIn:`${Ue}--fade-in`,bookmarkList:`${Ue}__list`,bookmarkListSortable:`${Ue}__list--sortable`,bookmark:Kt,bookmarkButton:`${Kt}-button`,bookmarkImageContainer:`${Kt}-image-container`,bookmarkImageContainerHasImage:`${Kt}-image-container--has-image`,bookmarkEditButtonContainer:`${Kt}-edit-button-container`,bookmarkEditButton:`${Kt}-edit-button`,bookmarkDragHandle:`${Ue}_bookmark-drag-handle`,bookmarkDragHandleIcon:`${Ue}_bookmark-drag-handle-icon`,bookmarkIcon:`${Kt}-icon`,bookmarkImage:`${Ue}__image`,bookmarkLabel:`${Kt}-label`,bookmarkName:`${Kt}-name`,bookmarkTimeExtent:`${Kt}-time-extent`,bookmarkActive:`${Kt}--active`,noBookmarksHeader:`${Ue}__no-bookmarks-heading`,noBookmarksDescription:`${Ue}__no-bookmarks-description`,addingBookmark:`${Ue}__adding-bookmark`,addBookmark:`${Ue}__add-bookmark`,addBookmarkButton:`${Ue}__add-bookmark-button`,addBookmarkIcon:`${Ue}__add-bookmark-icon`,authoringCard:`${In}-card`,authoringContainer:`${In}-container`,authoringForm:`${In}-form`,authoringFormAdding:`${In}-form--adding`,authoringLabel:`${In}-label`,authoringLabelStartPadding:`${In}-label--start-padding`,authoringActions:`${In}-actions`,authoringInputInvalid:`${In}-input--invalid`,authoringDeleteButton:`${In}-delete-button`,authoringCancelButton:`${In}-cancel-button`,timeExtentContainer:`${pa}-container`,timeExtent:pa,timeExtentGroup:`${pa}-group`,timeExtentDate:`${pa}-date`,timeExtentTime:`${pa}-time`};var mc,Pt=mc=class extends _{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map(t=>t instanceof mc?t:new mc(t)):null}};l([c()],Pt.prototype,"autoCloseMenu",void 0),l([c()],Pt.prototype,"iconClass",void 0),l([c()],Pt.prototype,"items",void 0),l([Te("items")],Pt.prototype,"castItems",null),l([c()],Pt.prototype,"label",void 0),l([c()],Pt.prototype,"open",void 0),l([c()],Pt.prototype,"selected",void 0),l([c()],Pt.prototype,"selectionEnabled",void 0),l([c()],Pt.prototype,"clickFunction",void 0),Pt=mc=l([m("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],Pt);var mi=Pt;var Ro=class extends _{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map(t=>t instanceof mi?t:new mi(t)):null}};l([c()],Ro.prototype,"items",void 0),l([Te("items")],Ro.prototype,"castItems",null),l([c()],Ro.prototype,"open",void 0),Ro=l([m("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Ro);var P0=Ro;var dt="esri-button-menu",Dt={base:dt,content:`${dt}__content`,itemWrapper:`${dt}__item-wrapper`,label:`${dt}__label`,icon:`${dt}__icon`,item:`${dt}__item`,itemLabel:`${dt}__item-label`,itemLabelContent:`${dt}__item-label-content`,selectableMenuItem:`${dt}__item--selectable`,selectedMenuItem:`${dt}__item--selected`,checkbox:`${dt}__checkbox`,embeddedContentWrapper:`${dt}__embedded-content-wrapper`,button:`${dt}__button`,buttonSelected:`${dt}__button--selected`},kr=class extends qe{constructor(e,t){super(e,t),this._popover=null,this.disabled=!1,this.iconClass="",this.viewModel=new P0}loadDependencies(){return sr({button:()=>import("./chunk-IUBUAUH6.js"),popover:()=>import("./chunk-IKWMUUDB.js")})}destroy(){this._popover=null}get items(){return this.viewModel.items}set items(e){this.viewModel.items=e}get open(){return this.viewModel.open}set open(e){this.viewModel.open=e}render(){let{open:e}=this,t=`${this.id}-button`;return y("div",{class:this.classes(Dt.base,O.widget),key:"menu"},y("calcite-button",{appearance:"transparent",bind:this,class:this.classes(Dt.button,e&&Dt.buttonSelected),disabled:this.disabled,iconStart:e?"x":"ellipsis",id:t,kind:"neutral",label:this.label||"button",onclick:()=>this._toggleOpen(e),tabIndex:0}),y("calcite-popover",{afterCreate:qm,afterUpdate:()=>this._popover?.reposition(),autoClose:!0,bind:this,"data-node-ref":"_popover",label:this.label||"menu",open:e,overlayPositioning:"fixed",placement:"bottom",pointerDisabled:!0,referenceElement:t,onCalcitePopoverClose:this._onPopoverClose},this._renderMenuContent()))}_onPopoverClose(){this.open=!1}_renderMenuContent(){let{id:e,open:t}=this;return y("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:Dt.content,hidden:!t,key:"esri-button-menu-content"},y("ul",{"aria-labelledby":`${e}-button`,bind:this,class:Dt.itemWrapper,id:`${e}-menu`,role:"menu"},this.items?.length?this._renderItems():null))}_renderItems(){return this.items?.map((e,t)=>this._renderItem(e,t))}_renderItem(e,t,n){let r=n!=null?`${this.id}-menu-item-${t}-${n}`:`${this.id}-menu-item-${t}`,i=`${r}-label`,o=this.classes(Dt.item,e.selectionEnabled?Dt.selectableMenuItem:null,e.selectionEnabled&&e.selected?Dt.selectedMenuItem:null);return y("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":t,"data-item-subIndex":n,for:r,key:r,onclick:s=>this._handleMenuItemInteraction(s,e),onkeydown:s=>this._handleMenuItemKeydown(s,e),role:"menuitem",tabIndex:this.disabled?-1:0},y("input",{checked:e.selected,class:Dt.checkbox,disabled:!0,id:r,name:r,tabIndex:-1,type:"checkbox"}),y("label",{class:Dt.itemLabel,for:r,id:i},y("span",{"aria-hidden":"true",class:this.classes(Dt.icon,e.iconClass)}),y("span",{class:Dt.itemLabelContent},Wm.sanitize(e.label))),y("ul",{"aria-labelledby":i,class:Dt.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},e?.items?.map((s,a)=>this._renderItem(s,t,a))))}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){let n=xa(e);Pa(n)&&this._handleMenuItemInteraction(e,t),n==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){e.focus()}_toggleOpen(e){this.open=!e}_afterMenuItemCreate(e){e["data-item-index"]===0&&e.focus()}};l([c()],kr.prototype,"disabled",void 0),l([c()],kr.prototype,"iconClass",void 0),l([c()],kr.prototype,"items",null),l([c()],kr.prototype,"open",null),l([c()],kr.prototype,"viewModel",void 0),kr=l([m("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],kr);var F0=kr;function L0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L0(Object(n),!0).forEach(function(r){EA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bc(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bc=function(t){return typeof t}:bc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function EA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(){return Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(this,arguments)}function IA(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function SA(e,t){if(e==null)return{};var n=IA(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var MA="1.15.1";function Kn(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Jn=Kn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_a=Kn(/Edge/i),V0=Kn(/firefox/i),ga=Kn(/safari/i)&&!Kn(/chrome/i)&&!Kn(/android/i),q0=Kn(/iP(ad|od|hone)/i),W0=Kn(/chrome/i)&&Kn(/android/i),Z0={capture:!1,passive:!1};function ne(e,t,n){e.addEventListener(t,n,!Jn&&Z0)}function X(e,t,n){e.removeEventListener(t,n,!Jn&&Z0)}function Ic(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function xA(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Sn(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Ic(e,t):Ic(e,t))||r&&e===n)return e;if(e===n)break}while(e=xA(e))}return null}var j0=/\s+/g;function Ct(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(j0," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(j0," ")}}function T(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Vo(e,t){var n="";if(typeof e=="string")n=e;else do{var r=T(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Y0(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Mn(){var e=document.scrollingElement;return e||document.documentElement}function Oe(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,a,u,d,p,h;if(e!==window&&e.parentNode&&e!==Mn()?(o=e.getBoundingClientRect(),s=o.top,a=o.left,u=o.bottom,d=o.right,p=o.height,h=o.width):(s=0,a=0,u=window.innerHeight,d=window.innerWidth,p=window.innerHeight,h=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Jn))do if(i&&i.getBoundingClientRect&&(T(i,"transform")!=="none"||n&&T(i,"position")!=="static")){var f=i.getBoundingClientRect();s-=f.top+parseInt(T(i,"border-top-width")),a-=f.left+parseInt(T(i,"border-left-width")),u=s+o.height,d=a+o.width;break}while(i=i.parentNode);if(r&&e!==window){var g=Vo(i||e),w=g&&g.a,D=g&&g.d;g&&(s/=D,a/=w,h/=w,p/=D,u=s+p,d=a+h)}return{top:s,left:a,bottom:u,right:d,width:h,height:p}}}function K0(e){var t=Oe(e),n=parseInt(T(e,"padding-left")),r=parseInt(T(e,"padding-top")),i=parseInt(T(e,"padding-right")),o=parseInt(T(e,"padding-bottom"));return t.top+=r+parseInt(T(e,"border-top-width")),t.left+=n+parseInt(T(e,"border-left-width")),t.width=e.clientWidth-n-i,t.height=e.clientHeight-r-o,t.bottom=t.top+t.height,t.right=t.left+t.width,t}function B0(e,t,n){for(var r=Rr(e,!0),i=Oe(e)[t];r;){var o=Oe(r)[n],s=void 0;if(n==="top"||n==="left"?s=i>=o:s=i<=o,!s)return r;if(r===Mn())break;r=Rr(r,!1)}return!1}function jo(e,t,n,r){for(var i=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==R.ghost&&(r||s[o]!==R.dragged)&&Sn(s[o],n.draggable,e,!1)){if(i===t)return s[o];i++}o++}return null}function vm(e,t){for(var n=e.lastElementChild;n&&(n===R.ghost||T(n,"display")==="none"||t&&!Ic(n,t));)n=n.previousElementSibling;return n||null}function Ft(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==R.clone&&(!t||Ic(e,t))&&n++;return n}function $0(e){var t=0,n=0,r=Mn();if(e)do{var i=Vo(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function TA(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Rr(e,t){if(!e||!e.getBoundingClientRect)return Mn();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=T(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Mn();if(r||t)return n;r=!0}}while(n=n.parentNode);return Mn()}function kA(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function im(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var va;function Q0(e,t){return function(){if(!va){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),va=setTimeout(function(){va=void 0},t)}}}function AA(){clearTimeout(va),va=void 0}function J0(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function X0(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var It="Sortable"+new Date().getTime();function NA(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(T(i,"display")==="none"||i===R.ghost)){e.push({target:i,rect:Oe(i)});var o=xn({},e[e.length-1].rect);if(i.thisAnimationDuration){var s=Vo(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(TA(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;e.forEach(function(a){var u=0,d=a.target,p=d.fromRect,h=Oe(d),f=d.prevFromRect,g=d.prevToRect,w=a.rect,D=Vo(d,!0);D&&(h.top-=D.f,h.left-=D.e),d.toRect=h,d.thisAnimationDuration&&im(f,h)&&!im(p,h)&&(w.top-h.top)/(w.left-h.left)===(p.top-h.top)/(p.left-h.left)&&(u=OA(w,f,g,i.options)),im(h,p)||(d.prevFromRect=p,d.prevToRect=h,u||(u=i.options.animation),i.animate(d,w,h,u)),u&&(o=!0,s=Math.max(s,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,s){if(s){T(r,"transition",""),T(r,"transform","");var a=Vo(this.el),u=a&&a.a,d=a&&a.d,p=(i.left-o.left)/(u||1),h=(i.top-o.top)/(d||1);r.animatingX=!!p,r.animatingY=!!h,T(r,"transform","translate3d("+p+"px,"+h+"px,0)"),this.forRepaintDummy=RA(r),T(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),T(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){T(r,"transition",""),T(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function RA(e){return e.offsetWidth}function OA(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Oo=[],om={initializeByDefault:!0},Da={mount:function(t){for(var n in om)om.hasOwnProperty(n)&&!(n in t)&&(t[n]=om[n]);Oo.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Oo.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";Oo.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][o]&&n[s.pluginName][o](xn({sortable:n},r)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](xn({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Oo.forEach(function(a){var u=a.pluginName;if(!(!t.options[u]&&!a.initializeByDefault)){var d=new a(t,n,t.options);d.sortable=t,d.options=t.options,t[u]=d,Qn(r,d.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var r={};return Oo.forEach(function(i){typeof i.eventProperties=="function"&&Qn(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Oo.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function PA(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,a=e.fromEl,u=e.oldIndex,d=e.newIndex,p=e.oldDraggableIndex,h=e.newDraggableIndex,f=e.originalEvent,g=e.putSortable,w=e.extraEventProperties;if(t=t||n&&n[It],!!t){var D,le=t.options,H="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Jn&&!_a?D=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(r,!0,!0)),D.to=s||n,D.from=a||n,D.item=i||n,D.clone=o,D.oldIndex=u,D.newIndex=d,D.oldDraggableIndex=p,D.newDraggableIndex=h,D.originalEvent=f,D.pullMode=g?g.lastPutMode:void 0;var ue=xn(xn({},w),Da.getEventProperties(r,t));for(var z in ue)D[z]=ue[z];n&&n.dispatchEvent(D),le[H]&&le[H].call(t,D)}}var FA=["evt"],pt=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=SA(r,FA);Da.pluginEvent.bind(R)(t,n,xn({dragEl:b,parentEl:Ie,ghostEl:B,rootEl:we,nextEl:yi,lastDownEl:_c,cloneEl:Ce,cloneHidden:Nr,dragStarted:ha,putSortable:ze,activeSortable:R.active,originalEvent:i,oldIndex:Lo,oldDraggableIndex:ya,newIndex:Et,newDraggableIndex:Ar,hideGhostForTarget:rC,unhideGhostForTarget:iC,cloneNowHidden:function(){Nr=!0},cloneNowShown:function(){Nr=!1},dispatchSortableEvent:function(a){rt({sortable:n,name:a,originalEvent:i})}},o))};function rt(e){PA(xn({putSortable:ze,cloneEl:Ce,targetEl:b,rootEl:we,oldIndex:Lo,oldDraggableIndex:ya,newIndex:Et,newDraggableIndex:Ar},e))}var b,Ie,B,we,yi,_c,Ce,Nr,Lo,Et,ya,Ar,gc,ze,Fo=!1,Sc=!1,Mc=[],gi,Qt,sm,am,U0,H0,ha,Po,wa,ba=!1,vc=!1,Dc,Qe,lm=[],hm=!1,xc=[],kc=typeof document<"u",yc=q0,z0=_a||Jn?"cssFloat":"float",LA=kc&&!W0&&!q0&&"draggable"in document.createElement("div"),eC=function(){if(kc){if(Jn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),tC=function(t,n){var r=T(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=jo(t,0,n),s=jo(t,1,n),a=o&&T(o),u=s&&T(s),d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Oe(o).width,p=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Oe(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return s&&(u.clear==="both"||u.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||d>=i&&r[z0]==="none"||s&&r[z0]==="none"&&d+p>i)?"vertical":"horizontal"},VA=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,a=r?n.left:n.top,u=r?n.right:n.bottom,d=r?n.width:n.height;return i===a||o===u||i+s/2===a+d/2},jA=function(t,n){var r;return Mc.some(function(i){var o=i[It].options.emptyInsertThreshold;if(!(!o||vm(i))){var s=Oe(i),a=t>=s.left-o&&t<=s.right+o,u=n>=s.top-o&&n<=s.bottom+o;if(a&&u)return r=i}}),r},nC=function(t){function n(o,s){return function(a,u,d,p){var h=a.options.group.name&&u.options.group.name&&a.options.group.name===u.options.group.name;if(o==null&&(s||h))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(a,u,d,p),s)(a,u,d,p);var f=(s?a:u).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var r={},i=t.group;(!i||bc(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},rC=function(){!eC&&B&&T(B,"display","none")},iC=function(){!eC&&B&&T(B,"display","")};kc&&!W0&&document.addEventListener("click",function(e){if(Sc)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Sc=!1,!1},!0);var vi=function(t){if(b){t=t.touches?t.touches[0]:t;var n=jA(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[It]._onDragOver(r)}}},BA=function(t){b&&b.parentNode[It]._isOutsideThisEl(t.target)};function R(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Qn({},t),e[It]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tC(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:R.supportPointer!==!1&&"PointerEvent"in window&&!ga,emptyInsertThreshold:5};Da.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);nC(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:LA,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ne(e,"pointerdown",this._onTapStart):(ne(e,"mousedown",this._onTapStart),ne(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ne(e,"dragover",this),ne(e,"dragenter",this)),Mc.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Qn(this,NA())}R.prototype={constructor:R,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Po=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,b):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,u=(a||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,p=i.filter;if(ZA(r),!b&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ga&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Sn(u,i.draggable,r,!1),!(u&&u.animated)&&_c!==u)){if(Lo=Ft(u),ya=Ft(u,i.draggable),typeof p=="function"){if(p.call(this,t,u,this)){rt({sortable:n,rootEl:d,name:"filter",targetEl:u,toEl:r,fromEl:r}),pt("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(p&&(p=p.split(",").some(function(h){if(h=Sn(d,h.trim(),r,!1),h)return rt({sortable:n,rootEl:h,name:"filter",targetEl:u,fromEl:r,toEl:r}),pt("filter",n,{evt:t}),!0}),p)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!Sn(d,i.handle,r,!1)||this._prepareDragStart(t,a,u)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,u;if(r&&!b&&r.parentNode===o){var d=Oe(r);if(we=o,b=r,Ie=b.parentNode,yi=b.nextSibling,_c=r,gc=s.group,R.dragged=b,gi={target:b,clientX:(n||t).clientX,clientY:(n||t).clientY},U0=gi.clientX-d.left,H0=gi.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,b.style["will-change"]="all",u=function(){if(pt("delayEnded",i,{evt:t}),R.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!V0&&i.nativeDraggable&&(b.draggable=!0),i._triggerDragStart(t,n),rt({sortable:i,name:"choose",originalEvent:t}),Ct(b,s.chosenClass,!0)},s.ignore.split(",").forEach(function(p){Y0(b,p.trim(),um)}),ne(a,"dragover",vi),ne(a,"mousemove",vi),ne(a,"touchmove",vi),ne(a,"mouseup",i._onDrop),ne(a,"touchend",i._onDrop),ne(a,"touchcancel",i._onDrop),V0&&this.nativeDraggable&&(this.options.touchStartThreshold=4,b.draggable=!0),pt("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(_a||Jn))){if(R.eventCanceled){this._onDrop();return}ne(a,"mouseup",i._disableDelayedDrag),ne(a,"touchend",i._disableDelayedDrag),ne(a,"touchcancel",i._disableDelayedDrag),ne(a,"mousemove",i._delayedDragTouchMoveHandler),ne(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&ne(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,s.delay)}else u()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){b&&um(b),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;X(t,"mouseup",this._disableDelayedDrag),X(t,"touchend",this._disableDelayedDrag),X(t,"touchcancel",this._disableDelayedDrag),X(t,"mousemove",this._delayedDragTouchMoveHandler),X(t,"touchmove",this._delayedDragTouchMoveHandler),X(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ne(document,"pointermove",this._onTouchMove):n?ne(document,"touchmove",this._onTouchMove):ne(document,"mousemove",this._onTouchMove):(ne(b,"dragend",this),ne(we,"dragstart",this._onDragStart));try{document.selection?Cc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Fo=!1,we&&b){pt("dragStarted",this,{evt:n}),this.nativeDraggable&&ne(document,"dragover",BA);var r=this.options;!t&&Ct(b,r.dragClass,!1),Ct(b,r.ghostClass,!0),R.active=this,t&&this._appendGhost(),rt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Qt){this._lastX=Qt.clientX,this._lastY=Qt.clientY,rC();for(var t=document.elementFromPoint(Qt.clientX,Qt.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Qt.clientX,Qt.clientY),t!==n);)n=t;if(b.parentNode[It]._isOutsideThisEl(t),n)do{if(n[It]){var r=void 0;if(r=n[It]._onDragOver({clientX:Qt.clientX,clientY:Qt.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);iC()}},_onTouchMove:function(t){if(gi){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=B&&Vo(B,!0),a=B&&s&&s.a,u=B&&s&&s.d,d=yc&&Qe&&$0(Qe),p=(o.clientX-gi.clientX+i.x)/(a||1)+(d?d[0]-lm[0]:0)/(a||1),h=(o.clientY-gi.clientY+i.y)/(u||1)+(d?d[1]-lm[1]:0)/(u||1);if(!R.active&&!Fo){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(B){s?(s.e+=p-(sm||0),s.f+=h-(am||0)):s={a:1,b:0,c:0,d:1,e:p,f:h};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");T(B,"webkitTransform",f),T(B,"mozTransform",f),T(B,"msTransform",f),T(B,"transform",f),sm=p,am=h,Qt=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!B){var t=this.options.fallbackOnBody?document.body:we,n=Oe(b,!0,yc,!0,t),r=this.options;if(yc){for(Qe=t;T(Qe,"position")==="static"&&T(Qe,"transform")==="none"&&Qe!==document;)Qe=Qe.parentNode;Qe!==document.body&&Qe!==document.documentElement?(Qe===document&&(Qe=Mn()),n.top+=Qe.scrollTop,n.left+=Qe.scrollLeft):Qe=Mn(),lm=$0(Qe)}B=b.cloneNode(!0),Ct(B,r.ghostClass,!1),Ct(B,r.fallbackClass,!0),Ct(B,r.dragClass,!0),T(B,"transition",""),T(B,"transform",""),T(B,"box-sizing","border-box"),T(B,"margin",0),T(B,"top",n.top),T(B,"left",n.left),T(B,"width",n.width),T(B,"height",n.height),T(B,"opacity","0.8"),T(B,"position",yc?"absolute":"fixed"),T(B,"zIndex","100000"),T(B,"pointerEvents","none"),R.ghost=B,t.appendChild(B),T(B,"transform-origin",U0/parseInt(B.style.width)*100+"% "+H0/parseInt(B.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(pt("dragStart",this,{evt:t}),R.eventCanceled){this._onDrop();return}pt("setupClone",this),R.eventCanceled||(Ce=X0(b),Ce.removeAttribute("id"),Ce.draggable=!1,Ce.style["will-change"]="",this._hideClone(),Ct(Ce,this.options.chosenClass,!1),R.clone=Ce),r.cloneId=Cc(function(){pt("clone",r),!R.eventCanceled&&(r.options.removeCloneOnHide||we.insertBefore(Ce,b),r._hideClone(),rt({sortable:r,name:"clone"}))}),!n&&Ct(b,o.dragClass,!0),n?(Sc=!0,r._loopId=setInterval(r._emulateDragOver,50)):(X(document,"mouseup",r._onDrop),X(document,"touchend",r._onDrop),X(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,b)),ne(document,"drop",r),T(b,"transform","translateZ(0)")),Fo=!0,r._dragStartId=Cc(r._dragStarted.bind(r,n,t)),ne(document,"selectstart",r),ha=!0,ga&&T(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,s,a=this.options,u=a.group,d=R.active,p=gc===u,h=a.sort,f=ze||d,g,w=this,D=!1;if(hm)return;function le(Uo,dC){pt(Uo,w,xn({evt:t,isOwner:p,axis:g?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:h,fromSortable:f,target:r,completed:ue,onMove:function(Dm,pC){return wc(we,n,b,i,Dm,Oe(Dm),t,pC)},changed:z},dC))}function H(){le("dragOverAnimationCapture"),w.captureAnimationState(),w!==f&&f.captureAnimationState()}function ue(Uo){return le("dragOverCompleted",{insertion:Uo}),Uo&&(p?d._hideClone():d._showClone(w),w!==f&&(Ct(b,ze?ze.options.ghostClass:d.options.ghostClass,!1),Ct(b,a.ghostClass,!0)),ze!==w&&w!==R.active?ze=w:w===R.active&&ze&&(ze=null),f===w&&(w._ignoreWhileAnimating=r),w.animateAll(function(){le("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===b&&!b.animated||r===n&&!r.animated)&&(Po=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(b.parentNode[It]._isOutsideThisEl(t.target),!Uo&&vi(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),D=!0}function z(){Et=Ft(b),Ar=Ft(b,a.draggable),rt({sortable:w,name:"change",toEl:n,newIndex:Et,newDraggableIndex:Ar,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Sn(r,a.draggable,n,!0),le("dragOver"),R.eventCanceled)return D;if(b.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||w._ignoreWhileAnimating===r)return ue(!1);if(Sc=!1,d&&!a.disabled&&(p?h||(s=Ie!==we):ze===this||(this.lastPutMode=gc.checkPull(this,d,b,t))&&u.checkPut(this,d,b,t))){if(g=this._getDirection(t,r)==="vertical",i=Oe(b),le("dragOverValid"),R.eventCanceled)return D;if(s)return Ie=we,H(),this._hideClone(),le("revert"),R.eventCanceled||(yi?we.insertBefore(b,yi):we.appendChild(b)),ue(!0);var ce=vm(n,a.draggable);if(!ce||zA(t,g,this)&&!ce.animated){if(ce===b)return ue(!1);if(ce&&n===t.target&&(r=ce),r&&(o=Oe(r)),wc(we,n,b,i,r,o,t,!!r)!==!1)return H(),ce&&ce.nextSibling?n.insertBefore(b,ce.nextSibling):n.appendChild(b),Ie=n,z(),ue(!0)}else if(ce&&HA(t,g,this)){var Se=jo(n,0,a,!0);if(Se===b)return ue(!1);if(r=Se,o=Oe(r),wc(we,n,b,i,r,o,t,!1)!==!1)return H(),n.insertBefore(b,Se),Ie=n,z(),ue(!0)}else if(r.parentNode===n){o=Oe(r);var he=0,Le,Tn=b.parentNode!==n,Xe=!VA(b.animated&&b.toRect||i,r.animated&&r.toRect||o,g),Pr=g?"top":"left",Xn=B0(r,"top","top")||B0(b,"top","top"),Bo=Xn?Xn.scrollTop:void 0;Po!==r&&(Le=o[Pr],ba=!1,vc=!Xe&&a.invertSwap||Tn),he=GA(t,r,o,g,Xe?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,vc,Po===r);var kn;if(he!==0){var Fr=Ft(b);do Fr-=he,kn=Ie.children[Fr];while(kn&&(T(kn,"display")==="none"||kn===B))}if(he===0||kn===r)return ue(!1);Po=r,wa=he;var $o=r.nextElementSibling,er=!1;er=he===1;var Ca=wc(we,n,b,i,r,o,t,er);if(Ca!==!1)return(Ca===1||Ca===-1)&&(er=Ca===1),hm=!0,setTimeout(UA,30),H(),er&&!$o?n.appendChild(b):r.parentNode.insertBefore(b,er?$o:r),Xn&&J0(Xn,0,Bo-Xn.scrollTop),Ie=b.parentNode,Le!==void 0&&!vc&&(Dc=Math.abs(Le-Oe(r)[Pr])),z(),ue(!0)}if(n.contains(b))return ue(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",vi),X(document,"mousemove",vi),X(document,"touchmove",vi)},_offUpEvents:function(){var t=this.el.ownerDocument;X(t,"mouseup",this._onDrop),X(t,"touchend",this._onDrop),X(t,"pointerup",this._onDrop),X(t,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Et=Ft(b),Ar=Ft(b,r.draggable),pt("drop",this,{evt:t}),Ie=b&&b.parentNode,Et=Ft(b),Ar=Ft(b,r.draggable),R.eventCanceled){this._nulling();return}Fo=!1,vc=!1,ba=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fm(this.cloneId),fm(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ga&&T(document.body,"user-select",""),T(b,"transform",""),t&&(ha&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(we===Ie||ze&&ze.lastPutMode!=="clone")&&Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),b&&(this.nativeDraggable&&X(b,"dragend",this),um(b),b.style["will-change"]="",ha&&!Fo&&Ct(b,ze?ze.options.ghostClass:this.options.ghostClass,!1),Ct(b,this.options.chosenClass,!1),rt({sortable:this,name:"unchoose",toEl:Ie,newIndex:null,newDraggableIndex:null,originalEvent:t}),we!==Ie?(Et>=0&&(rt({rootEl:Ie,name:"add",toEl:Ie,fromEl:we,originalEvent:t}),rt({sortable:this,name:"remove",toEl:Ie,originalEvent:t}),rt({rootEl:Ie,name:"sort",toEl:Ie,fromEl:we,originalEvent:t}),rt({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),ze&&ze.save()):Et!==Lo&&Et>=0&&(rt({sortable:this,name:"update",toEl:Ie,originalEvent:t}),rt({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),R.active&&((Et==null||Et===-1)&&(Et=Lo,Ar=ya),rt({sortable:this,name:"end",toEl:Ie,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){pt("nulling",this),we=b=Ie=B=yi=Ce=_c=Nr=gi=Qt=ha=Et=Ar=Lo=ya=Po=wa=ze=gc=R.dragged=R.ghost=R.clone=R.active=null,xc.forEach(function(t){t.checked=!0}),xc.length=sm=am=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":b&&(this._onDragOver(t),$A(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)n=r[i],Sn(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||WA(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];Sn(a,this.options.draggable,i,!1)&&(r[o]=a)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Sn(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=Da.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&nC(r)},destroy:function(){pt("destroy",this);var t=this.el;t[It]=null,X(t,"mousedown",this._onTapStart),X(t,"touchstart",this._onTapStart),X(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(t,"dragover",this),X(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Mc.splice(Mc.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Nr){if(pt("hideClone",this),R.eventCanceled)return;T(Ce,"display","none"),this.options.removeCloneOnHide&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),Nr=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Nr){if(pt("showClone",this),R.eventCanceled)return;b.parentNode==we&&!this.options.group.revertClone?we.insertBefore(Ce,b):yi?we.insertBefore(Ce,yi):we.appendChild(Ce),this.options.group.revertClone&&this.animate(b,Ce),T(Ce,"display",""),Nr=!1}}};function $A(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function wc(e,t,n,r,i,o,s,a){var u,d=e[It],p=d.options.onMove,h;return window.CustomEvent&&!Jn&&!_a?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=t,u.from=e,u.dragged=n,u.draggedRect=r,u.related=i||t,u.relatedRect=o||Oe(t),u.willInsertAfter=a,u.originalEvent=s,e.dispatchEvent(u),p&&(h=p.call(d,u,s)),h}function um(e){e.draggable=!1}function UA(){hm=!1}function HA(e,t,n){var r=Oe(jo(n.el,0,n.options,!0)),i=K0(n.el),o=10;return t?e.clientX<i.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-o||e.clientY<r.bottom&&e.clientX<r.left}function zA(e,t,n){var r=Oe(vm(n.el,n.options.draggable)),i=K0(n.el),o=10;return t?e.clientX>i.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+o||e.clientX>r.right&&e.clientY>r.top}function GA(e,t,n,r,i,o,s,a){var u=r?e.clientY:e.clientX,d=r?n.height:n.width,p=r?n.top:n.left,h=r?n.bottom:n.right,f=!1;if(!s){if(a&&Dc<d*i){if(!ba&&(wa===1?u>p+d*o/2:u<h-d*o/2)&&(ba=!0),ba)f=!0;else if(wa===1?u<p+Dc:u>h-Dc)return-wa}else if(u>p+d*(1-i)/2&&u<h-d*(1-i)/2)return qA(t)}return f=f||s,f&&(u<p+d*o/2||u>h-d*o/2)?u>p+d/2?1:-1:0}function qA(e){return Ft(b)<Ft(e)?1:-1}function WA(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function ZA(e){xc.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&xc.push(r)}}function Cc(e){return setTimeout(e,0)}function fm(e){return clearTimeout(e)}kc&&ne(document,"touchmove",function(e){(R.active||Fo)&&e.cancelable&&e.preventDefault()});R.utils={on:ne,off:X,css:T,find:Y0,is:function(t,n){return!!Sn(t,n,t,!1)},extend:kA,throttle:Q0,closest:Sn,toggleClass:Ct,clone:X0,index:Ft,nextTick:Cc,cancelNextTick:fm,detectDirection:tC,getChild:jo};R.get=function(e){return e[It]};R.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(R.utils=xn(xn({},R.utils),r.utils)),Da.mount(r)})};R.create=function(e,t){return new R(e,t)};R.version=MA;var Re=[],fa,mm,gm=!1,cm,dm,Tc,ma;function YA(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?ne(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ne(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ne(document,"touchmove",this._handleFallbackAutoScroll):ne(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),G0(),Ec(),AA()},nulling:function(){Tc=mm=fa=gm=ma=cm=dm=null,Re.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,s);if(Tc=n,r||this.options.forceAutoScrollFallback||_a||Jn||ga){pm(n,this.options,a,r);var u=Rr(a,!0);gm&&(!ma||o!==cm||s!==dm)&&(ma&&G0(),ma=setInterval(function(){var d=Rr(document.elementFromPoint(o,s),!0);d!==u&&(u=d,Ec()),pm(n,i.options,d,r)},10),cm=o,dm=s)}else{if(!this.options.bubbleScroll||Rr(a,!0)===Mn()){Ec();return}pm(n,this.options,Rr(a,!1),!1)}}},Qn(e,{pluginName:"scroll",initializeByDefault:!0})}function Ec(){Re.forEach(function(e){clearInterval(e.pid)}),Re=[]}function G0(){clearInterval(ma)}var pm=Q0(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,u=Mn(),d=!1,p;mm!==n&&(mm=n,Ec(),fa=t.scroll,p=t.scrollFn,fa===!0&&(fa=Rr(n,!0)));var h=0,f=fa;do{var g=f,w=Oe(g),D=w.top,le=w.bottom,H=w.left,ue=w.right,z=w.width,ce=w.height,Se=void 0,he=void 0,Le=g.scrollWidth,Tn=g.scrollHeight,Xe=T(g),Pr=g.scrollLeft,Xn=g.scrollTop;g===u?(Se=z<Le&&(Xe.overflowX==="auto"||Xe.overflowX==="scroll"||Xe.overflowX==="visible"),he=ce<Tn&&(Xe.overflowY==="auto"||Xe.overflowY==="scroll"||Xe.overflowY==="visible")):(Se=z<Le&&(Xe.overflowX==="auto"||Xe.overflowX==="scroll"),he=ce<Tn&&(Xe.overflowY==="auto"||Xe.overflowY==="scroll"));var Bo=Se&&(Math.abs(ue-i)<=s&&Pr+z<Le)-(Math.abs(H-i)<=s&&!!Pr),kn=he&&(Math.abs(le-o)<=s&&Xn+ce<Tn)-(Math.abs(D-o)<=s&&!!Xn);if(!Re[h])for(var Fr=0;Fr<=h;Fr++)Re[Fr]||(Re[Fr]={});(Re[h].vx!=Bo||Re[h].vy!=kn||Re[h].el!==g)&&(Re[h].el=g,Re[h].vx=Bo,Re[h].vy=kn,clearInterval(Re[h].pid),(Bo!=0||kn!=0)&&(d=!0,Re[h].pid=setInterval((function(){r&&this.layer===0&&R.active._onTouchMove(Tc);var $o=Re[this.layer].vy?Re[this.layer].vy*a:0,er=Re[this.layer].vx?Re[this.layer].vx*a:0;typeof p=="function"&&p.call(R.dragged.parentNode[It],er,$o,e,Tc,Re[this.layer].el)!=="continue"||J0(Re[this.layer].el,er,$o)}).bind({layer:h}),24))),h++}while(t.bubbleScroll&&f!==u&&(f=Rr(f,!1)));gm=d}},30),oC=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,u=t.unhideGhostForTarget;if(n){var d=r||o;a();var p=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(p.clientX,p.clientY);u(),d&&!d.el.contains(h)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function ym(){}ym.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=jo(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:oC};Qn(ym,{pluginName:"revertOnSpill"});function wm(){}wm.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:oC};Qn(wm,{pluginName:"removeOnSpill"});R.mount(new YA);R.mount(wm,ym);var sC=R;function KA(e,t,n){e.splice(n,0,e.splice(t,1)[0])}var QA="bookmarks",wi="data-bookmark-uid",aC={addBookmark:!0,thumbnail:!0,time:!0},bm=/^https:\/\/.*/i,JA="esri.widgets.Bookmarks",me=class extends qe{constructor(e,t){super(e,t),this._tooltipReferenceMap=new Map,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=[],this._editIncludeTimeExtent=void 0,this._userState=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.iconClass=S.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new rm,this.visibleElements=v({},aC)}initialize(){this.addHandles([E(()=>this.viewModel?.bookmarks,()=>this._bookmarksInitialized(),de),E(()=>this.editingEnabled,()=>this._toggleSorting(),de)])}destroy(){this._destroySortable(),this._editMenu.destroy(),this._tooltipReferenceMap.clear()}loadDependencies(){return sr({label:()=>import("./chunk-U67T7PP4.js"),switch:()=>import("./chunk-HPJKIBUH.js"),tooltip:()=>import("./chunk-UDWYNSP3.js")})}get _editMenuItems(){let{messages:e,_userState:t}=this,n=t?.editedBookmark?.thumbnail?.url;return[new mi({label:e?.menu.refreshThumbnail,iconClass:re.refresh,clickFunction:()=>this._refreshThumbnail()}),new mi({label:n&&bm.test(n)?e?.menu.editImageUrl:e?.menu.useImageUrl,iconClass:re.link,clickFunction:()=>this._startUseImageUrl()}),n?new mi({label:e?.menu.removeThumbnail,iconClass:re.erase,clickFunction:()=>this._removeThumbnail()}):null].filter(An)}get _editMenu(){let{_editMenuItems:e,messages:t,disabled:n}=this,r=this._get("_editMenu");r&&r.destroy();let i=new F0({disabled:n,iconClass:re.handleHorizontal,label:t?.menu.label});return i.items=e,i}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultEditOptions(){return this.viewModel.defaultEditOptions}set defaultEditOptions(e){this.viewModel.defaultEditOptions=e}get bookmarks(){return this.viewModel.bookmarks}set bookmarks(e){this.viewModel.bookmarks=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return v(v({},aC),e)}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){let{state:e}=this.viewModel,t=e==="loading"?this._renderLoading():this._renderBookmarks();return y("div",{class:this.classes(S.base,O.widget,O.panel,{[O.widgetDisabled]:this.disabled})},t)}startAddBookmark(){this._userState=new hc({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}_renderBookmarkTooltips(e){return e.toArray().map(t=>this._renderBookmarkTooltip(t))??[]}_renderBookmarkTooltip(e){let{_tooltipReferenceMap:t,messagesCommon:n}=this,r=this._getBookmarkTitle(e),i=`${n?.dragHandleTitle} ${r}`;return e?y("calcite-tooltip",{key:`tooltip-${e.uid}`,referenceElement:t.get(e.uid)},i):null}_renderLoading(){return y("div",{class:S.loaderContainer,key:"loader",tabIndex:this.disabled?-1:void 0},y("div",{class:S.loader}))}_renderNoBookmarksContainer(){let{messages:e,disabled:t}=this;return y("div",{class:O.empty,key:"no-bookmarks",tabIndex:t?-1:void 0},y("span",{"aria-hidden":"true",class:this.classes(O.noBookmarksIcon,S.widgetIcon)}),y(sv,{class:this.classes(O.heading,S.noBookmarksHeader),level:this.headingLevel},e?.noBookmarksHeading),y("p",{class:S.noBookmarksDescription},e?.noBookmarksDescription))}_renderAddBookmarkLoading(){return y("div",{class:S.addingBookmark,key:"adding-bookmark"},y("span",{"aria-hidden":"true",class:this.classes(re.loadingIndicator,O.rotating)}),this.messages?.addingBookmark)}_renderBookmarkItems(e){if(!e)return[];let{_userState:t,editingEnabled:n}=this;return e.map(r=>n&&r&&t&&(t.state==="edit"||t.state==="edit-thumbnail")&&t.bookmark===r?t.state==="edit-thumbnail"?this._renderEditingBookmarkUrl(t.editedBookmark):this._renderEditingBookmark(t.editedBookmark):this._renderBookmark(r)).toArray()}_renderBookmarksContainer(e){let{_userState:t,editingEnabled:n,disabled:r,view:i}=this,o=t?.state==="add",s=i&&n&&!o?this._renderAddBookmarkButton():null,a=n?o&&t.loading?this._renderAddBookmarkLoading():t?.state==="add"?this._renderAddingBookmark():null:null;return[y("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"aria-label":this.messages?.widgetLabel,bind:this,class:this.classes(S.bookmarkList,{[S.bookmarkListSortable]:this.editingEnabled}),"data-node-ref":"_sortableNode",key:"bookmark-list",tabIndex:r?-1:void 0},this._renderBookmarkItems(e)),s,a]}_renderAddBookmarkButton(){return this.visibleElements.addBookmark?y("div",{class:S.addBookmark,key:"add-bookmark-item"},y("button",{afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,bind:this,class:this.classes(O.button,O.buttonTertiary,S.addBookmarkButton),"data-node-ref":"_addBookmarkButtonNode",disabled:this.disabled,onclick:this.startAddBookmark,type:"button"},y("span",{"aria-hidden":"true",class:this.classes(S.addBookmarkIcon,re.plus)}),this.messages?.addBookmark)):null}_renderBookmarks(){let{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),n=t&&t.length,r=n||this.editingEnabled?this._renderBookmarksContainer(t):null;return[n?null:this._renderNoBookmarksContainer(),r,this._renderBookmarkTooltips(e)]}_renderEditContainer(e){let{messagesCommon:t,disabled:n}=this,r=this._getBookmarkTitle(e);return y("div",{class:S.bookmarkEditButtonContainer,key:"edit-container"},y("button",{"aria-label":`${t?.edit} ${r}`,bind:this,class:S.bookmarkEditButton,"data-bookmark":e,disabled:n,onclick:this._showEditBookmarkForm,title:`${t?.edit} ${r}`,type:"button"},y("span",{"aria-hidden":"true",class:re.edit})))}_renderDragHandle(e){let{messagesCommon:t,disabled:n}=this,r=this._getBookmarkTitle(e),i={[wi]:e.uid};return y("div",v({afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,"aria-label":`${t?.dragHandleTitle} ${r}`,"aria-pressed":this._selectedSortUid===e.uid?"true":"false",bind:this,class:S.bookmarkDragHandle,"data-bookmark":e,key:"drag-handle",onblur:this._dragHandleBlur,onkeydown:this._dragHandleKeydown,role:"button",tabIndex:n?-1:0},i),y("span",{"aria-hidden":"true",class:this.classes(S.bookmarkDragHandleIcon,re.handleVertical)}))}_renderBookmarkImageIcon(){return y("span",{"aria-hidden":"true",class:this.classes(S.bookmarkIcon,S.widgetIcon)})}_renderBookmarkImage(e){let{visibleElements:t}=this,{thumbnail:n}=e,r=n?.url||"";return t.thumbnail&&r?y("img",{alt:"",class:S.bookmarkImage,src:r}):null}_renderBookmarkTimeSwitch(e){let{messages:t,disabled:n}=this,{timeExtent:r}=e,{view:i}=this.viewModel;return i?.timeExtent??r?y("calcite-label",{layout:"inline-space-between"},t?.includeTimeExtent,y("calcite-switch",{checked:!!r,disabled:n,scale:"s",onCalciteSwitchChange:o=>{this._editIncludeTimeExtent=!!o.target.checked}})):null}_renderBookmarkTimeExtent(e){let{visibleElements:t}=this,{timeExtent:n}=e;return n?y("span",{class:S.timeExtent},[n.start!=null&&y("span",{class:S.timeExtentGroup,key:"start-date-group"},y("span",{class:S.timeExtentDate,key:"start-date"},this._formatDate(n.start)),t.time?y("span",{class:S.timeExtentTime,key:"start-time"},this._formatTime(n.start)):null),n.end!=null&&(n.start==null||n.start.getTime()!==n.end.getTime())&&y("span",{class:S.timeExtentGroup,key:"end-date-group"},y("span",{class:S.timeExtentDate,key:"end-date"},this._formatDate(n.end)),t.time?y("span",{class:S.timeExtentTime,key:"end-time"},this._formatTime(n.end)):null)]):null}_renderBookmarkButton(e){let{disabled:t}=this,{timeExtent:n}=e,{capabilities:r}=this.viewModel,i=this._getBookmarkTitle(e),{thumbnail:o}=e,s=y("div",{class:this.classes(S.bookmarkImageContainer,o?.url?S.bookmarkImageContainerHasImage:null)},this._renderBookmarkImage(e)||this._renderBookmarkImageIcon()),a=r.time&&n?y("span",{class:S.bookmarkTimeExtent,key:"time-extent"},this._renderBookmarkTimeExtent(e)):null;return y("button",{bind:this,class:S.bookmarkButton,"data-bookmark":e,disabled:t,key:"bookmark-button",onclick:this._goToBookmark,type:"button"},s,y("div",{class:S.bookmarkLabel},y("span",{class:S.bookmarkName,key:"bookmark-title"},i),a))}_renderBookmark(e){let{activeBookmark:t}=this.viewModel,n={[S.bookmarkActive]:t===e},r=this.editingEnabled?this._renderEditContainer(e):null,i={[wi]:e.uid},o=this.editingEnabled?this._renderDragHandle(e):null;return y("li",v({class:this.classes(S.bookmark,n),key:e},i),o,this._renderBookmarkButton(e),r)}_renderEditingBookmarkName(e){let{messages:t,_userState:n,disabled:r}=this,i=n?.validationState==="name-required";return y("label",{class:this.classes({[S.authoringLabel]:!0,[S.authoringLabelStartPadding]:!!this.visibleElements?.thumbnail})},t?.title,i?y("strong",null,t?.invalidTitle):null,y("input",{afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,bind:this,class:this.classes(O.input,i?S.authoringInputInvalid:null),"data-bookmark":e,"data-node-ref":"_editInputNode",disabled:r,placeholder:t?.titlePlaceholder,required:!0,type:"text",value:e.name}))}_renderEditingBookmarkUrlActions(){let{messagesCommon:e,disabled:t}=this;return y("div",{class:S.authoringActions},y("input",{bind:this,class:this.classes(O.button,O.buttonTertiary),disabled:t,onclick:this._closeUrlEditBookmarkForm,type:"button",value:e?.back}),y("input",{class:O.button,disabled:t,type:"submit",value:e?.add}))}_renderEditingBookmarkActions(){let{messagesCommon:e,disabled:t}=this,n=this._userState?.bookmark;return y("div",{class:S.authoringActions},y("input",{bind:this,class:this.classes(O.button,O.buttonTertiary,S.authoringDeleteButton),"data-bookmark":n,disabled:t,onclick:this._deleteBookmark,type:"button",value:e?.delete}),y("input",{bind:this,class:this.classes(O.button,O.buttonTertiary),disabled:t,onclick:this._closeEditBookmarkForm,type:"button",value:e?.cancel}),y("input",{class:O.button,disabled:t,type:"submit",value:e?.save}))}_renderEditingBookmarkUrlInput(e){let{messages:t,_userState:n,disabled:r}=this,i=e.thumbnail?.url,o=i&&bm.test(i)?i:void 0,s=n?.validationState==="absolute-url-required";return y("label",{class:this.classes({[S.authoringLabel]:!0,[S.authoringLabelStartPadding]:!!this.visibleElements?.thumbnail})},s?y("strong",null,t?.invalidImageUrl):null,y("input",{afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,bind:this,class:this.classes(O.input,s?S.authoringInputInvalid:null),"data-bookmark":e,"data-node-ref":"_urlEditInputNode",disabled:r,placeholder:t?`https://<${t.imageUrlPlaceholder}>`:void 0,required:!0,title:t?.imageUrlTooltip,type:"text",value:o}))}_renderEditingBookmarkUrl(e){if(!e)return null;let t={[wi]:e.uid};return y("li",v({class:S.authoringCard,key:"edit-bookmark-url-form"},t),y("form",{bind:this,class:S.authoringForm,disabled:this.disabled,onsubmit:this._editBookmarkUrlSubmit},this._renderEditingBookmarkUrlInput(e),this._renderEditingBookmarkUrlActions()))}_renderEditingBookmark(e){if(!e)return null;let t={[wi]:e.uid},{capabilities:n}=this.viewModel,r=n.time?y("div",{class:S.timeExtentContainer,key:"edit-bookmark-time-container"},this._renderBookmarkTimeSwitch(e),this._editIncludeTimeExtent?this._renderBookmarkTimeExtent(e):null):null;return y("li",v({class:S.authoringCard,key:"edit-bookmark-form"},t),y("form",{bind:this,class:S.authoringForm,disabled:this.disabled,onsubmit:this._editBookmarkSubmit},y("div",{class:S.authoringContainer},this.visibleElements.thumbnail?y("div",{class:S.bookmarkImageContainer},this._renderBookmarkImage(e),this._editMenu.render()):null,this._renderEditingBookmarkName(e)),r,this._renderEditingBookmarkActions()))}_renderAddingBookmarkName(){let{_userState:e,messages:t,disabled:n}=this,r=e?.validationState==="name-required";return y("label",{class:S.authoringLabel},t?.title,r?y("strong",null,t?.invalidTitle):null,y("input",{afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,bind:this,class:this.classes(O.input,r?S.authoringInputInvalid:null),"data-node-ref":"_addInputNode",disabled:n,placeholder:t?.titlePlaceholder,required:!0,type:"text",value:""}))}_renderAddingBookmarkActions(){let{messagesCommon:e,disabled:t}=this;return y("div",{class:this.classes(S.authoringActions)},y("input",{bind:this,class:this.classes(O.button,O.buttonTertiary,S.authoringCancelButton),disabled:t,onclick:this._endAddBookmark.bind(this),type:"button",value:e?.cancel}),y("input",{class:O.button,disabled:t,type:"submit",value:e?.add}))}_renderAddingBookmark(){return y("div",{class:S.authoringCard,key:"add-bookmark-form"},y("form",{bind:this,class:this.classes(S.authoringForm,S.authoringFormAdding),onsubmit:this._addBookmarkSubmit},this._renderAddingBookmarkName(),this._renderAddingBookmarkActions()))}_setTooltipReference(e,t){this._tooltipReferenceMap.set(t.uid,e),this.scheduleRender()}_getBookmarkTitle(e){return(e?.name||this.messagesCommon?.untitled)??""}_formatDate(e){return e?jc(e,L(v({},Vc("short-date")),{timeZone:this.view?.timeZone??or})):""}_formatTime(e){return e?jc(e,L(v({},Vc("long-time")),{timeZone:this.view?.timeZone??or})):""}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){let{_sortableSavedItems:t}=this,n=["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"],r=xa(e);if(!n.includes(r))return;let{_sortable:i,_selectedSortUid:o}=this;if(!i)return;let s=i.toArray(),a=e.target.getAttribute(wi),u=s.indexOf(a);if(Pa(r)){let p=o&&o===a;return this._selectedSortUid=p?null:a,this._sortableSavedItems=p?[]:i.toArray(),void this.scheduleRender()}if(r==="Tab")return this._selectedSortUid=null,void this.scheduleRender();if(r==="Escape"&&t.length!==0)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,i,a),void this.scheduleRender();if(u===-1||!o)return;let d=r==="ArrowUp"?u-1:u+1;d>=s.length||d<=-1||(KA(s,u,d),this._updateSortItems(s,i,a))}_updateSortItems(e,t,n){t.sort(e),this._sortBookmarks(t),this._focusSortUid=n,this._selectedSortUid=n}_focusDragHandle(e){let t=Ac(e);if(!t)return;this._setTooltipReference(e,t);let{_focusSortUid:n}=this;!e||!n||e.getAttribute(wi)===n&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){let{_sortable:e,_sortableNode:t,editingEnabled:n,disabled:r}=this;if(t)if(e)e.option("disabled",r||!n);else{let i=sC.create(t,{dataIdAttr:wi,handle:`.${S.bookmarkDragHandle}`,group:QA,disabled:r||!n,onSort:()=>this._sortBookmarks(i)});this._sortable=i}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){let{bookmarks:t}=this.viewModel;if(!t)return;let n=e.toArray();t.sort((r,i)=>{let o=n.indexOf(r.uid),s=n.indexOf(i.uid);return o>s?1:o<s?-1:0})}_destroySortable(){let{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){let e="bookmarks-init";this.removeHandles(e),this.addHandles(Xt(()=>this.viewModel?.bookmarks,"change",()=>this._bookmarksChanged()),e)}_bookmarksChanged(){let e="bookmarks-change",{bookmarks:t}=this.viewModel;this.removeHandles(e);let n=t.map(r=>E(()=>[r?.name,r?.thumbnail?.url],()=>this.scheduleRender()));this.addHandles(n.toArray(),e),this.scheduleRender()}_showEditBookmarkForm(e){let t=Ac(e.currentTarget);t&&(this._editIncludeTimeExtent=!!t.timeExtent,this._focusEditInputBox=!0,this._userState=new hc({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender())}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState&&(this._userState.state="edit")}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();let{_addInputNode:t,_userState:n}=this;if(!n)return;let r=t?t.value.trim():null;r?(n.loading=!0,this.viewModel.createBookmark().then(i=>{i.name=r,this.viewModel.bookmarks.add(i),this._endAddBookmark()})):n.validationState="name-required"}_editBookmarkAndClose(e,t){return C(this,null,function*(){let{viewModel:n}=this;yield n.editBookmark(e,v(v({},n.defaultEditOptions),t)),this._closeEditBookmarkForm()})}_editBookmarkSubmit(e){e.preventDefault();let{_editInputNode:t,_userState:n,_editIncludeTimeExtent:r}=this;if(!n?.bookmark||!n.editedBookmark)return;let i=t&&t.value.trim();i?(n.bookmark.name=i,n.bookmark.thumbnail=n.editedBookmark.thumbnail,r||(n.bookmark.timeExtent=null),this._editBookmarkAndClose(n.bookmark,{takeScreenshot:!1,captureTimeExtent:r})):n.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){let t=Ac(e.currentTarget);t&&this.viewModel.bookmarks.remove(t)}_goToBookmark(e){let t=Ac(e.currentTarget);t&&(this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t))}_refreshThumbnail(){return C(this,null,function*(){let{_userState:e,_editMenu:t,viewModel:n}=this;e&&(e.validationState=void 0,yield n.editBookmark(e.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender())})}_removeThumbnail(){let{_userState:e,_editMenu:t}=this;e?.editedBookmark&&(e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender())}_startUseImageUrl(){this._userState&&(this._userState.state="edit-thumbnail"),this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();let{_urlEditInputNode:t,_userState:n}=this;if(!t||!n)return;let r=t.value;bm.test(r)?(r&&n.editedBookmark&&(n.editedBookmark.thumbnail=new Rt({url:r})),this._closeUrlEditBookmarkForm()):n.validationState="absolute-url-required"}};function Ac(e){return e["data-bookmark"]}l([c()],me.prototype,"_editIncludeTimeExtent",void 0),l([c({type:hc})],me.prototype,"_userState",void 0),l([c({readOnly:!0})],me.prototype,"_editMenuItems",null),l([c({readOnly:!0})],me.prototype,"_editMenu",null),l([c()],me.prototype,"defaultCreateOptions",null),l([c()],me.prototype,"defaultEditOptions",null),l([c()],me.prototype,"bookmarks",null),l([c()],me.prototype,"disabled",void 0),l([c()],me.prototype,"editingEnabled",void 0),l([c()],me.prototype,"headingLevel",void 0),l([c()],me.prototype,"goToOverride",null),l([c()],me.prototype,"iconClass",void 0),l([c()],me.prototype,"icon",void 0),l([c()],me.prototype,"label",null),l([c(),ot("esri/widgets/Bookmarks/t9n/Bookmarks")],me.prototype,"messages",void 0),l([c(),ot("esri/t9n/common")],me.prototype,"messagesCommon",void 0),l([c()],me.prototype,"uiStrings",void 0),l([c()],me.prototype,"view",null),l([c({type:rm}),Zm(["select-bookmark","bookmark-edit","bookmark-select"])],me.prototype,"viewModel",void 0),l([c()],me.prototype,"visibleElements",void 0),l([Te("visibleElements")],me.prototype,"castVisibleElements",null),l([c()],me.prototype,"endAddBookmark",null),l([c()],me.prototype,"startAddBookmark",null),me=l([m(JA)],me);var lC=me;var Or=class extends _{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Xt(()=>this.view?.ui,"expand",e=>{let{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){let t=!!e;this._set("expanded",t);let n=this.view?.ui;n&&n.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&St(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?St(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){let e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;let{autoCollapse:t,view:n}=this;if(!n||!t)return;let r=Bm(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this.addHandles(r,e),this._viewpointHandle=r}_collapse(){this.expanded=!1}};l([c({value:!1})],Or.prototype,"autoCollapse",null),l([c({value:!1})],Or.prototype,"expanded",null),l([c()],Or.prototype,"group",void 0),l([c({readOnly:!0})],Or.prototype,"state",null),l([c({value:null})],Or.prototype,"view",null),Or=l([m("esri.widgets.Expand.ExpandViewModel")],Or);var _m=Or;var ht="esri-expand",Je={base:ht,modeAuto:`${ht}--auto`,modeDrawer:`${ht}--drawer`,modeFloating:`${ht}--floating`,container:`${ht}__container`,containerExpanded:`${ht}__container--expanded`,panel:`${ht}__panel`,icon:"esri-collapse__icon",iconExpanded:`${ht}__icon--expanded`,iconNumber:`${ht}__icon-number`,iconNumberExpanded:`${ht}__icon-number--expanded`,content:`${ht}__content`,contentExpanded:`${ht}__content--expanded`,expandMask:`${ht}__mask`,expandMaskExpanded:`${ht}__mask--expanded`},ge=class extends qe{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseIcon=null,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconClass=null,this.icon=null,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new _m,this._handleKeyDown=n=>{let{closeOnEsc:r,_toggleButtonEl:i,expanded:o}=this;!o||!r||n.target===i||n.key!=="Escape"||(typeof r=="function"?r(n):r)&&(this.expanded=!1,i?.focus())}}loadDependencies(){return sr({icon:()=>import("./chunk-QKBODARO.js")})}get contentId(){return`${this.id}_controls_content`}get expandTitle(){let{expanded:e,messagesCommon:t,collapseTooltip:n,expandTooltip:r}=this;return(e?n||t?.collapse:r||t?.expand)??""}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return re.collapse}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return Fa(this.content)?this.content.iconClass:re.expand}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get expandIcon(){return Fa(this.content)?this.content.icon:void 0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){let{mode:e}=this,t={[Je.modeAuto]:e==="auto",[Je.modeDrawer]:e==="drawer",[Je.modeFloating]:e==="floating"};return y("div",{class:this.classes(Je.base,O.widget,t),onkeydown:this._handleKeyDown},this._renderMask(),this._renderContainer())}_renderContainer(){let{expanded:e}=this,t={[Je.containerExpanded]:e};return y("div",{class:this.classes(Je.container,t)},this._renderPanel(),this._renderContent())}_renderMask(){let{expanded:e}=this,t={[Je.expandMaskExpanded]:e};return y("div",{bind:this,class:this.classes(Je.expandMask,t),onclick:this._toggle})}_renderBadgeNumber(){let{expanded:e,iconNumber:t}=this;return t&&!e?y("span",{class:Je.iconNumber,key:"expand__icon-number"},t):null}_renderPanelNumber(){let{iconNumber:e,expanded:t}=this;return e&&t?y("span",{class:this.classes(Je.iconNumber,Je.iconNumberExpanded),key:"expand__expand-icon-number"},e):null}_renderIcon(){let e=(this.expanded?this.collapseIcon:this.expandIcon)??"";return y("calcite-icon",{icon:e,key:"icon",scale:"s"})}_renderLegacyIcon(){let{collapseIconClass:e,expandIconClass:t,expanded:n}=this,r={[Je.iconExpanded]:n};return t!=null&&(r[t]=!n),e!=null&&(r[e]=e===t||n),y("span",{"aria-hidden":"true",class:this.classes(Je.icon,r),key:"legacy-icon"})}_renderTitle(){return y("span",{class:re.fontFallbackText},this.expandTitle)}_renderExpandButton(){let{expanded:e,expandTitle:t,expandIcon:n,collapseIcon:r,contentId:i}=this;return y("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:O.widgetButton,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabIndex:0,title:t},this._renderBadgeNumber(),!e&&n!=null||e&&r!=null?this._renderIcon():this._renderLegacyIcon(),this._renderTitle())}_renderPanel(){return y("div",{class:Je.panel},this._renderExpandButton(),this._renderPanelNumber())}_renderContent(){let{expanded:e,contentId:t,content:n}=this,r={[Je.contentExpanded]:e},i={id:t,role:"region",class:this.classes(Je.content,r)};return typeof n=="string"?y("div",v({innerHTML:n,key:"content__string"},i)):Fa(n)?y("div",v({key:"content__widget"},i),n.render()):n instanceof HTMLElement?y("div",v({afterCreate:this._attachToNode,bind:n,key:"content__html-element"},i)):Km(n)?y("div",v({afterCreate:this._attachToNode,bind:n.domNode,key:"content__node"},i)):null}_toggle(){this.toggle()}_attachToNode(e){let t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};l([c({readOnly:!0})],ge.prototype,"contentId",null),l([c({readOnly:!0})],ge.prototype,"expandTitle",null),l([c()],ge.prototype,"autoCollapse",null),l([c()],ge.prototype,"closeOnEsc",void 0),l([c()],ge.prototype,"collapseIconClass",null),l([c()],ge.prototype,"collapseIcon",void 0),l([c()],ge.prototype,"collapseTooltip",void 0),l([c()],ge.prototype,"content",void 0),l([c()],ge.prototype,"expanded",null),l([c()],ge.prototype,"expandIconClass",null),l([c()],ge.prototype,"expandIcon",null),l([c()],ge.prototype,"expandTooltip",void 0),l([c()],ge.prototype,"group",null),l([c()],ge.prototype,"iconClass",void 0),l([c()],ge.prototype,"icon",void 0),l([c()],ge.prototype,"iconNumber",void 0),l([c()],ge.prototype,"label",null),l([c(),ot("esri/widgets/Expand/t9n/Expand")],ge.prototype,"messages",void 0),l([c(),ot("esri/t9n/common")],ge.prototype,"messagesCommon",void 0),l([c()],ge.prototype,"mode",void 0),l([c()],ge.prototype,"view",null),l([c({type:_m})],ge.prototype,"viewModel",void 0),l([ar()],ge.prototype,"_toggle",null),ge=l([m("esri.widgets.Expand")],ge);var uC=ge;var XA=["mapViewNode"],cC=(()=>{let t=class t{constructor(){this.view=null}initializeMap(){let r=this.mapViewEl.nativeElement,i=new mD({portalItem:{id:"aa1d3f80270146208328cf66d022e09c"}});this.view=new A0({container:r,map:i});let o=new lC({view:this.view,editingEnabled:!0}),s=new uC({view:this.view,content:o,expanded:!0});return this.view.ui.add(s,"top-right"),i.when(()=>{i.bookmarks&&i.bookmarks.length?console.log("Bookmarks: ",i.bookmarks.length):console.log("No bookmarks in this webmap.")}),this.view.when()}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready.")})}ngOnDestroy(){this.view&&this.view.destroy()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$l({type:t,selectors:[["app-root"]],viewQuery:function(i,o){if(i&1&&Mb(XA,7),i&2){let s;zp(s=Gp())&&(o.mapViewEl=s.first)}},standalone:!0,features:[Jl],decls:2,vars:0,consts:[["mapViewNode",""]],template:function(i,o){i&1&&bs(0,"div",null,0)},dependencies:[Qp],styles:['@import"https://js.arcgis.com/4.28/@arcgis/core/assets/esri/themes/light/main.css";.esri-view[_ngcontent-%COMP%], #mapViewNode[_ngcontent-%COMP%]{padding:0;margin:0;height:100%;width:100%}']});let e=t;return e})();Kb(cC,R_).catch(e=>console.error(e));
