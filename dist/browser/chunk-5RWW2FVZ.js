import{a as j}from"./chunk-DDZ3KR2Q.js";import{a as F}from"./chunk-YEFTRNE3.js";import{a as f}from"./chunk-5JBKPHFU.js";import"./chunk-CN5O6E6T.js";import"./chunk-4KJ462UD.js";import"./chunk-HSB35X5B.js";import"./chunk-MYELF7MV.js";import"./chunk-MS3ZOARX.js";import"./chunk-KCKP7FIY.js";import"./chunk-7K4WIBFN.js";import"./chunk-C7M5MSEL.js";import"./chunk-HPJ6EQFO.js";import"./chunk-6N5DPLFH.js";import"./chunk-O5K35OSE.js";import"./chunk-D6LLE2YP.js";import"./chunk-O5IGEGOS.js";import{b as y}from"./chunk-YQRTHGFD.js";import"./chunk-YH4Z47PR.js";import"./chunk-CJJRHJ2S.js";import"./chunk-JOYABHZZ.js";import"./chunk-VDN3XKL2.js";import"./chunk-SVEGZVCP.js";import"./chunk-AQ74ANSJ.js";import"./chunk-SAOUSUZE.js";import"./chunk-6MGDEI2H.js";import"./chunk-QSGARGRB.js";import"./chunk-QZ4L25WE.js";import"./chunk-4ATIL3QV.js";import"./chunk-WUM4JBII.js";import"./chunk-U62SHMHB.js";import"./chunk-55ESOXMJ.js";import"./chunk-BCREO4Q5.js";import"./chunk-EJ3VIBAJ.js";import"./chunk-4LHUJTP5.js";import"./chunk-NBRBW7H5.js";import"./chunk-CBOFHDSC.js";import"./chunk-HB7BVTLV.js";import"./chunk-WZKL6OPG.js";import"./chunk-WF37UVOV.js";import"./chunk-UZQ577CU.js";import"./chunk-FC3MPJI4.js";import"./chunk-5ETRXDS4.js";import"./chunk-QDNKD3H5.js";import"./chunk-B4PK7RBX.js";import"./chunk-6J4Y65BV.js";import"./chunk-RXHILZH7.js";import"./chunk-PEPXQ7N3.js";import"./chunk-6QIKBCPR.js";import"./chunk-AHKJJNRE.js";import"./chunk-HBTOKQC5.js";import"./chunk-A52LT7YB.js";import{p as h}from"./chunk-CZPMRK53.js";import"./chunk-IDSF2RZ6.js";import"./chunk-2BBIRZVO.js";import"./chunk-WQAXQD4X.js";import"./chunk-IUPUERVS.js";import{$ as R}from"./chunk-XF4NUYV7.js";import"./chunk-FNDPIYNC.js";import"./chunk-WMYPRHRR.js";import"./chunk-IAMDMFZ7.js";import"./chunk-53MWZ23O.js";import"./chunk-PT7S6WNL.js";import"./chunk-XDTDVCGP.js";import"./chunk-JPDAKIWT.js";import"./chunk-465DRXTW.js";import"./chunk-AC62Z3FX.js";import{a as s,b as l,g as c}from"./chunk-ESDYQQXO.js";function I(o,t){let e=o.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(",")),e.outFields&&!t?.returnCountOnly?e.outFields.includes("*")?e.outFields="*":e.outFields=e.outFields.join(","):delete e.outFields,e.outSR&&(e.outSR=h(e.outSR)),e.dynamicDataSource&&(e.layer=JSON.stringify({source:e.dynamicDataSource}),delete e.dynamicDataSource),e}function S(o,t,e){return c(this,null,function*(){let r=yield x(o,t,e),a=r.data,u=a.geometryType,n=a.spatialReference,i={};for(let d of a.relatedRecordGroups){let m={fields:void 0,objectIdFieldName:void 0,geometryType:u,spatialReference:n,hasZ:!!a.hasZ,hasM:!!a.hasM,features:d.relatedRecords};if(d.objectId!=null)i[d.objectId]=m;else for(let p of Object.keys(d))p!=="relatedRecords"&&(i[d[p]]=m)}return l(s({},r),{data:i})})}function b(o,t,e){return c(this,null,function*(){let r=yield x(o,t,e,{returnCountOnly:!0}),a=r.data,u={};for(let n of a.relatedRecordGroups)n.objectId!=null&&(u[n.objectId]=n.count);return l(s({},r),{data:u})})}function x(a,u){return c(this,arguments,function*(o,t,e={},r){let n=j(s(s(l(s({},o.query),{f:"json"}),r),I(t,r)));return R(o.path+"/queryRelatedRecords",l(s({},e),{query:s(s({},e.query),n)}))})}function J(o,t,e){return c(this,null,function*(){t=f.from(t);let r=y(o);return S(r,t,e).then(a=>{let u=a.data,n={};return Object.keys(u).forEach(i=>n[i]=F.fromJSON(u[i])),n})})}function k(o,t,e){return c(this,null,function*(){t=f.from(t);let r=y(o);return b(r,t,s({},e)).then(a=>a.data)})}export{J as executeRelationshipQuery,k as executeRelationshipQueryForCount};
