import{i as A,j as h}from"./chunk-Z7J4BCLI.js";import{A as o,k as _,l as p,n as g,o as d,p as T}from"./chunk-TKTKGUCU.js";import{a as U}from"./chunk-MNLP6AEE.js";import{d as O}from"./chunk-ZOTIMGGE.js";function G(e,a,t="nearest",n=!1){let r=!(n&&a.pixelType==="u8"),s=r?T.FLOAT:T.UNSIGNED_BYTE,u=a.pixels==null||a.pixels.length===0?null:r?a.getAsRGBAFloat():a.getAsRGBA(),f=e.capabilities.textureFloat?.textureFloatLinear,i=new A;return i.width=a.width,i.height=a.height,i.internalFormat=e.type===U.WEBGL2&&r?d.RGBA32F:g.RGBA,i.samplingMode=!f||t!=="bilinear"&&t!=="cubic"?_.NEAREST:_.LINEAR,i.dataType=s,i.wrapMode=p.CLAMP_TO_EDGE,new h(e,i,u)}function y(e,a){let{spacing:t,offsets:n,coefficients:r,size:[s,u]}=a,f=t[0]>1,i=new A;i.width=f?4*s:s,i.height=u,i.internalFormat=e.type===U.WEBGL2?d.RGBA32F:g.RGBA,i.dataType=T.FLOAT,i.samplingMode=_.NEAREST,i.wrapMode=p.CLAMP_TO_EDGE;let l=new Float32Array(f?s*u*16:2*n.length);if(f&&r!=null)for(let m=0,c=0;m<r.length;m++)l[c++]=r[m],m%3==2&&(l[c++]=1);else for(let m=0;m<u;m++)for(let c=0;c<s;c++){let x=4*(m*s+c),E=2*(c*u+m);l[x]=n[E],l[x+1]=n[E+1],l[x+3]=n[E]===-1?0:1}return new h(e,i,l)}function B(e,a){let t=new A;return t.internalFormat=g.RGBA,t.width=a.length/4,t.height=1,t.samplingMode=_.NEAREST,t.wrapMode=p.CLAMP_TO_EDGE,new h(e,t,a)}function R(e,a,t,n=1,r=!0){return{u_flipY:r,u_applyTransform:!!e,u_opacity:n,u_transformSpacing:e?e.spacing:O,u_transformGridSize:e?e.size:O,u_targetImageSize:a,u_srcImageSize:t}}function V(e,a){return{u_colormapOffset:a||0,u_colormapMaxIndex:e?e.length/4-1:0}}function S(e,a){return{u_scale:e,u_offset:a}}function k(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function I(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function N(e,a){let t=e.gl,n=a.glName,r=new Map;if(n==null)return r;let s=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),u;for(let f=0;f<s;f++)u=t.getActiveUniform(n,f),u&&r.set(u.name,{location:t.getUniformLocation(n,u.name),info:u});return r}function v(e,a,t){Object.keys(t).forEach(n=>{let r=a.get(n)||a.get(n+"[0]");r&&C(e,n,t[n],r)})}function z(e,a,t,n){t.length===n.length&&(n.some(r=>r==null)||t.some(r=>r==null)||t.forEach((r,s)=>{a.setUniform1i(r,s),e.bindTexture(n[s],s)}))}function C(e,a,t,n){if(n===null||t==null)return!1;let{info:r}=n;switch(r.type){case o.FLOAT:r.size>1?e.setUniform1fv(a,t):e.setUniform1f(a,t);break;case o.FLOAT_VEC2:e.setUniform2fv(a,t);break;case o.FLOAT_VEC3:e.setUniform3fv(a,t);break;case o.FLOAT_VEC4:e.setUniform4fv(a,t);break;case o.FLOAT_MAT3:e.setUniformMatrix3fv(a,t);break;case o.FLOAT_MAT4:e.setUniformMatrix4fv(a,t);break;case o.INT:r.size>1?e.setUniform1iv(a,t):e.setUniform1i(a,t);break;case o.BOOL:e.setUniform1i(a,t?1:0);break;case o.INT_VEC2:case o.BOOL_VEC2:e.setUniform2iv(a,t);break;case o.INT_VEC3:case o.BOOL_VEC3:e.setUniform3iv(a,t);break;case o.INT_VEC4:case o.BOOL_VEC4:e.setUniform4iv(a,t);break;default:return!1}return!0}export{G as a,y as b,B as c,R as d,V as e,S as f,k as g,I as h,N as i,v as j,z as k};
