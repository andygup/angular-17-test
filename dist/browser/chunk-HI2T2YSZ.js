import{d as m}from"./chunk-O5K35OSE.js";import{J as u,M as o,d as v,g as i,p as f,s as d}from"./chunk-XF4NUYV7.js";var p={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},y=Object.values(p),S=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${y.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),g=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${y.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),U=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function C(e){return!!S.test(e)}function h(e){if(e==null)return null;let r=i(e),s=r?.path.match(S)||r?.path.match(g);if(!s)return null;let[,t,n,l,a]=s,c=n.indexOf("/");return{title:w(c!==-1?n.slice(c+1):n),serverType:p[l.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:t}}}function b(e){let r=i(e).path.match(U);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function w(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function A(e,r){let s=[];if(e){let t=h(e);t!=null&&t.title&&s.push(t.title)}if(r){let t=w(r);s.push(t)}if(s.length===2){if(s[0].toLowerCase().includes(s[1].toLowerCase()))return s[0];if(s[1].toLowerCase().includes(s[0].toLowerCase()))return s[1]}return s.join(" - ")}function j(e){if(!e)return!1;let r=".arcgis.com/",s="//services",t="//tiles",n="//features",l=(e=e.toLowerCase()).includes(r),a=e.includes(s)||e.includes(t)||e.includes(n);return l&&a}function T(e,r){return e&&u(o(e,r))}function O(e){let{url:r}=e;if(!r)return{url:r};r=o(r,e.logger);let s=i(r),t=h(s.path),n;if(t!=null)t.sublayer!=null&&e.layer.layerId==null&&(n=t.sublayer),r=t.url.path;else if(e.nonStandardUrlAllowed){let l=b(s.path);l!=null&&(r=l.serviceUrl,n=l.sublayerId)}return{url:u(r),layerId:n}}function x(e,r,s,t,n){m(r,t,"url",n),t.url&&e.layerId!=null&&(t.url=d(t.url,s,e.layerId.toString()))}function N(e){if(!e)return!1;let r=e.toLowerCase(),s=r.includes("/services/"),t=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),l=r.includes("/wmsserver");return s&&(t||n||l)}function W(e){if(!e)return!1;let r=new v(f(e)),s=r.authority?.toLowerCase();return s==="server.arcgisonline.com"||s==="services.arcgisonline.com"}export{C as a,h as b,b as c,w as d,A as e,j as f,T as g,O as h,x as i,N as j,W as k};
