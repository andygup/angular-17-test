import{c as b,d as S}from"./chunk-TSVLN2FF.js";import{a as l}from"./chunk-2BBIRZVO.js";import{h as v}from"./chunk-FNDPIYNC.js";import{H as a}from"./chunk-WMYPRHRR.js";import{R as d,y as w}from"./chunk-IAMDMFZ7.js";import{a as r}from"./chunk-53MWZ23O.js";import{b as s,p as f}from"./chunk-465DRXTW.js";var A,N="esri.geometry.support.MeshVertexAttributes",m=f.getLogger(N),n=A=class extends v{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return p(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},m)}castPosition(t){return t&&t instanceof Float32Array&&m.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),p(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},m)}castUv(t){return p(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},m)}castNormal(t){return p(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},m)}castTangent(t){return p(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},m)}clone(){let t={position:s(this.position),uv:s(this.uv),normal:s(this.normal),tangent:s(this.tangent),color:s(this.color)};return new A(t)}clonePositional(){let t={position:s(this.position),normal:s(this.normal),tangent:s(this.tangent),uv:this.uv,color:this.color};return new A(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,this.uv!=null&&(t+=this.uv.byteLength),this.normal!=null&&(t+=this.normal.byteLength),this.tangent!=null&&(t+=this.tangent.byteLength),this.color!=null&&(t+=this.color.byteLength),t}};function F(t,o,e,g){let{loggerTag:u,stride:c}=o;return t.length%c!=0?(g.error(u,`Invalid array length, expected a multiple of ${c}`),new e([])):t}function p(t,o,e,g,u){if(!t)return t;if(t instanceof o)return F(t,g,o,u);for(let c of e)if(t instanceof c)return F(new o(t),g,o,u);if(Array.isArray(t))return F(new o(t),g,o,u);{let c=e.map(j=>`'${j.name}'`);return u.error(`Failed to set property, expected one of ${c}, but got ${t.constructor.name}`),new o([])}}function h(t,o,e){o[e]=x(t)}function x(t){let o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t[e];return o}r([a({json:{write:h}})],n.prototype,"color",void 0),r([l("color")],n.prototype,"castColor",null),r([a({nonNullable:!0,json:{write:h}})],n.prototype,"position",void 0),r([l("position")],n.prototype,"castPosition",null),r([a({json:{write:h}})],n.prototype,"uv",void 0),r([l("uv")],n.prototype,"castUv",null),r([a({json:{write:h}})],n.prototype,"normal",void 0),r([l("normal")],n.prototype,"castNormal",null),r([a({json:{write:h}})],n.prototype,"tangent",void 0),r([l("tangent")],n.prototype,"castTangent",null),n=A=r([d(N)],n);var y,T="esri.geometry.support.MeshComponent",U=f.getLogger(T),i=y=class extends v{static from(t){return w(y,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(t){return p(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},U)}castMaterial(t){return w(t&&typeof t=="object"&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?S:b,t)}clone(){return new y({faces:s(this.faces),shading:this.shading,material:s(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,o){let e={faces:s(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,o):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new y(e)}get memoryUsage(){let t=0;return this.faces!=null&&(t+=this.faces.byteLength),this.material!=null&&(t+=this.material.memoryUsage),t}};r([a({json:{write:!0}})],i.prototype,"faces",void 0),r([l("faces")],i.prototype,"castFaces",null),r([a({type:b,json:{write:!0}})],i.prototype,"material",void 0),r([l("material")],i.prototype,"castMaterial",null),r([a()],i.prototype,"name",void 0),r([a({type:String,json:{write:!0}})],i.prototype,"shading",void 0),r([a({type:Boolean})],i.prototype,"trustSourceNormals",void 0),i=y=r([d(T)],i);var K=i;export{n as a,K as b};
