import{A as Ge,B as He,C as Le,D as je,E as ze,F as se,G as oe,J as Ve,K as $e,R as We,a as Ee,b as Ne,c as Se,e as Ce,f as Y,g as De,h as ee,i as xe,j as k,k as v,l,m as U,n as d,o as Re,p as Me,q as Pe,r as te,s as re,z as qe}from"./chunk-IAMDMFZ7.js";import{a as f,h as Ue,j as Be,z as Fe}from"./chunk-PT7S6WNL.js";import{b as Ie}from"./chunk-XDTDVCGP.js";import{b as Oe,e as S,f as Te,p as T,r as ke}from"./chunk-465DRXTW.js";import{a as O,o as we}from"./chunk-AC62Z3FX.js";import{j as Ae}from"./chunk-ESDYQQXO.js";var Ke=new Set;function yt(r,e,t=!1){t&&Ke.has(e)||(t&&Ke.add(e),r.warn(`\u{1F6D1} DEPRECATED - ${e}`))}function Ze(r,e,t={}){if(O("esri-deprecation-warnings")){let{moduleName:s}=t;Je(r,`Function: ${(s?s+"::":"")+e+"()"}`,t)}}function jt(r,e,t={}){if(O("esri-deprecation-warnings")){let{moduleName:s}=t;Je(r,`Property: ${(s?s+"::":"")+e}`,t)}}function Je(r,e,t={}){if(O("esri-deprecation-warnings")){let{replacement:s,version:o,see:i,warnOnce:a}=t,n=e;s&&(n+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),o&&(n+=`
	\u2699\uFE0F Version: ${o}`),i&&(n+=`
	\u{1F517} See ${i} for more details.`),yt(r,n,a)}}var u;(function(r){r[r.DEFAULTS=0]="DEFAULTS",r[r.COMPUTED=1]="COMPUTED",r[r.SERVICE=2]="SERVICE",r[r.PORTAL_ITEM=3]="PORTAL_ITEM",r[r.WEB_SCENE=4]="WEB_SCENE",r[r.WEB_MAP=5]="WEB_MAP",r[r.LINK_CHART=6]="LINK_CHART",r[r.USER=7]="USER"})(u||(u={}));var Vt=u.USER+1;function Qe(r){switch(r){case"defaults":return u.DEFAULTS;case"service":return u.SERVICE;case"portal-item":return u.PORTAL_ITEM;case"web-scene":return u.WEB_SCENE;case"web-map":return u.WEB_MAP;case"link-chart":return u.LINK_CHART;case"user":return u.USER;default:return null}}function B(r){switch(r){case u.DEFAULTS:return"defaults";case u.SERVICE:return"service";case u.PORTAL_ITEM:return"portal-item";case u.WEB_SCENE:return"web-scene";case u.WEB_MAP:return"web-map";case u.LINK_CHART:return"link-chart";case u.USER:return"user"}}function $t(r){return B(r)}var C=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var ne=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},ie=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},ae=0,Xe=0,D={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},ce=["prepare","preRender","render","postRender","update","finish"],le=[],b=new re,ue=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}},q={frameTasks:b,willDispatch:!1,clearFrameTasks:vt,dispatch:rt,executeFrameTasks:bt};function Ye(r){let e=new ie(r);return le.push(e),q.willDispatch||(q.willDispatch=!0,te(rt)),e}function tr(r){let e=new ne(r);return b.push(e),G==null&&(ae=performance.now(),G=requestAnimationFrame(et)),new ue(e)}var G=null;function vt(r=!1){b.forAll(e=>{e.removed=!0}),r&&tt()}function et(){let r=performance.now();G=null,G=b.length>0?requestAnimationFrame(et):null,q.executeFrameTasks(r)}function bt(r){let e=r-ae;ae=r;let t=Xe>0?Xe:1e3/60,s=Math.max(0,e-t);D.time=r,D.frameDuration=t-s;for(let o=0;o<ce.length;o++){let i=performance.now(),a=ce[o];b.forAll(n=>{n.paused||n.removed||(o===0&&n.ticks++,n.phases[a]&&(D.elapsedFrameTime=performance.now()-r,D.deltaTime=n.ticks===0?0:e,n.phases[a]?.call(n,D)))}),At[o].record(performance.now()-i)}tt(),wt.record(performance.now()-r)}var F=new re;function tt(){b.forAll(r=>{r.removed&&F.push(r)}),b.removeUnorderedMany(F.data,F.length),F.clear()}function rt(){for(;le.length;){let r=le.shift();r.isActive&&r.callback()}q.willDispatch=!1}function rr(r=1,e){let t=Fe(),s=()=>{Be(e)?t.reject(Ue()):r===0?t():(--r,te(()=>s()))};return s(),t.promise}var At=ce.map(r=>new C(r)),wt=new C("total");var I=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new he(e),st.register(this,new WeakRef(this._observerObject),this)}destroy(){st.unregister(this._observerObject),this._accessed.length=0,this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){let t=this._accessed;t.includes(e)||t.push(e)}onTrackingEnd(){let e=this._handles,t=this._accessed,s=this._observerObject;for(let o=0;o<t.length;++o)e.push(t[o].observe(s));t.length=0}clear(){let e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}},he=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;let e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Ot}},st=new FinalizationRegistry(r=>{r.deref()?.destroy()});function Ot(){}function Tt(r){r.length=0}var x=class{constructor(e=50,t=50){this._pool=new k(Array,void 0,Tt,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return fe.acquire()}static release(e){return fe.release(e)}static prune(){fe.prune()}},fe=new x(100);var H=class extends k{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){let t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};function nt(r,e){for(let t of r.entries())if(e(t[0]))return!0;return!1}function ot(r,e){if(!e)return r;for(let t of e)r.add(t);return r}function lr(r,e){let t=new Set;return ot(t,r),ot(t,e),t}function ur(r,e){let t=new Set;for(let s of e)r.has(s)&&t.add(s);return t}function hr(r,e){if(!r||!e)return!1;if(r===e)return!0;for(let t of r)if(!e.has(t))return!1;return!0}function fr(r,e){if(r==null&&e==null)return!0;if(r==null||e==null||r.size!==e.size)return!1;for(let t of r)if(!e.has(t))return!1;return!0}function dr(r,e){let t=new Set(r);for(let s of e)t.delete(s);return t}var kt=0;function L(){return++kt}function it(r,e){let t=r[r.length-1]==="?"?r.slice(0,-1):r;if(e.getItemAt!=null||Array.isArray(e)){let o=parseInt(t,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}let s=Ne(e);return Se(s,t)?s.get(t):e[t]}function at(r,e,t){if(r==null)return r;let s=it(e[t],r);return!s&&t<e.length-1?void 0:t===e.length-1?s:at(s,e,t+1)}function R(r,e,t=0){return typeof e!="string"||e.includes(".")?at(r,Ce(e),t):it(e,r)}function g(r,e){return R(r,e)}function gr(r,e){return R(e,r)!==void 0}var E=!1,j=[];function de(r,e){let t=new I(i),s=null,o=!1;function i(){if(!t||o)return;if(E)return void ct(i);let n=s;t.clear(),E=!0,o=!0,s=d(t,r),o=!1,E=!1,e(s,n),lt()}function a(){t&&(t.destroy(),t=null,s=null)}return o=!0,s=d(t,r),o=!1,f(a)}function pe(r,e){let t=new I(o),s=null;function o(){e(s,a)}function i(){t&&(t.destroy(),t=null),s=null}function a(){return t?(t.clear(),s=d(t,r),s):null}return a(),f(i)}function wr(r){let e=new I(s),t=!1;function s(){e&&!t&&(E?ct(s):(e.clear(),E=!0,t=!0,d(e,r),t=!1,E=!1,lt()))}function o(){e&&(e.destroy(),e=null)}return t=!0,d(e,r),t=!1,f(o)}function ct(r){j.includes(r)||j.unshift(r)}function lt(){for(;j.length;)j.pop()()}var M;(function(r){r[r.Untracked=0]="Untracked",r[r.Tracked=1]="Tracked"})(M||(M={}));var A=class{constructor(){this.uid=L(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,s,o,i){return this.pool.acquire(M.Untracked,e,t,s,o,i,S)}static acquireTracked(e,t,s,o){return this.pool.acquire(M.Tracked,e,t,s,null,null,o)}notify(e,t){this.type===M.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,s,o,i,a,n){this.uid=L(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=s,this.getValue=o,this.target=i,this.path=a,this.equals=n}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=L(),this.removed=!0}};A.pool=new H(A);var z=new x,m=new Set,V;function $(r){m.delete(r),m.add(r),V||(V=Ye(Et))}function It(r){if(r.removed)return;let e=r.oldValue,t=r.getValue();r.equals(e,t)||(r.oldValue=t,r.notify(t,e))}function ut(r){for(let e of m.values())e.target===r&&(e.removed=!0)}function Et(){let r=10;for(;V&&r--;){V=null;let e=Nt(),t=z.acquire();for(let s of e){let o=s.uid;It(s),o===s.uid&&s.removed&&t.push(s)}for(let s of m)s.removed&&(t.push(s),m.delete(s));for(let s of t)A.pool.release(s);z.release(t),z.release(e),me.forEach(s=>s())}}function Nt(){let r=z.acquire();r.length=m.size;let e=0;for(let t of m)r[e]=t,++e;return m.clear(),r}var me=new Set;function Mr(r){return me.add(r),f(()=>me.delete(r))}function St(r,e,t){let s=Y(r,e,t,(o,i,a)=>{let n,c,p=pe(()=>R(o,i),(_,h)=>{o.__accessor__.destroyed||n&&n.uid!==c?s.remove():(n||(n=A.acquireUntracked(_,a,h,o,i),c=n.uid),$(n))});return f(()=>{p.remove(),n&&(n.uid!==c||n.removed||(n.removed=!0,$(n)),n=null),s=p=null})});return s}function Ct(r,e,t){let s=Y(r,e,t,(o,i,a)=>{let n=!1;return de(()=>R(o,i),(c,p)=>{o.__accessor__.destroyed?s.remove():n||(n=!0,S(p,c)||a.call(o,c,p,i,o),n=!1)})});return s}function ht(r,e,t,s=!1){return!r.__accessor__||r.__accessor__.destroyed?f():s?Ct(r,e,t):St(r,e,t)}function Dt(r,e,t){let s,o,i=pe(r,(a,n)=>{s&&s.uid!==o?i.remove():(s||(s=A.acquireTracked(a,e,n,t),o=s.uid),$(s))});return f(()=>{i.remove(),s&&(s.uid!==o||s.removed||(s.removed=!0,$(s)),s=null),i=null})}function xt(r,e,t){let s=!1;return de(r,(o,i)=>{s||(s=!0,t(i,o)||e(o,i),s=!1)})}function Pr(r,e,t=!1,s=Te){return t?xt(r,e,s):Dt(r,e,s)}function Ur(r){return nt(m,e=>e.oldValue===r)}function N(r,e,t){if(r&&e)if(typeof e=="object")for(let s of Object.getOwnPropertyNames(e))N(r,s,e[s]);else{if(e.includes(".")){let o=e.split("."),i=o.splice(-1,1)[0];return void N(g(r,o),i,t)}let s=r.__accessor__;s!=null&&Rt(e,s),r[e]=t}}function Rt(r,e){if(O("esri-unknown-property-errors")&&!Mt(r,e))throw new ke("set:unknown-property",Pt(r,e))}function Mt(r,e){return e.metadatas[r]!=null}function Pt(r,e){return"setting unknown property '"+r+"' on instance of "+e.host.declaredClass}function ft(r={}){return(e,t)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${t}. Accessor does not support static properties.`);let s=Object.getOwnPropertyDescriptor(e,t),o=ee(e,t);s&&(s.get||s.set?(o.get=s.get||o.get,o.set=s.set||o.set):"value"in s&&("value"in r&&T.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${t}" on "${e.constructor.name}" already defined in the metadata`,r),o.value=r.value=s.value)),r.readOnly!=null&&(o.readOnly=r.readOnly);let i=r.aliasOf;if(i){let c=typeof i=="string"?i:i.source,p=typeof i=="string"?null:i.overridable===!0,_;o.dependsOn=[c],o.get=function(){let h=g(this,c);if(typeof h=="function"){_||(_=c.split(".").slice(0,-1).join("."));let w=g(this,_);w&&(h=h.bind(w))}return h},o.readOnly||(o.set=p?function(h){this._override(t,h)}:function(h){N(this,c,h)})}let a=r.type,n=r.types;o.cast||(a?o.cast=Ut(a):n&&(Array.isArray(n)?o.cast=Ge(oe(n[0])):o.cast=oe(n))),xe(o,r),r.range&&(o.cast=Bt(o.cast,r.range))}}function Kr(r,e,t){let s=ee(r,t);s.json||(s.json={});let o=s.json;return e!==void 0&&(o.origins||(o.origins={}),o.origins[e]||(o.origins[e]={}),o=o.origins[e]),o}function Ut(r){let e=0,t=r;if(Ve(r))return $e(r);for(;Array.isArray(t)&&t.length===1&&typeof t[0]!="string"&&typeof t[0]!="number";)t=t[0],e++;let s=t;if(ze(s))return e===0?se(s):Le(se(s),e);if(e===1)return He(s);if(e>1)return je(s,e);let o=r;return o.from?o.from:qe(o)}function Bt(r,e){return t=>{let s=+r(t);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function Jr(r){let e=[];return function*(){yield*Ae(e);for(let t of r)e.push(t),yield t}}function Qr(r,e){for(let t of r)if(t!=null&&e(t))return t}function _e(r){return r!=null&&typeof r[Symbol.iterator]=="function"}var W=class r{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(_e(e)){let s=this._getOrCreateGroup(t);for(let o of e)this._isHandle(o)&&s.push(o)}else this._isHandle(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{let s=this._getGroup(e);s&&t&&s.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&_e(e)){for(let t of e)this.remove(t);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof r)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);let t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(let t of e)t instanceof r?t.removeAll():t.remove()}};var K=class{constructor(e,t){this._observers=e,this._observer=t}remove(){we(this._observers,this._observer)}};var Z=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Ft;this._observers==null&&(this._observers=[]);let t=this._observers,s=!1,o=!1,i=t.length;for(let a=0;a<i;++a){let n=t[a];if(n.destroyed)o=!0;else if(n===e){s=!0;break}}return s||(t.push(e),o&&this._removeDestroyedObservers()),new K(t,e)}_removeDestroyedObservers(){let e=this._observers;if(!e||e.length===0)return;let t=e.length,s=0;for(let o=0;o<t;++o){for(;o+s<t&&e[o+s].destroyed;)++s;if(s>0){if(!(o+s<t))break;e[o]=e[o+s]}}e.length=t-s}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this._observers;if(e!=null){for(let t of e)t.onCommitted();this._observers=null}}},Ft=f();var P=class extends Z{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this._accessed=null,this._handles=null,this.flags=0,this.flags=l.Dirty|(t.nonNullable?l.NonNullable:0)|(t.hasOwnProperty("value")?l.HasDefaultValue:0)|(t.get===void 0?l.DepTrackingInitialized:0)|(t.dependsOn===void 0?l.AutoTracked:0)}destroy(){this.flags&l.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){U(this);let t=e.store,s=this.propertyName,o=this.flags,i=t.get(s);if(o&l.Computing||~o&l.Dirty&&t.has(s))return i;this.flags|=l.Computing;let a=e.host,n;o&l.AutoTracked?n=d(this,this.metadata.get,a):(Pe(a,this),n=this.metadata.get.call(a)),t.set(s,n,u.COMPUTED);let c=t.get(s);return c===i?this.flags&=~l.Dirty:Re(this.commit,this),this.flags&=~l.Computing,c}onObservableAccessed(e){if(e===this)return;let t=this._accessed;if(t==null)t=[],this._accessed=t;else if(t.includes(e))return;t.push(e)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=l.DepTrackingInitialized;let e=this._accessed;if(e==null||e.length===0)return;let t=this._handles;t==null&&(t=[],this._handles=t);for(let s=0;s<e.length;++s)t.push(e[s].observe(this));e.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~l.Dirty,this.onCommitted()}_clearObservationHandles(){let e=this._handles;if(e!==null){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}onInvalidated(){~this.flags&l.Overriden&&(this.flags|=l.Dirty);let e=this._observers;if(e&&e.length>0)for(let t of e)t.onInvalidated()}onCommitted(){let e=this._observers;if(e&&e.length>0){let t=e.slice();for(let s of t)s.onCommitted()}}};var J=class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){let t=new r;return this._values.forEach((s,o)=>{e&&e.has(o)||t.set(o,Oe(s))}),t}get(e){return this._values.get(e)}originOf(){return u.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function Q(r,e,t){return r!==void 0}function dt(r,e,t,s){return r!==void 0&&(!(t==null&&r.flags&l.NonNullable)||(s.lifecycle,v.INITIALIZING,!1))}function qt(r){return r&&typeof r.destroy=="function"}T.getLogger("esri.core.accessorSupport.Properties");var X=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=v.INITIALIZING,this.store=new J,this._origin=u.USER;let t=this.host.constructor.__accessorMetadata__;for(let s in t){let o=new P(s,t[s]);this.propertiesByName.set(s,o)}this.metadatas=t}initialize(){this.lifecycle=v.CONSTRUCTING}constructed(){this.lifecycle=v.CONSTRUCTED}destroy(){this.destroyed=!0;for(let[e,t]of this.propertiesByName){if(t.metadata.autoDestroy){let s=this.internalGet(e);s&&qt(s)&&(s.destroy(),~t.flags&l.NonNullable&&this._internalSet(t,null))}t.destroy()}}get initialized(){return this.lifecycle!==v.INITIALIZING}get(e){let t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);U(t);let s=this.store;return s.has(e)?s.get(e):t.metadata.value}originOf(e){let t=this.store.originOf(e);if(t===void 0){let s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&l.HasDefaultValue)return"defaults"}return B(t)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){let t=this.propertiesByName.get(e);if(Q(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){let s=this.propertiesByName.get(e);Q(s)&&this._internalSet(s,t)}getDependsInfo(e,t,s){let o=this.propertiesByName.get(t);if(!Q(o))return"";let i=new Set,a=d({onObservableAccessed:c=>i.add(c),onTrackingEnd:()=>{}},()=>o.metadata.get?.call(e)),n=`${s}${e.declaredClass.split(".").pop()}.${t}: ${a}
`;if(i.size===0)return n;s+="  ";for(let c of i)c instanceof P&&(n+=`${s}${c.propertyName}: undefined
`);return n}setAtOrigin(e,t,s){let o=this.propertiesByName.get(e);if(Q(o))return this._setAtOrigin(o,t,s)}isOverridden(e){let t=this.propertiesByName.get(e);return t!==void 0&&!!(t.flags&l.Overriden)}clearOverride(e){let t=this.propertiesByName.get(e);t&&t.flags&l.Overriden&&(t.flags&=~l.Overriden,t.notifyChange())}override(e,t){let s=this.propertiesByName.get(e);if(!dt(s,e,t,this))return;let o=s.metadata.cast;if(o){let i=this._cast(o,t),{valid:a,value:n}=i;if(ge.release(i),!a)return;t=n}s.flags|=l.Overriden,this._internalSet(s,t)}set(e,t){let s=this.propertiesByName.get(e);if(!dt(s,e,t,this))return;let o=s.metadata.cast;if(o){let a=this._cast(o,t),{valid:n,value:c}=a;if(ge.release(a),!n)return;t=c}let i=s.metadata.set;i?i.call(this.host,t):this._internalSet(s,t)}setDefaultOrigin(e){this._origin=Qe(e)}getDefaultOrigin(){return B(this._origin)}notifyChange(e){let t=this.propertiesByName.get(e);t!==void 0&&t.notifyChange()}invalidate(e){let t=this.propertiesByName.get(e);t!==void 0&&t.invalidate()}commit(e){let t=this.propertiesByName.get(e);t!==void 0&&t.commit()}_internalSet(e,t){let s=this.lifecycle!==v.INITIALIZING?this._origin:u.DEFAULTS;this._setAtOrigin(e,t,s)}_setAtOrigin(e,t,s){let o=this.store,i=e.propertyName;o.has(i,s)&&S(t,o.get(i))&&~e.flags&l.Overriden&&s===o.originOf(i)||(e.invalidate(),o.set(i,t,s),e.commit(),Me(this.host,e))}_cast(e,t){let s=ge.acquire();return s.valid=!0,s.value=t,e&&(s.value=e.call(this.host,t,s)),s}},ye=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}},ge=new k(ye);var Gt;function ve(){return Gt}var pt;(function(r){r[r.Ignore=0]="Ignore",r[r.Destroy=1]="Destroy",r[r.ThrowError=2]="ThrowError"})(pt||(pt={}));var _t,gt;function Ht(r){if(r==null)return{value:r};if(Array.isArray(r))return{type:[r[0]],value:null};switch(typeof r){case"object":return r.constructor?.__accessorMetadata__||r instanceof Date?{type:r.constructor,value:r}:r;case"boolean":return{type:Boolean,value:r};case"string":return{type:String,value:r};case"number":return{type:Number,value:r};case"function":return{type:r,value:null};default:return}}var y=Symbol("Accessor-Handles"),be=Symbol("Accessor-Initialized"),mt=class r{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");let{properties:t,declaredClass:s,constructor:o}=e;delete e.declaredClass,delete e.properties,delete e.constructor;let i=this;class a extends i{constructor(...c){super(...c),this.inherited=null,o&&o.apply(this,c)}}De(a.prototype);for(let n in e){let c=e[n];a.prototype[n]=typeof c=="function"?function(...p){let _=this.inherited,h;this.inherited=function(...w){if(i.prototype[n])return i.prototype[n].apply(this,w)};try{h=c.apply(this,p)}catch(w){throw this.inherited=_,w}return this.inherited=_,h}:e[n]}for(let n in t){let c=Ht(t[n]);ft(c)(a.prototype,n)}return We(s)(a)}constructor(...e){if(this[_t]=null,this[gt]=!1,this.constructor===r)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");let t=new X(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:t}),e.length>0&&this.normalizeCtorArgs&&(t.ctorArgs=this.normalizeCtorArgs.apply(this,e)),ve()?.onInstanceConstruct(this)}postscript(e){let t=this.__accessor__,s=t.ctorArgs||e;t.initialize(),s&&(this.set(s),t.ctorArgs=null),t.constructed(),this.initialize(),this[be]=!0}initialize(){}[Ee](){this[y]=Ie(this[y])}destroy(){this.destroyed||(ut(this),this.__accessor__.destroy(),ve()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[be]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){g(this,e)}get(e){return Ze(T.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),g(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return N(this,e,t),this}watch(e,t,s){return ht(this,e,t,s)}addHandles(e,t){if(this.destroyed){let o=Array.isArray(e)?e:[e];for(let i of o)i.remove();return}let s=this[y];s==null&&(s=this[y]=new W),s.add(e,t)}removeHandles(e){let t=this[y];t?.remove(e)}removeAllHandles(){let e=this[y];e?.removeAll()}hasHandles(e){let t=this[y];return t!=null&&t.has(e)}_override(e,t){t===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){t==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}};_t=y,gt=be;export{Ze as a,jt as b,Je as c,Jr as d,Qr as e,_e as f,W as g,R as h,g as i,gr as j,Z as k,u as l,Vt as m,Qe as n,B as o,$t as p,x as q,H as r,C as s,Ye as t,tr as u,rr as v,lr as w,ur as x,hr as y,fr as z,dr as A,L as B,I as C,wr as D,Mr as E,Pr as F,Ur as G,ft as H,Kr as I,Bt as J,mt as K};
