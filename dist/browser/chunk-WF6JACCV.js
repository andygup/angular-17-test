import{a as V,d as u,e as K}from"./chunk-AUIMNX4Y.js";import{t as g}from"./chunk-N57AFEUK.js";import{a as h,g as d}from"./chunk-NKBP5F7I.js";import{a as l,b as c}from"./chunk-ESDYQQXO.js";function f(e){return e.type==="line-marker"?{type:"line-marker",color:e.color?.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function S(e){return K(e)}function x(e,a,t=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return L(e,a,t);case"simple-marker":case"picture-marker":return k(e,a,t);case"simple-line":return T(e,a,t);case"text":return E(e,a,t);case"label":return z(e,a,t);case"cim":return{type:"cim",rendererKey:a.vvFlags,data:e.data,maxVVSize:a.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:a.vvFlags,data:e,maxVVSize:a.maxVVSize};case"web-style":return c(l({},f(e)),{type:"web-style",hash:e.hash(),rendererKey:a.vvFlags,maxVVSize:a.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function z(e,a,t){let r=e.toJSON(),s=u(h.LABEL,c(l({},a),{placement:r.labelPlacement}));return c(l({materialKey:t?S(s):s,hash:e.hash()},r),{labelPlacement:r.labelPlacement})}function L(e,a,t){let r=u(h.FILL,a),s=t?S(r):r,o=e.clone(),n=o.outline,m=V(a.symbologyType);m||(o.outline=null);let p=l({materialKey:s,hash:o.hash()},f(o));if(m)return p;let i=[];if(i.push(p),n){let y=u(h.LINE,c(l({},a),{isOutline:!0})),b=l({materialKey:t?S(y):y,hash:n.hash()},f(n));i.push(b)}return{type:"composite-symbol",layers:i,hash:i.reduce((y,b)=>b.hash+y,"")}}function T(e,a,t){let r=V(a.symbologyType)?d.DEFAULT:a.symbologyType,s=u(h.LINE,c(l({},a),{symbologyType:r})),o=t?S(s):s,n=e.clone(),m=n.marker;n.marker=null;let p=[];if(p.push(l({materialKey:o,hash:n.hash()},f(n))),m){let i=u(h.MARKER,a),y=t?S(i):i;m.color=m.color??n.color,p.push(l({materialKey:y,hash:m.hash(),lineWidth:n.width},f(m)))}return{type:"composite-symbol",layers:p,hash:p.reduce((i,y)=>y.hash+i,"")}}function k(e,a,t){if(e.type==="simple-marker"&&(e.style==="path"||e.outline&&e.outline.style!=="solid"&&e.outline.style!=="none"))return x({type:"CIMSymbolReference",symbol:g.fromSimpleMarker(e)},a,t);let r=u(h.MARKER,a),s=t?S(r):r,o=f(e);return c(l({materialKey:s,hash:e.hash()},o),{angle:e.angle,maxVVSize:a.maxVVSize})}function E(e,a,t){let r=u(h.TEXT,a),s=t?S(r):r,o=f(e);return c(l({materialKey:s,hash:e.hash()},o),{angle:e.angle,maxVVSize:a.maxVVSize})}export{x as a};
