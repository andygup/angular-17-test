import{a as S}from"./chunk-HBTOKQC5.js";import{a as X,b as f}from"./chunk-A52LT7YB.js";import{a as w,n as j,o as T,r as _,u as N}from"./chunk-CZPMRK53.js";import{a as O}from"./chunk-2BBIRZVO.js";import{h as C}from"./chunk-FNDPIYNC.js";import{H as u}from"./chunk-WMYPRHRR.js";import{R as z,w as Z}from"./chunk-IAMDMFZ7.js";import{a as l}from"./chunk-53MWZ23O.js";import{b as M,p as R}from"./chunk-465DRXTW.js";var d=class extends C{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=f.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,e){if(t instanceof f)return t;if(t!=null){let r=new f;return r.read(t,e),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,e){this.cache[t]=e}};l([u()],d.prototype,"type",void 0),l([u({readOnly:!0})],d.prototype,"cache",null),l([u({readOnly:!0})],d.prototype,"extent",null),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasZ",void 0),l([u({type:f,json:{write:!0},value:f.WGS84})],d.prototype,"spatialReference",void 0),l([S("spatialReference")],d.prototype,"readSpatialReference",null),d=l([z("esri.geometry.Geometry")],d);var q=d;var Y=57.29577951308232,I=.017453292519943;function k(t){return t*Y}function A(t){return t*I}function at(t){return Math.PI/2-2*Math.atan(Math.exp(-t/w.radius))}function L(t){return t.wkid!=null||t.wkt!=null}var G=[0,0];function W(t,e,r,s,n){let i=t,o=n;if(o.spatialReference=r,"x"in i&&"x"in o)[o.x,o.y]=e(i.x,i.y,G,s);else if("xmin"in i&&"xmin"in o)[o.xmin,o.ymin]=e(i.xmin,i.ymin,G,s),[o.xmax,o.ymax]=e(i.xmax,i.ymax,G,s);else if("paths"in i&&"paths"in o||"rings"in i&&"rings"in o){let p="paths"in i?i.paths:i.rings,h=[],a;for(let m=0;m<p.length;m++){let g=p[m];a=[],h.push(a);for(let y=0;y<g.length;y++)a.push(e(g[y][0],g[y][1],[0,0],s)),g[y].length>2&&a[y].push(g[y][2]),g[y].length>3&&a[y].push(g[y][3])}"paths"in o?o.paths=h:o.rings=h}else if("points"in i&&"points"in o){let p=i.points,h=[];for(let a=0;a<p.length;a++)h[a]=e(p[a][0],p[a][1],[0,0],s),p[a].length>2&&h[a].push(p[a][2]),p[a].length>3&&h[a].push(p[a][3]);o.points=h}return n}function D(t,e){let r=t&&(L(t)?t:t.spatialReference),s=e&&(L(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!r||!s)&&(!!j(s,r)||N(s)&&_(r)||N(r)&&_(s))}function lt(t,e){if(t==null)return null;let r=t.spatialReference,s=e&&(L(e)?e:e.spatialReference);return D(r,s)?j(r,s)?M(t):N(s)?W(t,x,f.WebMercator,!1,M(t)):_(s)?W(t,b,f.WGS84,!1,M(t)):null:null}function x(t,e,r=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);let s=A(e);return r[0]=A(t)*w.radius,r[1]=w.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),r}function b(t,e,r=[0,0],s=!1){let n=k(t/w.radius);return r[0]=s?n:n-360*Math.floor((n+180)/360),r[1]=k(Math.PI/2-2*Math.atan(Math.exp(-e/w.radius))),r}function ut(t,e=!1,r=M(t)){return W(t,x,f.WebMercator,e,r)}function pt(t,e=!1,r=M(t)){return W(t,b,f.WGS84,e,r)}function B(t,e){let r=t.x-e.x,s=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(r*r+s*s+n*n)}var P,v=[0,0];function J(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}var c=P=class extends q{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));let r=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(r)?r:r.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,r,s,n){let i;if(Array.isArray(t))i=t,n=e,t=i[0],e=i[1],r=i[2],s=i[3];else if(t&&typeof t=="object"){if(i=t,t=i.x!=null?i.x:i.longitude,e=i.y!=null?i.y:i.latitude,r=i.z,s=i.m,(n=i.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new f(n)),i.longitude!=null||i.latitude!=null){if(i.longitude==null)R.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(i.latitude==null)R.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!i.declaredClass&&n&&n.isWebMercator){let p=x(i.longitude,i.latitude,v);t=p[0],e=p[1]}}}else J(r)?(n=r,r=null):J(s)&&(n=s,s=null);let o={x:t,y:e};return o.x==null&&o.y!=null?R.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&R.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),s!=null&&(o.m=s),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){let{spatialReference:t,x:e,y:r}=this;if(t){if(t.isWebMercator)return b(e,r,v)[1];if(t.isGeographic)return r}return null}set latitude(t){let{spatialReference:e,x:r}=this;t!=null&&e&&(e.isWebMercator?this._set("y",x(r,t,v)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){let{x:t,y:e,spatialReference:r}=this;if(r){if(r.isWebMercator)return b(t,e,v)[0];if(r.isGeographic)return t}return null}set longitude(t){let{y:e,spatialReference:r}=this;t!=null&&r&&(r.isWebMercator?this._set("x",x(t,e,v)[0]):r.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,r){e[r]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){let t=new P;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return P.copy(t,this),this}equals(t){if(t==null)return!1;let{x:e,y:r,z:s,m:n,spatialReference:i}=this,{z:o,m:p}=t,{x:h,y:a,spatialReference:m}=t;if(!i.equals(m))if(i.isWebMercator&&m.isWGS84)[h,a]=x(h,a),m=i;else{if(!i.isWGS84||!m.isWebMercator)return!1;[h,a]=b(h,a),m=i}return e===h&&r===a&&s===o&&n===p&&i.wkid===m.wkid}offset(t,e,r){return this.x+=t,this.y+=e,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;let t=T(this.spatialReference);if(!t)return this;let e=this.x,[r,s]=t.valid,n=2*s,i;return e>s?(i=Math.ceil(Math.abs(e-s)/n),e-=i*n):e<r&&(i=Math.ceil(Math.abs(e-r)/n),e+=i*n),this._set("x",e),this}distance(t){return B(this,t)}toArray(){let t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};l([u({readOnly:!0})],c.prototype,"cache",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasM",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasZ",null),l([u({type:Number})],c.prototype,"latitude",null),l([u({type:Number})],c.prototype,"longitude",null),l([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),O(t=>isNaN(t)?t:Z(t))],c.prototype,"x",void 0),l([X("x")],c.prototype,"writeX",null),l([S("x")],c.prototype,"readX",null),l([u({type:Number,json:{write:!0}})],c.prototype,"y",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],c.prototype,"z",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],c.prototype,"m",void 0),c=P=l([z("esri.geometry.Point")],c),c.prototype.toJSON.isDefaultToJSON=!0;var Wt=c;export{q as a,at as b,D as c,lt as d,x as e,b as f,ut as g,pt as h,Wt as i};
