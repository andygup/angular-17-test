import{a as st}from"./chunk-3S2DT2SI.js";import{c as tt,d as nt,h as et,i as _}from"./chunk-7PPV2CP7.js";import{a as Q,s as U,t as $}from"./chunk-U62SHMHB.js";import{a as G}from"./chunk-4LHUJTP5.js";import{a as q}from"./chunk-QDNKD3H5.js";import{j as N}from"./chunk-6QIKBCPR.js";import{i as J}from"./chunk-AHKJJNRE.js";import{b as I}from"./chunk-A52LT7YB.js";import{I as b,J as w,d as V,e as D,k as H,n as S,z as g}from"./chunk-CZPMRK53.js";import{m as C}from"./chunk-IAMDMFZ7.js";import{A as W,i as Y}from"./chunk-PT7S6WNL.js";import{r as X}from"./chunk-465DRXTW.js";import{g as A}from"./chunk-ESDYQQXO.js";function K(e,n,t,s,i,r){return Z[0]=e,Z[1]=n,Z[2]=t,_(Z,s,0,i,r,0,1)}var Z=G();var z=0,j=class e{static fromGE(n){let t=new e;return t._wkt=n.wkt,t._wkid=n.wkid,t._isInverse=n.isInverse,t}constructor(n){this.uid=z++,n?(this._wkt=n.wkt!=null?n.wkt:null,this._wkid=n.wkid!=null?n.wkid:-1,this._isInverse=n.isInverse!=null&&n.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(n){this._wkt=n,this.uid=z++}get wkid(){return this._wkid}set wkid(n){this._wkid=n,this.uid=z++}get isInverse(){return this._isInverse}set isInverse(n){this._isInverse=n,this.uid=z++}getInverse(){let n=new e;return n._wkt=this.wkt,n._wkid=this._wkid,n._isInverse=!this.isInverse,n}};var y=class e{static cacheKey(n,t){return[n.wkid?.toString()??"-1",n.wkt?.toString()??"",n.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(n){let t=new e,s="";for(let i of n.steps){let r=j.fromGE(i);t.steps.push(r),s+=r.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=s,t}constructor(n){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,n?.steps)for(let t of n.steps)t instanceof j?this.steps.push(t):this.steps.push(new j({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){let n=new e;n.steps=[];for(let t=this.steps.length-1;t>=0;t--){let s=this.steps[t];n.steps.push(s.getInverse())}return n}getGTListEntry(){let n="";for(let t of this.steps)n+=t.uid.toString()+",";return n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n),this._gtlistentry}assignCachedGe(n,t,s){this._cachedProjection[e.cacheKey(n,t)]=s}getCachedGeTransformation(n,t){let s="";for(let r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);let i=this._cachedProjection[e.cacheKey(n,t)];return i===void 0?null:i}};var m=null,d=null,v=null,M={},B=new q;function F(){return!!m&&V()}function Ot(){return!!F()||(C(B),E(),!1)}function E(e){return v==null&&(v=Promise.all([D(),import("./chunk-BWKCIETQ.js").then(n=>n.g),import("./chunk-CCVJLO7E.js")])),v.then(([,n,{hydratedAdapter:t}])=>{Y(e),d=t,m=n.default,m._enableProjection(H),B.notify()})}function ft(e,n,t=null,s=null){return Array.isArray(e)?e.length===0?[]:it(d,e,e[0].spatialReference,n,t,s):it(d,[e],e.spatialReference,n,t,s)[0]}function it(e,n,t,s,i=null,r=null){if(t==null||s==null)return n;if(L(t,s,i))return n.map(o=>O(o,t,s));if(i==null&&b(t))return n.map(o=>O(o,t,I.WGS84)).map(o=>T(o,s));if(i==null&&b(s))return n.map(o=>T(o,I.WGS84)).map(o=>O(o,I.WGS84,s));if(i==null){let o=y.cacheKey(t,s);M[o]!==void 0?i=M[o]:((i=ht(t,s,void 0))==null&&(i=new y),M[o]=i)}if(m==null||e==null)throw new R;return r!=null?m._project(e,n,t,s,i,r):m._project(e,n,t,s,i)}function Bt(e,n){let t=pt([e],n);return t.pending!=null?{pending:t.pending,geometry:null}:t.geometries!=null?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function pt(e,n){if(!F()){for(let t of e)if(t!=null&&!S(t.spatialReference,n)&&g(t.spatialReference)&&g(n)&&!L(t.spatialReference,n))return C(B),{pending:E(),geometries:null}}return{pending:null,geometries:e.map(t=>t==null?null:S(t.spatialReference,n)?t:g(t.spatialReference)&&g(n)?T(t,n):null)}}function ht(e,n,t=null){if(e==null||n==null)return null;if(m==null||d==null)throw new R;let s=m._getTransformation(d,e,n,t,t?.spatialReference);return s!==null?y.fromGE(s):null}function Ft(e,n,t=null){if(m==null||d==null)throw new R;let s=m._getTransformationBySuitability(d,e,n,t,t?.spatialReference);if(s!==null){let i=[];for(let r of s)i.push(y.fromGE(r));return i}return[]}var R=class extends X{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Xt(){m=null,d=null,v=null,M={}}var Yt={get loadPromise(){return v}};function T(e,n){try{let t=ft(e,n);if(t==null)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);let s=st(t.type,e.spatialReference,n);return s?.(t),t}catch(t){if(!(t instanceof R))throw t;return null}}function qt(e,n,t){return A(this,null,function*(){let s=e.spatialReference;return s!=null&&n!=null&&(yield mt(s,n,null,t)),T(e,n)})}function L(e,n,t){return!t&&(!!S(e,n)||g(e)&&g(n)&&!!nt(e,n,et))}function mt(e,n,t,s){return A(this,null,function*(){if(F())return W(s);if(Array.isArray(e)){for(let{source:i,dest:r,geographicTransformation:o}of e)if(!L(i,r,o))return E(s)}else if(!L(e,n,t))return E(s);return W(s)})}function O(e,n,t){return e?"x"in e?rt(e,n,new J,t,0):"xmin"in e?ut(e,n,new N,t,0):"rings"in e?at(e,n,new U,t,0):"paths"in e?lt(e,n,new $,t,0):"points"in e?ot(e,n,new Q,t,0):null:null}function Vt(e,n,t=n.spatialReference,s=0){return t!=null&&e.spatialReference!=null&&rt(e,e.spatialReference,n,t,s)!=null}function rt(e,n,t,s,i){u[0]=e.x,u[1]=e.y;let r=e.z;return u[2]=r!==void 0?r:i,_(u,n,0,u,s,0,1)?(t.x=u[0],t.y=u[1],t.spatialReference=s,r!==void 0||w(s)?(t.z=u[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),e.m===void 0?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function Dt(e,n,t=n.spatialReference,s=0){return e.spatialReference!=null&&t!=null&&ot(e,e.spatialReference,n,t,s)!=null}function ot(e,n,t,s,i){let{points:r,hasZ:o,hasM:l}=e,a=[],p=r.length,h=[];for(let c of r)h.push(c[0],c[1],o?c[2]:i);if(!_(h,n,0,h,s,0,p))return null;let f=o||w(s);for(let c=0;c<p;++c){let k=3*c,x=h[k],P=h[k+1];f&&l?a.push([x,P,h[k+2],r[c][3]]):f?a.push([x,P,h[k+2]]):l?a.push([x,P,r[c][2]]):a.push([x,P])}return t.points=a,t.spatialReference=s,t.hasZ=o,t.hasM=l,t}function Ht(e,n,t=n.spatialReference,s=0){return e.spatialReference!=null&&t!=null&&lt(e,e.spatialReference,n,t,s)!=null}function lt(e,n,t,s,i){let{paths:r,hasZ:o,hasM:l}=e,a=[];if(!ct(r,o??!1,l??!1,n,a,s,i))return null;let p=o||w(s);return t.paths=a,t.spatialReference=s,t.hasZ=p,t.hasM=l,t}function Jt(e,n,t=n.spatialReference,s=0){return e.spatialReference!=null&&t!=null&&at(e,e.spatialReference,n,t,s)!=null}function at(e,n,t,s,i){let{rings:r,hasZ:o,hasM:l}=e,a=[];if(!ct(r,o??!1,l??!1,n,a,s,i))return null;let p=o||w(s);return t.rings=a,t.spatialReference=s,t.hasZ=p,t.hasM=l,t}function Nt(e,n,t=n.spatialReference,s=0){return e.spatialReference!=null&&t!=null&&ut(e,e.spatialReference,n,t,s)!=null}function ut(e,n,t,s,i){let{xmin:r,ymin:o,xmax:l,ymax:a,hasZ:p,hasM:h}=e,f=p?e.zmin:i;if(!K(r,o,f,n,u,s))return null;let c=p||w(s);t.xmin=u[0],t.ymin=u[1],c&&(t.zmin=u[2]);let k=p?e.zmax:i;return K(l,a,k,n,u,s)?(t.xmax=u[0],t.ymax=u[1],c&&(t.zmax=u[2]),h&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=s,t):null}function ct(e,n,t,s,i,r,o=0){let l=new Array;for(let h of e)for(let f of h)l.push(f[0],f[1],n?f[2]:o);if(!_(l,s,0,l,r,0,l.length/3))return!1;let a=0;i.length=0;let p=n||w(r);for(let h of e){let f=new Array;for(let c of h)p&&t?f.push([l[a++],l[a++],l[a++],c[3]]):p?f.push([l[a++],l[a++],l[a++]]):t?(f.push([l[a++],l[a++],c[2]]),a++):(f.push([l[a++],l[a++]]),a++);i.push(f)}return!0}function Qt(e){return e!=null&&tt(e)!=null}var u=G();export{y as a,F as b,Ot as c,E as d,ft as e,it as f,Bt as g,pt as h,ht as i,Ft as j,Xt as k,Yt as l,T as m,qt as n,L as o,mt as p,O as q,Vt as r,Dt as s,Ht as t,Jt as u,Nt as v,Qt as w};
