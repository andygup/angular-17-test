import{a as i,c as d,g as T}from"./chunk-NKBP5F7I.js";import{c as E}from"./chunk-EEYJPINK.js";import{a as g,b as I}from"./chunk-BZEC7TCW.js";import{a as M}from"./chunk-W5OI4BJ2.js";import{h as l,p,r as U}from"./chunk-TKTKGUCU.js";import{p as N,r as m}from"./chunk-465DRXTW.js";var S=N.getLogger("esri.views.2d.engine.webgl.Utils"),o="geometry",_=[{name:o,strideInBytes:12}],b=[{name:o,strideInBytes:36}],v=[{name:o,strideInBytes:24}],F=[{name:o,strideInBytes:12}],O=[{name:o,strideInBytes:40}],V=[{name:o,strideInBytes:36}],x=[{name:o,strideInBytes:36}];function f(t){let e={};for(let r of t)e[r.name]=r.strideInBytes;return e}var z=f([{name:o,strideInBytes:36}]),k=f(_),$=f(b),Y=f(v),H=f(F),W=f(O),q=f(V),J=f(x);function mt(t,e){switch(t){case i.MARKER:return e===T.HEATMAP?k:z;case i.FILL:switch(e){case T.DOT_DENSITY:return H;case T.SIMPLE:case T.OUTLINE_FILL_SIMPLE:return Y;default:return $}case i.LINE:return W;case i.TEXT:return q;case i.LABEL:return J}}var K=[o],X=[o],Q=[o],Z=[o],j=[o];function tt(t){switch(t){case i.MARKER:return K;case i.FILL:return X;case i.LINE:return Q;case i.TEXT:return Z;case i.LABEL:return j}}function et(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function dt(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function Tt(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function gt(t){return t!=null}function It(t){return typeof t=="number"}function St(t){switch(t){case"butt":return g.BUTT;case"round":return g.ROUND;case"square":return g.SQUARE;default:return S.error(new m("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),g.ROUND}}function ht(t){switch(t){case"miter":return I.MITER;case"bevel":return I.BEVEL;case"round":return I.ROUND;default:return S.error(new m("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),I.ROUND}}function wt(t){switch(t){case"opacity":return d.OPACITY;case"color":return d.COLOR;case"rotation":return d.ROTATION;case"size":return d.SIZE;default:return S.error(`Cannot interpret unknown vv: ${t}`),null}}function Et(t,e,r,n,a,s,c){for(let y in s){let u=s[y].stride,w=et(u),A=s[y].data,L=r[y].data;if(A==null||L==null)continue;let C=u*a.vertexCount/w,G=u*t/w,P=u*a.vertexFrom/w;for(let h=0;h<C;++h)L[h+G]=A[h+P]}if(c!=null&&n!=null){let y=a.indexCount;for(let u=0;u<y;++u)n[u+e]=c[u+a.indexFrom]-a.vertexFrom+t}}var Dt={[o]:U.STATIC_DRAW};function At(t,e){let r=[];for(let n=0;n<5;++n){let a=tt(n),s={};for(let c of a)s[c]={data:e(n,c)};r.push({data:t(n),buffers:s})}return r}function rt(t){switch(t){case l.BYTE:case l.UNSIGNED_BYTE:return 1;case l.SHORT:case l.UNSIGNED_SHORT:return 2;case l.FLOAT:case l.INT:case l.UNSIGNED_INT:return 4}}function Lt(t){switch(t){case p.UNSIGNED_BYTE:return 1;case p.UNSIGNED_SHORT_4_4_4_4:return 2;case p.FLOAT:return 4;default:return void S.error(new m("webgl-utils",`Unable to handle type ${t}`))}}function Nt(t){switch(t){case p.UNSIGNED_BYTE:return Uint8Array;case p.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case p.FLOAT:return Float32Array;default:return void S.error(new m("webgl-utils",`Unable to handle type ${t}`))}}function nt(t){let e={};for(let r in t){let n=t[r],a=0;e[r]=n.map(s=>{let c=new M(s.name,s.count,s.type,a,0,s.normalized||!1);return a+=s.count*rt(s.type),c}),e[r]?.forEach(s=>s.stride=a)}return e}var at=t=>{let e=new Map;for(let r in t)for(let n of t[r])e.set(n.name,n.location);return e},st=t=>{let e={};for(let r in t){let n=t[r];e[r]=n?.length?n[0].stride:0}return e},D=new Map,Ut=(t,e)=>{if(!D.has(t)){let r=nt(e),n={strides:st(r),bufferLayouts:r,attributes:at(e)};D.set(t,n)}return D.get(t)};function Mt(t){t(i.FILL),t(i.LINE),t(i.MARKER),t(i.TEXT),t(i.LABEL)}var Bt=t=>"path"in t&&it(t.path),Rt=t=>!(!("url"in t)||!t.url)||!(!("imageData"in t)||!t.imageData),Ct=t=>"imageData"in t&&t.imageData&&"contentType"in t&&t.contentType?`data:${t.contentType};base64,${t.imageData}`:"url"in t?t.url:null,B=t=>t!=null&&t.startsWith("data:image/gif"),Gt=t=>"url"in t&&t.url&&(t.url.includes(".gif")||B(t.url))||"contentType"in t&&t.contentType==="image/gif"||"imageData"in t&&B(t.imageData),R=t=>t!=null&&t.startsWith("data:image/png"),Pt=t=>"url"in t&&t.url&&(t.url.includes(".png")||R(t.url))||"contentType"in t&&t.contentType==="image/png"||"imageData"in t&&R(t.imageData),_t=t=>t.type&&t.type.toLowerCase().includes("3d");function bt(t){switch(t.type){case"line":{let e=t;return e.cim.type==="CIMSolidStroke"&&!e.dashTemplate}case"fill":return t.cim.type==="CIMSolidFill";case"esriSFS":return t.style==="esriSFSSolid"||t.style==="esriSFSNull";case"esriSLS":return t.style==="esriSLSSolid"||t.style==="esriSLSNull";default:return!1}}function vt(t){switch("cim"in t?t.cim.type:t.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":return!1;case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":return ot(t);default:return!0}}function Ft(t){let e="maxVVSize"in t&&t.maxVVSize,r="width"in t&&t.width||"size"in t&&t.size||0;return e||r}function Ot(t){let e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return e}var it=t=>!!t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4)),ot=t=>t.type==="fill"&&t?.cim?.markerPlacement?.type==="CIMMarkerPlacementInsidePolygon";function zt(t,e=0,r=!1){let n=t[e+3];return t[e]*=n,t[e+1]*=n,t[e+2]*=n,r||(t[e+3]*=255),t}function kt(t){if(!t)return 0;let{r:e,g:r,b:n,a}=t;return E(e*a,r*a,n*a,255*a)}function $t(t){if(!t)return 0;let[e,r,n,a]=t;return E(e*(a/255),r*(a/255),n*(a/255),a)}function Yt(t,e,r=0){if(e==null)return t[r]=0,t[r+1]=0,t[r+2]=0,void(t[r+3]=0);let{r:n,g:a,b:s,a:c}=e;t[r]=n*c/255,t[r+1]=a*c/255,t[r+2]=s*c/255,t[r+3]=c}export{mt as a,et as b,dt as c,Tt as d,gt as e,It as f,St as g,ht as h,wt as i,Et as j,Dt as k,At as l,Lt as m,Nt as n,Ut as o,Mt as p,Bt as q,Rt as r,Ct as s,Gt as t,Pt as u,_t as v,bt as w,vt as x,Ft as y,Ot as z,ot as A,zt as B,kt as C,$t as D,Yt as E};
