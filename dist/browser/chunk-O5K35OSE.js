import{K as i,Q as p,e as h,o as v,p as c,q as m,r as U,t as u,v as d}from"./chunk-XF4NUYV7.js";function R(t,e){let s=e?.url?.path;if(t&&s&&(t=c(t,s,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){let r=m(t,e.portalItem.itemUrl);r!=null&&b.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return f(t,e?.portal)}function x(t,e,s=a.YES){if(t==null)return t;!u(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=c(t);if(e){let o=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(o){let n=f(o,e.portal),l=f(r,e.portal);r=m(l,n,n),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=P(r,e?.portal),u(r)&&(r=U(r)),e?.resources&&e?.portalItem&&!u(r)&&!d(r)&&s===a.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function O(t,e,s){return R(t,s)}function S(t,e,s,r){let o=x(t,r);o!==void 0&&(e[s]=o)}var I=/\/items\/([^\/]+)\/resources\/(.*)/,b=/^\.\/resources\//;function g(t){return(t?.match(I)??null)?.[1]??null}function K(t){let e=t?.match(I)??null;if(e==null)return null;let s=e[2],r=s.lastIndexOf("/");if(r===-1){let{path:l,extension:y}=p(s);return{prefix:null,filename:l,extension:y}}let{path:o,extension:n}=p(s.slice(r+1));return{prefix:s.slice(0,r),filename:o,extension:n}}function P(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?i(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function f(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;let s=`${e.urlKey}.${e.customBaseUrl}`,r=h();return v(r,`${r.scheme}://${s}`)?i(t,e.portalHostname,s):i(t,s,e.portalHostname)}var a;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(a||(a={}));var k=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return a},ensureMainOnlineDomain:P,fromJSON:R,itemIdFromResourceUrl:g,prefixAndFilenameFromResourceUrl:K,read:O,toJSON:x,write:S},Symbol.toStringTag,{value:"Module"}));export{R as a,x as b,O as c,S as d,g as e,K as f,P as g,a as h,k as i};
