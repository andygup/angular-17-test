import{a as w}from"./chunk-U2QVIRVP.js";import{a as $,b as tt,c as et,d as st,e as it}from"./chunk-4ATIL3QV.js";import{b as A,e as H,k as K,n as V,o as W}from"./chunk-U62SHMHB.js";import{a as M}from"./chunk-55ESOXMJ.js";import{h as U}from"./chunk-6QIKBCPR.js";import{b as E}from"./chunk-465DRXTW.js";var b=class{static fromOptimized(t,e,i=!1,n=!1){return new z().initialize(t,e,i,n,1)}static fromJSON(t,e=!1,i=!1){let[n,r]=nt(t);return new O().initialize(n,r,e,i,1)}static fromOptimizedCIM(t,e,i=!1,n=!1){return new F().initialize(t,e,i,n,1)}static fromJSONCIM(t,e=!1,i=!1){let[n,r]=nt(t);return new G().initialize(n,r,e,i,1)}static fromFeatureSetReader(t){let e=t.readGeometryForDisplay(),i=t.geometryType;return e&&i?this.fromOptimized(e,i):null}static fromFeatureSetReaderCIM(t){let e=t.readGeometryForDisplay(),i=t.geometryType;return e&&i?this.fromOptimizedCIM(e,i):null}static createEmptyOptimized(t,e=!1,i=!1){return new z().initialize(new w,t,e,i,1)}static createEmptyJSON(t,e=!1,i=!1){return new O().initialize([],t,e,i,1)}static createEmptyOptimizedCIM(t,e=!1,i=!1){return new F().initialize(new w,t,e,i,1)}static createEmptyJSONCIM(t,e=!1,i=!1){return new G().initialize([],t,e,i,1)}asJSON(){let t=A(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:t[0][0][0],ymin:t[0][0][1],xmax:t[0][2][0],ymax:t[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:t.flat()}:this.geometryType==="esriGeometryPoint"?{x:t[0][0][0],y:t[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:t}:{paths:t}}getCurrentRingArea(){if(!this||this.pathSize<3)return 0;let t,e,i=0;if(this.seekPathStart(),!this.nextPoint())return 0;t=this.x,e=this.y;let n=t,r=e;for(;this.nextPoint();)i+=(t-this.x)*(e+this.y),t=this.x,e=this.y;return i+=(t-n)*(e+r),-.5*i}invertY(){this.yFactor*=-1}},z=class s extends b{constructor(){super(...arguments),this._end=-1}initialize(t,e,i,n,r){return this.hasZ=i,this.hasM=n,this.geometryType=e,this._stride=2+Number(i)+Number(n),this._geometry=t,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=r,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(t){if(t>=0&&t<this.totalSize){if(this._pathIndex<t)for(;this._pathIndex<t&&this.nextPath(););else if(this._pathIndex>t)for(;this._pathIndex>t&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(t){let e=this._pathOffset+t*this._stride;return e>=0&&e<this._end&&(this._pointOffset=e,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){if(this._pathIndex>=0){let e=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex];this._pathOffset+=this._stride*e}this._pointOffset=this._pathOffset-this._stride;let t=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex+1];return this._end=this._pointOffset+this._stride+this._stride*t,++this._pathIndex<this.totalSize}prevPath(){this._end=this._pathOffset;let t=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex-1];return this._pathOffset-=this._stride*t,this._pointOffset=this._pathOffset-this._stride,--this._pathIndex>=0}pathLength(){let t=this._end,e=this._stride,i=this._geometry.coords,n=0;for(let r=this._pathOffset+e;r<t;r+=e){let o=i[r-e],h=i[r-e+1],a=i[r]-o,u=i[r+1]-h;n+=Math.sqrt(a*a+u*u)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(t){this.startPath(),this.pushPoints(t)}pushPoint(t){for(let e=0;e<this._stride;++e)this._geometry.coords.push(t[e]);this._geometry.lengths[this.totalSize-1]++}pushXY(t,e){this._geometry.coords.push(t,e),this._geometry.lengths[this.totalSize-1]++}pushPoints(t){for(let e of t)for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]+=t.length}pushCursor(t){let e=t.asOptimized();this._geometry.coords.push(...e.coords),this._geometry.lengths.push(...e.lengths)}asOptimized(){let t=this._geometry.clone();if(this.yFactor!==1)for(let e=1;e<t.coords.length;e+=this._stride)t.coords[e]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(t.lengths.length=0),t}isClosed(){let t=this._geometry.coords,e=this._pathOffset,i=this._end-this._stride;for(let n=0;n<this._stride;n++)if(t[e+n]!==t[i+n])return!1;return!0}clone(){return new s().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.coords.length/this._stride}get pathSize(){let{lengths:t}=this._geometry;return this._pathIndex<0||this._pathIndex>t.length-1?0:t[this._pathIndex]}get totalSize(){return this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(t){this._geometry.coords[this._pointOffset]=t}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(t){this._geometry.coords[this._pointOffset+1]=this.yFactor*t}get z(){return this._geometry.coords[this._pointOffset+2]}set z(t){this._geometry.coords[this._pointOffset+2]=t}get m(){let t=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+t]}set m(t){this._geometry.coords[this._pointOffset+3]=t}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function ot(s){let t=[s.x,s.y];return s.z&&t.push(s.z),s.m&&t.push(s.m),t}function nt(s){return it(s)?[s.rings,"esriGeometryPolygon"]:st(s)?[s.paths,"esriGeometryPolyline"]:tt(s)?[[s.points],"esriGeometryMultipoint"]:$(s)?[[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]],"esriGeometryEnvelope"]:et(s)?[[[ot(s)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}var O=class s extends b{initialize(t,e,i,n,r){return this._paths=t,this.geometryType=e,this.hasZ=i,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=r,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(t){return t>=0&&t<this.totalSize&&(this._pathIndex=t,this._pointIndex=-1,this._currentPath=this._paths[t],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(t){return t>=0&&t<this._currentPath.length&&(this._pointIndex=t,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this._pointIndex=-1,this._currentPath=this._paths[--this._pathIndex],this._pathIndex>=0}pathLength(){let t=this._currentPath.length,e=this._currentPath,i=0;for(let n=1;n<t;n++){let r=e[n-1],o=e[n],h=r[0],a=r[1],u=o[0]-h,c=o[1]-a;i+=Math.sqrt(u*u+c*c)}return i}startPath(){this._paths.push([])}pushPath(t){this._paths.push(t)}pushPoint(t){this._paths[this.totalSize-1].push(t)}pushXY(t,e){this._paths[this.totalSize-1].push([t,e])}pushPoints(t){this._paths[this.totalSize-1].push(...t)}pushCursor(t){let e=A(t);for(let i of e)this.pushPath(i)}asOptimized(){let t=new w;if(this.geometryType==="esriGeometryPoint")t.coords.push(...this._paths[0][0]),t.lengths.length=0;else for(let e of this._paths){for(let i of e)t.coords.push(i[0]),t.coords.push(i[1]*this.yFactor),this.hasZ&&t.coords.push(i[2]),this.hasM&&t.coords.push(i[this._mIndex]);t.lengths.push(e.length)}return t}isClosed(){let t=this._currentPath[0],e=this._currentPath[this._currentPath.length-1];for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}clone(){return new s().initialize(E(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(t=>t.length).reduce((t,e)=>t+e)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(t){this._currentPoint[0]=t}get y(){return this.yFactor*this._currentPoint[1]}set y(t){this._currentPoint[1]=this.yFactor*t}get z(){return this._currentPoint[2]}set z(t){this._currentPoint[2]=t}get m(){return this._currentPoint[this._mIndex]}set m(t){this._currentPoint[this._mIndex]=t}get pathIndex(){return this._pathIndex}},k=4,T=1,F=class s extends z{initialize(t,e,i,n,r){return super.initialize(t,e,i,n,r),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(o=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){let t=new s().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return t._controlPoints=this._controlPoints,t}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(t){this._controlPoints[this.pathIndex].add(t)}getControlPointAt(t){return this._controlPoints[this.pathIndex].has(t)}},G=class s extends O{initialize(t,e,i,n,r){return super.initialize(t,e,i,n,r)}clone(){return new s().initialize(E(this._paths),this.geometryType,this.hasZ,this.hasM,1)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][k]=T}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][k]===T}setControlPointAt(t){this._paths[this.pathIndex][t][k]=T}getControlPointAt(t){return this._paths[this.pathIndex][t][k]===T}};var at=100*222045e-21;function Mt(s){if(s.totalSize===0)return null;let t=V(s);if(!t)return null;let e=4*(Math.abs(t[0])+Math.abs(t[2])+Math.abs(t[1])+Math.abs(t[3])+1)*at,i=0,n=0;s.reset();for(let y=0;s.nextPath();y++){let g=s.getCurrentRingArea();g>n&&(n=g,i=y)}if(s.seekPath(i),s.pathSize===0)return null;s.seekPathStart();let r=W(s);if(Math.abs(n)<=2*e*e)return[(r[0]+r[2])/2,(r[1]+r[3])/2];s.seekPathStart();let o=K(s,M());if(o===null)return null;if(s.totalPoints<4)return o;let h=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],a=[NaN,NaN,NaN,NaN],u=[NaN,NaN,NaN,NaN],c=!1,l=S(o,s,!0);l.distance===0&&(c=!0,h[0][0]=o[0],h[0][1]=o[1],l=S(o,s,!1)),a[0]=l.distance,u[0]=0;let d=[NaN,NaN],_=!1,m=.25,f=-1,p=NaN;do if(p=NaN,h[1]=D(s,R(r[0],r[2],m),e,t),isNaN(h[1][0])||isNaN(h[1][1])||(l=S(h[1],s,!1),p=l.distance),!isNaN(p)&&p>e&&v(h[1],s))_=!0,a[1]=p,u[1]=N(h[1],o);else if(!isNaN(p)&&p>f&&(f=p,d[0]=h[1][0],d[1]=h[1][1]),m-=.01,m<.1){if(!(f>=0))break;_=!0,a[1]=f,h[1][0]=d[0],h[1][1]=d[1],u[1]=N(h[1],o)}while(!_);_=!1,m=.5,f=-1;let J=.01,Y=1;do if(p=NaN,h[2]=D(s,R(r[0],r[2],m),e,t),isNaN(h[2][0])||isNaN(h[2][1])||(l=S(h[2],s,!1),p=l.distance),!isNaN(p)&&p>e&&v(h[2],s))_=!0,a[2]=p,u[2]=N(h[2],o);else if(!isNaN(p)&&p>f)f=p,d[0]=h[2][0],d[1]=h[2][1];else if(p>f&&(f=p,d[0]=h[2][0],d[1]=h[2][1]),m=.5+J*Y,J+=.01,Y*=-1,m<.3||m>.7){if(!(f>=0))break;_=!0,a[2]=f,h[2][0]=d[0],h[2][1]=d[1],u[2]=N(h[2],o)}while(!_);_=!1,m=.75,f=-1;do if(p=NaN,h[3]=D(s,R(r[0],r[2],m),e,t),isNaN(h[3][0])||isNaN(h[3][1])||(l=S(h[3],s,!1),p=l.distance),!isNaN(p)&&p>e&&v(h[3],s))_=!0,a[3]=p,u[3]=N(h[3],o);else if(p>f&&(f=p,d[0]=h[3][0],d[1]=h[3][1]),m+=.01,m>.9){if(!(f>=0))break;_=!0,a[3]=f,h[3][0]=d[0],h[3][1]=d[1],u[3]=N(h[3],o)}while(!_);let P=[0,1,2,3],C=c?0:1,L;for(let y=C;y<4;y++)for(let g=C;g<3;g++){let j=u[g],Q=u[g+1];ct(j,Q)>0&&(L=P[g],P[g]=P[g+1],P[g+1]=L,u[g]=Q,u[g+1]=j)}let X=C,B=0,I=0;for(let y=C;y<4;y++){switch(y){case 0:I=2*a[P[y]];break;case 1:I=1.66666666*a[P[y]];break;case 2:I=1.33333333*a[P[y]];break;case 3:I=a[P[y]]}I>B&&(B=I,X=P[y])}return h[X]}function v(s,t){let e,i,n,r,o=0;for(t.reset();t.nextPath()&&t.nextPoint();)for(e=t.x,i=t.y;t.nextPoint();e=n,i=r)n=t.x,r=t.y,i>s[1]!=r>s[1]&&((n-e)*(s[1]-i)-(r-i)*(s[0]-e)>0?o++:o--);return o!==0}function S(s,t,e){if(e&&v(s,t))return{coord:s,distance:0};let i=1/0,n=0,r=0,o=[0,0],h=[0,0],a=[0,0];for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(o[0]=t.x,o[1]=t.y;t.nextPoint();o=h){h=[t.x,t.y],H(a,s,o,h);let u=N(s,a);u<i&&(i=u,n=a[0],r=a[1])}return{coord:[n,r],distance:Math.sqrt(i)}}function D(s,t,e,i){let n=[t,0],r=1/0,o=1/0,h=!1,a=!1,u=[[t,i[1]-1],[t,i[3]+1]],c=[0,0],l=[0,0],d=[0,0],_=[[0,0],[0,0]],m=M();for(s.reset();s.nextPath()&&s.nextPoint();)if(!(s.pathSize<2))for(_[0][0]=s.x,_[0][1]=s.y;s.nextPoint();_[0][0]=_[1][0],_[0][1]=_[1][1]){if(_[1][0]=s.x,_[1][1]=s.y,lt(m,_)===null||(l[0]=u[0][0],l[1]=u[0][1],d[0]=u[1][0],d[1]=u[1][1],ut(m,l,d)===0)||!U(u[0],u[1],_[0],_[1],c))continue;let f=c[1];r>o?f<r&&(r=f,h=!0):f<o&&(o=f,a=!0)}return h&&a?n[1]=(r+o)/2:n[0]=n[1]=NaN,n}function lt(s,t){if(t.length<2)return null;s||(s=M());let[e,i]=t[0],[n,r]=t[1];return s[0]=Math.min(e,n),s[1]=Math.min(i,r),s[2]=Math.max(e,n),s[3]=Math.max(i,r),s}var q=1,Z=4,rt=3,ht=12;function ut(s,t,e){let i=x(t,s),n=x(e,s),r=s[0],o=s[1],h=s[2],a=s[3];if(i&n)return 0;if(!(i|n))return 4;let u=(i?1:0)|(n?2:0);do{let c=e[0]-t[0],l=e[1]-t[1];if(c>l)i&rt?(i&q?(t[1]+=l*(r-t[0])/c,t[0]=r):(t[1]+=l*(h-t[0])/c,t[0]=h),i=x(t,s)):n&rt?(n&q?(e[1]+=l*(r-e[0])/c,e[0]=r):(e[1]+=l*(h-e[0])/c,e[0]=h),n=x(e,s)):i?(i&Z?(t[0]+=c*(o-t[1])/l,t[1]=o):(t[0]+=c*(a-t[1])/l,t[1]=a),i=x(t,s)):(n&Z?(e[0]+=c*(o-e[1])/l,e[1]=o):(e[0]+=c*(a-e[1])/l,e[1]=a),n=x(e,s));else if(i&ht?(i&Z?(t[0]+=c*(o-t[1])/l,t[1]=o):(t[0]+=c*(a-t[1])/l,t[1]=a),i=x(t,s)):n&ht?(n&Z?(e[0]+=c*(o-e[1])/l,e[1]=o):(e[0]+=c*(a-e[1])/l,e[1]=a),n=x(e,s)):i?(i&q?(t[1]+=l*(r-t[0])/c,t[0]=r):(t[1]+=l*(h-t[0])/c,t[0]=h),i=x(t,s)):(n&q?(e[1]+=l*(r-e[0])/c,e[0]=r):(e[1]+=l*(h-e[0])/c,e[0]=h),n=x(e,s)),i&n)return 0}while(i|n);return u}function x(s,t){return(s[0]<t[0]?1:0)|(s[0]>t[2]?1:0)<<1|(s[1]<t[1]?1:0)<<2|(s[1]>t[3]?1:0)<<3}function R(s,t,e){return s+(t-s)*e}function N(s,t){return(s[0]-t[0])*(s[0]-t[0])+(s[1]-t[1])*(s[1]-t[1])}function ct(s,t){if(s<t)return-1;if(s>t)return 1;if(s===t)return 0;let e=isNaN(s),i=isNaN(t);return e<i?-1:e>i?1:0}export{b as a,Mt as b};
