import{a as oe,b as ie,c as ne,d as P,e as I,j as L,k as b,m as ce,n as de,o as le,p as S}from"./chunk-OOYAVZJN.js";import{a as se,b as ae}from"./chunk-225WJVLD.js";import{b as R,c as z}from"./chunk-RIZAJ3RX.js";import{a as te}from"./chunk-V2KSICSA.js";import{a as T,b as J,h as Q}from"./chunk-CBOFHDSC.js";import{b as Y}from"./chunk-WF37UVOV.js";import{a as q}from"./chunk-5ETRXDS4.js";import{a as ee}from"./chunk-RXHILZH7.js";import{c as X}from"./chunk-IDSF2RZ6.js";import{a as re}from"./chunk-2BBIRZVO.js";import{a as Z}from"./chunk-IUPUERVS.js";import{p as K}from"./chunk-XF4NUYV7.js";import{C as W,H as m,a as D}from"./chunk-WMYPRHRR.js";import{R as G,n as O}from"./chunk-IAMDMFZ7.js";import{a as h}from"./chunk-53MWZ23O.js";import{d as $,e as U,l as N,y as V}from"./chunk-PT7S6WNL.js";import{b as A}from"./chunk-XDTDVCGP.js";import{b as M,p as E}from"./chunk-465DRXTW.js";import{a as y,g as C}from"./chunk-ESDYQQXO.js";function pe(e){return typeof e=="string"?document.getElementById(e):e??null}function Xe(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function Ye(e,t){let r=t.parentNode;r&&r.insertBefore(e,t)}function Ze(e,t){for(;;){let r=e.firstChild;if(!r)break;t.appendChild(r)}}var et=typeof Element.prototype.closest=="function"?(e,t)=>e.closest(t):(e,t)=>{let r=e;do{if(r.matches(t))return r;r=r.parentElement}while(r!==null&&r.nodeType===1);return null};var he={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))};var Te={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},me=e=>y(y({},Te),e);var Ie=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},Le=(e,t)=>e.find(t),ue=(e,t,r=!1)=>{let i=e;return t.forEach((c,s)=>{let o=i?.children?Le(i.children,n=>n.domNode===c):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},fe=e=>{let t,r=y(y({},he),e),i=me(r),c=i.performanceLogger,s,o=!0,n=!1,d=[],f=[],u=(p,a,F)=>{let v;i.eventHandlerInterceptor=(Ke,qe,Je,Qe)=>function(w){let _;c("domEvent",w);let x=Ie(w.currentTarget,v.domNode),Ae=x.some(k=>customElements.get(k?.tagName?.toLowerCase()));if(w.eventPhase===Event.CAPTURING_PHASE||!Ae)x.reverse(),_=ue(v.getLastRender(),x);else{let k=w.composedPath(),Ne=k.slice(k.indexOf(w.currentTarget),k.indexOf(v.domNode)).reverse();_=ue(v.getLastRender(),Ne,!0)}let B;return _&&(B=r.handleInterceptedEvent(t,_,this,w)),c("domEventProcessed",w),B},r.postProcessProjectionOptions?.(i);let H=F();v=p(a,H,i),i.eventHandlerInterceptor=void 0,d.push(v),f.push(F),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,H)},g=()=>{if(s=void 0,o){o=!1,c("renderStart",void 0);for(let p=0;p<d.length;p++){let a=f[p]();c("rendered",void 0),d[p].update(a),c("patched",void 0)}c("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(g=r.modifyDoRenderImplementation(g,d,f)),t={renderNow:g,scheduleRender:()=>{s||n||(s=requestAnimationFrame(g))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),n=!0},resume:()=>{n=!1,o=!0,t.scheduleRender()},append:(p,a)=>{u(b.append,p,a)},insertBefore:(p,a)=>{u(b.insertBefore,p,a)},merge:(p,a)=>{u(b.merge,p,a)},replace:(p,a)=>{u(b.replace,p,a)},detach:p=>{for(let a=0;a<f.length;a++)if(f[a]===p)return f.splice(a,1),d.splice(a,1)[0];throw new Error("renderFunction was not found")}},t};function ge(){let{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(ae)||e.contains(se)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),c=o=>{s!==o&&i(o),s=o},s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>c(o.matches?"dark":"light")),new MutationObserver(()=>c(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Re(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?ge():document.addEventListener("DOMContentLoaded",()=>ge(),{once:!0}))}var ze=Re;ze();var ye;function ve(){try{R(".")}catch{z(K(Z(ye)))}}function kt(e){let t=[];for(let r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null}ye="components/assets";var we={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"};var ke=new Set;function be(e){ke.add(e),e.finally(()=>ke.delete(e))}var _e,Se="esri.widgets.Widget",je=0,Fe={widgetIcon:we.checkboxUnchecked};function Ce(e,t){for(let r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?Ce(e[r],t?.[r]):e[r]=t[r]);return e}var He=fe({postProcessProjectionOptions(e){let t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,c,s,o)=>{let n=t?.(i,c,s,o),d=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||d){let f=i[2].toLowerCase()+i.slice(3),u=a=>n?.call(s,a);s.addEventListener(f,u,d);let g=()=>s.removeEventListener(f,u,d),p=o.afterRemoved;o.afterRemoved=a=>{p?.(a),g()}}return n}},handleInterceptedEvent(e,t,r,i){let{eventPhase:c,type:s}=i,o=c===Event.CAPTURING_PHASE,n=`on${s}${o?"capture":""}`,d=t.properties;(d&&n in d||(n=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,d&&n in d))&&(oe(),e.scheduleRender(),d[n].call(d.bind||r,i))}}),j=!1,l=class extends ee(q.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=He,this._readyForTrueRender=!1,this.iconClass=Fe.widgetIcon,this.icon=null,this.key=this,this._loadLocale=V(()=>C(this,null,function*(){if(this._messageBundleProps?.length){let o=yield Promise.allSettled(this._messageBundleProps.map(f=>C(this,[f],function*({bundlePath:n,propertyName:d}){if(this.destroyed)return;let u=yield Y(n);this.uiStrings&&Object.keys(this.uiStrings)&&(u=Ce(M(u),this.uiStrings)),this[d]=u})));if(this.destroyed)return;for(let n of o)n.status==="rejected"&&E.getLogger(this).error("widget-intl:locale-error",this.declaredClass,n.reason)}yield this.loadLocale()})),ve();let r="esri-widget-uid-"+te(),i=this.render.bind(this);this._trackingTarget=new W(()=>this.scheduleRender());let c=()=>{if(!this._readyForTrueRender||this.destroyed)return null;let o=i(),{properties:n}=o;n||(o.properties=n={});let{key:d}=n;if(d||(n.key=r),S(o.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?n.styles||(n.styles={}):(n.class="",n.styles={display:"none"}),n.styles.display||(n.styles.display="");let f=0;return o.children?.forEach(u=>{if(S(u.vnodeSelector))return;let{properties:g}=u;g||(u.properties=g={}),g.key||(g.key=`${this.id}--${f++}`)}),le(this,o)};this.render=()=>{if(j)return c();let o=ie(this)??null;if(o)return o;this._trackingTarget.clear(),j=!0;try{o=O(this._trackingTarget,c)}catch(n){throw console.error(n),n}finally{j=!1}return o&&ne(this,o),o};let s=this.beforeFirstRender();s?this._resourcesFetch=s.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),be(this._resourcesFetch)}normalizeCtorArgs(e,t){let r=y({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){let e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(N):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(A(this._trackingTarget),A(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,P(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return pe(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+je++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(_e=ce,de)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(P(this),this._projector.scheduleRender())}own(e){D(E.getLogger(this.declaredClass),"`Widget.own()` is deprecated in favor of Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return I.apply(this,e)}renderNow(){P(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(T(()=>this.viewModel,(t,r)=>{r&&this.removeHandles("delegated-events"),t&&$(t)&&this.addHandles(this._delegatedEventNames.map(i=>U(t,i,c=>{this.emit(i,c)})),"delegated-events")},Q)),this.postInitialize();let e=()=>C(this,null,function*(){yield this._loadLocale().catch(N),this.scheduleRender()});this.addHandles([X(e),T(()=>this.uiStrings,e),J(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};l[_e]=!0,h([m()],l.prototype,"_readyForTrueRender",void 0),h([m({value:null})],l.prototype,"container",null),h([re("container")],l.prototype,"castContainer",null),h([m()],l.prototype,"iconClass",void 0),h([m()],l.prototype,"icon",void 0),h([m()],l.prototype,"id",null),h([m()],l.prototype,"label",null),h([m()],l.prototype,"renderable",null),h([m()],l.prototype,"uiStrings",void 0),h([m()],l.prototype,"viewModel",void 0),h([m({value:!0})],l.prototype,"visible",null),h([m()],l.prototype,"key",void 0),h([m()],l.prototype,"children",void 0),h([m()],l.prototype,"afterCreate",void 0),h([m()],l.prototype,"afterUpdate",void 0),h([m()],l.prototype,"afterRemoved",void 0),l=h([G(Se)],l);var Zt=l;function Be(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}function Me(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);let r=t._delegatedEventNames,i=Array.isArray(e)?e:De(e);r.push(...i)}}function De(e){return e.split(",").map(t=>t.trim())}function Oe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Ue(e[t])}}}function $e(e){let t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Ue(e){return function(t,...r){$e(t)?L(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}var Pe="calcite-mode-";function Ve(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function xe(){return Ve().startsWith("dark")}function Ee(){return`${Pe}${xe()?"dark":"light"}`}function We(e){Ge(e),e.classList.add(Ee())}function Ge(e){Array.from(e.classList).forEach(t=>{t.startsWith(Pe)&&e.classList.remove(t)})}function kr(e){return e&&typeof e.render=="function"}function br(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}export{pe as a,Xe as b,Ye as c,Ze as d,kt as e,we as f,Zt as g,Be as h,Oe as i,Me as j,xe as k,We as l,kr as m,br as n};
