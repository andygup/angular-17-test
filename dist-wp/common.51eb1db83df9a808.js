"use strict";(self.webpackChunkangular_17_test=self.webpackChunkangular_17_test||[]).push([[8592],{73903:(Q,G,e)=>{e.d(G,{Z:()=>D});var o=e(50484),P=e(73514),O=e(57678),b=e(25387),y=e(84373),d=e(89317),u=e(80543),A=(e(1535),e(14007),e(10141));let j=0,B=class extends((0,d.eC)((0,b.J)((0,y.IG)(P.Z)))){constructor(I){super(I),this.id=`${Date.now().toString(16)}-analysis-${j++}`,this.title=null}get parent(){return this._get("parent")}set parent(I){const l=this.parent;if(null!=l)switch(l.type){case"line-of-sight":case"dimension":l.releaseAnalysis(this);break;case"2d":case"3d":l.analyses.includes(this)&&l.analyses.remove(this)}this._set("parent",I)}get isEditable(){return this.requiredPropertiesForEditing.every(O.pC)}};(0,o._)([(0,u.Cb)({type:String,constructOnly:!0,clonable:!1})],B.prototype,"id",void 0),(0,o._)([(0,u.Cb)({type:String})],B.prototype,"title",void 0),(0,o._)([(0,u.Cb)({constructOnly:!0})],B.prototype,"type",void 0),(0,o._)([(0,u.Cb)({clonable:!1,value:null})],B.prototype,"parent",null),(0,o._)([(0,u.Cb)({readOnly:!0})],B.prototype,"isEditable",null),(0,o._)([(0,u.Cb)({readOnly:!0})],B.prototype,"requiredPropertiesForEditing",void 0),B=(0,o._)([(0,A.j)("esri.analysis.Analysis")],B);const D=B},56803:(Q,G,e)=>{e.d(G,{B:()=>O,R:()=>P});var o=e(60616);class P extends o.a5{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let y=this.width(),d=this.height(),u=y,L=d,M=u/Math.abs(y),A=L/Math.abs(d);if((0,o.g)(u)&&(0,o.g)(L)){let j=Math.min(u,L)/2,B=(0,o.az)(this.get("cornerRadiusTL",8),j),D=(0,o.az)(this.get("cornerRadiusTR",8),j),I=(0,o.az)(this.get("cornerRadiusBR",8),j),l=(0,o.az)(this.get("cornerRadiusBL",8),j),v=Math.min(Math.abs(u/2),Math.abs(L/2));B=(0,o.aj)(B,0,v),D=(0,o.aj)(D,0,v),I=(0,o.aj)(I,0,v),l=(0,o.aj)(l,0,v);const h=this._display;h.moveTo(B*M,0),h.lineTo(u-D*M,0),D>0&&h.arcTo(u,0,u,D*A,D),h.lineTo(u,L-I*A),I>0&&h.arcTo(u,L,u-I*M,L,I),h.lineTo(l*M,L),l>0&&h.arcTo(0,L,0,L-l*A,l),h.lineTo(0,B*A),B>0&&h.arcTo(0,0,B*M,0,B),h.closePath()}}}Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a5.classNames.concat([P.className])});class O extends o.a3{_afterNew(){this._settings.themeTags=(0,o.ak)(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",P.new(this._root,{themeTags:(0,o.ak)(this._settings.themeTags,["background"])}))}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const y=this._prevSettings.icon,d=this.get("icon");d!==y&&(this._disposeProperty("icon"),y&&y.dispose(),d&&this.children.push(d),this._prevSettings.icon=d)}if(this.isDirty("label")){const y=this._prevSettings.label,d=this.get("label");d!==y&&(this._disposeProperty("label"),y&&y.dispose(),d&&this.children.push(d),this._prevSettings.label=d)}}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a3.classNames.concat([O.className])})},58661:(Q,G,e)=>{e.d(G,{T:()=>O});var o=e(60616);class P extends o.a7{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let y=this.width(),d=this.height();if(y>0&&d>0){let u=this.get("cornerRadius",8);u=(0,o.aj)(u,0,Math.min(y/2,d/2));let L=this.get("pointerX",0),M=this.get("pointerY",0),A=this.get("pointerBaseWidth",15)/2,j=0,B=0,D=0,I=(L-j)*(d-B)-(M-B)*(y-j),l=(L-D)*(0-d)-(M-d)*(y-D);const v=this._display;if(v.moveTo(u,0),I>0&&l>0){let h=Math.round((0,o.aj)(L,u+A,y-A-u));M=(0,o.aj)(M,-1/0,0),v.lineTo(h-A,0),v.lineTo(L,M),v.lineTo(h+A,0)}if(v.lineTo(y-u,0),v.arcTo(y,0,y,u,u),I>0&&l<0){let h=Math.round((0,o.aj)(M,u+A,d-A-u));L=(0,o.aj)(L,y,1/0),v.lineTo(y,u),v.lineTo(y,Math.max(h-A,u)),v.lineTo(L,M),v.lineTo(y,h+A)}if(v.lineTo(y,d-u),v.arcTo(y,d,y-u,d,u),I<0&&l<0){let h=Math.round((0,o.aj)(L,u+A,y-A-u));M=(0,o.aj)(M,d,1/0),v.lineTo(y-u,d),v.lineTo(h+A,d),v.lineTo(L,M),v.lineTo(h-A,d)}if(v.lineTo(u,d),v.arcTo(0,d,0,d-u,u),I<0&&l>0){let h=Math.round((0,o.aj)(M,u+A,d-u-A));L=(0,o.aj)(L,-1/0,0),v.lineTo(0,d-u),v.lineTo(0,h+A),v.lineTo(L,M),v.lineTo(0,Math.max(h-A,u))}v.lineTo(0,u),v.arcTo(0,0,u,0,u),v.closePath()}}}}Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a7.classNames.concat([P.className])});class O extends o.a3{constructor(y,d,u,L=[]){super(y,d,u,L),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=(0,o.ak)(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",P.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(o.al.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",y=>{y&&((0,o.z)(y,"pointerover",d=>{this._htmlContentHovered=!0}),(0,o.z)(y,"pointerout",d=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),(0,o.ad)(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const y=this.get("background");this._keepHoverDp=new o.M([y.events.on("pointerover",d=>{let u=this.get("tooltipTarget");u&&(u.parent&&u.parent.getPrivate("tooltipTarget")==u&&(u=u.parent),u.hover())}),y.events.on("pointerout",d=>{let u=this.get("tooltipTarget");u&&(u.parent&&u.parent.getPrivate("tooltipTarget")==u&&(u=u.parent),this._htmlContentHovered||u.unhover())})]),this.label.onPrivate("htmlElement",d=>{this._keepHoverDp&&d&&this._keepHoverDp.disposers.push((0,o.z)(d,"pointerleave",u=>{const L=this.root._renderer.getEvent(u);y.events.dispatch("pointerout",{type:"pointerout",originalEvent:L.event,point:L.point,simulated:!1,target:y})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let y=this.get("tooltipTarget");const d=this.get("background");let u,L;y&&d&&(u=y.get("fill"),L=y.get("stroke"),null==u&&(u=L),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=u&&d.set("fill",u),this._fillDp=y.on("fill",M=>{null!=M&&(d.set("fill",M),this._updateTextColor(M))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=u&&d.set("stroke",u),this._strokeDp=y.on("fill",M=>{null!=M&&d.set("stroke",M)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=u&&this.label.set("fill",u),this._labelDp=y.on("fill",M=>{null!=M&&this.label.set("fill",M)}),this._disposers.push(this._labelDp))),this._updateTextColor(u)}_updateTextColor(y){this.get("autoTextColor")&&(null==y&&(y=this.get("background").get("fill")),null==y&&(y=this._root.interfaceColors.get("background")),y instanceof o.C&&this.label.set("fill",o.C.alternative(y,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(y){super._setDataItem(y),this.label._setDataItem(y)}_updateBackground(){super.updateBackground();const y=this._root.container;if(y){let d=.5,u=.5,L=this.get("centerX");L instanceof o.Q&&(d=L.value);let M=this.get("centerY");M instanceof o.Q&&(u=M.value);let A=y.width(),j=y.height(),B=this.parent,D=0,I=0;if(B){D=B.x(),I=B.y();const c=B.get("layerMargin");c&&(D+=c.left||0,I+=c.top||0,A+=(c.left||0)+(c.right||0),j+=(c.top||0)+(c.bottom||0))}const l=this.get("bounds",{left:-D,top:-I,right:A-D,bottom:j-I});this._updateBounds();let v=this.width(),h=this.height();0===v&&(v=this._w),0===h&&(h=this._h);let _=this.get("pointTo",{x:A/2,y:j/2}),C=_.x,a=_.y,i=this.get("pointerOrientation"),p=this.get("background"),g=0,U=0,W=0;p instanceof P&&(g=p.get("pointerLength",0),U=p.get("strokeWidth",0)/2,W=U,p.set("width",v),p.set("height",h));let T=0,w=0,K=l.right-l.left,S=l.bottom-l.top;"horizontal"==i||"left"==i||"right"==i?(U=0,"horizontal"==i?C>l.left+K/2?(C-=v*(1-d)+g,W*=-1):C+=v*d+g:"left"==i?C+=v*(1-d)+g:(C-=v*d+g,W*=-1)):(W=0,"vertical"==i?a>l.top+h/2+g?a-=h*(1-u)+g:(a+=h*u+g,U*=-1):"down"==i?a-=h*(1-u)+g:(a+=h*u+g,U*=-1)),C=(0,o.aj)(C,l.left+v*d,l.left+K-v*(1-d))+W,a=(0,o.aj)(a,l.top+h*u,l.top+S-h*(1-u))-U,T=_.x-C+v*d+W,w=_.y-a+h*u-U,this._fx=C,this._fy=a;const s=this.get("animationDuration",0);if(s>0&&this.get("visible")&&this.get("opacity")>.1){const c=this.get("animationEasing");this.animate({key:"x",to:C,duration:s,easing:c}),this.animate({key:"y",to:a,duration:s,easing:c})}else this.set("x",C),this.set("y",a);p instanceof P&&(p.set("pointerX",T),p.set("pointerY",w)),v>0&&(this._w=v),h>0&&(this._h=h)}}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a3.classNames.concat([O.className])})},4254:(Q,G,e)=>{e.d(G,{A:()=>K,B:()=>S,C:()=>s,D:()=>c,E:()=>E,F:()=>f,G:()=>R,H:()=>Z,I:()=>z,J:()=>H,K:()=>k,L:()=>J,M:()=>N,N:()=>$,a:()=>y,b:()=>d,c:()=>b,d:()=>u,e:()=>O,f:()=>L,g:()=>Y,h:()=>M,i:()=>A,j:()=>D,k:()=>v,l:()=>_,m:()=>C,n:()=>a,o:()=>I,p:()=>i,q:()=>g,r:()=>l,s:()=>h,t:()=>j,u:()=>p,v:()=>U,w:()=>B,x:()=>W,y:()=>T,z:()=>w});var o=e(89465),P=e(27545);function O(m){return o.G.extendedSpatialReferenceInfo(m)}function b(m,x,F){return o.G.clip(P.N,m,x,F)}function y(m,x,F){return o.G.cut(P.N,m,x,F)}function d(m,x,F){return o.G.contains(P.N,m,x,F)}function u(m,x,F){return o.G.crosses(P.N,m,x,F)}function L(m,x,F,V){return o.G.distance(P.N,m,x,F,V)}function M(m,x,F){return o.G.equals(P.N,m,x,F)}function A(m,x,F){return o.G.intersects(P.N,m,x,F)}function j(m,x,F){return o.G.touches(P.N,m,x,F)}function B(m,x,F){return o.G.within(P.N,m,x,F)}function D(m,x,F){return o.G.disjoint(P.N,m,x,F)}function I(m,x,F){return o.G.overlaps(P.N,m,x,F)}function l(m,x,F,V){return o.G.relate(P.N,m,x,F,V)}function v(m,x){return o.G.isSimple(P.N,m,x)}function h(m,x){return o.G.simplify(P.N,m,x)}function _(m,x,F=!1){return o.G.convexHull(P.N,m,x,F)}function C(m,x,F){return o.G.difference(P.N,m,x,F)}function a(m,x,F){return o.G.symmetricDifference(P.N,m,x,F)}function i(m,x,F){return o.G.intersect(P.N,m,x,F)}function p(m,x,F=null){return o.G.union(P.N,m,x,F)}function g(m,x,F,V,X,q,se){return o.G.offset(P.N,m,x,F,V,X,q,se)}function U(m,x,F,V,X=!1){return o.G.buffer(P.N,m,x,F,V,X)}function W(m,x,F,V,X,q,se){return o.G.geodesicBuffer(P.N,m,x,F,V,X,q,se)}function T(m,x,F,V=!0){return o.G.nearestCoordinate(P.N,m,x,F,V)}function w(m,x,F){return o.G.nearestVertex(P.N,m,x,F)}function K(m,x,F,V,X){return o.G.nearestVertices(P.N,m,x,F,V,X)}function S(m,x,F,V){if(null==x||null==V)throw new Error("Illegal Argument Exception");const X=o.G.rotate(x,F,V);return X.spatialReference=m,X}function s(m,x,F){if(null==x||null==F)throw new Error("Illegal Argument Exception");const V=o.G.flipHorizontal(x,F);return V.spatialReference=m,V}function c(m,x,F){if(null==x||null==F)throw new Error("Illegal Argument Exception");const V=o.G.flipVertical(x,F);return V.spatialReference=m,V}function E(m,x,F,V,X){return o.G.generalize(P.N,m,x,F,V,X)}function f(m,x,F,V){return o.G.densify(P.N,m,x,F,V)}function R(m,x,F,V,X=0){return o.G.geodesicDensify(P.N,m,x,F,V,X)}function Z(m,x,F){return o.G.planarArea(P.N,m,x,F)}function z(m,x,F){return o.G.planarLength(P.N,m,x,F)}function H(m,x,F,V){return o.G.geodesicArea(P.N,m,x,F,V)}function k(m,x,F,V){return o.G.geodesicLength(P.N,m,x,F,V)}function J(m,x,F){return null==x||null==F?[]:o.G.intersectLinesToPoints(P.N,m,x,F)}function N(m,x){o.G.changeDefaultSpatialReferenceTolerance(m,x)}function $(m){o.G.clearDefaultSpatialReferenceTolerance(m)}const Y=Object.freeze(Object.defineProperty({__proto__:null,buffer:U,changeDefaultSpatialReferenceTolerance:N,clearDefaultSpatialReferenceTolerance:$,clip:b,contains:d,convexHull:_,crosses:u,cut:y,densify:f,difference:C,disjoint:D,distance:L,equals:M,extendedSpatialReferenceInfo:O,flipHorizontal:s,flipVertical:c,generalize:E,geodesicArea:H,geodesicBuffer:W,geodesicDensify:R,geodesicLength:k,intersect:i,intersectLinesToPoints:J,intersects:A,isSimple:v,nearestCoordinate:T,nearestVertex:w,nearestVertices:K,offset:g,overlaps:I,planarArea:Z,planarLength:z,relate:l,rotate:S,simplify:h,symmetricDifference:a,touches:j,union:p,within:B},Symbol.toStringTag,{value:"Module"}))},42214:(Q,G,e)=>{e.d(G,{B:()=>j});var o=e(57964),P=e(19799),O=e(26496),b=e(6785),y=e(19986),d=e(9203),u=e(60301),L=e(80543),M=e(79387),A=e(19677);function j(i){const p=i?.origins??[void 0];return(g,U)=>{const W=function B(i,p,g){if("resource"===i?.type)return function D(i,p,g){const U=(0,d.Oe)(p,g);return{type:String,read:(W,T,w)=>{const K=(0,A.r)(W,T,w);return U.type===String?K:"function"==typeof U.type?new U.type({url:K}):void 0},write:{writer(W,T,w,K){if(!K?.resources)return"string"==typeof W?void(T[w]=(0,A.t)(W,K)):void(T[w]=W.write({},K));const S=function C(i){return null==i?null:"string"==typeof i?i:i.url}(W),s=(0,A.t)(S,{...K,verifyItemRelativeUrls:K?.verifyItemRelativeUrls?{writtenUrls:K.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},A.M.NO),c=U.type!==String&&(!(0,O.l)(this)||K?.origin&&this.originIdOf(g)>(0,u.M9)(K.origin)),E={object:this,propertyName:g,value:W,targetUrl:s,dest:T,targetPropertyName:w,context:K,params:i};K?.portalItem&&s&&!(0,b.YP)(s)?c&&i?.contentAddressed?I(E):c?function l(i){const{context:p,targetUrl:g,params:U,value:W,dest:T,targetPropertyName:w}=i;if(!p.portalItem)return;const K=p.portalItem.resourceFromPath(g),S=_(W,g,p),s=(0,M.B)(S),c=(0,b.Ml)(K.path),E=U?.compress??!1;s===c?(p.resources&&h({...i,resource:K,content:S,compress:E,updates:p.resources.toUpdate}),T[w]=g):I(i)}(E):function v({context:i,targetUrl:p,dest:g,targetPropertyName:U}){i.portalItem&&i.resources&&(i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(p),compress:!1}),g[U]=p)}(E):K?.portalItem&&(null==s||null!=(0,A.i)(s)||(0,b.jc)(s)||c)?I(E):T[w]=s}}}}(i,p,g);switch(i?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:U,write:W}=A.a;return{read:U,write:W}}}}(i,g,U);for(const T of p){const w=(0,L.CJ)(g,T,U);for(const K in W)w[K]=W[K]}}}function I(i){const{targetUrl:p,params:g,value:U,context:W,dest:T,targetPropertyName:w}=i;if(!W.portalItem)return;const K=(0,A.p)(p),S=_(U,p,W);if(g?.contentAddressed&&"json"!==S.type)return void W.messages?.push(new o.Z("persistable:contentAddressingUnsupported",`Property "${w}" is trying to serializing a resource with content of type ${S.type} with content addressing. Content addressing is only supported for json resources.`,{content:S}));const s=g?.contentAddressed&&"json"===S.type?(0,P.F)(S.jsonString):K?.filename??(0,y.DO)(),c=(0,b.v_)(g?.prefix??K?.prefix,s),E=`${c}.${(0,M.B)(S)}`;if(g?.contentAddressed&&W.resources&&"json"===S.type){const Z=W.resources.toKeep.find(z=>z.resource.path===E)??W.resources.toAdd.find(z=>z.resource.path===E);if(Z)return void(T[w]=Z.resource.itemRelativeUrl)}const f=W.portalItem.resourceFromPath(E);(0,b.jc)(p)&&W.resources&&W.resources.pendingOperations.push((0,b.gi)(p).then(Z=>{f.path=`${c}.${(0,M.B)({type:"blob",blob:Z})}`,T[w]=f.itemRelativeUrl}).catch(()=>{}));const R=g?.compress??!1;W.resources&&h({...i,resource:f,content:S,compress:R,updates:W.resources.toAdd}),T[w]=f.itemRelativeUrl}function h({object:i,propertyName:p,updates:g,resource:U,content:W,compress:T}){g.push({resource:U,content:W,compress:T,finish:w=>{!function a(i,p,g){"string"==typeof i[p]?i[p]=g.url:i[p].url=g.url}(i,p,w)}})}function _(i,p,g){return"string"==typeof i?{type:"url",url:p}:{type:"json",jsonString:JSON.stringify(i.toJSON(g))}}},70751:(Q,G,e)=>{function o(L){return L=L||globalThis.location.hostname,u.some(M=>null!=L?.match(M))}function P(L,M){return L&&(M=M||globalThis.location.hostname)?null!=M.match(O)||null!=M.match(y)?L.replace("static.arcgis.com","staticdev.arcgis.com"):null!=M.match(b)||null!=M.match(d)?L.replace("static.arcgis.com","staticqa.arcgis.com"):L:L}e.d(G,{XO:()=>o,pJ:()=>P});const O=/^devext.arcgis.com$/,b=/^qaext.arcgis.com$/,y=/^[\w-]*\.mapsdevext.arcgis.com$/,d=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,O,b,/^jsapps.esri.com$/,y,d]},12933:(Q,G,e)=>{e.d(G,{E:()=>j,H:()=>A});var o=e(51006),P=e(93530),O=e(46033),b=e(43589);const d=(0,e(8554).c)(),u=(0,P.a)(),L=(0,P.a)(),M=(0,P.a)();function A(D,I,l){return(0,b.s)(d,I[0],I[1],1),(0,b.t)(d,d,(0,o.t)(u,l)),0===d[2]?(0,O.s)(D,d[0],d[1]):(0,O.s)(D,d[0]/d[2],d[1]/d[2])}function j(D,I,l){return B(L,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7]),B(M,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7]),(0,o.m)(D,(0,o.a)(L,L),M),0!==D[8]&&(D[0]/=D[8],D[1]/=D[8],D[2]/=D[8],D[3]/=D[8],D[4]/=D[8],D[5]/=D[8],D[6]/=D[8],D[7]/=D[8],D[8]/=D[8]),D}function B(D,I,l,v,h,_,C,a,i){(0,o.s)(D,I,v,_,l,h,C,1,1,1),(0,b.s)(d,a,i,1),(0,o.a)(u,D);const[p,g,U]=(0,b.t)(d,d,(0,o.t)(u,u));return(0,o.s)(u,p,0,0,0,g,0,0,0,U),(0,o.m)(D,u,D)}},82664:(Q,G,e)=>{e.d(G,{bU:()=>i,fC:()=>U,tp:()=>g,v7:()=>p});const d=new Float64Array(2),u=new Float64Array(2),B="0123456789bcdefghjkmnpqrstuvwxyz";function I(S){return B[S]}function l(S){return(S[0]+S[1])/2}function v(S,s,c){return S[0]=s,S[1]=c,S}function _(S,s){const c=s>l(S);return function h(S,s){const c=l(S),E=s,f=!s;S[0]=f*S[0]+E*c,S[1]=f*c+E*S[1]}(S,c),c}function i(S,s){let c=-90,E=90,f=-180,R=180;for(let Z=0;Z<s;Z++){const z=Math.ceil((Z+1)/2),H=Math.floor((Z+1)/2),k=1-Z%2,J=30-(3*z+2*H),N=30-(2*z+3*H),Y=2*k+3*(1-k),x=(7*k+3*(1-k)<<J&S.geohashX)>>J,F=(3*k+7*(1-k)<<N&S.geohashY)>>N;for(let V=3*k+2*(1-k)-1;V>=0;V--){const X=(f+R)/2,q=x&1<<V?1:0;f=(1-q)*f+q*X,R=(1-q)*X+q*R}for(let V=Y-1;V>=0;V--){const X=(c+E)/2,q=F&1<<V?1:0;c=(1-q)*c+q*X,E=(1-q)*X+q*E}}return[f,c,R,E]}function p(S,s,c,E){E%2&&(E+=1);let f=0,R=0,Z=-90,z=90,H=-180,k=180;for(let J=0;J<E/2;J++){for(let N=0;N<5;N++){const $=(H+k)/2,Y=c>$?1:0;f|=Y<<29-(N+5*J),H=(1-Y)*H+Y*$,k=(1-Y)*$+Y*k}for(let N=0;N<5;N++){const $=(Z+z)/2,Y=s>$?1:0;R|=Y<<29-(N+5*J),Z=(1-Y)*Z+Y*$,z=(1-Y)*$+Y*z}}S.geohashX=f,S.geohashY=R}function g(S,s,c,E,f){f%2&&(f+=1);let R=0,Z=0,z=-90,H=90,k=-180,J=180;for(let N=0;N<f/2;N++){for(let $=0;$<5;$++){const Y=(k+J)/2,m=E>Y?1:0;R|=m<<29-($+5*N),k=(1-m)*k+m*Y,J=(1-m)*Y+m*J}for(let $=0;$<5;$++){const Y=(z+H)/2,m=c>Y?1:0;Z|=m<<29-($+5*N),z=(1-m)*z+m*Y,H=(1-m)*Y+m*H}}S[2*s]=R,S[2*s+1]=Z}function U(S,s,c){let E="";const f=v(d,-90,90),R=v(u,-180,180);for(let Z=0;Z<c;Z++){let z=0;Z%2?(z|=_(f,S)<<4,z|=_(R,s)<<3,z|=_(f,S)<<2,z|=_(R,s)<<1,z|=_(f,S)<<0):(z|=_(R,s)<<4,z|=_(f,S)<<3,z|=_(R,s)<<2,z|=_(f,S)<<1,z|=_(R,s)<<0),E+=I(z)}return E}},65601:(Q,G,e)=>{e.r(G),e.d(G,{hydratedAdapter:()=>d});var o=e(26894),P=e(12628),O=e(85039),b=e(5391),y=e(64222);const d={convertToGEGeometry:function u(D,I){if(null==I)return null;let l="cache"in I?I.cache._geVersion:void 0;return null==l&&(l=D.convertJSONToGeometry(I),"cache"in I&&(I.cache._geVersion=l)),l},exportPoint:function L(D,I,l){const v=D.hasZ(I),h=D.hasM(I),_=new O.Z({x:D.getPointX(I),y:D.getPointY(I),spatialReference:l});return v&&(_.z=D.getPointZ(I)),h&&(_.m=D.getPointM(I)),_.cache._geVersion=I,_},exportPolygon:function M(D,I,l){const v=new b.Z({rings:D.exportPaths(I),hasZ:D.hasZ(I),hasM:D.hasM(I),spatialReference:l});return v.cache._geVersion=I,v},exportPolyline:function A(D,I,l){const v=new y.Z({paths:D.exportPaths(I),hasZ:D.hasZ(I),hasM:D.hasM(I),spatialReference:l});return v.cache._geVersion=I,v},exportMultipoint:function j(D,I,l){const v=new P.Z({hasZ:D.hasZ(I),hasM:D.hasM(I),points:D.exportPoints(I),spatialReference:l});return v.cache._geVersion=I,v},exportExtent:function B(D,I,l){const v=D.hasZ(I),h=D.hasM(I),_=new o.Z({xmin:D.getXMin(I),ymin:D.getYMin(I),xmax:D.getXMax(I),ymax:D.getYMax(I),spatialReference:l});if(v){const C=D.getZExtent(I);_.zmin=C.vmin,_.zmax=C.vmax}if(h){const C=D.getMExtent(I);_.mmin=C.vmin,_.mmax=C.vmax}return _.cache._geVersion=I,_}}},49574:(Q,G,e)=>{e.r(G),e.d(G,{buffer:()=>O.v,changeDefaultSpatialReferenceTolerance:()=>O.M,clearDefaultSpatialReferenceTolerance:()=>O.N,clip:()=>O.c,contains:()=>O.b,convexHull:()=>O.l,crosses:()=>O.d,cut:()=>O.a,densify:()=>O.F,difference:()=>O.m,disjoint:()=>O.j,distance:()=>O.f,equals:()=>O.h,extendedSpatialReferenceInfo:()=>O.e,flipHorizontal:()=>O.C,flipVertical:()=>O.D,generalize:()=>O.E,geodesicArea:()=>O.J,geodesicBuffer:()=>O.x,geodesicDensify:()=>O.G,geodesicLength:()=>O.K,intersect:()=>O.p,intersectLinesToPoints:()=>O.L,intersects:()=>O.i,isSimple:()=>O.k,nearestCoordinate:()=>O.y,nearestVertex:()=>O.z,nearestVertices:()=>O.A,offset:()=>O.q,overlaps:()=>O.o,planarArea:()=>O.H,planarLength:()=>O.I,relate:()=>O.r,rotate:()=>O.B,simplify:()=>O.s,symmetricDifference:()=>O.n,touches:()=>O.t,union:()=>O.u,within:()=>O.w}),e(89465),e(27545);var O=e(4254)},93404:(Q,G,e)=>{e.d(G,{JK:()=>y,QZ:()=>O,Rq:()=>b,bg:()=>P,mB:()=>d});var o=e(40271);function P(u,L=!1){return u<=o.c8?L?new Array(u).fill(0):new Array(u):new Float64Array(u)}function O(u){return((0,o.kJ)(u)?u.length:u.byteLength/8)<=o.c8?Array.from(u):new Float64Array(u)}function b(u,L,M){return Array.isArray(u)?u.slice(L,L+M):u.subarray(L,L+M)}function y(u,L){for(let M=0;M<L.length;++M)u[M]=L[M];return u}function d(u){return Array.isArray(u)?new Float64Array(u):u}},99279:(Q,G,e)=>{e.d(G,{Z:()=>D});var o=e(50484),P=e(25387),O=e(89317),b=e(80543),L=(e(1535),e(57678),e(14007),e(21070)),M=e(10141),A=e(8554),j=e(85039);let B=class extends((0,P.J)(O.wq)){constructor(I){super(I),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,A.c)()}getOriginPoint(I){const[l,v,h]=this.origin;return new j.Z({x:l,y:v,z:h,spatialReference:I})}setOriginFromPoint({x:I,y:l,z:v}){this.origin=(0,A.f)(I,l,v??0)}};(0,o._)([(0,L.J)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],B.prototype,"type",void 0),(0,o._)([(0,b.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"origin",void 0),B=(0,o._)([(0,M.j)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],B);const D=B},81255:(Q,G,e)=>{e.d(G,{Z:()=>D});var o=e(50484),P=e(25387),O=e(89317),b=e(80543),L=(e(1535),e(57678),e(14007),e(21070)),M=e(10141),A=e(8554),j=e(85039);let B=class extends((0,P.J)(O.wq)){constructor(I){super(I),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=(0,A.c)()}getOriginPoint(I){const[l,v,h]=this.origin;return new j.Z({x:l,y:v,z:h,spatialReference:I})}setOriginFromPoint({x:I,y:l,z:v}){this.origin=(0,A.f)(I,l,v??0)}};(0,o._)([(0,L.J)({local:"local"},{readOnly:!0})],B.prototype,"type",void 0),(0,o._)([(0,b.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"origin",void 0),B=(0,o._)([(0,M.j)("esri.geometry.support.MeshLocalVertexSpace")],B);const D=B},47689:(Q,G,e)=>{e.d(G,{CP:()=>d,JG:()=>I,LL:()=>u,NZ:()=>L,fV:()=>l,vj:()=>_,yT:()=>a,zE:()=>C});var o=e(15861),P=e(66476),O=e(57678),b=e(79412),y=e(11642);class d{constructor(p,g,U){this.assetName=p,this.assetMimeType=g,this.parts=U}equals(p){return this===p||this.assetName===p.assetName&&this.assetMimeType===p.assetMimeType&&(0,O.fS)(this.parts,p.parts,(g,U)=>g.equals(U))}isOnService(p){return this.parts.every(g=>g.isOnService(p))}makeHash(){let p="";for(const g of this.parts)p+=g.partHash;return p}toBlob(p){var g=this;return(0,o.Z)(function*(){const{parts:U}=g;if(1===U.length)return U[0].toBlob(p);const W=yield Promise.all(U.map(T=>T.toBlob(p)));return(0,b.k_)(p),new Blob(W)})()}}class u{constructor(p,g){this.partUrl=p,this.partHash=g}equals(p){return this===p||this.partUrl===p.partUrl&&this.partHash===p.partHash}isOnService(p){return this.partUrl.startsWith(`${p.path}/assets/`)}toBlob(p){var g=this;return(0,o.Z)(function*(){const{data:U}=yield(0,P.Z)(g.partUrl,{responseType:"blob"});return(0,b.k_)(p),U})()}}function L(i){return function B(i){return!!i&&(Array.isArray(i)?i.some(D):D(i))}(i?.source)}function M(i){return!!Array.isArray(i)&&i.every(p=>p instanceof d)}const A=/^(model\/gltf\+json)|(model\/gltf-binary)$/,j=/\.(gltf|glb)/i;function D(i){if(i instanceof File){const{type:p,name:g}=i;return A.test(p)||j.test(g)}return A.test(i.assetMimeType)||j.test(i.assetName)}function I(i,p){if(!i)return!1;const{source:g}=i;return function v(i,p){return Array.isArray(i)?i.length>0&&i.every(U=>h(U,p)):h(i,p)}(g,p)}function l(i,p){if(i===p)return!0;const{source:g}=i,{source:U}=p;if(g===U)return!0;if(M(g)&&M(U)){if(g.length!==U.length)return!1;const W=(K,S)=>K.assetName<S.assetName?-1:K.assetName>S.assetName?1:0,T=[...g].sort(W),w=[...U].sort(W);for(let K=0;K<T.length;++K)if(!T[K].equals(w[K]))return!1;return!0}return!1}function h(i,p){return i instanceof d&&i.isOnService(p)}function _(i,p){return i instanceof File?(0,y.dm)(i,p):(0,y.S0)(i.assetMimeType,p)??(0,y.Ow)(i.assetName,p)}function C(i){return Array.isArray(i)?i:[i]}function a(i){return!!i.original}},45049:(Q,G,e)=>{e.d(G,{Z:()=>I});var o=e(50484),P=e(80543),d=(e(1535),e(57678),e(14007),e(10141)),u=e(18714),L=e(95060),M=e(19855),A=e(29717),j=e(72262),B=e(86516);let D=class extends((0,M.h)((0,A.M)(L.Z))){constructor(l){super(l),this.elevationInfo=null,this.graphics=new j.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(l){return this.graphics.add(l),this}addMany(l){return this.graphics.addMany(l),this}removeAll(){return this.graphics.removeAll(),this}remove(l){this.graphics.remove(l)}removeMany(l){this.graphics.removeMany(l)}on(l,v){return super.on(l,v)}graphicChanged(l){this.emit("graphic-update",l)}};(0,o._)([(0,P.Cb)({type:B.Z})],D.prototype,"elevationInfo",void 0),(0,o._)([(0,P.Cb)((0,u.z)(j.J,"graphics"))],D.prototype,"graphics",void 0),(0,o._)([(0,P.Cb)({type:["show","hide"]})],D.prototype,"listMode",void 0),(0,o._)([(0,P.Cb)()],D.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,P.Cb)({readOnly:!0})],D.prototype,"type",void 0),(0,o._)([(0,P.Cb)({constructOnly:!0})],D.prototype,"internal",void 0),D=(0,o._)([(0,d.j)("esri.layers.GraphicsLayer")],D);const I=D},54556:(Q,G,e)=>{e.r(G),e.d(G,{default:()=>c});var S,o=e(15861),P=e(50484),b=(e(2189),e(66476)),y=e(57964),d=e(3233),u=e(72578),L=e(6785),M=e(80543),D=(e(1535),e(57678),e(14007),e(62185)),I=e(10141),l=e(7547),v=e(95060),h=e(19855),_=e(80099),C=e(70509),a=e(25836),i=e(29717),p=e(53715),g=e(8321),U=e(30220),W=e(1340),T=e(26894),w=e(43814),K=e(85039);let s=S=class extends((0,h.h)((0,a.Q)((0,i.M)((0,_.q)((0,C.I)((0,d.R)(v.Z))))))){constructor(...E){super(...E),this.copyright="",this.fullExtent=new T.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,w.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=w.Z.WebMercator,this.subDomains=null,this.tileInfo=new U.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new K.Z({x:-20037508.342787,y:20037508.342787,spatialReference:w.Z.WebMercator}),spatialReference:w.Z.WebMercator,lods:[new g.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new g.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new g.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new g.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new g.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new g.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new g.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new g.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new g.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new g.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new g.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new g.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new g.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new g.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new g.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new g.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new g.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new g.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new g.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new g.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new g.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new g.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new g.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new g.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(E,f){return"string"==typeof E?{urlTemplate:E,...f}:E}load(E){const f=this.loadFromPortal({supportedTypes:["WMTS"]},E).then(()=>{let R="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const Z=new L.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&Z.authority?.includes("{subDomain}")&&(R="is missing 'subDomains' property")}else R="spatialReference must match tileInfo.spatialReference";else R="is missing the required 'urlTemplate' property value";if(R)throw new y.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${R}`)});return this.addResolvingPromise(f),Promise.resolve(this)}get levelValues(){const E=[];if(!this.tileInfo)return null;for(const f of this.tileInfo.lods)E[f.level]=f.levelValue||f.level;return E}readSpatialReference(E,f){return E||w.Z.fromJSON(f.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const E=[],{urlTemplate:f,subDomains:R}=this,Z=new L.R9(f),z=Z.scheme?Z.scheme+"://":"//",H=z+Z.authority+"/",k=Z.authority;if(k?.includes("{subDomain}")){if(R&&R.length>0&&k.split(".").length>1)for(const J of R)E.push(z+k.replaceAll(/\{subDomain\}/gi,J)+"/")}else E.push(H);return E.map(L.xs)}get urlPath(){if(!this.urlTemplate)return null;const E=this.urlTemplate,f=new L.R9(E);return E.substring(((f.scheme?f.scheme+"://":"//")+f.authority+"/").length)}readUrlTemplate(E,f){return E||f.templateUrl}writeUrlTemplate(E,f){(0,L.oC)(E)&&(E="https:"+E),E&&(E=E.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),E=(0,L.Fv)(E)),f.templateUrl=E}fetchTile(E,f,R,Z={}){const{signal:z}=Z,H=this.getTileUrl(E,f,R),k={responseType:"image",signal:z,query:{...this.refreshParameters}};return(0,b.Z)(H,k).then(J=>J.data)}fetchImageBitmapTile(E,f,R,Z={}){var z=this;return(0,o.Z)(function*(){const{signal:H}=Z;if(z.fetchTile!==S.prototype.fetchTile){const $=yield z.fetchTile(E,f,R,Z);return(0,p.V)($,E,f,R,H)}const k=z.getTileUrl(E,f,R),J={responseType:"blob",signal:H,query:{...z.refreshParameters}},{data:N}=yield(0,b.Z)(k,J);return(0,p.V)(N,E,f,R,H)})()}getTileUrl(E,f,R){const{levelValues:Z,tileServers:z,urlPath:H}=this;if(!Z||!z||!H)return"";const k=Z[E];return z[f%z.length]+(0,u.gx)(H,{level:k,z:k,col:R,x:R,row:f,y:f})}};(0,P._)([(0,M.Cb)({type:String,value:"",json:{write:!0}})],s.prototype,"copyright",void 0),(0,P._)([(0,M.Cb)({type:T.Z,json:{write:!0},nonNullable:!0})],s.prototype,"fullExtent",void 0),(0,P._)([(0,M.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"legendEnabled",void 0),(0,P._)([(0,M.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,P._)([(0,M.Cb)({json:{read:!0,write:!0}})],s.prototype,"blendMode",void 0),(0,P._)([(0,M.Cb)()],s.prototype,"levelValues",null),(0,P._)([(0,M.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],s.prototype,"isReference",void 0),(0,P._)([(0,M.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],s.prototype,"operationalLayerType",void 0),(0,P._)([(0,M.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"popupEnabled",void 0),(0,P._)([(0,M.Cb)({type:w.Z})],s.prototype,"spatialReference",void 0),(0,P._)([(0,D.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],s.prototype,"readSpatialReference",null),(0,P._)([(0,M.Cb)({type:[String],json:{write:!0}})],s.prototype,"subDomains",void 0),(0,P._)([(0,M.Cb)({type:U.Z,json:{write:!0}})],s.prototype,"tileInfo",void 0),(0,P._)([(0,M.Cb)({readOnly:!0})],s.prototype,"tileServers",null),(0,P._)([(0,M.Cb)({json:{read:!1}})],s.prototype,"type",void 0),(0,P._)([(0,M.Cb)()],s.prototype,"urlPath",null),(0,P._)([(0,M.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],s.prototype,"urlTemplate",void 0),(0,P._)([(0,D.r)("urlTemplate",["urlTemplate","templateUrl"])],s.prototype,"readUrlTemplate",null),(0,P._)([(0,l.c)("urlTemplate",{templateUrl:{type:String}})],s.prototype,"writeUrlTemplate",null),(0,P._)([(0,M.Cb)({type:W.B,json:{write:!0}})],s.prototype,"wmtsInfo",void 0),s=S=(0,P._)([(0,I.j)("esri.layers.WebTileLayer")],s);const c=s},52334:(Q,G,e)=>{e.r(G),e.d(G,{applyEdits:()=>a,checkEditingCapabilities:()=>H,isFeatureIdentifierArrayWithGlobalId:()=>C,isFeatureIdentifierArrayWithObjectId:()=>h,isFeatureIdentifierWithGlobalId:()=>_,isFeatureIdentifierWithObjectId:()=>v,normalizeCollections:()=>Z,normalizeEdits:()=>z,normalizeGeometries:()=>f,shallowCloneFeature:()=>k,uploadAssets:()=>Y});var o=e(15861),P=e(35458),O=e(83944),b=e(57964),y=e(34222),d=e(4703),u=e(79412),L=e(6785),M=e(19986),A=e(93566),j=e(92344),B=e(85295),D=e(11642),I=e(85971);function l(m){return null!=m?.applyEdits}function v(m){return"object"==typeof m&&null!=m&&"objectId"in m&&!!m.objectId}function h(m){return m.every(v)}function _(m){return"object"==typeof m&&null!=m&&"globalId"in m&&!!m.globalId}function C(m){return m.every(_)}function a(m,x,F){return i.apply(this,arguments)}function i(){return i=(0,o.Z)(function*(m,x,F,V={}){let X;const se=V.gdbVersion??("gdbVersion"in m?m.gdbVersion:null);(0,j.lQ)(m)&&m.url?X=(0,j.jF)(m.url,m.layerId,se,"original-and-current-features"===V.returnServiceEditsOption):(X=(0,u.hh)(),X.promise.then(te=>{(te.addedFeatures.length||te.updatedFeatures.length||te.deletedFeatures.length||te.addedAttachments.length||te.updatedAttachments.length||te.deletedAttachments.length)&&m.emit("edits",te)}),m.emit("apply-edits",{result:X.promise}));try{const{results:ee,edits:te}=yield function p(m,x,F,V){return g.apply(this,arguments)}(m,x,F,V),ne=re=>re.filter(ae=>!ae.error).map(y.d9),oe={edits:te,addedFeatures:ne(ee.addFeatureResults),updatedFeatures:ne(ee.updateFeatureResults),deletedFeatures:ne(ee.deleteFeatureResults),addedAttachments:ne(ee.addAttachmentResults),updatedAttachments:ne(ee.updateAttachmentResults),deletedAttachments:ne(ee.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:ee.editMoment?new Date(ee.editMoment):null,globalIdToObjectId:V.globalIdToObjectId};return ee.editedFeatureResults?.length&&(oe.editedFeatures=ee.editedFeatureResults),X.resolve(oe),ee}catch(ee){throw X.reject(ee),ee}}),i.apply(this,arguments)}function g(){return g=(0,o.Z)(function*(m,x,F,V){if(yield m.load(),!l(x))throw new b.Z(`${m.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:m});if(!(0,I.ln)(m))throw new b.Z(`${m.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:m});const{edits:X,options:q}=yield function U(m,x,F){return W.apply(this,arguments)}(m,F,V);return X.addFeatures?.length||X.updateFeatures?.length||X.deleteFeatures?.length||X.addAttachments?.length||X.updateAttachments?.length||X.deleteAttachments?.length?{edits:X,results:yield x.applyEdits(X,q)}:{edits:X,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}),g.apply(this,arguments)}function W(){return W=(0,o.Z)(function*(m,x,F){const V=(0,I.S1)(m),se=null!=m.infoFor3D;if(H(x,V,F,!(!x||!(x.addFeatures||x.updateFeatures||x.deleteFeatures)),!(!x||!(x.addAttachments||x.updateAttachments||x.deleteAttachments)),`${m.type}-layer`),!V.data.isVersioned&&F?.gdbVersion)throw new b.Z(`${m.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!V.editing.supportsRollbackOnFailure&&F?.rollbackOnFailureEnabled)throw new b.Z(`${m.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const ee={...F};if(null!=ee.rollbackOnFailureEnabled||V.editing.supportsRollbackOnFailure||(ee.rollbackOnFailureEnabled=!0),ee.rollbackOnFailureEnabled||"original-and-current-features"!==ee.returnServiceEditsOption||(!1===ee.rollbackOnFailureEnabled&&d.Z.getLogger("esri.layers.graphics.editingSupport").warn(`${m.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwrritten and set to true."),ee.rollbackOnFailureEnabled=!0),!V.editing.supportsReturnServiceEditsInSourceSpatialReference&&ee.returnServiceEditsInSourceSR)throw new b.Z(`${m.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(ee.returnServiceEditsInSourceSR&&"original-and-current-features"!==ee.returnServiceEditsOption)throw new b.Z(`${m.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const te=z(x,V,`${m.type}-layer`),ne=F?.globalIdUsed||se,oe=m.fields.filter(re=>"big-integer"===re.type||"oid"===re.type&&(re.length||0)>=8);if(ne){const{globalIdField:re}=m;if(null==re)throw new b.Z(`${m.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");te.addFeatures.forEach(ae=>function E(m,x){const{attributes:F}=m;null==F[x]&&(F[x]=(0,M.zS)())}(ae,re))}return te.addFeatures.forEach(re=>function K(m,x,F,V){T(m,x,F,V),w(m,x)}(re,m,ne,oe)),te.updateFeatures.forEach(re=>function s(m,x,F,V){T(m,x,F,V),w(m,x);const X=(0,I.S1)(x);if("geometry"in m&&null!=m.geometry&&!X?.editing.supportsGeometryUpdate)throw new b.Z(`${x.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}(re,m,ne,oe)),te.deleteFeatures.forEach(re=>function S(m,x,F,V){T(m,x,F,V)}(re,m,ne,oe)),te.addAttachments.forEach(re=>c(re,m)),te.updateAttachments.forEach(re=>c(re,m)),se&&(yield function J(m,x){return N.apply(this,arguments)}(te,m)),{edits:yield f(te),options:ee}}),W.apply(this,arguments)}function T(m,x,F,V){if(F){if("attributes"in m&&!m.attributes[x.globalIdField])throw new b.Z(`${x.type}-layer:invalid-parameter`,`Feature should have '${x.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in m)&&!m.globalId)throw new b.Z(`${x.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(V.length&&"attributes"in m)for(const X of V){const q=m.attributes[X.name];if(void 0!==q&&!(0,B.d2)(X,q))throw new b.Z(`${x.type}-layer:invalid-parameter`,`Big-integer field '${X.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:m})}if("geometry"in m&&null!=m.geometry){if(m.geometry.hasZ&&!1===x.capabilities?.data.supportsZ)throw new b.Z(`${x.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(m.geometry.hasM&&!1===x.capabilities?.data.supportsM)throw new b.Z(`${x.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function w(m,x){if("geometry"in m&&"mesh"===m.geometry?.type&&null!=x.infoFor3D){const{geometry:F}=m;if(F.vertexSpace.isGeoreferenced)throw new b.Z(`${x.type}-layer:georeferenced-mesh-unsupported`,"Uploading georeferenced meshes to a layer is not supported.")}}function c(m,x){const{feature:F,attachment:V}=m;if(!F||"attributes"in F&&!F.attributes[x.globalIdField])throw new b.Z(`${x.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in F)&&!F.globalId)throw new b.Z(`${x.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!V.globalId)throw new b.Z(`${x.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!V.data&&!V.uploadId)throw new b.Z(`${x.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(V.data instanceof File&&V.data.name||V.name))throw new b.Z(`${x.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!x.capabilities?.editing.supportsUploadWithItemId&&V.uploadId)throw new b.Z(`${x.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof V.data){const X=(0,L.sJ)(V.data);if(X&&!X.isBase64)throw new b.Z(`${x.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function f(m){return R.apply(this,arguments)}function R(){return(R=(0,o.Z)(function*(m){const x=m.addFeatures??[],F=m.updateFeatures??[],V=x.concat(F).map(ee=>ee.geometry),X=yield(0,A.aX)(V),q=x.length,se=F.length;return X.slice(0,q).forEach((ee,te)=>x[te].geometry=ee),X.slice(q,q+se).forEach((ee,te)=>F[te].geometry=ee),m})).apply(this,arguments)}function Z(m){return{addFeatures:Array.from(m?.addFeatures??[]),updateFeatures:Array.from(m?.updateFeatures??[]),deleteFeatures:m&&O.Z.isCollection(m.deleteFeatures)?m.deleteFeatures.toArray():m.deleteFeatures||[],addAttachments:m.addAttachments||[],updateAttachments:m.updateAttachments||[],deleteAttachments:m.deleteAttachments||[]}}function z(m,x,F){const V=Z(m);if(V.addFeatures?.length&&!x.operations.supportsAdd)throw new b.Z(`${F}:unsupported-operation`,"Layer does not support adding features.");if(V.updateFeatures?.length&&!x.operations.supportsUpdate)throw new b.Z(`${F}:unsupported-operation`,"Layer does not support updating features.");if(V.deleteFeatures?.length&&!x.operations.supportsDelete)throw new b.Z(`${F}:unsupported-operation`,"Layer does not support deleting features.");return V.addFeatures=V.addFeatures.map(k),V.updateFeatures=V.updateFeatures.map(k),V.addAssetFeatures=[],V}function H(m,x,F,V,X,q){if(!m||!V&&!X)throw new b.Z(`${q}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!x.editing.supportsGlobalId&&F?.globalIdUsed)throw new b.Z(`${q}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!x.editing.supportsGlobalId&&X)throw new b.Z(`${q}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!F?.globalIdUsed&&X)throw new b.Z(`${q}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function k(m){const x=new P.Z;return m.attributes||(m.attributes={}),x.geometry=m.geometry,x.attributes=m.attributes,x}function N(){return(N=(0,o.Z)(function*(m,x){if(null==x.infoFor3D)return;const{infoFor3D:F}=x,V=(0,D.S0)("model/gltf-binary",F.supportedFormats)??(0,D.Ow)("glb",F.supportedFormats);if(!V||!F.editFormats.includes(V))throw new b.Z(`${x.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");m.addAssetFeatures??=[];const{addAssetFeatures:X}=m;for(const q of m.addFeatures??[])$(q)&&X.push(q);for(const q of m.updateFeatures??[])$(q)&&X.push(q)})).apply(this,arguments)}function $(m){return"mesh"===m?.geometry?.type}function Y(m,x,F,V){if(!l(x))throw new b.Z(`${m.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:m});if(!x.uploadAssets)throw new b.Z(`${m.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:m});return x.uploadAssets(F,V)}},64761:(Q,G,e)=>{e.d(G,{S:()=>P,X:()=>o});const o=1;function P(O,b){let y=0;for(const d of b){const u=d.attributes?.[O];"number"==typeof u&&isFinite(u)&&(y=Math.max(y,u))}return y}},80751:(Q,G,e)=>{e.r(G),e.d(G,{createConnection:()=>S});var o=e(15861),P=e(50484),b=(e(2189),e(66476)),y=e(57964),d=e(4703),u=e(79412),L=e(6785),B=(e(1535),e(57678),e(14007),e(10141)),D=e(80543),I=e(53456),l=e(88278);let v=class extends l.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new y.Z("stream-connection",this.errorString):null}onFeature(s){this.emit("data-received",s)}onMessage(s){this.emit("message-received",s)}};(0,P._)([(0,D.Cb)({readOnly:!0})],v.prototype,"connectionError",null),v=(0,P._)([(0,B.j)("esri.layers.support.StreamConnection")],v);const h=v;var _,s;(s=_||(_={}))[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED";let C=class extends h{constructor(s){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:c,spatialReference:E,sourceSpatialReference:f}=s;this._config=s,this._featureZScaler=(0,I.k)(c,f,E),this._open()}_open(){var s=this;return(0,o.Z)(function*(){yield s._tryCreateWebSocket(),s.destroyed||(yield s._handshake())})()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case _.CONNECTING:case _.OPEN:return"connected";case _.CLOSING:case _.CLOSED:return"disconnected"}}sendMessageToSocket(s){null!=this._websocket?this._websocket.send(JSON.stringify(s)):this._outstandingMessages.push(s)}sendMessageToClient(s){this._onMessage(s)}updateCustomParameters(s){this._config.customParameters=s,null!=this._websocket&&this._websocket.close()}_tryCreateWebSocket(s=this._config.source.path,c=1e3,E=0){var f=this;return(0,o.Z)(function*(){try{if(f.destroyed)return;const R=(0,L.fl)(s,f._config.customParameters??{});f._websocket=yield f._createWebSocket(R),f.notifyChange("connectionStatus")}catch(R){const Z=c/1e3;return f._config.maxReconnectionAttempts&&E>=f._config.maxReconnectionAttempts?(d.Z.getLogger(f).error(new y.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void f.destroy()):(d.Z.getLogger(f).error(new y.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${Z}s`,R)),yield(0,u.e4)(c),f._tryCreateWebSocket(s,Math.min(1.5*c,1e3*f._config.maxReconnectionInterval),E+1))}})()}_setWebSocketJSONParseHandler(s){s.onmessage=c=>{try{const E=JSON.parse(c.data);this._onMessage(E)}catch(E){return void d.Z.getLogger(this).error(new y.Z("websocket-connection","Failed to parse message, invalid JSON",{error:E}))}}}_createWebSocket(s){return new Promise((c,E)=>{const f=new WebSocket(s);f.onopen=()=>{if(f.onopen=null,this.destroyed)return f.onclose=null,void f.close();f.onclose=R=>this._onClose(R),f.onerror=R=>this._onError(R),this._setWebSocketJSONParseHandler(f),c(f)},f.onclose=R=>{f.onopen=f.onclose=null,E(R)}})}_handshake(s=1e4){var c=this;return(0,o.Z)(function*(){const E=c._websocket;if(null==E)return;const f=(0,u.hh)(),R=E.onmessage,{filter:Z,outFields:z,spatialReference:H}=c._config;return f.timeout(s),E.onmessage=k=>{let J=null;try{J=JSON.parse(k.data)}catch{}J&&"object"==typeof J||(d.Z.getLogger(c).error(new y.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",k.data)),f.reject(),c.destroy()),J.spatialReference?.wkid!==H?.wkid&&(d.Z.getLogger(c).error(new y.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${H.wkid}`,k.data)),f.reject(),c.destroy()),"json"!==J.format&&(d.Z.getLogger(c).error(new y.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",k.data)),f.reject(),c.destroy()),Z&&J.filter!==Z&&d.Z.getLogger(c).error(new y.Z("websocket-connection","Tried to set filter, but server doesn't support it")),z&&J.outFields!==z&&d.Z.getLogger(c).error(new y.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),E.onmessage=R;for(const N of c._outstandingMessages)E.send(JSON.stringify(N));c._outstandingMessages=[],f.resolve()},E.send(JSON.stringify({filter:Z,outFields:z,format:"json",spatialReference:{wkid:H.wkid}})),f.promise})()}_onMessage(s){if(this.onMessage(s),"type"in s)switch(s.type){case"features":case"featureResult":for(const c of s.features)null!=this._featureZScaler&&this._featureZScaler(c.geometry),this.onFeature(c)}}_onError(s){const c="Encountered an error over WebSocket connection";this._set("errorString",c),d.Z.getLogger(this).error("websocket-connection",c)}_onClose(s){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==s.code&&d.Z.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${s.code}`),this.destroyed||this._open()}};(0,P._)([(0,D.Cb)()],C.prototype,"connectionStatus",null),(0,P._)([(0,D.Cb)()],C.prototype,"errorString",void 0),C=(0,P._)([(0,B.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],C);var a=e(82784),i=e(91866),p=e(40637),g=e(43814);const W={maxQueryDepth:5,maxRecordCountFactor:3};let T=class extends C{constructor(s){super({...W,...s}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var s=this;return(0,o.Z)(function*(){const c=yield s._fetchServiceDefinition(s._config.source);c.timeInfo.trackIdField||d.Z.getLogger(s).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const E=s._fetchWebSocketUrl(c.streamUrls,s._config.spatialReference);s._buddyServicesQuery||(s._buddyServicesQuery=s._queryBuddyServices()),yield s._buddyServicesQuery,yield s._tryCreateWebSocket(E);const{filter:f,outFields:R}=s._config;s.destroyed||s._setFilter(f,R)})()}_onMessage(s){if("attributes"in s){let c;try{c=this._enrich(s),null!=this._featureZScaler&&this._featureZScaler(c.geometry)}catch(E){return void d.Z.getLogger(this).error(new y.Z("geoevent-connection","Failed to parse message",E))}this.onFeature(c)}else this.onMessage(s)}_fetchServiceDefinition(s){var c=this;return(0,o.Z)(function*(){const E={f:"json",...c._config.customParameters},f=(0,b.Z)(s.path,{query:E,responseType:"json"}),R=(yield f).data;return c._serviceDefinition=R,R})()}_fetchWebSocketUrl(s,c){const E=s[0],{urls:f,token:R}=E,Z=this._inferWebSocketBaseUrl(f);return(0,L.fl)(`${Z}/subscribe`,{outSR:""+c.wkid,token:R})}_inferWebSocketBaseUrl(s){if(1===s.length)return s[0];for(const c of s)if(c.includes("wss"))return c;return d.Z.getLogger(this).error(new y.Z("geoevent-connection","Unable to infer WebSocket url",s)),null}_setFilter(s,c){var E=this;return(0,o.Z)(function*(){const f=E._websocket;if(null==f||null==s&&null==c)return;const R=JSON.stringify({filter:E._serializeFilter(s,c)});let Z=!1;const z=(0,u.hh)();return f.onmessage=J=>{const N=JSON.parse(J.data);N.filter&&(N.error&&(d.Z.getLogger(E).error(new y.Z("geoevent-connection","Failed to set service filter",N.error)),E._set("errorString",`Could not set service filter - ${N.error}`),z.reject(N.error)),E._setWebSocketJSONParseHandler(f),Z=!0,z.resolve())},f.send(R),setTimeout(()=>{Z||(E.destroyed||E._websocket!==f||d.Z.getLogger(E).error(new y.Z("geoevent-connection","Server timed out when setting filter")),z.reject())},1e4),z.promise})()}_serializeFilter(s,c){const E={};if(null==s&&null==c)return E;if(s?.geometry)try{const f=(0,p.im)(s.geometry);if("extent"!==f.type)throw new y.Z(`Expected extent but found type ${f.type}`);E.geometry=JSON.stringify(f.shiftCentralMeridian())}catch(f){d.Z.getLogger(this).error(new y.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",f))}return s?.where&&"1 = 1"!==s.where&&"1=1"!==s.where&&(E.where=s.where),null!=c&&(E.outFields=c.join(",")),E}_enrich(s){if(!this._relatedFeatures)return s;const f=this._relatedFeatures.get(s.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!f)return d.Z.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",s),s;const{attributes:R,geometry:Z}=f;for(const z in R)s.attributes[z]=R[z];return Z&&(s.geometry=Z),s.geometry||s.centroid||d.Z.getLogger(this).error(new y.Z("geoevent-connection","Found malformed feature - no geometry found",s)),s}_queryBuddyServices(){var s=this;return(0,o.Z)(function*(){try{const{relatedFeatures:c,keepLatestArchive:E}=s._serviceDefinition,f=s._queryRelatedFeatures(c),R=s._queryArchive(E);yield f;const Z=yield R;if(!Z)return;for(const z of Z.features)s.onFeature(s._enrich(z))}catch(c){d.Z.getLogger(s).error(new y.Z("geoevent-connection","Encountered an error when querying buddy services",{error:c}))}})()}_queryRelatedFeatures(s){var c=this;return(0,o.Z)(function*(){if(!s)return;const E=yield c._queryBuddy(s.featuresUrl);c._addRelatedFeatures(E)})()}_queryArchive(s){var c=this;return(0,o.Z)(function*(){if(s)return c._queryBuddy(s.featuresUrl)})()}_queryBuddy(s){var c=this;return(0,o.Z)(function*(){const E=new((yield Promise.resolve().then(e.bind(e,90373))).default)({url:s}),{capabilities:f}=yield E.load(),R=f.query.supportsMaxRecordCountFactor,Z=f.query.supportsPagination,z=f.query.supportsCentroid,H=c._config.maxRecordCountFactor,k=E.capabilities.query.maxRecordCount,J=R?k*H:k,N=new i.Z;if(N.outFields=c._config.outFields??["*"],N.where=c._config.filter?.where??"1=1",N.returnGeometry=!0,N.returnExceededLimitFeatures=!0,N.outSpatialReference=g.Z.fromJSON(c._config.spatialReference),z&&(N.returnCentroid=!0),R&&(N.maxRecordCountFactor=H),Z)return N.num=J,E.destroy(),c._queryPages(s,N);const $=yield(0,a.JT)(s,N,c._config.sourceSpatialReference);return E.destroy(),$.data})()}_queryPages(s,c,E=[],f=0){var R=this;return(0,o.Z)(function*(){c.start=null!=c.num?f*c.num:null;const{data:Z}=yield(0,a.JT)(s,c,R._config.sourceSpatialReference);return Z.exceededTransferLimit&&f<(R._config.maxQueryDepth??0)?(Z.features.forEach(z=>E.push(z)),R._queryPages(s,c,E,f+1)):(E.forEach(z=>Z.features.push(z)),Z)})()}_addRelatedFeatures(s){const c=new Map,E=s.features,f=this._serviceDefinition.relatedFeatures.joinField;for(const R of E)c.set(R.attributes[f],R);this._relatedFeatures=c}};T=(0,P._)([(0,B.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],T);const w=T;let K=class extends h{constructor(s){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:c,spatialReference:E,sourceSpatialReference:f}=s;this._featureZScaler=(0,I.k)(c,f,E)}updateCustomParameters(s){}sendMessageToSocket(s){}sendMessageToClient(s){if("type"in s)switch(s.type){case"features":case"featureResult":for(const c of s.features)null!=this._featureZScaler&&this._featureZScaler(c.geometry),this.onFeature(c)}this.onMessage(s)}};function S(s,c,E,f,R,Z,z,H){const k={source:s,sourceSpatialReference:c,spatialReference:E,geometryType:f,filter:R,maxReconnectionAttempts:Z,maxReconnectionInterval:z,customParameters:H};return s?s.path.startsWith("wss://")||s.path.startsWith("ws://")?new C(k):new w(k):new K(k)}(0,P._)([(0,D.Cb)()],K.prototype,"connectionStatus",void 0),(0,P._)([(0,D.Cb)()],K.prototype,"errorString",void 0),K=(0,P._)([(0,B.j)("esri.layers.support.ClientSideConnection")],K)},42726:(Q,G,e)=>{e.d(G,{O0:()=>j,av:()=>u,b:()=>_,d1:()=>M,og:()=>l});var o=e(15861),P=e(51310),O=e(33721),b=e(85295);class y{constructor(){this.code=null,this.description=null}}class d{constructor(i){this.error=new y,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=i}}function u(a){return new d(a)}class L{constructor(i){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=i}}function M(a){return new L(a)}const A=new Set;function j(a,i,p,g=!1){A.clear();for(const U in p){const W=a.get(U);if(!W)continue;const T=D(W,p[U]);if(A.add(W.name),W&&(g||W.editable)){const w=(0,b.Qc)(W,T);if(w)return u((0,b.vP)(w,W,T));i[W.name]=T}}for(const U of a?.requiredFields??[])if(!A.has(U.name))return u(`missing required field "${U.name}"`);return null}function D(a,i){let p=i;return(0,b.H7)(a)&&"string"==typeof i?p=parseFloat(i):(0,b.qN)(a)&&null!=i&&"string"!=typeof i?p=String(i):(0,b.y2)(a)&&"string"==typeof i&&(p=(0,P.sG)(i)),(0,b.Pz)(p)}let I;function l(a,i){if(!a||!(0,O.JY)(i))return a;if("rings"in a||"paths"in a){if(null==I)throw new TypeError("geometry engine not loaded");return I.simplify(i,a)}return a}function h(){return(h=(0,o.Z)(function*(){return null==I&&(I=yield Promise.all([e.e(9465),e.e(8592)]).then(e.bind(e,49574))),I})).apply(this,arguments)}function _(a,i){return C.apply(this,arguments)}function C(){return C=(0,o.Z)(function*(a,i){!(0,O.JY)(a)||"esriGeometryPolygon"!==i&&"esriGeometryPolyline"!==i||(yield function v(){return h.apply(this,arguments)}())}),C.apply(this,arguments)}},13597:(Q,G,e)=>{e.d(G,{Z:()=>D});var o=e(50484),O=(e(2189),e(80543)),u=(e(1535),e(57678),e(14007),e(62185)),L=e(10141),M=e(30220),A=e(58296),j=e(27627),B=e(43814);const D=I=>{let l=class extends I{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(v,h){return null!=h.minLOD&&null!=h.maxLOD?v:0}readMaxScale(v,h){return null!=h.minLOD&&null!=h.maxLOD?v:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(v,h,_){const C=h.capabilities?.includes("Tilemap");let{minLOD:a,maxLOD:i,minScale:p,maxScale:g}=h;if(null==a&&null==i&&0!==p&&0!==g){const U=W=>Math.round(1e4*W)/1e4;p=U(p||h.tileInfo.lods[0].scale),g=U(g||h.tileInfo.lods[h.tileInfo.lods.length-1].scale);for(const W of h.tileInfo.lods){const T=U(W.scale);a=T>=p?W.level:a,i=T>=g?W.level:i}}if(C)return new j.y({layer:this,minLOD:a,maxLOD:i});if(h.tileInfo){const U=new M.Z;return U.read(h.tileInfo,_),new A.Z(U,a,i)}return null}};return(0,o._)([(0,O.Cb)({json:{read:{source:"copyrightText"}}})],l.prototype,"copyright",void 0),(0,o._)([(0,O.Cb)()],l.prototype,"minScale",void 0),(0,o._)([(0,u.r)("service","minScale")],l.prototype,"readMinScale",null),(0,o._)([(0,O.Cb)()],l.prototype,"maxScale",void 0),(0,o._)([(0,u.r)("service","maxScale")],l.prototype,"readMaxScale",null),(0,o._)([(0,O.Cb)({type:B.Z})],l.prototype,"spatialReference",void 0),(0,o._)([(0,O.Cb)({readOnly:!0})],l.prototype,"supportsBlankTile",null),(0,o._)([(0,O.Cb)({type:M.Z})],l.prototype,"tileInfo",void 0),(0,o._)([(0,O.Cb)()],l.prototype,"tilemapCache",void 0),(0,o._)([(0,u.r)("service","tilemapCache",["capabilities","tileInfo"])],l.prototype,"readTilemapCache",null),(0,o._)([(0,O.Cb)()],l.prototype,"version",void 0),l=(0,o._)([(0,L.j)("esri.layers.mixins.ArcGISCachedService")],l),l}},74623:(Q,G,e)=>{e.d(G,{A:()=>P});const o=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function P(O){return null!=O&&o.some(([b,y])=>O>=b&&O<=y)}},85155:(Q,G,e)=>{e.d(G,{DC:()=>M,Nw:()=>h,UY:()=>C,Ym:()=>I,a1:()=>p,jX:()=>a,po:()=>U,uT:()=>l,xG:()=>B});var o=e(15861),P=e(57964),O=e(60084),b=e(61018),y=e(27835),d=e(453),u=e(50318),L=e(65820);function M(T,w,K){const S=K(T);if(!S.isValid)throw new P.Z(`${w}:invalid-parameters`,S.errorMessage,{layer:T})}function A(T){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(function*(T){const{layer:w,errorNamePrefix:K,validateLayer:S}=T;yield w.load(),M(w,K,S)})).apply(this,arguments)}function B(T,w){return`Layer (title: ${T.title}, id: ${T.id}) of type '${T.declaredClass}' ${w}`}function D(T){const{item:w,itemType:K,errorNamePrefix:S,layer:s,validateItem:c}=T;if((0,L.w)(w),w.type!==K)throw new P.Z(`${S}:portal-item-wrong-type`,`Portal item type should be "${K}"`,{item:w,layer:s});if(c){const E=c(w);if(!E.isValid)throw new P.Z(`${S}:invalid-parameters`,E.errorMessage,{layer:s})}}function I(T){const{layer:w,errorNamePrefix:K}=T,{portalItem:S}=w;if(!S)throw new P.Z(`${K}:portal-item-not-set`,B(w,"requires the portalItem property to be set"));if(!S.loaded)throw new P.Z(`${K}:portal-item-not-loaded`,B(w,"cannot be saved to a portal item that does not exist or is inaccessible"));D({...T,item:S})}function l(T){const{newItem:w,itemType:K}=T;let S=y.default.from(w);return S.id&&(S=S.clone(),S.id=null),S.type??=K,S.portal??=b.Z.getDefault(),D({...T,item:S}),S}function h(T,w,K){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)(function*(T,w,K){"beforeSave"in T&&"function"==typeof T.beforeSave&&(yield T.beforeSave());const S=T.write({},w);return yield Promise.all(w.resources?.pendingOperations??[]),function v(T,w){let K=(T.messages??[]).filter(({type:S})=>"error"===S).map(({name:S,message:s,details:c})=>new P.Z(S,s,c));if(T.blockedRelativeUrls&&(K=K.concat(T.blockedRelativeUrls.map(S=>new P.Z("url:unsupported",`Relative url '${S}' is not supported`)))),w?.ignoreUnsupported&&(K=K.filter(({name:S})=>"layer:unsupported"!==S&&"symbol:unsupported"!==S&&"symbol-layer:unsupported"!==S&&"property:unsupported"!==S&&"url:unsupported"!==S)),K.length>0)throw new P.Z("layer-write:unsupported","Failed to save layer due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:K})}(w,K),S})).apply(this,arguments)}function C(T){(0,u.qj)(T,u.Kz.JSAPI),T.typeKeywords&&(T.typeKeywords=T.typeKeywords.filter((w,K,S)=>S.indexOf(w)===K))}function a(T,w,K){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)(function*(T,w,K){const S=T.portal;yield S.signIn(),yield S.user?.addItem({item:T,data:w,folder:K?.folder})})).apply(this,arguments)}function p(T,w){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)(function*(T,w){const{layer:K,createItemData:S,createJSONContext:s,saveResources:c}=T;yield A(T),I(T);const E=K.portalItem,f=s?s(E):(0,d.Yv)(E),R=yield h(K,f,w),Z=yield S({layer:K,layerJSON:R},E);return C(E),yield E.update({data:Z}),(0,O.D)(f),yield c?.(E,f),E})).apply(this,arguments)}function U(T,w){return W.apply(this,arguments)}function W(){return(W=(0,o.Z)(function*(T,w){const{layer:K,createItemData:S,createJSONContext:s,setItemProperties:c,saveResources:E}=T;yield A(T);const f=l(T),R=s?s(f):(0,d.Yv)(f),Z=yield h(K,R,w),z=yield S({layer:K,layerJSON:Z},f);return yield c(K,f),C(f),yield a(f,z,w),K.portalItem=f,(0,O.D)(R),yield E?.(f,R),f})).apply(this,arguments)}},61793:(Q,G,e)=>{e.d(G,{R:()=>I});var o=e(50484),P=e(73514),O=e(38955),b=e(80543),L=(e(1535),e(57678),e(14007),e(10141)),M=e(40408),A=e(8966),j=e(1865),B=e(45859);const D={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let I=class extends P.Z{constructor(l){super(l),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const l=this.visibleSublayers.map(v=>{const h=(0,j.f)(this.floors,v);return v.toExportImageJSON(h)});return l.length?JSON.stringify(l):null}get hasDynamicLayers(){return this.layer&&(0,B.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(l){this._get("layer")!==l&&(this._set("layer",l),this.removeHandles("layer"),l&&this.addHandles([l.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),l.on("sublayer-update",v=>this.notifyChange(D[v.propertyName]))],"layer"))}get layers(){const l=this.visibleSublayers;return l?l.length?"show:"+l.map(v=>v.id).join(","):"show:-1":null}get layerDefs(){const l=!!this.floors?.length,v=this.visibleSublayers.filter(h=>null!=h.definitionExpression||l&&null!=h.floorInfo);return v.length?JSON.stringify(v.reduce((h,_)=>{const C=(0,j.f)(this.floors,_),a=(0,O._)(C,_.definitionExpression);return null!=a&&(h[_.id]=a),h},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const l=this.layer;return l&&(l.commitProperty("dpi"),l.commitProperty("imageFormat"),l.commitProperty("imageTransparency"),l.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const l=[];if(!this.layer)return l;const v=this.layer.sublayers,h=this.scale,_=a=>{a.visible&&(0===h||(0,M.o2)(h,a.minScale,a.maxScale))&&(a.sublayers?a.sublayers.forEach(_):l.unshift(a))};v&&v.forEach(_);const C=this._get("visibleSublayers");return!C||C.length!==l.length||C.some((a,i)=>l[i]!==a)?l:C}toJSON(){const l=this.layer;let v={dpi:l.dpi,format:l.imageFormat,transparent:l.imageTransparency,gdbVersion:l.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?v.dynamicLayers=this.dynamicLayers:v={...v,layers:this.layers,layerDefs:this.layerDefs},v}};(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"dynamicLayers",null),(0,o._)([(0,b.Cb)()],I.prototype,"floors",void 0),(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"hasDynamicLayers",null),(0,o._)([(0,b.Cb)()],I.prototype,"layer",null),(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"layers",null),(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"layerDefs",null),(0,o._)([(0,b.Cb)({type:Number})],I.prototype,"scale",void 0),(0,o._)([(0,b.Cb)(A.qG)],I.prototype,"timeExtent",void 0),(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"version",null),(0,o._)([(0,b.Cb)({readOnly:!0})],I.prototype,"visibleSublayers",null),I=(0,o._)([(0,L.j)("esri.layers.mixins.ExportImageParameters")],I)},6523:(Q,G,e)=>{e.d(G,{j:()=>M});var o=e(50484),P=e(73514),O=e(80543),u=(e(1535),e(57678),e(14007),e(10141));const L={visible:"visibleSublayers"};let M=class extends P.Z{constructor(A){super(A),this.scale=0}set layer(A){this._get("layer")!==A&&(this._set("layer",A),this.removeHandles("layer"),A&&this.addHandles([A.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),A.on("wms-sublayer-update",j=>this.notifyChange(L[j.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:A})=>A).map(({name:A})=>A).join()}get version(){this.commitProperty("layers");const A=this.layer;return A&&A.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:A,scale:j}=this,B=A?.sublayers,D=[],I=l=>{const{minScale:v,maxScale:h,sublayers:_,visible:C}=l;C&&(0===j||(0===v||j<=v)&&(0===h||j>=h))&&(_?_.forEach(I):D.push(l))};return B?.forEach(I),D}toJSON(){const{layer:A,layers:j}=this,{imageFormat:B,imageTransparency:D,version:I}=A;return{format:B,request:"GetMap",service:"WMS",styles:"",transparent:D?"TRUE":"FALSE",version:I,layers:j}}};(0,o._)([(0,O.Cb)()],M.prototype,"layer",null),(0,o._)([(0,O.Cb)({readOnly:!0})],M.prototype,"layers",null),(0,o._)([(0,O.Cb)({type:Number})],M.prototype,"scale",void 0),(0,o._)([(0,O.Cb)({readOnly:!0})],M.prototype,"version",null),(0,o._)([(0,O.Cb)({readOnly:!0})],M.prototype,"visibleSublayers",null),M=(0,o._)([(0,u.j)("esri.layers.support.ExportWMSImageParameters")],M)},46687:(Q,G,e)=>{e.d(G,{L:()=>B});var o=e(50484),P=e(73514),O=e(80543),u=(e(1535),e(57678),e(14007),e(10141)),L=e(5391),M=e(83821),A=e(45425),j=e(95150);let B=class extends P.Z{constructor(D){super(D)}get bounds(){const D=this.coords;return null==D?.extent?null:(0,A.oJ)(D.extent)}get coords(){const D=this.element.georeference?.coords;return(0,M.projectOrLoad)(D,this.spatialReference).geometry}get normalizedCoords(){return L.Z.fromJSON((0,j.Ui)(this.coords))}get normalizedBounds(){const D=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=D?(0,A.oJ)(D):null}};(0,o._)([(0,O.Cb)()],B.prototype,"spatialReference",void 0),(0,o._)([(0,O.Cb)()],B.prototype,"element",void 0),(0,o._)([(0,O.Cb)()],B.prototype,"bounds",null),(0,o._)([(0,O.Cb)()],B.prototype,"coords",null),(0,o._)([(0,O.Cb)()],B.prototype,"normalizedCoords",null),(0,o._)([(0,O.Cb)()],B.prototype,"normalizedBounds",null),B=(0,o._)([(0,u.j)("esri.layers.support.MediaElementView")],B)},58296:(Q,G,e)=>{e.d(G,{Z:()=>b});var o=e(15861),P=e(57964),O=e(79412);class b{constructor(d,u=0,L=d.lods[d.lods.length-1].level){this.tileInfo=d,this.minLOD=u,this.maxLOD=L,d.lodAt(u)||(this.minLOD=d.lods[0].level),d.lodAt(L)||(this.maxLOD=d.lods[d.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(d,u,L){const M=this.tileInfo?.lodAt(d);return!M||d<this.minLOD||d>this.maxLOD?"unavailable":M.cols&&M.rows?L>=M.cols[0]&&L<=M.cols[1]&&u>=M.rows[0]&&u<=M.rows[1]?"unknown":"unavailable":"unknown"}fetchAvailability(d,u,L,M){var A=this;return(0,o.Z)(function*(){yield(0,O.Yn)(M);const j=A.getAvailability(d,u,L);if("unavailable"===j)throw new P.Z("tile-map:tile-unavailable","Tile is not available",{level:d,row:u,col:L});return j})()}fetchAvailabilityUpsample(d,u,L,M,A){var j=this;return(0,o.Z)(function*(){yield(0,O.Yn)(A),M.level=d,M.row=u,M.col=L;const B=j.tileInfo;return B.updateTileInfo(M),j.fetchAvailability(d,u,L,A).catch(D=>{if((0,O.D_)(D))throw D;if(B.upsampleTile(M))return j.fetchAvailabilityUpsample(M.level,M.row,M.col,M,A);throw D})})()}}},27627:(Q,G,e)=>{e.d(G,{y:()=>S});var K,o=e(15861),P=e(50484),O=e(66476),b=e(73514),y=e(38737),d=e(57964),u=e(1258),L=e(52540),M=e(43029),A=e(79412),j=e(77675),B=e(66679),D=e(6785),I=e(80543),v=(e(1535),e(57678)),_=(e(14007),e(10141)),C=e(74901),a=e(34222),i=e(40271);class W{constructor(c){this._validateJSON(c);const{location:E,data:f}=c;this.location=Object.freeze((0,a.d9)(E));let z=!0,H=!0;const J=function p(s,c=!1){return s<=i.c8?c?new Array(s).fill(0):new Array(s):new Uint32Array(s)}(Math.ceil(this.location.width*this.location.height/32));let N=0;for(let $=0;$<f.length;$++){const Y=$%32;f[$]?(H=!1,J[N]|=1<<Y):z=!1,31===Y&&++N}H?(this._availability="unavailable",this.byteSize=40):z?(this._availability="available",this.byteSize=40):(this._availability=J,this.byteSize=40+(0,i.Xw)(J))}getAvailability(c,E){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const f=(c-this.location.top)*this.location.width+(E-this.location.left),Z=f>>5,z=this._availability;return Z<0||Z>z.length?"unknown":z[Z]&1<<f%32?"available":"unavailable"}static fromDefinition(c,E){const f=c.service.request||O.Z,{row:R,col:Z,width:z,height:H}=c,k={query:{f:"json"}};return E=E?{...k,...E}:k,f(function w(s){let c;if(s.service.tileServers?.length){const f=s.service.tileServers;c=`${f&&f.length?f[s.row%f.length]:s.service.url}/tilemap/${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`}else c=`${s.service.url}/tilemap/${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`;const E=s.service.query;return E&&(c=`${c}?${E}`),c}(c),E).then(J=>J.data).catch(J=>{if(J&&J.details&&422===J.details.httpStatus)return{location:{top:R,left:Z,width:z,height:H},valid:!0,data:(0,v.a9)(z*H,0)};throw J}).then(J=>{if(J.location&&(J.location.top!==R||J.location.left!==Z||J.location.width!==z||J.location.height!==H))throw new d.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:J,definition:{top:R,left:Z,width:z,height:H}});return W.fromJSON(J)})}static fromJSON(c){return Object.freeze(new W(c))}_validateJSON(c){if(!c?.location)throw new d.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===c.valid)throw new d.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!c.data)throw new d.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(c.data))throw new d.Z("tilemap:data-mismatch","Data must be an array of numbers");if(c.data.length!==c.location.width*c.location.height)throw new d.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function T(s){return`${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`}let S=K=class extends b.Z{constructor(s){super(s),this._pendingTilemapRequests={},this.request=O.Z,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new L.z(2*y.Y.MEGABYTES),this.addHandles([(0,j.YP)(()=>{const{layer:s}=this;return[s?.parsedUrl,s?.tileServers,s?.apiKey,s?.customParameters]},()=>this._initializeTilemapDefinition(),j.nn)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(s,c,E,f){if(!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD)return Promise.reject(new d.Z("tilemap-cache:level-unavailable",`Level ${s} is unavailable in the service`));const R=this._tmpTilemapDefinition,Z=this._tilemapFromCache(s,c,E,R);if(Z)return Promise.resolve(Z);const z=f?.signal;return f={...f,signal:null},new Promise((H,k)=>{(0,A.fu)(z,()=>k((0,A.zE)()));const J=T(R);let N=this._pendingTilemapRequests[J];if(!N){N=W.fromDefinition(R,f).then(Y=>(this._tilemapCache.put(J,Y,Y.byteSize),Y));const $=()=>{delete this._pendingTilemapRequests[J]};this._pendingTilemapRequests[J]=N,N.then($,$)}N.then(H,k)})}getAvailability(s,c,E){if(!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD)return"unavailable";const f=this._tilemapFromCache(s,c,E,this._tmpTilemapDefinition);return f?f.getAvailability(c,E):"unknown"}fetchAvailability(s,c,E,f){return!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD?Promise.reject(new d.Z("tile-map:tile-unavailable","Tile is not available",{level:s,row:c,col:E})):this.fetchTilemap(s,c,E,f).catch(R=>R).then(R=>{if(R instanceof W){const Z=R.getAvailability(c,E);if("unavailable"===Z)throw new d.Z("tile-map:tile-unavailable","Tile is not available",{level:s,row:c,col:E});return Z}if((0,A.D_)(R))throw R;return"unknown"})}fetchAvailabilityUpsample(s,c,E,f,R){f.level=s,f.row=c,f.col=E;const Z=this.layer.tileInfo;Z.updateTileInfo(f);const z=this.fetchAvailability(s,c,E,R).catch(H=>{if((0,A.D_)(H))throw H;if(Z.upsampleTile(f))return this.fetchAvailabilityUpsample(f.level,f.row,f.col,f,R);throw H});return this._fetchAvailabilityUpsamplePrefetch(f.id,s,c,E,R,z),z}_fetchAvailabilityUpsamplePrefetch(s,c,E,f,R,Z){var z=this;return(0,o.Z)(function*(){if(!z._prefetchingEnabled||null==s)return;const H=`prefetch-${s}`;if(z.hasHandles(H))return;const k=new AbortController;Z.then(()=>k.abort(),()=>k.abort());let J=!1;const N=(0,u.kB)(()=>{J||(J=!0,k.abort())});if(z.addHandles(N,H),yield(0,B.MU)(10,k.signal).catch(()=>{}),J||(J=!0,z.removeHandles(H)),(0,A.Hc)(k))return;const $=new C.f(s,c,E,f),Y={...R,signal:k.signal},m=z.layer.tileInfo;for(let x=0;K._prefetches.length<K._maxPrefetch&&m.upsampleTile($);++x){const F=z.fetchAvailability($.level,$.row,$.col,Y);K._prefetches.push(F);const V=()=>{K._prefetches.removeUnordered(F)};F.then(V,V)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:s,apiKey:c,customParameters:E}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:s.path,query:(0,D.B7)({...s.query,...E,token:c??s.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(s,c,E,f){f.level=s,f.row=c-c%this.size,f.col=E-E%this.size;const R=T(f);return this._tilemapCache.get(R)}get test(){const s=this;return{get prefetchingEnabled(){return s._prefetchingEnabled},set prefetchingEnabled(c){s._prefetchingEnabled=c},hasTilemap:(c,E,f)=>!!s._tilemapFromCache(c,E,f,s._tmpTilemapDefinition)}}};S._maxPrefetch=4,S._prefetches=new M.Z({initialSize:K._maxPrefetch}),(0,P._)([(0,I.Cb)({constructOnly:!0})],S.prototype,"layer",void 0),(0,P._)([(0,I.Cb)({constructOnly:!0})],S.prototype,"minLOD",void 0),(0,P._)([(0,I.Cb)({constructOnly:!0})],S.prototype,"maxLOD",void 0),(0,P._)([(0,I.Cb)({constructOnly:!0})],S.prototype,"request",void 0),(0,P._)([(0,I.Cb)({constructOnly:!0})],S.prototype,"size",void 0),S=K=(0,P._)([(0,_.j)("esri.layers.support.TilemapCache")],S)},1340:(Q,G,e)=>{e.d(G,{B:()=>L});var u,o=e(50484),P=e(89317),O=e(34222),b=e(80543),d=(e(1535),e(10141));let L=u=class extends P.wq{constructor(M){super(M)}clone(){return new u({customLayerParameters:(0,O.d9)(this.customLayerParameters),customParameters:(0,O.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,o._)([(0,b.Cb)({json:{type:Object,write:!0}})],L.prototype,"customLayerParameters",void 0),(0,o._)([(0,b.Cb)({json:{type:Object,write:!0}})],L.prototype,"customParameters",void 0),(0,o._)([(0,b.Cb)({type:String,json:{write:!0}})],L.prototype,"layerIdentifier",void 0),(0,o._)([(0,b.Cb)({type:String,json:{write:!0}})],L.prototype,"tileMatrixSet",void 0),(0,o._)([(0,b.Cb)({type:String,json:{write:!0}})],L.prototype,"url",void 0),L=u=(0,o._)([(0,d.j)("esri.layer.support.WMTSLayerInfo")],L)},23933:(Q,G,e)=>{e.d(G,{V:()=>O});var o=e(15861),P=e(6661);function O(j,B){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)(function*(j,B){const D=yield(0,P.T)(j,B);A(D),u(D);const I={serviceJSON:D};if((D.currentVersion??0)<10.5)return I;const l=yield(0,P.T)(j+"/layers",B);return A(l),u(l),I.layersJSON={layers:l.layers,tables:l.tables},I})).apply(this,arguments)}function y(j){return"Feature Layer"===j.type||"Oriented Imagery Layer"===j.type}function d(j){return"Table"===j.type}function u(j){j.layers=j.layers?.filter(y),j.tables=j.tables?.filter(d)}function L(j){j.type||="Feature Layer"}function M(j){j.type||="Table"}function A(j){j.layers?.forEach(L),j.tables?.forEach(M)}},82001:(Q,G,e)=>{e.d(G,{CS:()=>l,Cw:()=>I,Yu:()=>a,j5:()=>v,lm:()=>p});var o=e(15861),P=e(11931),O=e(26152),b=e(62691),y=e(66476),d=e(34222),u=e(6785),L=e(43814),M=e(27048),A=e(43585),j=e(91963),B=e(93792);const D={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function I(g){const U=g.folders||[],W=U.slice(),T=new Map,w=new Map,K=new Map,S=new Map,s=new Map,c={esriGeometryPoint:w,esriGeometryPolyline:K,esriGeometryPolygon:S};(g.featureCollection?.layers||[]).forEach(f=>{const R=(0,d.d9)(f);R.featureSet.features=[];const Z=f.featureSet.geometryType;T.set(Z,R);const z=f.layerDefinition.objectIdField;"esriGeometryPoint"===Z?h(w,z,f.featureSet.features):"esriGeometryPolyline"===Z?h(K,z,f.featureSet.features):"esriGeometryPolygon"===Z&&h(S,z,f.featureSet.features)}),g.groundOverlays&&g.groundOverlays.forEach(f=>{s.set(f.id,f)}),U.forEach(f=>{f.networkLinkIds.forEach(R=>{const Z=function C(g,U,W){const T=function _(g,U){let W;return U.some(T=>T.id===g&&(W=T,!0)),W}(g,W);return T&&(T.parentFolderId=U,T.networkLink=T),T}(R,f.id,g.networkLinks);Z&&W.push(Z)})}),W.forEach(f=>{if(f.featureInfos){f.points=(0,d.d9)(T.get("esriGeometryPoint")),f.polylines=(0,d.d9)(T.get("esriGeometryPolyline")),f.polygons=(0,d.d9)(T.get("esriGeometryPolygon")),f.mapImages=[];for(const R of f.featureInfos)switch(R.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const Z=c[R.type].get(R.id);Z&&f[D[R.type]]?.featureSet.features.push(Z);break}case"GroundOverlay":{const Z=s.get(R.id);Z&&f.mapImages.push(Z);break}}f.fullExtent=p([f])}});const E=p(W);return{folders:U,sublayers:W,extent:E}}function l(g,U,W,T){const w=O.id?.findCredential(g);return g=(0,u.fl)(g,{token:w?.token}),(0,y.Z)(P.default.kmlServiceUrl,{query:{url:g,model:"simple",folders:"",refresh:0!==W||void 0,outSR:JSON.stringify(U)},responseType:"json",signal:T})}function v(g,U,W=null,T=[]){const w=[],K={},S=U.sublayers,s=new Set(U.folders.map(c=>c.id));return S.forEach(c=>{const E=new g;if(W?E.read(c,W):E.read(c),T.length&&s.has(E.id)&&(E.visible=T.includes(E.id)),K[c.id]=E,null!=c.parentFolderId&&-1!==c.parentFolderId){const f=K[c.parentFolderId];f.sublayers||(f.sublayers=[]),f.sublayers?.unshift(E)}else w.unshift(E)}),w}function h(g,U,W){W.forEach(T=>{g.set(T.attributes[U],T)})}function a(g){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)(function*(g){const U=B.Z.fromJSON(g.featureSet).features,T=(0,j.i)(g.layerDefinition.drawingInfo.renderer),w=b.Z.fromJSON(g.popupInfo),K=[];for(const S of U){const s=yield T.getSymbolAsync(S);S.symbol=s,S.popupTemplate=w,S.visible=!0,K.push(S)}return K})).apply(this,arguments)}function p(g){const U=(0,M.Ue)(M.G_),W=(0,M.Ue)(M.G_);for(const T of g){if(T.polygons?.featureSet?.features)for(const w of T.polygons.featureSet.features)(0,A.Yg)(U,w.geometry),(0,M.TC)(W,U);if(T.polylines?.featureSet?.features)for(const w of T.polylines.featureSet.features)(0,A.Yg)(U,w.geometry),(0,M.TC)(W,U);if(T.points?.featureSet?.features)for(const w of T.points.featureSet.features)(0,A.Yg)(U,w.geometry),(0,M.TC)(W,U);if(T.mapImages)for(const w of T.mapImages)(0,A.Yg)(U,w.extent),(0,M.TC)(W,U)}return(0,M.fS)(W,M.G_)?void 0:{xmin:W[0],ymin:W[1],zmin:W[2],xmax:W[3],ymax:W[4],zmax:W[5],spatialReference:L.Z.WGS84}}},4906:(Q,G,e)=>{e.r(G),e.d(G,{populateGroupLayer:()=>R,populateOperationalLayers:()=>D});var o=e(15861),P=e(83944),b=(e(14007),e(81390)),y=e(79936),d=e(27835);function A(N,$){return!(!N.layerType||"ArcGISFeatureLayer"!==N.layerType)&&N.featureCollectionType===$}var j=e(82772),B=e(39262);function D(N,$,Y){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)(function*(N,$,Y){if(!$)return;const m=[];for(const F of $)m.push(W(F,Y));const x=yield Promise.allSettled(m);for(const F of x)"rejected"===F.status||F.value&&N.add(F.value)})).apply(this,arguments)}const l={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},v={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},h={ArcGISFeatureLayer:"FeatureLayer"},_={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},C={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},a={ArcGISFeatureLayer:"FeatureLayer"},i={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},p={...C,LinkChartLayer:"LinkChartLayer"},g={...a},U={...i};function W(N,$){return T.apply(this,arguments)}function T(){return T=(0,o.Z)(function*(N,$){return function w(N,$,Y){return K.apply(this,arguments)}(yield function S(N,$){return s.apply(this,arguments)}(N,$),N,$)}),T.apply(this,arguments)}function K(){return K=(0,o.Z)(function*(N,$,Y){const m=new N;return m.read($,Y.context),"group"===m.type&&("GroupLayer"===$.layerType?yield R(m,$,Y):E($)?function z(N,$,Y){$.itemId&&(N.portalItem=new d.default({id:$.itemId,portal:Y?.portal}),N.when(()=>{const m=x=>{const F=x.layerId;J(x,N,$,F,Y);const V=$.featureCollection?.layers?.[F];V&&x.read(V,Y)};N.layers?.forEach(m),N.tables?.forEach(m)}))}(m,$,Y.context):c($)&&(yield function H(N,$,Y){return k.apply(this,arguments)}(m,$,Y.context))),yield(0,B.y)(m,Y.context),m}),K.apply(this,arguments)}function s(){return(s=(0,o.Z)(function*(N,$){const Y=$.context,m=function f(N){let $;switch(N.origin){case"web-scene":switch(N.layerContainerType){case"basemap":$=_;break;case"ground":$=v;break;case"tables":$=h;break;default:$=l}break;case"link-chart":switch(N.layerContainerType){case"basemap":$=U;break;case"tables":$=g;break;default:$=p}break;default:switch(N.layerContainerType){case"basemap":$=i;break;case"tables":$=a;break;default:$=C}}return $}(Y);let x=N.layerType||N.type;!x&&$?.defaultLayerType&&(x=$.defaultLayerType);const F=m[x];let V=F?y.T[F]:y.T.UnknownLayer;if(E(N)){const X=Y?.portal;if(N.itemId){const q=new d.default({id:N.itemId,portal:X});yield q.load();const se=(yield(0,j.selectLayerClassPath)(q,new b.L)).className||"UnknownLayer";V=y.T[se]}}else"ArcGISFeatureLayer"===x?function u(N){return A(N,"notes")}(N)||function L(N){return A(N,"markup")}(N)?V=y.T.MapNotesLayer:function M(N){return A(N,"route")}(N)?V=y.T.RouteLayer:c(N)&&(V=y.T.GroupLayer):N.wmtsInfo?.url&&N.wmtsInfo.layerIdentifier?V=y.T.WMTSLayer:"WFS"===x&&"2.0.0"!==N.wfsInfo?.version&&(V=y.T.UnsupportedLayer);return V()})).apply(this,arguments)}function c(N){return"ArcGISFeatureLayer"===N.layerType&&!E(N)&&(N.featureCollection?.layers?.length??0)>1}function E(N){return"Feature Collection"===N.type}function R(N,$,Y){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(function*(N,$,Y){const m=new P.Z,x=D(m,Array.isArray($.layers)?$.layers:[],Y);try{try{if(yield x,"group"===N.type)return N.layers.addMany(m),N}catch(F){N.destroy();for(const V of m)V.destroy();throw F}}catch(F){throw F}})).apply(this,arguments)}function k(){return(k=(0,o.Z)(function*(N,$,Y){const m=y.T.FeatureLayer,x=yield m(),F=$.featureCollection,V=F?.showLegend,X=F?.layers?.map((q,se)=>{const ee=new x;ee.read(q,Y);const te={...Y,ignoreDefaults:!0};return J(ee,N,$,se,te),null!=V&&ee.read({showLegend:V},te),ee});N.layers.addMany(X??[])})).apply(this,arguments)}function J(N,$,Y,m,x){N.read({id:`${$.id}-sublayer-${m}`,visibility:Y.visibleLayers?.includes(m)??!0},x)}},68595:(Q,G,e)=>{e.d(G,{OE:()=>j,Gc:()=>I,Qg:()=>B,Rq:()=>u,gX:()=>D,z2:()=>L,ET:()=>M,Vx:()=>v}),e(2189);var O=e(89350),b=e(85039);const y=new Map,d=new class P{constructor(_=15e3,C=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=_,this._interval=Math.min(_,C)}decreaseRefCount(_,C){const a=_+"/"+C,i=this._cachedBlocks;if(i.has(a)){const p=i.get(a);return p.refCount--,p.refCount<=0&&(i.delete(a),p.controller&&p.controller.abort()),p.refCount}return 0}getBlock(_,C){const a=_+"/"+C,i=this._cachedBlocks;if(i.has(a)){const p=i.get(a);return p.ts=Date.now(),p.refCount++,i.delete(a),i.set(a,p),p.block}return null}putBlock(_,C,a,i){const p=this._cachedBlocks,g=_+"/"+C;if(p.has(g)){const U=p.get(g);U.ts=Date.now(),U.refCount++}else p.set(g,{block:a,ts:Date.now(),refCount:1,controller:i});this._trim(),this._updateTimer()}deleteBlock(_,C){const a=this._cachedBlocks,i=_+"/"+C;a.has(i)&&a.delete(i)}updateMaxSize(_){this._size=_,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const _=this._cachedBlocks;this._timer=setInterval(()=>{const C=Array.from(_),a=Date.now();for(let i=0;i<C.length&&C[i][1].ts<=a-this._duration;i++)_.delete(C[i][0]);0===_.size&&this._clearTimer()},this._interval)}_trim(){const _=this._cachedBlocks;if(-1===this._size||this._size>=_.size)return;const C=Array.from(_);for(let a=0;a<C.length-this._size;a++)_.delete(C[a][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function u(h,_){return null==_?h:`${h}?sliceId=${_}`}function L(h,_){const C={extent:null,rasterInfo:_,cache:new Map},a=y.get(h);return a?(a.push(C),a.length-1):(y.set(h,[C]),0)}function M(h,_){const C=y.get(h);C&&(C[_]=null,C.some(a=>null!=a)||y.delete(h))}function j(h,_,C){const a=y.get(h);if(!a)return null==_?d.decreaseRefCount(h,C):0;if(null==_||null==a[_])return d.decreaseRefCount(h,C);const i=a[_]?.cache,p=i?.get(C);if(i&&p){if(p.refCount--,0===p.refCount){i.delete(C);for(let g=0;g<a.length;g++)a[g]?.cache.delete(C);p.controller&&p.controller.abort()}return p.refCount}return 0}function B(h,_,C){const a=y.get(h);if(!a)return null==_?d.getBlock(h,C):null;if(null==_||null==a[_]){for(let p=0;p<a.length;p++){const g=a[p]?.cache.get(C);if(g)return g.refCount++,g.block}return d.getBlock(h,C)}const i=a[_]?.cache.get(C);if(i)return i.refCount++,i.block;for(let p=0;p<a.length;p++){if(p===_||!a[p])continue;const g=a[p]?.cache,U=g?.get(C);if(g&&U)return U.refCount++,g.set(C,U),U.block}return null}function D(h,_,C,a,i=null){const p=y.get(h);if(!p)return void(null==_&&d.putBlock(h,C,a,i));if(null==_||null==p[_])return void d.putBlock(h,C,a,i);const g={refCount:1,block:a,isResolved:!1,isRejected:!1,controller:i};a.then(()=>g.isResolved=!0).catch(()=>g.isRejected=!0),p[_]?.cache.set(C,g)}function I(h,_,C){const a=y.get(h);a?null!=_&&null!=a[_]?a[_]?.cache.delete(C):d.deleteBlock(h,C):null==_&&d.deleteBlock(h,C)}function v(h,_,C,a,i,p,g=null){const U=function l(h,_){const C=y.get(h);return C?C[_]??null:null}(h,_);if(!U)return;const W=U.extent,{cache:T,rasterInfo:w}=U;if(W&&W.xmin===C.xmin&&W.xmax===C.xmax&&W.ymin===C.ymin&&W.ymax===C.ymax)return;a=a??0;const K=C.clone().normalize(),{spatialReference:S,transform:s}=w,c=new Set;for(let E=0;E<K.length;E++){const f=K[E];if(f.xmax-f.xmin<=a||f.ymax-f.ymin<=a)continue;let R=(0,O.tB)(f,S,g);null!=s&&(R=s.inverseTransform(R));const Z=new b.Z({x:a,y:a,spatialReference:f.spatialReference});if(null==i&&!(i=(0,O.VO)(Z,S,f,g)))return;const{pyramidLevel:z,pyramidResolution:H,excessiveReading:k}=(0,O.kr)(i,w,p||"closest");if(k)return;const{storageInfo:J}=w,{origin:N}=J,$={x:Math.max(0,Math.floor((R.xmin-N.x)/H.x)),y:Math.max(0,Math.floor((N.y-R.ymax)/H.y))},Y=Math.ceil((R.xmax-R.xmin)/H.x-.1),m=Math.ceil((R.ymax-R.ymin)/H.y-.1),x=z>0?J.pyramidBlockWidth:J.blockWidth,F=z>0?J.pyramidBlockHeight:J.blockHeight,V=1,X=Math.max(0,Math.floor($.x/x)-V),q=Math.max(0,Math.floor($.y/F)-V),se=Math.floor(($.x+Y-1)/x)+V,ee=Math.floor(($.y+m-1)/F)+V;for(let te=q;te<=ee;te++)for(let ne=X;ne<=se;ne++)c.add(`${z}/${te}/${ne}`)}T.forEach((E,f)=>{if(!c.has(f)){const R=T.get(f);(null==R||R.isResolved||R.isRejected)&&T.delete(f)}}),U.extent={xmin:C.xmin,ymin:C.ymin,xmax:C.xmax,ymax:C.ymax}}},453:(Q,G,e)=>{e.d(G,{M4:()=>d,Yv:()=>b,ht:()=>O,wk:()=>y});var o=e(6785),P=e(61018);function O(u){return{origin:"portal-item",url:(0,o.mN)(u.itemUrl),portal:u.portal||P.Z.getDefault(),portalItem:u,readResourcePaths:[]}}function b(u){const L=(0,o.mN)(u.itemUrl);return{origin:"portal-item",messages:[],writtenProperties:[],url:L,portal:u.portal||P.Z.getDefault(),portalItem:u,verifyItemRelativeUrls:L?{rootPath:L.path,writtenUrls:[]}:null,blockedRelativeUrls:[]}}function y(u){return{origin:"web-map",url:(0,o.mN)(u.itemUrl),portal:u.portal||P.Z.getDefault(),portalItem:u,readResourcePaths:[]}}function d(u,L){const M=(0,o.mN)(u.itemUrl);return{origin:"web-map",messages:[],writtenProperties:[],url:M,portal:u.portal||P.Z.getDefault(),portalItem:u,initiator:L,verifyItemRelativeUrls:M?{rootPath:M.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}}},79387:(Q,G,e)=>{e.d(G,{B:()=>P});var o=e(6785);function P(M){return y[function O(M){return"json"===M.type?"application/json":"blob"===M.type?M.blob.type:function b(M){const A=(0,o.Ml)(M);return L[A]||d}(M.url)}(M)]||u}const y={},d="text/plain",u=y[d],L={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const M in L)y[L[M]]=M},21705:(Q,G,e)=>{e.d(G,{Z:()=>v});var j,o=e(50484),P=e(34222),O=e(80543),b=e(1535),y=e(21070),d=e(10141),u=e(86627),L=e(37764),M=e(66599),A=e(89317);let B=j=class extends A.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new j({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,P.d9)(this.color)})}};(0,o._)([(0,O.Cb)({type:String,json:{write:!0}})],B.prototype,"description",void 0),(0,o._)([(0,O.Cb)({type:String,json:{write:!0}})],B.prototype,"label",void 0),(0,o._)([(0,O.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],B.prototype,"minValue",void 0),(0,o._)([(0,O.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],B.prototype,"maxValue",void 0),(0,o._)([(0,O.Cb)({type:M.Z,json:{type:[b.z8],write:!0}})],B.prototype,"color",void 0),B=j=(0,o._)([(0,d.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],B);const D=B;var I;let l=I=class extends u.Z{constructor(h){super(h),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new I({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,P.d9)(this.colorClassBreakInfos),legendOptions:(0,P.d9)(this.legendOptions)})}};(0,o._)([(0,y.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],l.prototype,"type",void 0),(0,o._)([(0,O.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,o._)([(0,O.Cb)({type:L.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),(0,o._)([(0,O.Cb)({type:u.Z.fieldTransformTypeKebabDict.apiValues,json:{type:u.Z.fieldTransformTypeKebabDict.jsonValues,read:u.Z.fieldTransformTypeKebabDict.read,write:u.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,o._)([(0,O.Cb)({type:[D],json:{write:!0}})],l.prototype,"colorClassBreakInfos",void 0),l=I=(0,o._)([(0,d.j)("esri.renderers.PointCloudClassBreaksRenderer")],l);const v=l},86627:(Q,G,e)=>{e.d(G,{Z:()=>T});var A,o=e(50484),P=e(84303),O=e(89317),b=e(34222),y=e(80543),u=(e(1535),e(10141));e(57678),e(14007);let j=A=class extends O.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new A({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,o._)([(0,y.Cb)({type:String,json:{write:!0}})],j.prototype,"field",void 0),(0,o._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],j.prototype,"minValue",void 0),(0,o._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],j.prototype,"maxValue",void 0),j=A=(0,o._)([(0,u.j)("esri.renderers.support.pointCloud.ColorModulation")],j);const B=j,D=new P.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let I=class extends O.wq{};(0,o._)([(0,y.Cb)({type:D.apiValues,readOnly:!0,nonNullable:!0,json:{type:D.jsonValues,read:!1,write:D.write}})],I.prototype,"type",void 0),I=(0,o._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],I);const l=I;var h,v=e(21070);let _=h=class extends l{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new h({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,o._)([(0,v.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],_.prototype,"type",void 0),(0,o._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],_.prototype,"size",void 0),(0,o._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"useRealWorldSymbolSizes",void 0),_=h=(0,o._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],_);const C=_;var a;let i=a=class extends l{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new a({scaleFactor:this.scaleFactor})}};(0,o._)([(0,v.J)({pointCloudSplatAlgorithm:"splat"})],i.prototype,"type",void 0),(0,o._)([(0,y.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],i.prototype,"scaleFactor",void 0),i=a=(0,o._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],i);const g={key:"type",base:l,typeMap:{"fixed-size":C,splat:i}},U=(0,P.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let W=class extends O.wq{constructor(w){super(w),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,b.d9)(this.pointSizeAlgorithm),colorModulation:(0,b.d9)(this.colorModulation),pointsPerInch:(0,b.d9)(this.pointsPerInch)}}};(0,o._)([(0,y.Cb)({type:U.apiValues,readOnly:!0,nonNullable:!0,json:{type:U.jsonValues,read:!1,write:U.write}})],W.prototype,"type",void 0),(0,o._)([(0,y.Cb)({types:g,json:{write:!0}})],W.prototype,"pointSizeAlgorithm",void 0),(0,o._)([(0,y.Cb)({type:B,json:{write:!0}})],W.prototype,"colorModulation",void 0),(0,o._)([(0,y.Cb)({json:{write:!0},nonNullable:!0,type:Number})],W.prototype,"pointsPerInch",void 0),W=(0,o._)([(0,u.j)("esri.renderers.PointCloudRenderer")],W),(W||(W={})).fieldTransformTypeKebabDict=new P.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const T=W},71212:(Q,G,e)=>{e.d(G,{Z:()=>B});var A,o=e(50484),P=e(34222),O=e(80543),y=(e(1535),e(21070)),d=e(10141),u=e(86627),L=e(37764),M=e(11892);let j=A=class extends u.Z{constructor(D){super(D),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new A({...this.cloneProperties(),field:(0,P.d9)(this.field),fieldTransformType:(0,P.d9)(this.fieldTransformType),stops:(0,P.d9)(this.stops),legendOptions:(0,P.d9)(this.legendOptions)})}};(0,o._)([(0,y.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],j.prototype,"type",void 0),(0,o._)([(0,O.Cb)({json:{write:!0},type:String})],j.prototype,"field",void 0),(0,o._)([(0,O.Cb)({type:L.I,json:{write:!0}})],j.prototype,"legendOptions",void 0),(0,o._)([(0,O.Cb)({type:u.Z.fieldTransformTypeKebabDict.apiValues,json:{type:u.Z.fieldTransformTypeKebabDict.jsonValues,read:u.Z.fieldTransformTypeKebabDict.read,write:u.Z.fieldTransformTypeKebabDict.write}})],j.prototype,"fieldTransformType",void 0),(0,o._)([(0,O.Cb)({type:[M.Z],json:{write:!0}})],j.prototype,"stops",void 0),j=A=(0,o._)([(0,d.j)("esri.renderers.PointCloudStretchRenderer")],j);const B=j},70615:(Q,G,e)=>{e.d(G,{Z:()=>v});var j,o=e(50484),P=e(34222),O=e(80543),b=e(1535),y=e(21070),d=e(10141),u=e(86627),L=e(37764),M=e(66599),A=e(89317);let B=j=class extends A.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new j({description:this.description,label:this.label,values:(0,P.d9)(this.values),color:(0,P.d9)(this.color)})}};(0,o._)([(0,O.Cb)({type:String,json:{write:!0}})],B.prototype,"description",void 0),(0,o._)([(0,O.Cb)({type:String,json:{write:!0}})],B.prototype,"label",void 0),(0,o._)([(0,O.Cb)({type:[String],json:{write:!0}})],B.prototype,"values",void 0),(0,o._)([(0,O.Cb)({type:M.Z,json:{type:[b.z8],write:!0}})],B.prototype,"color",void 0),B=j=(0,o._)([(0,d.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],B);const D=B;var I;let l=I=class extends u.Z{constructor(h){super(h),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new I({...this.cloneProperties(),field:(0,P.d9)(this.field),fieldTransformType:(0,P.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,P.d9)(this.colorUniqueValueInfos),legendOptions:(0,P.d9)(this.legendOptions)})}};(0,o._)([(0,y.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],l.prototype,"type",void 0),(0,o._)([(0,O.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,o._)([(0,O.Cb)({type:u.Z.fieldTransformTypeKebabDict.apiValues,json:{type:u.Z.fieldTransformTypeKebabDict.jsonValues,read:u.Z.fieldTransformTypeKebabDict.read,write:u.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,o._)([(0,O.Cb)({type:[D],json:{write:!0}})],l.prototype,"colorUniqueValueInfos",void 0),(0,o._)([(0,O.Cb)({type:L.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),l=I=(0,o._)([(0,d.j)("esri.renderers.PointCloudUniqueValueRenderer")],l);const v=l},3587:(Q,G,e)=>{e.d(G,{Z:()=>I});var o=e(50484),O=(e(2189),e(89317)),b=e(80543),L=(e(1535),e(57678),e(14007),e(62185)),M=e(10141),A=e(7547),j=e(27321),B=e(64222);let D=class extends O.wq{constructor(l){super(l),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(l,v){const h=new j.Z;return h.globalId=v.fromGlobalId,h.networkSourceId=v.fromNetworkSourceId,h.terminalId=v.fromTerminalId,h}writeFromNetworkElement(l,v){l&&(v.fromGlobalId=l.globalId,v.fromNetworkSourceId=l.networkSourceId,v.fromTerminalId=l.terminalId)}readToNetworkElement(l,v){const h=new j.Z;return h.globalId=v.toGlobalId,h.networkSourceId=v.toNetworkSourceId,h.terminalId=v.toTerminalId,h}writeToNetworkElement(l,v){l&&(v.toGlobalId=l.globalId,v.toNetworkSourceId=l.networkSourceId,v.toTerminalId=l.terminalId)}};(0,o._)([(0,b.Cb)({type:String,json:{write:!0}})],D.prototype,"globalId",void 0),(0,o._)([(0,b.Cb)({type:["attachment","connectivity","containment"],json:{write:!0}})],D.prototype,"associationType",void 0),(0,o._)([(0,b.Cb)({type:j.Z,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],D.prototype,"fromNetworkElement",void 0),(0,o._)([(0,L.r)("fromNetworkElement")],D.prototype,"readFromNetworkElement",null),(0,o._)([(0,A.c)("fromNetworkElement")],D.prototype,"writeFromNetworkElement",null),(0,o._)([(0,b.Cb)({type:j.Z,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],D.prototype,"toNetworkElement",void 0),(0,o._)([(0,L.r)("toNetworkElement")],D.prototype,"readToNetworkElement",null),(0,o._)([(0,A.c)("toNetworkElement")],D.prototype,"writeToNetworkElement",null),(0,o._)([(0,b.Cb)({type:B.Z,json:{write:!0}})],D.prototype,"geometry",void 0),(0,o._)([(0,b.Cb)({type:String,json:{write:!0}})],D.prototype,"errorMessage",void 0),(0,o._)([(0,b.Cb)({type:Number,json:{write:!0}})],D.prototype,"percentAlong",void 0),(0,o._)([(0,b.Cb)({type:Number,json:{write:!0}})],D.prototype,"errorCode",void 0),(0,o._)([(0,b.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"isContentVisible",void 0),(0,o._)([(0,b.Cb)({type:Number,json:{write:!0}})],D.prototype,"status",void 0),D=(0,o._)([(0,M.j)("esri.rest.networks.support.Association")],D);const I=D},18719:(Q,G,e)=>{e.d(G,{IJ:()=>j,m5:()=>l,vB:()=>h,w7:()=>D});var o=e(15861),P=e(66476),O=e(6785),b=e(40637),y=e(93566),d=e(33721),u=e(90356),L=e(8295);const M="Layer does not support extent calculation.";function A(C,a){const i=C.geometry,p=C.toJSON(),g=p;if(null!=i&&(g.geometry=JSON.stringify(i),g.geometryType=(0,b.Ji)(i),g.inSR=(0,d.B9)(i.spatialReference)),p.topFilter?.groupByFields&&(g.topFilter.groupByFields=p.topFilter.groupByFields.join(",")),p.topFilter?.orderByFields&&(g.topFilter.orderByFields=p.topFilter.orderByFields.join(",")),p.topFilter&&(g.topFilter=JSON.stringify(g.topFilter)),p.objectIds&&(g.objectIds=p.objectIds.join(",")),p.orderByFields&&(g.orderByFields=p.orderByFields.join(",")),p.outFields&&!(a?.returnCountOnly||a?.returnExtentOnly||a?.returnIdsOnly)?g.outFields=p.outFields.includes("*")?"*":p.outFields.join(","):delete g.outFields,p.outSR?g.outSR=(0,d.B9)(p.outSR):i&&p.returnGeometry&&(g.outSR=g.inSR),p.returnGeometry&&delete p.returnGeometry,p.timeExtent){const U=p.timeExtent,{start:W,end:T}=U;null==W&&null==T||(g.time=W===T?W:`${W??"null"},${T??"null"}`),delete p.timeExtent}return g}function j(C,a,i,p){return B.apply(this,arguments)}function B(){return(B=(0,o.Z)(function*(C,a,i,p){const g=yield _(C,a,"json",p);return(0,L.p)(a,i,g.data),g})).apply(this,arguments)}function D(C,a,i){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)(function*(C,a,i){return null!=a.timeExtent&&a.timeExtent.isEmpty?{data:{objectIds:[]}}:_(C,a,"json",i,{returnIdsOnly:!0})})).apply(this,arguments)}function l(C,a,i){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(function*(C,a,i){return null!=a.timeExtent&&a.timeExtent.isEmpty?{data:{count:0,extent:null}}:_(C,a,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(p=>{const g=p.data;if(g.hasOwnProperty("extent"))return p;if(g.features)throw new Error(M);if(g.hasOwnProperty("count"))throw new Error(M);return p})})).apply(this,arguments)}function h(C,a,i){return null!=a.timeExtent&&a.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):_(C,a,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function _(C,a,i,p={},g={}){const U="string"==typeof C?(0,O.mN)(C):C,W=a.geometry?[a.geometry]:[];return p.responseType="pbf"===i?"array-buffer":"json",(0,y.aX)(W,null,p).then(T=>{const w=T?.[0];null!=w&&((a=a.clone()).geometry=w);const K=(0,u.A)({...U.query,f:i,...g,...A(a,g)});return(0,P.Z)((0,O.v_)(U.path,"queryTopFeatures"),{...p,query:{...K,...p.query}})})}},83068:(Q,G,e)=>{e.d(G,{t:()=>O});var o=e(15861),P=e(66476);function O(y,d){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)(function*(y,d){const{data:u}=yield(0,P.Z)(y,{responseType:"image",...d});return u})).apply(this,arguments)}},51571:(Q,G,e)=>{e.d(G,{Z:()=>b});var o=e(15861),P=e(56123),O=e(26517);class b{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(d){return this._resourceMap.get(d)??null}fetchResource(d,u){var L=this;return(0,o.Z)(function*(){const M=L._resourceMap.get(d);if(M)return{width:M.width,height:M.height};let A=L._inFlightResourceMap.get(d);return A?A.then(j=>({width:j.width,height:j.height})):(A=(0,O.n$)(d,u),L._inFlightResourceMap.set(d,A),A.then(j=>(L._inFlightResourceMap.delete(d),L._resourceMap.set(d,j),{width:j.width,height:j.height}),()=>({width:0,height:0})))})()}deleteResource(d){this._inFlightResourceMap.delete(d),this._resourceMap.delete(d)}loadFont(d){return(0,P.mx)(d)}}},76945:(Q,G,e)=>{e.r(G),e.d(G,{fetchSymbolFromStyle:()=>D,getStyleItemFromStyle:()=>B,resolveWebStyleSymbol:()=>j});var o=e(71950),P=e(70751),O=e(57964),b=e(6785),y=e(61018),d=e(19677),u=e(27399),L=e(97888),M=e(18007),A=e(16497);function j(l,v,h,_){const C=l.name;return null==C?Promise.reject(new O.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):l.styleName&&"Esri2DPointSymbolsStyle"===l.styleName?function I(l,v,h){const _=M.wm.replaceAll(/\{SymbolName\}/gi,l),C=null!=v.portal?v.portal:y.Z.getDefault();return(0,M.EJ)(_,h).then(a=>{const i=(0,M.KV)(a.data);return(0,u.im)(i,{portal:C,url:(0,b.mN)((0,b.Yd)(_)),origin:"portal-item"})})}(C,v,_):(0,M.n2)(l,v,_).then(a=>D(a,C,v,h,M.v9,_))}function B(l,v){return v.items.find(h=>h.name===l)}function D(l,v,h,_,C,a){const i=null!=h?.portal?h.portal:y.Z.getDefault(),p={portal:i,url:(0,b.mN)(l.baseUrl),origin:"portal-item"},g=B(v,l.data);if(!g)return Promise.reject(new O.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${v}' could not be found`,{symbolName:v}));let U=(0,d.f)(C(g,_),p),W=g.thumbnail?.href??null;const T=g.thumbnail?.imageData;(0,P.XO)()&&(U=(0,P.pJ)(U)??"",W=(0,P.pJ)(W));const w={portal:i,url:(0,b.mN)((0,b.Yd)(U)),origin:"portal-item"};return(0,M.EJ)(U,a).then(K=>{const S="cimRef"===_?(0,M.KV)(K.data):K.data,s=(0,u.im)(S,w);if(s&&(0,o.dU)(s)){if(W){const c=(0,d.f)(W,p);s.thumbnail=new A.p({url:c})}else T&&(s.thumbnail=new A.p({url:`data:image/png;base64,${T}`}));l.styleUrl?s.styleOrigin=new L.Z({portal:h.portal,styleUrl:l.styleUrl,name:v}):l.styleName&&(s.styleOrigin=new L.Z({portal:h.portal,styleName:l.styleName,name:v}))}return s})}},81065:(Q,G,e)=>{e.d(G,{c:()=>b});var o=e(88098),P=e(43101),O=e(92311);class b extends O.Z{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(d){super.beforeRender(d),this._manageFade()}prepareRenderPasses(d){const u=d.registerRenderPass({name:"bitmap",brushes:[o.U.bitmap],target:()=>this.children,drawPhase:P.jx.MAP});return[...super.prepareRenderPasses(d),u]}_manageFade(){this.children.reduce((d,u)=>d+(u.inFadeTransition?1:0),0)>=2?(this.children.forEach(d=>d.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(d=>d.blendFunction="standard"),this._hasCrossfade=!1)}}},93114:(Q,G,e)=>{e.d(G,{Y:()=>M});var o=e(50484),u=(e(4703),e(1535),e(57678),e(14007),e(57964),e(10141)),L=e(35244);const M=A=>{let j=class extends A{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new L.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return j=(0,o._)([(0,u.j)("esri.views.2d.layers.BitmapTileLayerView2D")],j),j}},12915:(Q,G,e)=>{e.d(G,{k:()=>B,p:()=>D});var o=e(90295),P=e(88278),b=(e(14007),e(62168)),y=e(27048),d=e(10405),u=e(69378);const L=(0,y.Ue)();function M(I,l){return I<<16|l}function A(I){return(4294901760&I)>>>16}function j(I){return 65535&I}const B={getObjectId:I=>I.getObjectId(),getAttributes:I=>I.readAttributes(),getAttribute:(I,l)=>I.readAttribute(l),getAttributeAsTimestamp:(I,l)=>I.readAttributeAsTimestamp(l),cloneWithGeometry:(I,l)=>I,getGeometry:I=>I.readHydratedGeometry(),getCentroid:(I,l)=>I.readCentroid()};class D extends d.J{constructor(l,v,h){super(l,v),this.featureAdapter=B,this.events=new P.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new o.Z(50),this._index=(0,b.r)(9,_=>({minX:this._storage.getXMin(_),minY:this._storage.getYMin(_),maxX:this._storage.getXMax(_),maxY:this._storage.getYMax(_)})),this.mode=h}get storeStatistics(){let l=0,v=0,h=0;return this.forEach(_=>{const C=_.readGeometry();C&&(v+=C.isPoint?1:C.lengths.reduce((a,i)=>a+i,0),h+=C.isPoint?1:C.lengths.length,l+=1)}),{featureCount:l,vertexCount:v,ringCount:h}}hasInstance(l){return this._featureSetsByInstance.has(l)}onTileData(l,v,h){if(null==v.addOrUpdate)return v;if(v.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const C=v.addOrUpdate.getCursor();for(;C.next();){const a=C.getDisplayId();this.setComputedAttributes(this._storage,C,a,l.scale,h)}return v}this._featureSetsByInstance.set(v.addOrUpdate.instance,v.addOrUpdate);const _=v.addOrUpdate.getCursor();for(;_.next();)this._insertFeature(_,l.scale,h);return this._spatialIndexInvalid=!0,this.events.emit("changed"),v}search(l){this._rebuildIndex();const v=l.id,h=this._indexSearchCache.find(i=>i.tileId===v);if(null!=h)return h.readers;const _=new Map,C=this._searchIndex(l.bounds),a=[];for(const i of C){const p=this._storage.getInstanceId(i),g=A(p),U=j(p);_.has(g)||_.set(g,[]),_.get(g).push(U)}return _.forEach((i,p)=>{const g=this._featureSetsByInstance.get(p);a.push(u.t.from(g,i))}),this._indexSearchCache.enqueue({tileId:v,readers:a}),a}insert(l){const v=l.getCursor(),h=this._storage;for(;v.next();){const _=M(v.instance,v.getIndex()),C=v.getObjectId(),a=this._objectIdToDisplayId.get(C)??this._storage.createDisplayId();v.setDisplayId(a),h.setInstanceId(a,_),this._objectIdToDisplayId.set(C,a)}this._featureSetsByInstance.set(l.instance,l),this._spatialIndexInvalid=!0}remove(l){const v=this._objectIdToDisplayId.get(l);if(!v)return;const h=this._storage.getInstanceId(v),_=j(h),C=A(h),a=this._featureSetsByInstance.get(C);this._objectIdToDisplayId.delete(l),this._storage.releaseDisplayId(v),a.removeAtIndex(_),a.isEmpty&&this._featureSetsByInstance.delete(C),this._spatialIndexInvalid=!0}forEach(l){this._objectIdToDisplayId.forEach(v=>{const h=this._storage.getInstanceId(v),_=this._lookupFeature(h);l(_)})}forEachUnsafe(l){this._objectIdToDisplayId.forEach(v=>{const h=this._storage.getInstanceId(v),_=A(h),C=j(h),a=this._getFeatureSet(_);a.setIndex(C),l(a)})}forEachInBounds(l,v){const h=this._searchIndex(l);for(const _ of h)v(this.lookupFeatureByDisplayId(_,this._storage))}forEachBounds(l,v){this._rebuildIndex();for(const h of l){if(!h.readGeometry())continue;const _=h.getDisplayId();(0,y.bZ)(L,this._storage.getXMin(_),this._storage.getYMin(_),this._storage.getXMax(_),this._storage.getYMax(_)),v(L)}}sweepFeatures(l,v,h){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((_,C)=>{l.has(_)||(v.releaseDisplayId(_),h&&h.unsetAttributeData(_),this._objectIdToDisplayId.delete(C))}),this.events.emit("changed")}sweepFeatureSets(l){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((v,h)=>{l.has(h)||this._featureSetsByInstance.delete(h)})}lookupObjectId(l,v){const h=this.lookupFeatureByDisplayId(l,v);return null==h?null:h.getObjectId()}lookupDisplayId(l){return this._objectIdToDisplayId.get(l)}lookupFeatureByDisplayId(l,v){const h=v.getInstanceId(l);return this._lookupFeature(h)}lookupByDisplayIdUnsafe(l){const v=this._storage.getInstanceId(l),h=A(v),_=j(v),C=this._getFeatureSet(h);return C?(C.setIndex(_),C):null}_insertFeature(l,v,h){const _=this._storage,C=l.getObjectId(),a=M(l.instance,l.getIndex());_.getInstanceId(l.getDisplayId());let i=this._objectIdToDisplayId.get(C);i||(i=_.createDisplayId(),this._objectIdToDisplayId.set(C,i),this._spatialIndexInvalid=!0),l.setDisplayId(i),_.setInstanceId(i,a),this.setComputedAttributes(_,l,i,v,h)}_searchIndex(l){return this._rebuildIndex(),this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const l=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(v=>{const h=v.getCursor();for(;h.next();){const _=h.getDisplayId();this._storage.setBounds(_,h)&&l.push(_)}}):this._objectIdToDisplayId.forEach(v=>{const h=this._storage.getInstanceId(v);this._storage.setBounds(v,this._lookupFeature(h))&&l.push(v)}),this._index.clear(),this._index.load(l),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(l){const v=A(l),h=this._getFeatureSet(v);if(!h)return;const _=h.getCursor(),C=j(l);return _.setIndex(C),_}_getFeatureSet(l){return this._featureSetsByInstance.get(l)}}},10405:(Q,G,e)=>{e.d(G,{J:()=>u});var o=e(15861),P=e(14007),O=e(657),b=e(4978),y=e(4703);class u{constructor(M,A){this._canCacheExpressionValue=!1,this._sourceInfo=M,this._storage=A,this._bitsets={computed:A.getBitset(A.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(M,A){var j=this;return(0,o.Z)(function*(){const B=(0,O.Hg)(j._schema,A);if(j._schema=A,!A||null==B||!(0,O.uD)(B,"attributes"))return;(0,P.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",B),j._bitsets.computed.clear(),M.targets[A.name]=!0;const D=A.attributes,I=[],l=[];for(const v in D){const h=D[v];switch(h.type){case"field":break;case"expression":I.push(j._createArcadeComputedField(h));break;case"label-expression":I.push(j._createLabelArcadeComputedField(h));break;case"statistic":l.push(h)}}j._computedFields=yield Promise.all(I),j._canCacheExpressionValue=!j._computedFields.some(v=>"expression"===v.type&&null!=v.expression&&v.expression.referencesScale()),j._statisticFields=l})()}setComputedAttributes(M,A,j,B,D){const I=this._bitsets.computed;if(!this._canCacheExpressionValue||!I.has(j)){I.set(j);for(const l of this._computedFields){const v=this._evaluateField(A,l,B,D);switch(l.resultType){case"numeric":M.setComputedNumericAtIndex(j,l.fieldIndex,v);break;case"string":M.setComputedStringAtIndex(j,l.fieldIndex,v)}}}}_createArcadeComputedField(M){var A=this;return(0,o.Z)(function*(){const j=A._sourceInfo.spatialReference,B=A._sourceInfo.fieldsIndex;return{...M,expression:yield(0,b.Yi)(M.valueExpression,j,B)}})()}_createLabelArcadeComputedField(M){var A=this;return(0,o.Z)(function*(){const j=A._sourceInfo.spatialReference,B=A._sourceInfo.fieldsIndex,{createLabelFunction:D}=yield e.e(5570).then(e.bind(e,15570)),I=yield D(M.label,B,j);return{...M,builder:I}})()}_evaluateField(M,A,j,B){switch(A.type){case"label-expression":{const D=M.readArcadeFeature();return A.builder.evaluate(D,B)||""}case"expression":{const{expression:D}=A;return function d(L,M,A){if(null==L)return null;const j=M.readArcadeFeature();M.contextTimeZone=A.$view?.timeZone;try{return L.evaluate({...A,$feature:j},L.services)}catch(B){return y.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",B),null}}(D,M,{$view:{scale:j,timeZone:B}})}}}}},5863:(Q,G,e)=>{e.d(G,{Z:()=>M});var o=e(50484),P=e(73514),O=e(80543),u=(e(1535),e(57678),e(14007),e(10141));let L=class extends P.Z{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const A=this.tileStore.tileScheme.spatialReference;return A&&A.toJSON()||null}};(0,o._)([(0,O.Cb)({readOnly:!0})],L.prototype,"supportsTileUpdates",null),(0,o._)([(0,O.Cb)({constructOnly:!0})],L.prototype,"remoteClient",void 0),(0,o._)([(0,O.Cb)({constructOnly:!0})],L.prototype,"service",void 0),(0,o._)([(0,O.Cb)()],L.prototype,"spatialReference",null),(0,o._)([(0,O.Cb)({constructOnly:!0})],L.prototype,"tileInfo",void 0),(0,o._)([(0,O.Cb)({constructOnly:!0})],L.prototype,"tileStore",void 0),L=(0,o._)([(0,u.j)("esri.views.2d.layers.features.processors.BaseProcessor")],L);const M=L},69378:(Q,G,e)=>{e.d(G,{t:()=>P});var o=e(14050);class P extends o.s{static from(b,y){return new P(b.copy(),y)}constructor(b,y){super(o.s.createInstance(),b.fullSchema()),this._currentIndex=-1,this._reader=b,this._indices=y}get fields(){return this._reader.fields}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const b=new P(this._reader.copy(),this._indices);return b._currentIndex=this._currentIndex,b}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(b){this._reader.setArcadeSpatialReference(b)}attachStorage(b){this._reader.attachStorage(b)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}get contextTimeZone(){return this._reader.contextTimeZone}set contextTimeZone(b){this._reader.contextTimeZone=b}getStorage(){return this._reader.getStorage()}getComputedNumeric(b){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(b,y){return this._reader.setComputedNumericAtIndex(y,0)}getComputedString(b){return this._reader.getComputedStringAtIndex(0)}setComputedString(b,y){return this._reader.setComputedStringAtIndex(0,y)}getComputedNumericAtIndex(b){return this._reader.getComputedNumericAtIndex(b)}setComputedNumericAtIndex(b,y){this._reader.setComputedNumericAtIndex(b,y)}getComputedStringAtIndex(b){return this._reader.getComputedStringAtIndex(b)}setComputedStringAtIndex(b,y){return this._reader.setComputedStringAtIndex(b,y)}transform(b,y,d,u){const L=this.copy();return L._reader=this._reader.transform(b,y,d,u),L}readAttribute(b,y=!1){return this._reader.readAttribute(b,y)}readAttributes(){return this._reader.readAttributes()}joinAttributes(b){return this._reader.joinAttributes(b)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(b){return this.readAttribute(b,!0)}hasField(b){return this._reader.hasField(b)}setField(b,y){return this._reader.setField(b,y)}keys(){return this._reader.keys()}castToText(b=!1){return this._reader.castToText(b)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(b){return this._reader.setDisplayId(b)}getGroupId(){return this._reader.getGroupId()}setGroupId(b){return this._reader.setGroupId(b)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(b){return this._reader.setIndex(b)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(b,y){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},87653:(Q,G,e)=>{e.d(G,{Z:()=>W});var o=e(15861),P=e(50484),O=e(73514),y=(e(14007),e(79412)),d=e(80543),M=(e(1535),e(57678),e(10141)),A=e(45425),j=e(33721),B=e(30220);const D=Math.PI/180;var h=e(6118),_=e(6777),C=e(54529);const a=(0,A.Ue)(),i=[0,0],p=new C.Z(0,0,0,0);let U=class extends O.Z{constructor(T){var w;super(T),w=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,y.Ds)(function(){var K=(0,o.Z)(function*(S,s){if((0,y.k_)(s),!S.stationary||w.destroyed)return;const c=S.state,E=(0,j.C5)(c.spatialReference),f=w.hidpi?S.pixelRatio:1,R=w.imageNormalizationSupported&&c.worldScreenWidth&&c.worldScreenWidth<c.size[0],Z=w.imageMaxWidth??0,z=w.imageMaxHeight??0;R?(i[0]=c.worldScreenWidth,i[1]=c.size[1]):w.imageRotationSupported?(i[0]=c.size[0],i[1]=c.size[1]):function l(T,w){const K=function I(T){return T*D}(w.rotation),S=Math.abs(Math.cos(K)),s=Math.abs(Math.sin(K)),[c,E]=w.size;return T[0]=Math.round(E*s+c*S),T[1]=Math.round(E*S+c*s),T}(i,c);const H=Math.floor(i[0]*f)>Z||Math.floor(i[1]*f)>z,J=!w.imageNormalizationSupported&&E&&(c.extent.xmin<E.valid[0]||c.extent.xmax>E.valid[1]),N=!H&&!J,$=w.imageRotationSupported?c.rotation:0,Y=w.container.children.slice();if(N){const m=R?c.paddedViewState.center:c.center;w._imagePromise&&console.error("Image promise was not defined!"),w._imagePromise=w._singleExport(c,i,m,c.resolution,$,f,s)}else{let m=Math.min(Z,z);J&&(m=Math.min(c.worldScreenWidth,m)),w._imagePromise=w._tiledExport(c,m,f,s)}try{const m=(yield w._imagePromise)??[];(0,y.k_)(s);const x=[];if(w._imagePromise=null,w.destroyed)return;w.bitmaps=m;for(const F of Y)m.includes(F)||x.push(F.fadeOut().then(()=>{F.remove(),F.destroy()}));for(const F of m)x.push(F.fadeIn());yield Promise.all(x)}catch(m){w._imagePromise=null,(0,y.r9)(m)}});return function(S,s){return K.apply(this,arguments)}}(),5e3),this.updateExports=(0,y.Ds)(function(){var K=(0,o.Z)(function*(S){const s=[];for(const c of w.container.children){if(!c.visible||!c.stage)return;s.push(S(c).then(()=>{c.invalidateTexture(),c.requestRender()}))}w._imagePromise=(0,y.as)(s).then(()=>w._imagePromise=null),yield w._imagePromise});return function(S){return K.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(T=>T.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(T,w,K,S,s,c){var E=this;return(0,o.Z)(function*(){const f=yield E.fetchSource(T,Math.floor(w*s),Math.floor(K*s),{rotation:S,pixelRatio:s,signal:c});(0,y.k_)(c);const R=new h.eY(null,!0);return R.x=T.xmin,R.y=T.ymax,R.resolution=T.width/w,R.rotation=S,R.pixelRatio=s,R.opacity=0,E.container.addChild(R),yield R.setSourceAsync(f,c),(0,y.k_)(c),R})()}_singleExport(T,w,K,S,s,c,E){var f=this;return(0,o.Z)(function*(){!function v(T,w,K,S){const[s,c]=w,[E,f]=S,R=.5*K;T[0]=s-R*E,T[1]=c-R*f,T[2]=s+R*E,T[3]=c+R*f}(a,K,S,w);const R=(0,A.HH)(a,T.spatialReference);return[yield f._export(R,w[0],w[1],s,c,E)]})()}_tiledExport(T,w,K,S){const s=B.Z.create({size:w,spatialReference:T.spatialReference,scales:[T.scale]}),c=new _.Z(s),E=c.getTileCoverage(T);if(!E)return null;const f=[];return E.forEach((R,Z,z,H)=>{p.set(R,Z,z,0),c.getTileBounds(a,p);const k=(0,A.HH)(a,T.spatialReference);f.push(this._export(k,w,w,0,K,S).then(J=>(0!==H&&(p.set(R,Z,z,H),c.getTileBounds(a,p),J.x=a[0],J.y=a[3]),J)))}),Promise.all(f)}};(0,P._)([(0,d.Cb)()],U.prototype,"_imagePromise",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"bitmaps",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"container",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"fetchSource",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"hidpi",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"imageMaxWidth",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"imageMaxHeight",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"imageRotationSupported",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"imageNormalizationSupported",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"requestUpdate",void 0),(0,P._)([(0,d.Cb)()],U.prototype,"updating",null),U=(0,P._)([(0,M.j)("esri.views.2d.layers.support.ExportStrategy")],U);const W=U},73430:(Q,G,e)=>{function O(y,d,u,L){if(u.level===L.level)return d;const M=y.tileInfo.size,A=y.getTileResolution(u.level),j=y.getTileResolution(L.level);let B=y.getLODInfoAt(L.level);const D=B.getXForColumn(L.col),I=B.getYForRow(L.row);B=y.getLODInfoAt(u.level);const l=B.getXForColumn(u.col),v=B.getYForRow(u.row),h=function o(y){return y instanceof HTMLImageElement?y.naturalWidth:y.width}(d)/M[0],_=function P(y){return y instanceof HTMLImageElement?y.naturalHeight:y.height}(d)/M[1],C=Math.round(h*((D-l)/A)),a=Math.round(_*(-(I-v)/A)),i=Math.round(h*M[0]*(j/A)),p=Math.round(_*M[1]*(j/A)),g=b(M);return g.getContext("2d").drawImage(d,C,a,i,p,0,0,M[0],M[1]),g}function b(y){const d=document.createElement("canvas");return[d.width,d.height]=y,d}e.d(G,{V:()=>b,i:()=>O})},53387:(Q,G,e)=>{e.d(G,{Br:()=>u,Fm:()=>D,N9:()=>l,RA:()=>v,Tc:()=>M,Ue:()=>A,iC:()=>L,s9:()=>d,v:()=>I,xW:()=>B,zS:()=>j});var o=e(51675),P=e(99273),O=e(39237),b=e(17091),y=e(22784);function d(_,C,a="nearest",i=!1){const p=!(i&&"u8"===C.pixelType),g=p?O.Br.FLOAT:O.Br.UNSIGNED_BYTE,U=null==C.pixels||0===C.pixels.length?null:p?C.getAsRGBAFloat():C.getAsRGBA(),W=_.capabilities.textureFloat?.textureFloatLinear,T=new y.X;return T.width=C.width,T.height=C.height,T.internalFormat=_.type===P.zO.WEBGL2&&p?O.lP.RGBA32F:O.VI.RGBA,T.samplingMode=!W||"bilinear"!==a&&"cubic"!==a?O.cw.NEAREST:O.cw.LINEAR,T.dataType=g,T.wrapMode=O.e8.CLAMP_TO_EDGE,new b.x(_,T,U)}function u(_,C){const{spacing:a,offsets:i,coefficients:p,size:[g,U]}=C,W=a[0]>1,T=new y.X;T.width=W?4*g:g,T.height=U,T.internalFormat=_.type===P.zO.WEBGL2?O.lP.RGBA32F:O.VI.RGBA,T.dataType=O.Br.FLOAT,T.samplingMode=O.cw.NEAREST,T.wrapMode=O.e8.CLAMP_TO_EDGE;const w=new Float32Array(W?g*U*16:2*i.length);if(W&&null!=p)for(let K=0,S=0;K<p.length;K++)w[S++]=p[K],K%3==2&&(w[S++]=1);else for(let K=0;K<U;K++)for(let S=0;S<g;S++){const s=4*(K*g+S),c=2*(S*U+K);w[s]=i[c],w[s+1]=i[c+1],w[s+3]=-1===i[c]?0:1}return new b.x(_,T,w)}function L(_,C){const a=new y.X;return a.internalFormat=O.VI.RGBA,a.width=C.length/4,a.height=1,a.samplingMode=O.cw.NEAREST,a.wrapMode=O.e8.CLAMP_TO_EDGE,new b.x(_,a,C)}function M(_,C,a,i=1,p=!0){return{u_flipY:p,u_applyTransform:!!_,u_opacity:i,u_transformSpacing:_?_.spacing:o.Z,u_transformGridSize:_?_.size:o.Z,u_targetImageSize:C,u_srcImageSize:a}}function A(_,C){return{u_colormapOffset:C||0,u_colormapMaxIndex:_?_.length/4-1:0}}function j(_,C){return{u_scale:_,u_offset:C}}function B(_){return{u_bandCount:_.bandCount,u_minOutput:_.outMin,u_maxOutput:_.outMax,u_minCutOff:_.minCutOff,u_maxCutOff:_.maxCutOff,u_factor:_.factor,u_useGamma:_.useGamma,u_gamma:_.gamma,u_gammaCorrection:_.gammaCorrection}}function D(_){return{u_hillshadeType:_.hillshadeType,u_sinZcosAs:_.sinZcosAs,u_sinZsinAs:_.sinZsinAs,u_cosZs:_.cosZs,u_weights:_.weights,u_factor:_.factor,u_minValue:_.minValue,u_maxValue:_.maxValue}}function I(_,C){const a=_.gl,i=C.glName,p=new Map;if(null==i)return p;const g=a.getProgramParameter(i,a.ACTIVE_UNIFORMS);let U;for(let W=0;W<g;W++)U=a.getActiveUniform(i,W),U&&p.set(U.name,{location:a.getUniformLocation(i,U.name),info:U});return p}function l(_,C,a){Object.keys(a).forEach(i=>{const p=C.get(i)||C.get(i+"[0]");p&&function h(_,C,a,i){if(null===i||null==a)return!1;const{info:p}=i;switch(p.type){case O.Se.FLOAT:p.size>1?_.setUniform1fv(C,a):_.setUniform1f(C,a);break;case O.Se.FLOAT_VEC2:_.setUniform2fv(C,a);break;case O.Se.FLOAT_VEC3:_.setUniform3fv(C,a);break;case O.Se.FLOAT_VEC4:_.setUniform4fv(C,a);break;case O.Se.FLOAT_MAT3:_.setUniformMatrix3fv(C,a);break;case O.Se.FLOAT_MAT4:_.setUniformMatrix4fv(C,a);break;case O.Se.INT:p.size>1?_.setUniform1iv(C,a):_.setUniform1i(C,a);break;case O.Se.BOOL:_.setUniform1i(C,a?1:0);break;case O.Se.INT_VEC2:case O.Se.BOOL_VEC2:_.setUniform2iv(C,a);break;case O.Se.INT_VEC3:case O.Se.BOOL_VEC3:_.setUniform3iv(C,a);break;case O.Se.INT_VEC4:case O.Se.BOOL_VEC4:_.setUniform4iv(C,a);break;default:return!1}}(_,i,a[i],p)})}function v(_,C,a,i){a.length===i.length&&(i.some(p=>null==p)||a.some(p=>null==p)||a.forEach((p,g)=>{C.setUniform1i(p,g),_.bindTexture(i[g],g)}))}},75948:(Q,G,e)=>{e.d(G,{H:()=>C,c:()=>A,d:()=>D,f:()=>j,r:()=>M,s:()=>L});var o=e(12115),P=e(55369);const O="hidden-form-input";function b(a){return"checked"in a}const y=new WeakMap,d=new WeakSet;function L(a){const{formEl:i}=a;return!!i&&(i.requestSubmit(),!0)}function M(a){a.formEl?.reset()}function A(a){const{el:i,value:p}=a,g=j(a);if(!g||function u(a,i){if((0,o.c)(i.parentElement,"[form]"))return!0;const g="calciteInternalFormComponentRegister";let U=!1;return a.addEventListener(g,W=>{U=W.composedPath().some(T=>d.has(T)),W.stopPropagation()},{once:!0}),i.dispatchEvent(new CustomEvent(g,{bubbles:!0,composed:!0})),U}(g,i))return;a.formEl=g,a.defaultValue=p,b(a)&&(a.defaultChecked=a.checked);const U=(a.onFormReset||B).bind(a);g.addEventListener("reset",U),y.set(a.el,U),d.add(i)}function j(a){const{el:i,form:p}=a;return p?(0,o.q)(i,{id:p}):(0,o.c)(i,"form")}function B(){b(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function D(a){const{el:i,formEl:p}=a;if(!p)return;const g=y.get(i);p.removeEventListener("reset",g),y.delete(i),a.formEl=null,d.delete(i)}const l=a=>{a.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},v=a=>a.removeEventListener("change",l);function _(a,i,p){const{defaultValue:g,disabled:U,form:W,name:T,required:w}=a;i.defaultValue=g,i.disabled=U,i.name=T,i.required=w,i.tabIndex=-1,W?i.setAttribute("form",W):i.removeAttribute("form"),b(a)?(i.checked=a.checked,i.defaultChecked=a.defaultChecked,i.value=a.checked?p||"on":""):i.value=p||"",a.syncHiddenFormInput?.(i)}const C=({component:a})=>(function h(a){const{el:i,formEl:p,name:g,value:U}=a,{ownerDocument:W}=i,T=i.querySelectorAll(`input[slot="${O}"]`);if(!p||!g)return void T.forEach(c=>{v(c),c.remove()});const w=Array.isArray(U)?U:[U],K=[],S=new Set;let s;T.forEach(c=>{const E=w.find(f=>f==c.value);null!=E?(S.add(E),_(a,c,E)):K.push(c)}),w.forEach(c=>{if(S.has(c))return;let E=K.pop();E||(E=W.createElement("input"),E.slot=O),s||(s=W.createDocumentFragment()),s.append(E),E.addEventListener("change",l),_(a,E,c)}),s&&i.append(s),K.forEach(c=>{v(c),c.remove()})}(a),(0,P.h)("slot",{name:O}))},89489:(Q,G,e)=>{e.d(G,{a:()=>b,c:()=>D,d:()=>I,g:()=>v,l:()=>O});var o=e(12115);const P="calciteInternalLabelClick",O="calciteInternalLabelConnected",b="calciteInternalLabelDisconnected",y="calcite-label",d=new WeakMap,u=new WeakMap,L=new WeakMap,M=new WeakMap,A=new WeakSet,j=a=>{const{id:i}=a,p=i&&(0,o.q)(a,{selector:`${y}[for="${i}"]`});if(p)return p;const g=(0,o.c)(a,y);return!g||function B(a,i){let p;const g="custom-element-ancestor-check",U=T=>{T.stopImmediatePropagation();const w=T.composedPath();p=w.slice(w.indexOf(i),w.indexOf(a))};return a.addEventListener(g,U,{once:!0}),i.dispatchEvent(new CustomEvent(g,{composed:!0,bubbles:!0})),a.removeEventListener(g,U),p.filter(T=>T!==i&&T!==a).filter(T=>T.tagName?.includes("-")).length>0}(g,a)?null:g};function D(a){const i=j(a.el);if(u.has(i)&&i===a.labelEl||!i&&A.has(a))return;const p=C.bind(a);if(i){a.labelEl=i;const g=d.get(i)||[];g.push(a),d.set(i,g.sort(l)),u.has(a.labelEl)||(u.set(a.labelEl,h),a.labelEl.addEventListener(P,h)),A.delete(a),document.removeEventListener(O,L.get(a)),M.set(a,p),document.addEventListener(b,p)}else A.has(a)||(p(),document.removeEventListener(b,M.get(a)))}function I(a){if(A.delete(a),document.removeEventListener(O,L.get(a)),document.removeEventListener(b,M.get(a)),L.delete(a),M.delete(a),!a.labelEl)return;const i=d.get(a.labelEl);1===i.length&&(a.labelEl.removeEventListener(P,u.get(a.labelEl)),u.delete(a.labelEl)),d.set(a.labelEl,i.filter(p=>p!==a).sort(l)),a.labelEl=null}function l(a,i){return(0,o.y)(a.el,i.el)?-1:1}function v(a){return a.label||a.labelEl?.textContent?.trim()||""}function h(a){const i=a.detail.sourceEvent.target,p=d.get(this),g=p.find(T=>T.el===i);if(p.includes(g))return;const W=p[0];W.disabled||W.onLabelClick(a)}function _(){A.has(this)&&D(this)}function C(){A.add(this);const a=L.get(this)||_.bind(this);L.set(this,a),document.addEventListener(O,a)}},84240:(Q,G,e)=>{e.d(G,{d:()=>B});var o=e(15861),P=e(55369),O=e(16083),b=e(67771),y=e(31558),d=e(12115),u=e(45481);const j=(0,P.GH)(class extends P.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=(0,y.c)("resize",()=>this.handleResize()),this.handleDefaultSlotChange=D=>{this.hasContent=(0,d.w)(D)},this.storeLoaderEl=D=>{this.loaderEl=D,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){(0,b.u)(this,this.effectiveLocale)}connectedCallback(){(0,O.c)(this),(0,b.c)(this),this.resizeObserver?.observe(this.el)}componentWillLoad(){var D=this;return(0,o.Z)(function*(){yield(0,b.s)(D)})()}disconnectedCallback(){(0,O.d)(this),(0,b.d)(this),this.resizeObserver?.disconnect()}render(){const{hasContent:D,loading:I,messages:l}=this;return(0,P.h)("div",{class:"scrim"},I?(0,P.h)("calcite-loader",{label:l.loading,scale:this.loaderScale,ref:this.storeLoaderEl}):null,(0,P.h)("div",{class:"content",hidden:!D},(0,P.h)("slot",{onSlotchange:this.handleDefaultSlotChange})))}getScale(D){return D<72?"s":D>=480?"l":"m"}handleResize(){const{loaderEl:D,el:I}=this;D&&(this.loaderScale=this.getScale(Math.min(I.clientHeight,I.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host{position:absolute;inset:0px;z-index:var(--calcite-app-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]}]);function B(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(I=>{switch(I){case"calcite-scrim":customElements.get(I)||customElements.define(I,j);break;case"calcite-loader":customElements.get(I)||(0,u.d)()}})}B()},44160:(Q,G,e)=>{e.d(G,{C:()=>P,I:()=>y,M:()=>b,S:()=>O,a:()=>j,g:()=>M,u:()=>A});var o=e(55369);const P={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",contentBottom:"content-bottom",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container",dragContainer:"drag-container"},O={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},b=0,y={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank",close:"x"},d="calcite-list",u="calcite-list-item-group",L="calcite-list-item";function M(B){const D=B.assignedElements({flatten:!0}),I=D.filter(h=>h?.matches(u)).map(h=>Array.from(h.querySelectorAll(L))).reduce((h,_)=>[...h,..._],[]),l=D.filter(h=>h?.matches(L));return[...D.filter(h=>h?.matches(d)).map(h=>Array.from(h.querySelectorAll(L))).reduce((h,_)=>[...h,..._],[]),...I,...l]}function A(B){B.forEach(D=>{D.setPosition=B.indexOf(D)+1,D.setSize=B.length})}function j(B,D=!1){return o.Z5.isBrowser?document.evaluate(D?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",B,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);