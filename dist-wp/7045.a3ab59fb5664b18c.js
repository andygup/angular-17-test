"use strict";(self.webpackChunkangular_17_test=self.webpackChunkangular_17_test||[]).push([[7045],{4460:(jt,mt,x)=>{x.d(mt,{e:()=>ot});var G,K,R=x(90104),k={exports:{}};G=k,void 0!==(K=function(){function z(i,h,d){d=d||2;var v,u,M,T,Z,q,pt,Dt=h&&h.length,vt=Dt?h[0]*d:i.length,ht=$(i,0,vt,d,!0),nt=[];if(!ht||ht.next===ht.prev)return nt;if(Dt&&(ht=function V(i,h,d,v){var u,M,T,Z=[];for(u=0,M=h.length;u<M;u++)(T=$(i,h[u]*v,u<M-1?h[u+1]*v:i.length,v,!1))===T.next&&(T.steiner=!0),Z.push(Zt(T));for(Z.sort(S),u=0;u<Z.length;u++)d=F(d=O(Z[u],d),d.next);return d}(i,h,ht,d)),i.length>80*d){v=M=i[0],u=T=i[1];for(var tt=d;tt<vt;tt+=d)(Z=i[tt])<v&&(v=Z),(q=i[tt+1])<u&&(u=q),Z>M&&(M=Z),q>T&&(T=q);pt=0!==(pt=Math.max(M-v,T-u))?1/pt:0}return J(ht,nt,d,v,u,pt),nt}function $(i,h,d,v,u){var M,T;if(u===Kt(i,h,d,v)>0)for(M=h;M<d;M+=v)T=rt(M,i[M],i[M+1],T);else for(M=d-v;M>=h;M-=v)T=rt(M,i[M],i[M+1],T);if(T&&wt(T,T.next)){var Z=T.next;bt(T),T=Z}return T}function F(i,h){if(!i)return i;h||(h=i);var d,v=i;do{if(d=!1,v.steiner||!wt(v,v.next)&&0!==et(v.prev,v,v.next))v=v.next;else{var u=v.prev;if(bt(v),(v=h=u)===v.next)break;d=!0}}while(d||v!==h);return h}function J(i,h,d,v,u,M,T){if(i){!T&&M&&function Q(i,h,d,v){var u=i;do{null===u.z&&(u.z=ut(u.x,u.y,h,d,v)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==i);u.prevZ.nextZ=null,u.prevZ=null,function gt(i){var h,d,v,u,M,T,Z,q,pt=1;do{for(d=i,i=null,M=null,T=0;d;){for(T++,v=d,Z=0,h=0;h<pt&&(Z++,v=v.nextZ);h++);for(q=pt;Z>0||q>0&&v;)0!==Z&&(0===q||!v||d.z<=v.z)?(u=d,d=d.nextZ,Z--):(u=v,v=v.nextZ,q--),M?M.nextZ=u:i=u,u.prevZ=M,M=u;d=v}M.nextZ=null,pt*=2}while(T>1)}(u)}(i,v,u,M);for(var Z,q,pt=i;i.prev!==i.next;)if(Z=i.prev,q=i.next,M?P(i,v,u,M):L(i))h.push(Z.i/d),h.push(i.i/d),h.push(q.i/d),bt(i),i=q.next,pt=q.next;else if((i=q)===pt){T?1===T?J(i=N(F(i),h,d),h,d,v,u,M,2):2===T&&j(i,h,d,v,u,M):J(F(i),h,d,v,u,M,1);break}}}function L(i){var h=i.prev,d=i,v=i.next;if(et(h,d,v)>=0)return!1;for(var u=i.next.next;u!==i.prev;){if(Tt(h.x,h.y,d.x,d.y,v.x,v.y,u.x,u.y)&&et(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function P(i,h,d,v){var u=i.prev,M=i,T=i.next;if(et(u,M,T)>=0)return!1;for(var pt=u.x>M.x?u.x>T.x?u.x:T.x:M.x>T.x?M.x:T.x,Dt=u.y>M.y?u.y>T.y?u.y:T.y:M.y>T.y?M.y:T.y,vt=ut(u.x<M.x?u.x<T.x?u.x:T.x:M.x<T.x?M.x:T.x,u.y<M.y?u.y<T.y?u.y:T.y:M.y<T.y?M.y:T.y,h,d,v),ht=ut(pt,Dt,h,d,v),nt=i.prevZ,tt=i.nextZ;nt&&nt.z>=vt&&tt&&tt.z<=ht;){if(nt!==i.prev&&nt!==i.next&&Tt(u.x,u.y,M.x,M.y,T.x,T.y,nt.x,nt.y)&&et(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,tt!==i.prev&&tt!==i.next&&Tt(u.x,u.y,M.x,M.y,T.x,T.y,tt.x,tt.y)&&et(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;nt&&nt.z>=vt;){if(nt!==i.prev&&nt!==i.next&&Tt(u.x,u.y,M.x,M.y,T.x,T.y,nt.x,nt.y)&&et(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;tt&&tt.z<=ht;){if(tt!==i.prev&&tt!==i.next&&Tt(u.x,u.y,M.x,M.y,T.x,T.y,tt.x,tt.y)&&et(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function N(i,h,d){var v=i;do{var u=v.prev,M=v.next.next;!wt(u,M)&&Rt(u,v,v.next,M)&&xt(u,M)&&xt(M,u)&&(h.push(u.i/d),h.push(v.i/d),h.push(M.i/d),bt(v),bt(v.next),v=i=M),v=v.next}while(v!==i);return F(v)}function j(i,h,d,v,u,M){var T=i;do{for(var Z=T.next.next;Z!==T.prev;){if(T.i!==Z.i&&Ct(T,Z)){var q=Lt(T,Z);return T=F(T,T.next),q=F(q,q.next),J(T,h,d,v,u,M),void J(q,h,d,v,u,M)}Z=Z.next}T=T.next}while(T!==i)}function S(i,h){return i.x-h.x}function E(i){if(i.next.prev===i)return i;let h=i;for(;;){const d=h.next;if(d.prev===h||d===h||d===i)break;h=d}return h}function O(i,h){var d=function I(i,h){var d,v=h,u=i.x,M=i.y,T=-1/0;do{if(M<=v.y&&M>=v.next.y&&v.next.y!==v.y){var Z=v.x+(M-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(Z<=u&&Z>T){if(T=Z,Z===u){if(M===v.y)return v;if(M===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(u===T)return d;var q,pt=d,Dt=d.x,vt=d.y,ht=1/0;v=d;do{u>=v.x&&v.x>=Dt&&u!==v.x&&Tt(M<vt?u:T,M,Dt,vt,M<vt?T:u,M,v.x,v.y)&&(q=Math.abs(M-v.y)/(u-v.x),xt(v,i)&&(q<ht||q===ht&&(v.x>d.x||v.x===d.x&&Y(d,v)))&&(d=v,ht=q)),v=v.next}while(v!==pt);return d}(i,h);if(!d)return h;var v=Lt(d,i),u=F(d,d.next);let M=E(v);return F(M,M.next),u=E(u),E(h===d?u:h)}function Y(i,h){return et(i.prev,i,h.prev)<0&&et(h.next,i,i.next)<0}function ut(i,h,d,v,u){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-d)*u)|i<<8))|i<<4))|i<<2))|i<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-v)*u)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function Zt(i){var h=i,d=i;do{(h.x<d.x||h.x===d.x&&h.y<d.y)&&(d=h),h=h.next}while(h!==i);return d}function Tt(i,h,d,v,u,M,T,Z){return(u-T)*(h-Z)-(i-T)*(M-Z)>=0&&(i-T)*(v-Z)-(d-T)*(h-Z)>=0&&(d-T)*(M-Z)-(u-T)*(v-Z)>=0}function Ct(i,h){return i.next.i!==h.i&&i.prev.i!==h.i&&!function St(i,h){var d=i;do{if(d.i!==i.i&&d.next.i!==i.i&&d.i!==h.i&&d.next.i!==h.i&&Rt(d,d.next,i,h))return!0;d=d.next}while(d!==i);return!1}(i,h)&&(xt(i,h)&&xt(h,i)&&function Et(i,h){var d=i,v=!1,u=(i.x+h.x)/2,M=(i.y+h.y)/2;do{d.y>M!=d.next.y>M&&d.next.y!==d.y&&u<(d.next.x-d.x)*(M-d.y)/(d.next.y-d.y)+d.x&&(v=!v),d=d.next}while(d!==i);return v}(i,h)&&(et(i.prev,i,h.prev)||et(i,h.prev,h))||wt(i,h)&&et(i.prev,i,i.next)>0&&et(h.prev,h,h.next)>0)}function et(i,h,d){return(h.y-i.y)*(d.x-h.x)-(h.x-i.x)*(d.y-h.y)}function wt(i,h){return i.x===h.x&&i.y===h.y}function Rt(i,h,d,v){var u=at(et(i,h,d)),M=at(et(i,h,v)),T=at(et(d,v,i)),Z=at(et(d,v,h));return u!==M&&T!==Z||!(0!==u||!H(i,d,h))||!(0!==M||!H(i,v,h))||!(0!==T||!H(d,i,v))||!(0!==Z||!H(d,h,v))}function H(i,h,d){return h.x<=Math.max(i.x,d.x)&&h.x>=Math.min(i.x,d.x)&&h.y<=Math.max(i.y,d.y)&&h.y>=Math.min(i.y,d.y)}function at(i){return i>0?1:i<0?-1:0}function xt(i,h){return et(i.prev,i,i.next)<0?et(i,h,i.next)>=0&&et(i,i.prev,h)>=0:et(i,h,i.prev)<0||et(i,i.next,h)<0}function Lt(i,h){var d=new Ut(i.i,i.x,i.y),v=new Ut(h.i,h.x,h.y),u=i.next,M=h.prev;return i.next=h,h.prev=i,d.next=u,u.prev=d,v.next=d,d.prev=v,M.next=v,v.prev=M,v}function rt(i,h,d,v){var u=new Ut(i,h,d);return v?(u.next=v.next,u.prev=v,v.next.prev=u,v.next=u):(u.prev=u,u.next=u),u}function bt(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ut(i,h,d){this.i=i,this.x=h,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Kt(i,h,d,v){for(var u=0,M=h,T=d-v;M<d;M+=v)u+=(i[T]-i[M])*(i[M+1]+i[T+1]),T=M;return u}return z.deviation=function(i,h,d,v){var u=h&&h.length,T=Math.abs(Kt(i,0,u?h[0]*d:i.length,d));if(u)for(var Z=0,q=h.length;Z<q;Z++)T-=Math.abs(Kt(i,h[Z]*d,Z<q-1?h[Z+1]*d:i.length,d));var vt=0;for(Z=0;Z<v.length;Z+=3){var ht=v[Z]*d,nt=v[Z+1]*d,tt=v[Z+2]*d;vt+=Math.abs((i[ht]-i[tt])*(i[nt+1]-i[ht+1])-(i[ht]-i[nt])*(i[tt+1]-i[ht+1]))}return 0===T&&0===vt?0:Math.abs((vt-T)/T)},z.flatten=function(i){for(var h=i[0][0].length,d={vertices:[],holes:[],dimensions:h},v=0,u=0;u<i.length;u++){for(var M=0;M<i[u].length;M++)for(var T=0;T<h;T++)d.vertices.push(i[u][M][T]);u>0&&d.holes.push(v+=i[u-1].length)}return d},z}())&&(G.exports=K);const ot=(0,R.g)(k.exports)},65168:(jt,mt,x)=>{x.d(mt,{Z:()=>S});var P,R=x(50484),G=x(89317),X=x(34222),K=x(4703),k=x(80543),ot=x(73018),z=x(10141),$=x(1535),F=x(58190),J=x(70981),L=x(96262);const N="esri.geometry.support.MeshComponent",j=K.Z.getLogger(N);let V=P=class extends G.wq{static from(E){return(0,$.TJ)(P,E)}constructor(E){super(E),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(E){return(0,L.X)(E,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},j)}castMaterial(E){return(0,$.TJ)(E&&"object"==typeof E&&("metallic"in E||"roughness"in E||"metallicRoughnessTexture"in E)?J.Z:F.Z,E)}clone(){return new P({faces:(0,X.d9)(this.faces),shading:this.shading,material:(0,X.d9)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(E,O){const I={faces:(0,X.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(E,O):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new P(I)}get memoryUsage(){let E=0;return null!=this.faces&&(E+=this.faces.byteLength),null!=this.material&&(E+=this.material.memoryUsage),E}};(0,R._)([(0,k.Cb)({json:{write:!0}})],V.prototype,"faces",void 0),(0,R._)([(0,ot.p)("faces")],V.prototype,"castFaces",null),(0,R._)([(0,k.Cb)({type:F.Z,json:{write:!0}})],V.prototype,"material",void 0),(0,R._)([(0,ot.p)("material")],V.prototype,"castMaterial",null),(0,R._)([(0,k.Cb)()],V.prototype,"name",void 0),(0,R._)([(0,k.Cb)({type:String,json:{write:!0}})],V.prototype,"shading",void 0),(0,R._)([(0,k.Cb)({type:Boolean})],V.prototype,"trustSourceNormals",void 0),V=P=(0,R._)([(0,z.j)(N)],V);const S=V},58190:(jt,mt,x)=>{x.d(mt,{Z:()=>N});var L,R=x(50484),G=x(66599),X=x(89317),K=x(80543),$=(x(1535),x(57678),x(14007),x(10141)),F=x(19277),J=x(91139);let P=L=class extends X.wq{constructor(j){super(j),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(j,V){const S=null!=j?j.get(this):null;if(S)return S;const E=new L(this.clonePropertiesWithDeduplication(V));return j?.set(this,E),E}clonePropertiesWithDeduplication(j){return{color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(j),normalTexture:this.normalTexture?.cloneWithDeduplication(j),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let j=0;return j+=null!=this.color?16:0,null!=this.colorTexture&&(j+=this.colorTexture.memoryUsage),j+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(j+=this.normalTexture.memoryUsage),j+=null!=this.normalTextureTransform?20:0,j}};(0,R._)([(0,K.Cb)({type:G.Z,json:{write:!0}})],P.prototype,"color",void 0),(0,R._)([(0,K.Cb)({type:F.Z,json:{write:!0}})],P.prototype,"colorTexture",void 0),(0,R._)([(0,K.Cb)({type:J.Z,json:{write:!0}})],P.prototype,"colorTextureTransform",void 0),(0,R._)([(0,K.Cb)({type:F.Z,json:{write:!0}})],P.prototype,"normalTexture",void 0),(0,R._)([(0,K.Cb)({type:J.Z,json:{write:!0}})],P.prototype,"normalTextureTransform",void 0),(0,R._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaMode",void 0),(0,R._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaCutoff",void 0),(0,R._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"doubleSided",void 0),P=L=(0,R._)([(0,$.j)("esri.geometry.support.MeshMaterial")],P);const N=P},70981:(jt,mt,x)=>{x.d(mt,{Z:()=>N});var L,R=x(50484),G=x(66599),X=x(80543),z=(x(1535),x(57678),x(14007),x(10141)),$=x(58190),F=x(19277),J=x(91139);let P=L=class extends $.Z{constructor(j){super(j),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(j,V){const S=null!=j?j.get(this):null;if(S)return S;const E=new L(this.clonePropertiesWithDeduplication(V));return j?.set(this,E),E}getMemoryUsage(){let j=super.getMemoryUsage();return j+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(j+=this.emissiveTexture.memoryUsage),j+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(j+=this.occlusionTexture.memoryUsage),j+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(j+=this.metallicRoughnessTexture.memoryUsage),j+=null!=this.metallicRoughnessTextureTransform?20:0,j}clonePropertiesWithDeduplication(j){return{...super.clonePropertiesWithDeduplication(j),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(j),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(j),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(j),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};(0,R._)([(0,X.Cb)({type:G.Z,json:{write:!0}})],P.prototype,"emissiveColor",void 0),(0,R._)([(0,X.Cb)({type:F.Z,json:{write:!0}})],P.prototype,"emissiveTexture",void 0),(0,R._)([(0,X.Cb)({type:J.Z,json:{write:!0}})],P.prototype,"emissiveTextureTransform",void 0),(0,R._)([(0,X.Cb)({type:F.Z,json:{write:!0}})],P.prototype,"occlusionTexture",void 0),(0,R._)([(0,X.Cb)({type:J.Z,json:{write:!0}})],P.prototype,"occlusionTextureTransform",void 0),(0,R._)([(0,X.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"metallic",void 0),(0,R._)([(0,X.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"roughness",void 0),(0,R._)([(0,X.Cb)({type:F.Z,json:{write:!0}})],P.prototype,"metallicRoughnessTexture",void 0),(0,R._)([(0,X.Cb)({type:J.Z,json:{write:!0}})],P.prototype,"metallicRoughnessTextureTransform",void 0),P=L=(0,R._)([(0,z.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],P);const N=P},19277:(jt,mt,x)=>{x.d(mt,{Z:()=>S});var P,R=x(50484),X=(x(14007),x(26517)),K=x(89317),k=x(80543),ot=x(1535),$=(x(57678),x(62185)),F=x(10141),J=x(7547),L=x(19677);const N=new WeakMap;let j=0,V=P=class extends K.wq{constructor(E){super(E),this.wrap="repeat"}get url(){return this._get("url")||null}set url(E){this._set("url",E),E&&this._set("data",null)}get data(){return this._get("data")||null}set data(E){this._set("data",E),E&&this._set("url",null)}writeData(E,O,I,Y){if(E instanceof HTMLImageElement){const Q={type:"image-element",src:(0,L.t)(E.src,Y),crossOrigin:E.crossOrigin};O[I]=Q}else if(E instanceof HTMLCanvasElement){const Q=E.getContext("2d").getImageData(0,0,E.width,E.height),gt={type:"canvas-element",imageData:this._encodeImageData(Q)};O[I]=gt}else if(E instanceof HTMLVideoElement){const Q={type:"video-element",src:(0,L.t)(E.src,Y),autoplay:E.autoplay,loop:E.loop,muted:E.muted,crossOrigin:E.crossOrigin,preload:E.preload};O[I]=Q}else if(E instanceof ImageData){const Q={type:"image-data",imageData:this._encodeImageData(E)};O[I]=Q}}readData(E){switch(E.type){case"image-element":{const O=new Image;return O.src=E.src,O.crossOrigin=E.crossOrigin,O}case"canvas-element":{const O=this._decodeImageData(E.imageData),I=document.createElement("canvas");return I.width=O.width,I.height=O.height,I.getContext("2d").putImageData(O,0,0),I}case"image-data":return this._decodeImageData(E.imageData);case"video-element":{const O=document.createElement("video");return O.src=E.src,O.crossOrigin=E.crossOrigin,O.autoplay=E.autoplay,O.loop=E.loop,O.muted=E.muted,O.preload=E.preload,O}default:return}}get transparent(){const E=this.data,O=this.url;if(E instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(E.getContext("2d").getImageData(0,0,E.width,E.height));if(E instanceof ImageData)return this._imageDataContainsTransparent(E);if(O){const I=O.substr(O.length-4,4).toLowerCase(),Y=O.substr(0,15).toLocaleLowerCase();if(".png"===I||"data:image/png;"===Y)return!0}return!1}set transparent(E){this._overrideIfSome("transparent",E)}get contentHash(){const E="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",O=(I="")=>`d:${I},t:${this.transparent},w:${E}`;return null!=this.url?O(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?O(this.data.src):(N.has(this.data)||N.set(this.data,++j),O(N.get(this.data))):O()}get memoryUsage(){let E=0;if(E+=null!=this.url?this.url.length:0,null!=this.data){const O=this.data;"data"in O?E+=O.data.byteLength:O instanceof HTMLImageElement?E+=O.naturalWidth*O.naturalHeight*3:O instanceof HTMLCanvasElement&&(E+=O.width*O.height*3)}return E}clone(){const E={url:this.url,data:this.data,wrap:this._cloneWrap()};return new P(E)}cloneWithDeduplication(E){const O=E.get(this);if(O)return O;const I=this.clone();return E.set(this,I),I}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(E){let O="";for(let I=0;I<E.data.length;I++)O+=String.fromCharCode(E.data[I]);return{data:btoa(O),width:E.width,height:E.height}}_decodeImageData(E){const O=atob(E.data),I=new Uint8ClampedArray(O.length);for(let Y=0;Y<O.length;Y++)I[Y]=O.charCodeAt(Y);return(0,X.Jl)(I,E.width,E.height)}_imageDataContainsTransparent(E){for(let O=3;O<E.data.length;O+=4)if(255!==E.data[O])return!0;return!1}static from(E){return"string"==typeof E?new P({url:E}):E instanceof HTMLImageElement||E instanceof HTMLCanvasElement||E instanceof ImageData||E instanceof HTMLVideoElement?new P({data:E}):(0,ot.TJ)(P,E)}};(0,R._)([(0,k.Cb)({type:String,json:{write:L.w}})],V.prototype,"url",null),(0,R._)([(0,k.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,k.Cb)()],V.prototype,"data",null),(0,R._)([(0,J.c)("data")],V.prototype,"writeData",null),(0,R._)([(0,$.r)("data")],V.prototype,"readData",null),(0,R._)([(0,k.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],V.prototype,"transparent",null),(0,R._)([(0,k.Cb)({json:{write:!0}})],V.prototype,"wrap",void 0),(0,R._)([(0,k.Cb)({readOnly:!0})],V.prototype,"contentHash",null),V=P=(0,R._)([(0,F.j)("esri.geometry.support.MeshTexture")],V);const S=V},91139:(jt,mt,x)=>{x.d(mt,{Z:()=>J});var R=x(50484),G=x(25387),X=x(89317),K=x(80543),$=(x(1535),x(57678),x(14007),x(10141));let F=class extends((0,G.J)(X.wq)){constructor(L){super(L),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,R._)([(0,K.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"offset",void 0),(0,R._)([(0,K.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],F.prototype,"rotation",void 0),(0,R._)([(0,K.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"scale",void 0),F=(0,R._)([(0,$.j)("esri.geometry.support.MeshTextureTransform")],F);const J=F},96262:(jt,mt,x)=>{x.d(mt,{Q:()=>L,X:()=>N});var $,R=x(50484),G=x(89317),X=x(34222),K=x(4703),k=x(80543),ot=x(73018),z=x(10141);const F="esri.geometry.support.MeshVertexAttributes",J=K.Z.getLogger(F);let L=$=class extends G.wq{constructor(S){super(S),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(S){return N(S,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},J)}castPosition(S){return S&&S instanceof Float32Array&&J.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),N(S,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},J)}castUv(S){return N(S,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},J)}castNormal(S){return N(S,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},J)}castTangent(S){return N(S,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},J)}clone(){const S={position:(0,X.d9)(this.position),uv:(0,X.d9)(this.uv),normal:(0,X.d9)(this.normal),tangent:(0,X.d9)(this.tangent),color:(0,X.d9)(this.color)};return new $(S)}clonePositional(){const S={position:(0,X.d9)(this.position),normal:(0,X.d9)(this.normal),tangent:(0,X.d9)(this.tangent),uv:this.uv,color:this.color};return new $(S)}get memoryUsage(){let S=0;return S+=this.position.byteLength,null!=this.uv&&(S+=this.uv.byteLength),null!=this.normal&&(S+=this.normal.byteLength),null!=this.tangent&&(S+=this.tangent.byteLength),null!=this.color&&(S+=this.color.byteLength),S}};function P(S,E,O,I){const{loggerTag:Y,stride:Q}=E;return S.length%Q!=0?(I.error(Y,`Invalid array length, expected a multiple of ${Q}`),new O([])):S}function N(S,E,O,I,Y){if(!S)return S;if(S instanceof E)return P(S,I,E,Y);for(const Q of O)if(S instanceof Q)return P(new E(S),I,E,Y);if(Array.isArray(S))return P(new E(S),I,E,Y);{const Q=O.map(gt=>`'${gt.name}'`);return Y.error(`Failed to set property, expected one of ${Q}, but got ${S.constructor.name}`),new E([])}}function j(S,E,O){E[O]=function V(S){const E=new Array(S.length);for(let O=0;O<S.length;O++)E[O]=S[O];return E}(S)}(0,R._)([(0,k.Cb)({json:{write:j}})],L.prototype,"color",void 0),(0,R._)([(0,ot.p)("color")],L.prototype,"castColor",null),(0,R._)([(0,k.Cb)({nonNullable:!0,json:{write:j}})],L.prototype,"position",void 0),(0,R._)([(0,ot.p)("position")],L.prototype,"castPosition",null),(0,R._)([(0,k.Cb)({json:{write:j}})],L.prototype,"uv",void 0),(0,R._)([(0,ot.p)("uv")],L.prototype,"castUv",null),(0,R._)([(0,k.Cb)({json:{write:j}})],L.prototype,"normal",void 0),(0,R._)([(0,ot.p)("normal")],L.prototype,"castNormal",null),(0,R._)([(0,k.Cb)({json:{write:j}})],L.prototype,"tangent",void 0),(0,R._)([(0,ot.p)("tangent")],L.prototype,"castTangent",null),L=$=(0,R._)([(0,z.j)(F)],L)},59614:(jt,mt,x)=>{x.d(mt,{d:()=>X});var R=x(55117),G=x(58248);function X($,F,J){const L=Array.isArray($),P=L?$.length/F:$.byteLength/(4*F),N=L?$:new Uint32Array($,0,P*F),j=J?.minReduction??0,V=J?.originalIndices||null,S=V?V.length:0,E=J?.componentOffsets||null;let O=0;if(E)for(let H=0;H<E.length-1;H++){const at=E[H+1]-E[H];at>O&&(O=at)}else O=P;const I=Math.floor(1.1*O)+1;(null==z||z.length<2*I)&&(z=new Uint32Array((0,R.Sf)(2*I)));for(let H=0;H<2*I;H++)z[H]=0;let Y=0;const Q=!!E&&!!V,gt=Q?S:P;let ut=(0,G.$z)(P);const Zt=new Uint32Array(S);let Ct=0!==j?Math.ceil(7.84*1.96/(j*j)*j*(1-j)):gt,et=1,wt=E?E[1]:gt;for(let H=0;H<gt;H++){if(H===Ct){const rt=1-Y/H;if(rt+1.96*Math.sqrt(rt*(1-rt)/H)<j)return null;Ct*=2}if(H===wt){for(let rt=0;rt<2*I;rt++)z[rt]=0;if(V)for(let rt=E[et-1];rt<E[et];rt++)Zt[rt]=ut[V[rt]];wt=E[++et]}const at=Q?V[H]:H,St=at*F,xt=ot(N,St,F);let Et=xt%I,Lt=Y;for(;0!==z[2*Et+1];){if(z[2*Et]===xt){const rt=z[2*Et+1]-1;if(K(N,St,rt*F,F)){Lt=ut[rt];break}}Et++,Et>=I&&(Et-=I)}Lt===Y&&(z[2*Et]=xt,z[2*Et+1]=at+1,Y++),ut[at]=Lt}if(0!==j&&1-Y/P<j)return null;if(Q){for(let H=E[et-1];H<Zt.length;H++)Zt[H]=ut[V[H]];ut=(0,G.mi)(Zt)}const Rt=L?new Array(Y):new Uint32Array(Y*F);Y=0;for(let H=0;H<gt;H++)ut[H]===Y&&(k(N,(Q?V[H]:H)*F,Rt,Y*F,F),Y++);if(V&&!Q){const H=new Uint32Array(S);for(let at=0;at<H.length;at++)H[at]=ut[V[at]];ut=(0,G.mi)(H)}return{buffer:Array.isArray(Rt)?Rt:Rt.buffer,indices:ut,uniqueCount:Y}}function K($,F,J,L){for(let P=0;P<L;P++)if($[F+P]!==$[J+P])return!1;return!0}function k($,F,J,L,P){for(let N=0;N<P;N++)J[L+N]=$[F+N]}function ot($,F,J){let L=0;for(let P=0;P<J;P++)L=$[F+P]+L|0,L=L+(L<<11)+(L>>>2)|0;return L>>>0}let z=null},17045:(jt,mt,x)=>{x.r(mt),x.d(mt,{assetMapFromAssetMapsJSON:()=>He,extractMesh:()=>Ve,meshFeatureSetFromJSON:()=>$r});var R=x(35458),G=x(4703),X=x(8611),K=x(8554),k=x(26894),ot=x(15861),z=x(50484),$=x(57964),F=x(67016),J=x(47868),L=x(79412),P=x(77675),N=x(80543),E=(x(1535),x(57678),x(14007),x(10141)),O=x(32184),I=x(85039),Y=x(5391),Q=x(52217),gt=x(65168);class ut extends $.Z{constructor(){super("mesh-not-loaded","Mesh must be loaded before applying operations")}}class Zt extends $.Z{constructor(){super("component-not-found","Provided component is not part of the list of components")}}class Tt extends $.Z{constructor(){super("invalid-polygon","expected polygon to be a Polygon instance")}}class Ct extends $.Z{constructor(){super("invalid-input:location","Expected location to be a Point instance")}}class et extends $.Z{constructor(){super("invalid-input:no-layer","A layer is needed to convert the files")}}class wt extends $.Z{constructor(){super("invalid-input:no-model","No supported model found")}}class Rt extends $.Z{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}var H=x(99279),at=x(16996),St=x(81255),xt=x(74291),Et=x(96262),Lt=x(4460),rt=x(48621),bt=x(54746),Ut=x(93404),Kt=x(58248),i=x(59614),d=(x(2189),x(55117)),v=x(49602),u=x(43589),M=x(59287);x(80914),x(28433),x(55362);const vt=(0,M.Ue)();function ee(t,e,r,s,c,y,_){c*=3;for(let D=0;D<y;++D){const C=t[e];s[c++]=C[0],s[c++]=C[1],s[c++]=_?C[2]:0,e+=r}return c/3}function Ye(t,e,r){if(e){const c=function Dt(t,e,r){const s=function pt(t,e,r,s){const c=Array.isArray(e[0])?(_,D)=>e[_][D]:(_,D)=>e[3*_+D],y=s?(0,v.c9)(s)/(0,v._R)(s):1;return(0,M.zu)(t,(_,D)=>(0,u.s)(_,c(D,0)*y,c(D,1)*y,c(D,2)),r)}(vt,t,e,r)?(0,M.mJ)(vt):[0,0,1];return Math.abs(s[2])>Math.cos((0,d.Vl)(80))?rt.R.Z:Math.abs(s[1])>Math.abs(s[0])?rt.R.Y:rt.R.X}(t,t.length-1,r);if(c===rt.R.X)return!(0,bt.bu)(t,rt.R.Y,rt.R.Z);if(c===rt.R.Y)return!(0,bt.bu)(t,rt.R.X,rt.R.Z)}return!(0,bt.bu)(t,rt.R.X,rt.R.Y)}var re,t;(t=re||(re={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var kt=x(92859);let ye=null;function ne(t,e){let r=1/0,s=1/0,c=1/0,y=-1/0,_=-1/0,D=-1/0;const C=t.length;let A=0;for(;A<C;){const w=t[A++],U=t[A++],W=t[A++];r=Math.min(r,w),s=Math.min(s,U),c=Math.min(c,W),y=Math.max(y,w),_=Math.max(_,U),D=Math.max(D,W)}return new k.Z({xmin:r,ymin:s,zmin:c,xmax:y,ymax:_,zmax:D,spatialReference:e})}var ke=x(83639);function Ot(t,e,r,s=0){oe[0]=t.x,oe[1]=t.y;const c=t.z;return oe[2]=void 0!==c?c:s,(0,ke.projectBuffer)(oe,t.spatialReference,0,e,r,0,1)}const oe=(0,K.c)();var It=x(5879);const qt="esri.geometry.support.meshUtils.centerAt";const Ee=(0,K.c)(),_e=(0,K.c)(),or=(0,K.c)();x(98930),x(66476);var Me=x(6785);function le(){return le=(0,ot.Z)(function*(t,e,r){const{source:s}=e,{loadGLTFMesh:c}=yield(0,L.Hl)(Promise.all([x.e(7528),x.e(7599)]).then(x.bind(x,27599)),r),y=yield function ar(t,e){return ce.apply(this,arguments)}(s,r);(0,L.k_)(r);const _=c(new I.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),y.url,{resolveFile:ir(y),requestFile:void 0,useTransform:!0,signal:r?.signal,expectedType:y.type});_.then(()=>y.dispose(),()=>y.dispose());const{vertexAttributes:D,components:C}=yield _;t.vertexAttributes=D,t.components=C}),le.apply(this,arguments)}function ir(t){const e=(0,Me.Yd)(t.url);return r=>{const s=(0,Me.PF)(r,e,e),c=s?s.replace(/^ *\.\//,""):null;return(c?t.files.get(c):null)??r}}function ce(){return ce=(0,ot.Z)(function*(t,e){if(Array.isArray(t)){if(!t.length)throw new $.Z("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?function cr(t){return Ce(t.map(e=>({name:e.name,mimeType:e.type,source:Ae(e)})))}(t):function ur(t,e){return pe.apply(this,arguments)}(t,e)}return Ae(t)}),ce.apply(this,arguments)}function ue(){return ue=(0,ot.Z)(function*(t,e){const{parts:r,assetMimeType:s,assetName:c}=t;if(1===r.length)return new Nt(r[0].partUrl);const y=yield t.toBlob(e);return(0,L.k_)(e),Nt.fromBlob(y,Oe(c,s))}),ue.apply(this,arguments)}function Ae(t){return Nt.fromBlob(t,Oe(t.name,t.type))}function pe(){return pe=(0,ot.Z)(function*(t,e){const r=yield(0,L.OT)(t.map(function(){var s=(0,ot.Z)(function*(c){const y=yield function lr(t,e){return ue.apply(this,arguments)}(c);return(0,L.k_)(e),{name:c.assetName,mimeType:c.assetMimeType,source:y}});return function(c){return s.apply(this,arguments)}}()));if((0,L.Hc)(e))throw r.forEach(s=>s.source.dispose()),(0,L.zE)();return Ce(r)}),pe.apply(this,arguments)}x(15182);const Te=/^model\/gltf\+json$/,De=/^model\/gltf-binary$/,he=/\.gltf$/i,pr=/\.glb$/i;function Ce(t){const e=new Map;let r,s=null;for(const{name:c,mimeType:y,source:_}of t)null===s&&(Te.test(y)||he.test(c)?(s=_.url,r="gltf"):(De.test(y)||pr.test(c))&&(s=_.url,r="glb")),e.set(c,_.url),_.files.forEach((D,C)=>e.set(C,D));if(null==s)throw new $.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new Nt(s,()=>t.forEach(({source:c})=>c.dispose()),e,r)}class Nt{constructor(e,r=(()=>{}),s=new Map,c){this.url=e,this.dispose=r,this.files=s,this.type=c}static fromBlob(e,r){const s=URL.createObjectURL(e);return new Nt(s,()=>URL.revokeObjectURL(s),void 0,r)}}function Oe(t,e){return Te.test(e)||he.test(t)?"gltf":De.test(e)||he.test(t)?"glb":void 0}var hr=x(25387),fr=x(83944),zt=x(47689);let Ft=class extends hr.j{constructor(){super(),this.externalSources=new fr.Z,this._explicitDisplaySource=null,this.addHandles((0,P.on)(()=>this.externalSources,"after-remove",({item:t})=>{t===this._explicitDisplaySource&&(this._explicitDisplaySource=null)},{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(t){if(null!=t&&!(0,zt.NZ)(t))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=t,t&&this.externalSources.every(e=>!(0,zt.fV)(e,t))&&this.externalSources.add(t)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(t){return this.externalSources.items.filter(e=>(0,zt.JG)(e,t))}get _implicitDisplaySource(){return this.externalSources.find(zt.NZ)}};(0,z._)([(0,N.Cb)()],Ft.prototype,"externalSources",void 0),(0,z._)([(0,N.Cb)()],Ft.prototype,"displaySource",null),(0,z._)([(0,N.Cb)()],Ft.prototype,"_implicitDisplaySource",null),(0,z._)([(0,N.Cb)()],Ft.prototype,"_explicitDisplaySource",void 0),Ft=(0,z._)([(0,E.j)("esri.geometry.support.meshUtils.Metadata")],Ft);var Pe=x(51006),fe=x(93530),we=x(89568),me=x(66588),Re=x(44381),dt=x(38570);function Se(t,e){if(t)for(let r=0;r<t.length;r+=3)for(let s=0;s<3;s++)t[r+s]+=e[s]}const yr=(0,K.c)(),be=(0,we.a)(),je=(0,fe.a)(),te={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function se(t,e,r){t.isPlane||function Cr(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}(t),function Or(t,e){if(null==e)return;const r="number"==typeof e?[e,e,e]:[null!=e.width?e.width:1,null!=e.depth?e.depth:1,null!=e.height?e.height:1];Wt[0]=r[0],Wt[4]=r[1],Wt[8]=r[2];for(let s=0;s<t.position.length;s+=3){for(let c=0;c<3;c++)lt[c]=t.position[s+c];(0,u.t)(lt,lt,Wt);for(let c=0;c<3;c++)t.position[s+c]=lt[c]}if(r[0]!==r[1]||r[1]!==r[2]){Wt[0]=1/r[0],Wt[4]=1/r[1],Wt[8]=1/r[2];for(let s=0;s<t.normal.length;s+=3){for(let c=0;c<3;c++)lt[c]=t.normal[s+c];(0,u.t)(lt,lt,Wt),(0,u.n)(lt,lt);for(let c=0;c<3;c++)t.normal[s+c]=lt[c]}}}(t,r?.size);const{vertexAttributes:s,vertexSpace:c,transform:y}=(0,kt.georeferenceByTransform)(t,e,r);return{vertexAttributes:new Et.Q({...s,uv:t.uv}),vertexSpace:c,transform:y,components:[new gt.Z({faces:t.faces,material:r?.material||null})],spatialReference:e.spatialReference}}const Pr={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},wr={south:0,east:1,north:2,west:3,up:4,down:5},lt=(0,K.c)(),Wt=(0,fe.a)();var Rr=x(60838);const Ze="esri.geometry.support.meshUtils.rotate";function Gt(t,e,r,s=K.Z){if(null!=t){(0,Rr.c)(ie,(0,Q.WH)(e),(0,Q.ZZ)(e));for(let c=0;c<t.length;c+=r){for(let y=0;y<3;y++)Jt[y]=t[c+y]-s[y];(0,u.e)(Jt,Jt,ie);for(let y=0;y<3;y++)t[c+y]=Jt[y]+s[y]}}}const Jt=(0,K.c)(),Le=(0,K.c)(),Ue=(0,Q.Ue)(),ie=(0,we.a)(),Ie=(0,fe.a)(),Fe=(0,K.c)(),We="esri.geometry.support.meshUtils.scale";function Be(t,e,r=K.Z){if(t)for(let s=0;s<t.length;s+=3){for(let c=0;c<3;c++)Xt[c]=t[s+c]-r[c];(0,u.i)(Xt,Xt,e);for(let c=0;c<3;c++)t[s+c]=Xt[c]+r[c]}}const Xt=(0,K.c)(),Ke=(0,K.c)(),Ne=(0,K.c)();var Mt,de=x(11642);function ge(){return ge=(0,ot.Z)(function*(t){const e=[];for(const r of t)r.name.toLowerCase().endsWith(".zip")?e.push(Br(r)):e.push(Promise.resolve(r));return(yield Promise.all(e)).flat()}),ge.apply(this,arguments)}function Br(t){return xe.apply(this,arguments)}function xe(){return xe=(0,ot.Z)(function*(t){const{BlobReader:e,ZipReader:r,BlobWriter:s}=yield x.e(6192).then(x.bind(x,66192)),c=[];return(yield new r(new e(t)).getEntries()).forEach(_=>{if(_.directory||/^__MACOS/i.test(_.filename))return;const D=new s,C=_.getData?.(D).then(A=>new File([A],_.filename));C&&c.push(C)}),Promise.all(c)}),xe.apply(this,arguments)}const Bt="esri.geometry.Mesh",Kr={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:at.Z,"georeferenced-relative":H.Z,local:St.Z}};let yt=Mt=class extends(F.Z.LoadableMixin((0,J.v)(O.Z))){constructor(t){super(t),this.components=null,this.vertexSpace=new at.Z,this.transform=null,this.metadata=new Ft,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Et.Q,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.addHandles((0,P.YP)(()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map(t=>t.clone())}),()=>this._clearSources(),{once:!0,sync:!0}))})}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:t,spatialReference:e,vertexAttributes:r,vertexSpace:s}=this,c=r.position;if(0===c.length||t&&0===t.length)return new k.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:e});if("local"===s.type){const{_untransformedExtent:y,transform:_}=this;return function Qe({xmin:t,xmax:e,ymin:r,ymax:s,zmin:c,zmax:y},_,D,C){c??=0,y??=0,ye??=new Float64Array(24);const A=ye;return A[0]=t,A[1]=r,A[2]=c,A[3]=t,A[4]=s,A[5]=c,A[6]=e,A[7]=s,A[8]=c,A[9]=e,A[10]=r,A[11]=c,A[12]=t,A[13]=r,A[14]=y,A[15]=t,A[16]=s,A[17]=y,A[18]=e,A[19]=s,A[20]=y,A[21]=e,A[22]=r,A[23]=y,(0,kt.project)({positions:A,transform:_,vertexSpace:D,inSpatialReference:C,outSpatialReference:C,outPositions:A}),ne(A,C)}(y,_,s,e)}if("georeferenced-relative"===s.type){const{transform:y}=this;return ne((0,kt.project)({positions:c,transform:y,vertexSpace:s,inSpatialReference:e,outSpatialReference:e}),e)}return ne(c,e)}get _untransformedExtent(){return ne(this.vertexAttributes.position,this.spatialReference)}get anchor(){const{vertexSpace:t}=this;if(t.isRelative)return t.getOriginPoint(this.spatialReference);const{center:e,zmin:r}=this._transformedExtent;return new I.Z({x:e.x,y:e.y,z:r,spatialReference:this.spatialReference})}get origin(){const{vertexSpace:t}=this;return t.isRelative?t.getOriginPoint(this.spatialReference):this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(t){if(!this.loaded)return G.Z.getLogger(this).error("addComponent()",(new ut).message);this.components||(this.components=[]),this.components.push(gt.Z.from(t)),this.notifyChange("components")}removeComponent(t){if(!this.loaded)return G.Z.getLogger(this).error("removeComponent()",(new ut).message);if(this.components){const e=this.components.indexOf(t);if(-1!==e)return this.components.splice(e,1),void this.notifyChange("components")}G.Z.getLogger(this).error("removeComponent()",(new Zt).message)}rotate(t,e,r,s){return(0,Q.qw)(t,e,r,ze),function Sr(t,e,r){if(!t.vertexAttributes?.position||0===e[3])return;const{spatialReference:s,vertexSpace:c}=t;if(c.isRelative){(0,It.A)(c,Ze,r);const y=r?.origin??t.origin;t.transform??=new xt.Z,function br(t,e,r,s){const c=e.origin,y=(0,u.s)(Jt,s.x,s.y,s.z??0),_=(0,u.f)(Jt,y,c);t.applyLocalInverse(_,Le),t.rotation=(0,Q.qC)(t.rotation,r,(0,Q.Ue)()),t.applyLocalInverse(_,_),(0,u.f)(_,_,Le),t.translation=(0,u.g)((0,K.c)(),t.translation,_)}(t.transform,c,e,y)}else{const y=r?.origin??t.origin;(0,It.h)(s,r)?function jr(t,e,r){const s=t.spatialReference,c=(0,me.rS)(s),y=Fe;Ot(r,y,c)||Ot(t.origin,y,c);const _=t.vertexAttributes.position,D=t.vertexAttributes.normal,C=t.vertexAttributes.tangent,A=new Float64Array(_.length),w=null!=D?new Float32Array(D.length):null,U=null!=C?new Float32Array(C.length):null;(0,Re.B)(c,y,ie,c),(0,Pe.f)(Ie,ie);const W=Ue;(0,u.t)((0,Q.ZZ)(Ue),(0,Q.ZZ)(e),Ie),W[3]=e[3],(0,dt.XO)(_,s,A),null!=D&&null!=w&&(0,dt.Iz)(D,_,A,s,w),null!=C&&null!=U&&(0,dt.wi)(C,_,A,s,U),Gt(A,W,3,y),(0,dt.To)(A,_,s),null!=D&&null!=w&&(Gt(w,W,3),(0,dt.Yk)(w,_,A,s,D)),null!=C&&null!=U&&(Gt(U,W,4),(0,dt.M2)(U,_,A,s,C)),t.vertexAttributesChanged()}(t,e,y):function Zr(t,e,r){const s=Fe;if(!Ot(r,s,t.spatialReference)){const c=t.origin;s[0]=c.x,s[1]=c.y,s[2]=c.z,G.Z.getLogger(Ze).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Gt(t.vertexAttributes.position,e,3,s),Gt(t.vertexAttributes.normal,e,3),Gt(t.vertexAttributes.tangent,e,4),t.vertexAttributesChanged()}(t,e,y)}}(this,ze,s),this}offset(t,e,r,s){return this.loaded?(ae[0]=t,ae[1]=e,ae[2]=r,function dr(t,e,r){if(!t.vertexAttributes?.position)return;const{vertexSpace:s}=t;s.isRelative?((0,It.A)(s,"esri.geometry.support.meshUtils.offset",r),function gr(t,e){const r=t.origin;t.origin=(0,u.g)((0,K.c)(),r,e)}(s,e)):(0,It.h)(t.spatialReference,r)?function xr(t,e){const r=t.spatialReference,s=t.vertexAttributes.position,c=t.vertexAttributes.normal,y=t.vertexAttributes.tangent,_=new Float64Array(s.length),D=null!=c?new Float32Array(c.length):null,C=null!=y?new Float32Array(y.length):null,A=t.extent.center,w=yr;(0,Re.B)(r,[A.x,A.y,A.z],be,(0,me.rS)(r)),(0,Pe.f)(je,be),(0,u.t)(w,e,je),(0,dt.XO)(s,r,_),null!=c&&null!=D&&(0,dt.Iz)(c,s,_,r,D),null!=y&&null!=C&&(0,dt.wi)(y,s,_,r,C),Se(_,w),(0,dt.To)(_,s,r),null!=c&&null!=D&&(0,dt.Yk)(D,s,_,r,c),null!=y&&null!=C&&(0,dt.M2)(C,s,_,r,y),t.vertexAttributesChanged()}(t,e):function vr(t,e){Se(t.vertexAttributes.position,e),t.vertexAttributesChanged()}(t,e)}(this,ae,s),this):(G.Z.getLogger(this).error("offset()",(new ut).message),this)}scale(t,e){return this.loaded?(function Lr(t,e,r){if(!t.vertexAttributes?.position)return;const{spatialReference:s,vertexSpace:c}=t;if(c.isRelative){(0,It.A)(c,We,r);const y=r?.origin??t.origin;t.transform??=new xt.Z,function Ur(t,e,r,s){const c=e.origin,y=(0,u.s)(Xt,s.x,s.y,s.z),_=(0,u.f)(Xt,y,c);t.applyLocalInverse(_,Ke);const D=(0,u.i)((0,K.c)(),t.scale,r);t.scale=D,t.applyLocalInverse(_,_),(0,u.f)(_,_,Ke),t.translation=(0,u.g)((0,K.c)(),t.translation,_)}(t.transform,c,e,y)}else{const y=(0,It.h)(s,r),_=r?.origin??t.origin;y?function Ir(t,e,r){const s=t.spatialReference,c=(0,me.rS)(s),y=Ne;Ot(r,y,c)||Ot(t.origin,y,c);const _=t.vertexAttributes.position,D=t.vertexAttributes.normal,C=t.vertexAttributes.tangent,A=new Float64Array(_.length),w=null!=D?new Float32Array(D.length):null,U=null!=C?new Float32Array(C.length):null;(0,dt.XO)(_,s,A),null!=D&&null!=w&&(0,dt.Iz)(D,_,A,s,w),null!=C&&null!=U&&(0,dt.wi)(C,_,A,s,U),Be(A,e,y),(0,dt.To)(A,_,s),null!=D&&null!=w&&(0,dt.Yk)(w,_,A,s,D),null!=C&&null!=U&&(0,dt.M2)(U,_,A,s,C),t.vertexAttributesChanged()}(t,e,_):function Fr(t,e,r){const s=Ne;if(!Ot(r,s,t.spatialReference)){const c=t.origin;s[0]=c.x,s[1]=c.y,s[2]=c.z,G.Z.getLogger(We).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Be(t.vertexAttributes.position,e,s),t.vertexAttributesChanged()}(t,e,_)}}(this,t,e),this):(G.Z.getLogger(this).error("scale()",(new ut).message),this)}centerAt(t,e){return this.loaded?(function qe(t,e,r){if(!t.vertexAttributes?.position)return;const{vertexSpace:s}=t,c=r?.origin??t.origin;s.isRelative?((0,It.A)(s,qt,r),function tr(t,e,r){const{vertexSpace:s}=t;if(!s.isRelative)return;const c=_e,y=Ee;if(!Ot(e,y,t.spatialReference))return void G.Z.getLogger(qt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!Ot(r,c,t.spatialReference)){const C=t.origin;c[0]=C.x,c[1]=C.y,c[2]=C.z,G.Z.getLogger(qt).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const _=(0,u.f)(or,y,c),D=s.origin;s.origin=(0,u.g)((0,K.c)(),D,_)}(t,e,c)):(0,It.h)(t.spatialReference,r)?function er(t,e,r){const s=(0,kt.ungeoreference)(t.vertexAttributes,r,{geographic:!0}),{position:c,normal:y,tangent:_}=(0,kt.georeference)(s,e,{geographic:!0});t.vertexAttributes.position=c,t.vertexAttributes.normal=y,t.vertexAttributes.tangent=_,t.vertexAttributesChanged()}(t,e,c):function rr(t,e,r){const s=_e,c=Ee;if(Ot(e,c,t.spatialReference)){if(!Ot(r,s,t.spatialReference)){const y=t.origin;s[0]=y.x,s[1]=y.y,s[2]=y.z,G.Z.getLogger(qt).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function nr(t,e,r){if(t)for(let s=0;s<t.length;s+=3)for(let c=0;c<3;c++)t[s+c]+=e[c]-r[c]})(t.vertexAttributes.position,c,s),t.vertexAttributesChanged()}else G.Z.getLogger(qt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(t,e,c)}(this,t,e),this):(G.Z.getLogger(this).error("centerAt()",(new ut).message),this)}load(t){const{metadata:{displaySource:e}}=this;return e&&this.addResolvingPromise(function sr(t,e,r){return le.apply(this,arguments)}(this,e,t)),Promise.resolve(this)}addExternalSources(t){this.metadata.externalSources.addMany(t)}updateDisplaySource(t){this.metadata.displaySource=t}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(t){let e=null;if(this.components){const s=new Map,c=new Map;e=this.components.map(y=>y.cloneWithDeduplication(s,c))}const r={components:e,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:t,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new Mt(r)}cloneShallow(){return new Mt({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var e=this;return(0,ot.Z)(function*(){const r=x.e(9245).then(x.bind(x,89245)),s=e.load(),c=yield Promise.all([r,s]),{toBinaryGLTF:y}=c[0];return y(e,t)})()}get memoryUsage(){let t=0;if(t+=this.vertexAttributes.memoryUsage,null!=this.components)for(const e of this.components)t+=e.memoryUsage;return t}_clearSources(){this.metadata.clearSources()}static createBox(t,e){if(!(t instanceof I.Z))return G.Z.getLogger(Bt).error(".createBox()",(new Ct).message),null;const r=new Mt(se(function Er(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:r}=Pr,s=4*t.length,c=new Float64Array(3*s),y=new Float32Array(3*s),_=new Float32Array(2*s),D=new Uint32Array(2*t.length*3);let C=0,A=0,w=0,U=0;for(let W=0;W<t.length;W++){const B=t[W],ct=C/3;for(const _t of e)D[U++]=ct+_t;const st=B.corners;for(let _t=0;_t<4;_t++){const Pt=st[_t];let ft=0;_[w++]=.25*r[_t][0]+B.uvOrigin[0],_[w++]=B.uvOrigin[1]-.25*r[_t][1];for(let it=0;it<3;it++)0!==B.axis[it]?(c[C++]=.5*B.axis[it],y[A++]=B.axis[it]):(c[C++]=.5*Pt[ft++],y[A++]=0)}}return{position:c,normal:y,uv:_,faces:D}}(),t,e));return e?.imageFace&&"all"!==e.imageFace?function _r(t,e){const r=t.components[0],s=r.faces,c=wr[e],y=6*c,_=new Array(6),D=new Array(s.length-6);let C=0,A=0;for(let w=0;w<s.length;w++)w>=y&&w<y+6?_[C++]=s[w]:D[A++]=s[w];if(null!=t.vertexAttributes.uv){const w=new Float32Array(t.vertexAttributes.uv),U=4*c*2,W=[0,1,1,1,1,0,0,0];for(let B=0;B<W.length;B++)w[U+B]=W[B];t.vertexAttributes.uv=w}return t.components=[new gt.Z({faces:_,material:r.material}),new gt.Z({faces:D})],t}(r,e.imageFace):r}static createSphere(t,e){return t instanceof I.Z?new Mt(se(function Mr(t=0){const e=Math.round(8*2**t),r=2*e,s=(e-1)*(r+1)+2*r,c=new Float64Array(3*s),y=new Float32Array(3*s),_=new Float32Array(2*s),D=new Uint32Array((e-1)*r*2*3);let C=0,A=0,w=0,U=0;for(let W=0;W<=e;W++){const B=W/e*Math.PI+.5*Math.PI,ct=Math.cos(B),st=Math.sin(B);lt[2]=st;const _t=0===W||W===e,Pt=_t?r-1:r;for(let ft=0;ft<=Pt;ft++){const it=ft/Pt*2*Math.PI;lt[0]=-Math.sin(it)*ct,lt[1]=Math.cos(it)*ct;for(let At=0;At<3;At++)c[C]=.5*lt[At],y[C]=lt[At],++C;_[A++]=(ft+(_t?.5:0))/r,_[A++]=W/e,0!==W&&ft!==r&&(W!==e&&(D[w++]=U,D[w++]=U+1,D[w++]=U-r),1!==W&&(D[w++]=U,D[w++]=U-r,D[w++]=U-r-1)),U++}}return{position:c,normal:y,uv:_,faces:D}}(e?.densificationFactor||0),t,e)):(G.Z.getLogger(Bt).error(".createSphere()",(new Ct).message),null)}static createCylinder(t,e){return t instanceof I.Z?new Mt(se(function Ar(t=0){const r=Math.round(16*2**t),s=4*(r+1)+2*r,c=new Float64Array(3*s),y=new Float32Array(3*s),_=new Float32Array(2*s),D=new Uint32Array(4*r*3);let C=0,A=0,w=0,U=0,W=0;for(let B=0;B<=5;B++){const ct=0===B||5===B,st=B<=1||B>=4,_t=2===B||4===B,Pt=ct?r-1:r;for(let ft=0;ft<=Pt;ft++){const it=ft/Pt*2*Math.PI,At=ct?0:.5;lt[0]=At*Math.sin(it),lt[1]=At*-Math.cos(it),lt[2]=B<=2?.5:-.5;for(let Qt=0;Qt<3;Qt++)c[C++]=lt[Qt],y[A++]=st?2===Qt?B<=1?1:-1:0:2===Qt?0:lt[Qt]/At;_[w++]=(ft+(ct?.5:0))/r,_[w++]=B<=1?1*B/3:B<=3?1*(B-2)/3+1/3:1*(B-4)/3+2/3,_t||0===B||ft===r||(5!==B&&(D[U++]=W,D[U++]=W+1,D[U++]=W-r),1!==B&&(D[U++]=W,D[U++]=W-r,D[U++]=W-r-1)),W++}}return{position:c,normal:y,uv:_,faces:D}}(e?.densificationFactor||0),t,e)):(G.Z.getLogger(Bt).error(".createCylinder()",(new Ct).message),null)}static createPlane(t,e){if(!(t instanceof I.Z))return G.Z.getLogger(Bt).error(".createPlane()",(new Ct).message),null;const r=e?.facing??"up",s=function Tr(t,e){const r="number"==typeof e?e:null!=e?e.width:1,s="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return{width:r,depth:s};case"north":case"south":return{width:r,height:s};case"east":case"west":return{depth:r,height:s}}}(r,e?.size);return new Mt(se(function Dr(t){const e=te.facingAxisOrderSwap[t],r=te.position,s=te.normal,c=new Float64Array(r.length),y=new Float32Array(s.length);let _=0;for(let D=0;D<4;D++){const C=_;for(let A=0;A<3;A++){const w=e[A],U=Math.abs(w)-1,W=w>=0?1:-1;c[_]=r[C+U]*W,y[_]=s[C+U]*W,_++}}return{position:c,normal:y,uv:new Float32Array(te.uv),faces:new Uint32Array(te.faces),isPlane:!0}}(r),t,{...e,size:s}))}static createFromPolygon(t,e){if(!(t instanceof Y.Z))return G.Z.getLogger(Bt).error(".createFromPolygon()",(new Tt).message),null;const r=function Ge(t){const e=function Xe(t,e,r,s){const c=t.length,y=new Array(c),_=new Array(c),D=new Array(c);let C=0,A=0,w=0,U=0;for(let ct=0;ct<c;++ct)U+=t[ct].length;const W=(0,Ut.bg)(3*U);let B=0;for(let ct=c-1;ct>=0;ct--){const st=t[ct],_t=r===re.CCW_IS_HOLE&&Ye(st,e,s);if(_t&&1!==c)y[C++]=st;else{let Pt=st.length;for(let it=0;it<C;++it)Pt+=y[it].length;const ft={index:B,pathLengths:new Array(C+1),count:Pt,holeIndices:new Array(C)};ft.pathLengths[0]=st.length,st.length>0&&(D[w++]={index:B,count:st.length}),B=_t?ee(st,st.length-1,-1,W,B,st.length,e):ee(st,0,1,W,B,st.length,e);for(let it=0;it<C;++it){const At=y[it];ft.holeIndices[it]=B,ft.pathLengths[it+1]=At.length,At.length>0&&(D[w++]={index:B,count:At.length}),B=ee(At,0,1,W,B,At.length,e)}C=0,ft.count>0&&(_[A++]=ft)}}for(let ct=0;ct<C;++ct){const st=y[ct];st.length>0&&(D[w++]={index:B,count:st.length}),B=ee(st,0,1,W,B,st.length,e)}return _.length=A,D.length=w,{position:W,polygons:_,outlines:D}}(t.rings,t.hasZ,re.CCW_IS_HOLE,t.spatialReference),r=new Array;let s=0,c=0;for(const D of e.polygons){const A=D.index,w=(0,Ut.Rq)(e.position,3*A,3*D.count),U=D.holeIndices.map(B=>B-A),W=(0,Kt.mi)((0,Lt.e)(w,U,3));r.push({position:w,faces:W}),s+=w.length,c+=W.length}const y=function Je(t,e,r){if(1===t.length)return t[0];const s=(0,Ut.bg)(e),c=new Array(r);let y=0,_=0,D=0;for(const C of t){for(let A=0;A<C.position.length;A++)s[y++]=C.position[A];for(const A of C.faces)c[_++]=A+D;D=y/3}return{position:s,faces:(0,Kt.mi)(c)}}(r,s,c),_=Array.isArray(y.position)?(0,i.d)(y.position,3,{originalIndices:y.faces}):(0,i.d)(y.position.buffer,6,{originalIndices:y.faces});return y.position=(0,Ut.QZ)(new Float64Array(_.buffer)),y.faces=_.indices,y}(t);return new Mt({vertexAttributes:new Et.Q({position:r.position}),components:[new gt.Z({faces:r.faces,shading:"flat",material:e?.material??null})],spatialReference:t.spatialReference,vertexSpace:new at.Z})}static createFromGLTF(t,e,r){return(0,ot.Z)(function*(){if(!(t instanceof I.Z)){const c=new Ct;throw G.Z.getLogger(Bt).error(".createfromGLTF()",c.message),c}const{loadGLTFMesh:s}=yield(0,L.Hl)(Promise.all([x.e(7528),x.e(7599)]).then(x.bind(x,27599)),r);return new Mt(yield s(t,e,r))})()}static createFromFiles(t,e,r){return(0,ot.Z)(function*(){const s=A=>G.Z.getLogger(Bt).error(".createFromFiles()",A.message);if(!(t instanceof I.Z)){const A=new Ct;throw s(A),A}const c=r?.layer;if(!c){const A=new et;throw s(A),A}const y=yield Mt.extractAndFilterFiles(e,c),_=y.reduce((A,w)=>(0,de.$z)(c.infoFor3D,w)?A+1:A,0);if(0===_){const A=new wt;throw s(A),A}if(_>1){const A=new Rt;throw s(A),A}const D=Mt.createWithExternalSource(t,y),[C]=yield c.uploadAssets([D],r);return C})()}static extractAndFilterFiles(t,e){return(0,ot.Z)(function*(){const r=e?.infoFor3D;return r?(yield function Wr(t){return ge.apply(this,arguments)}(t)).filter(s=>(0,de.F7)(r,s)):t})()}static createWithExternalSource(t,e,r){const s=r?.extent??null,{x:c,y,z:_,spatialReference:D}=t,C=r?.transform?.clone()??new xt.Z,A=r?.vertexSpace??new St.Z({origin:[c,y,_??0]}),w={source:e,extent:s},U=new Ft;return U.externalSources.push(w),new Mt({metadata:U,transform:C,vertexSpace:A,spatialReference:D})}static createIncomplete(t,e){const{x:r,y:s,z:c,spatialReference:y}=t,_=e?.transform?.clone()??new xt.Z,D=e?.vertexSpace??new St.Z({origin:[r,s,c??0]}),C=new Mt({transform:_,vertexSpace:D,spatialReference:y});return C.addResolvingPromise(Promise.reject(new $.Z("mesh-incomplete","Mesh resources are not complete"))),C}};(0,z._)([(0,N.Cb)({type:[gt.Z],json:{write:!0}})],yt.prototype,"components",void 0),(0,z._)([(0,N.Cb)({nonNullable:!0,types:Kr,constructOnly:!0,json:{write:!0}})],yt.prototype,"vertexSpace",void 0),(0,z._)([(0,N.Cb)({type:xt.Z,json:{write:!0}})],yt.prototype,"transform",void 0),(0,z._)([(0,N.Cb)({constructOnly:!0})],yt.prototype,"metadata",void 0),(0,z._)([(0,N.Cb)()],yt.prototype,"hasExtent",null),(0,z._)([(0,N.Cb)()],yt.prototype,"_transformedExtent",null),(0,z._)([(0,N.Cb)()],yt.prototype,"_untransformedExtent",null),(0,z._)([(0,N.Cb)()],yt.prototype,"anchor",null),(0,z._)([(0,N.Cb)()],yt.prototype,"origin",null),(0,z._)([(0,N.Cb)({readOnly:!0,json:{read:!1}})],yt.prototype,"extent",null),(0,z._)([(0,N.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],yt.prototype,"hasZ",void 0),(0,z._)([(0,N.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],yt.prototype,"hasM",void 0),(0,z._)([(0,N.Cb)({type:Et.Q,nonNullable:!0,json:{write:!0}})],yt.prototype,"vertexAttributes",void 0),yt=Mt=(0,z._)([(0,E.j)(Bt)],yt);const ae=(0,K.c)(),ze=(0,Q.Ue)(),$e=yt;var Nr=x(43814),zr=x(93792);const ve=()=>G.Z.getLogger("esri.rest.support.meshFeatureSet");function $r(t,e,r){const s=r.features;r.features=[],delete r.geometryType;const c=zr.Z.fromJSON(r);if(c.geometryType="mesh",!r.assetMaps)return c;const y=He(e,r.assetMaps),_=t.sourceSpatialReference??Nr.Z.WGS84,D=r.globalIdFieldName,{outFields:C}=t,A=null!=C&&C.length>0?function Vr(t){return({attributes:e})=>{if(!e)return{};if(!t)return e;for(const r in e)t.has(r)||delete e[r];return e}}(C.includes("*")?null:new Set(C)):()=>({});for(const w of s){const U=Ve(w,D,_,e,y);null!=U&&c.features.push(new R.Z({geometry:U,attributes:A(w)}))}return c}function Ve(t,e,r,s,c){const _=c.get(t.attributes[e]);if(null==_)return ve().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",t),null;if(!t.geometry)return ve().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",t),null;const{originPoint:D,originVector:C}=function Hr({attributes:t},e,{transformFieldRoles:r}){const s=t[r.originX],c=t[r.originY],y=t[r.originZ];return{originPoint:new I.Z({x:s,y:c,z:y,spatialReference:e}),originVector:(0,K.f)(s,c,y)}}(t,r,s),A=k.Z.fromJSON(t.geometry);A.spatialReference=r;const w=function Gr(t,{transformFieldRoles:e}){return new xt.Z({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}(t.attributes,s),U=_.projectVertices?new H.Z({origin:C}):new St.Z({origin:C}),W=function Jr(t){const e=Array.from(t.files.values()),r=new Array;for(const s of e){if(s.status!==Yt.COMPLETED)return null;const c=new Array;for(const y of s.parts){if(!y)return null;c.push(new zt.LL(y.url,y.hash))}r.push(new zt.CP(s.name,s.mimeType,c))}return r}(_);return W?$e.createWithExternalSource(D,W,{extent:A,transform:w,vertexSpace:U}):$e.createIncomplete(D,{extent:A,transform:w,vertexSpace:U})}var Yt;function He(t,e){const r=new Map;for(const s of e){const c=s.parentGlobalId;if(null==c)continue;const y=s.assetName,_=s.assetType,D=s.assetHash,C=s.assetURL,A=s.conversionStatus,w=s.seqNo,U=(0,de.d1)(_,t.supportedFormats);if(!U){ve().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${_}, but it does not list it as a supported type`);continue}const W=(0,X.s1)(r,c,()=>({projectVertices:Yr(s.flags).projectVertices,files:new Map}));(0,X.s1)(W.files,y,()=>({name:y,type:_,mimeType:U,status:Xr(A),parts:[]})).parts[w]={hash:D,url:C}}return r}function Xr(t){switch(t){case"COMPLETED":case"SUBMITTED":return Yt.COMPLETED;case"INPROGRESS":return Yt.PENDING;default:return Yt.FAILED}}function Yr(t){return{projectVertices:t.includes("PROJECT_VERTICES")}}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(Yt||(Yt={}))}}]);