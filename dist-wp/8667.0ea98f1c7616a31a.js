"use strict";(self.webpackChunkangular_17_test=self.webpackChunkangular_17_test||[]).push([[8667],{28667:(z,I,n)=>{n.r(I),n.d(I,{fromUrl:()=>$});var r=n(15861),p=n(57964),t=n(6785),s=n(89713),O=n(63724),E=n(23933),U=n(85971),V=n(79936),S=n(6661);const W={FeatureLayer:!0,SceneLayer:!0};function $(l){return Z.apply(this,arguments)}function Z(){return Z=(0,r.Z)(function*(l){const a=l.properties?.customParameters,e=yield function A(l,a){return D.apply(this,arguments)}(l.url,a),u={...l.properties,url:l.url};if(e.layers.length+e.tables.length===0)return null!=e.layerId&&(u.layerId=e.layerId),null!=e.sourceJSON&&(u.sourceJSON=e.sourceJSON),new e.Constructor(u);const f=new((yield n.e(782).then(n.bind(n,50782))).default)({title:e.parsedUrl.title});return yield function R(l,a,e){return K.apply(this,arguments)}(f,e,u),f}),Z.apply(this,arguments)}function j(l,a){return l?l.find(e=>e.id===a):null}function K(){return(K=(0,r.Z)(function*(l,a,e){function u(o,c,P,v){const g={...e,layerId:c,sublayerTitleMode:"service-name"};return null!=o&&(g.url=o),null!=P&&(g.sourceJSON=P),v(g)}const f=a.sublayerConstructorProvider;for(const{id:o,serverUrl:c}of a.layers){const P=j(a.sublayerInfos,o),v=(P&&f?.(P))??a.Constructor,g=u(c,o,P,d=>new v(d));l.add(g)}if(a.tables.length){const o=yield L("FeatureLayer");a.tables.forEach(({id:c,serverUrl:P})=>{const v=u(P,c,j(a.tableInfos,c),g=>new o(g));l.tables.add(v)})}})).apply(this,arguments)}function D(){return D=(0,r.Z)(function*(l,a){let e=(0,s.Qc)(l);if(null==e&&(e=yield function B(l,a){return F.apply(this,arguments)}(l,a)),null==e)throw new p.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:l});const{serverType:u,sublayer:f}=e;let o;const c={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},P="FeatureServer"===u,v="SceneServer"===u,g={parsedUrl:e,Constructor:null,layerId:P||v?f??void 0:void 0,layers:[],tables:[]};switch(u){case"MapServer":o=null!=f?"FeatureLayer":(yield function J(l,a){return G.apply(this,arguments)}(l,a))?"TileLayer":"MapImageLayer";break;case"ImageServer":{const d=yield(0,S.T)(l,{customParameters:a}),{tileInfo:T,cacheType:x}=d;o=T?"LERC"!==T?.format?.toUpperCase()||x&&"elevation"!==x.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const d=yield(0,S.T)(e.url.path,{customParameters:a});if(o="SceneLayer",d){const T=d?.layers;if("Voxel"===d?.layerType)o="VoxelLayer";else if(T?.length){const x=T[0]?.layerType;null!=x&&null!=U.fb[x]&&(o=U.fb[x])}}break}case"FeatureServer":if(o="FeatureLayer",null!=f){const d=yield(0,S.T)(l,{customParameters:a});g.sourceJSON=d,"Oriented Imagery Layer"===d.type&&(o="OrientedImageryLayer")}break;default:o=c[u]}if(W[o]&&null==f){const d=yield function i(l,a,e){return m.apply(this,arguments)}(l,u,a);if(P&&(g.sublayerInfos=d.layerInfos,g.tableInfos=d.tableInfos),d.layers.length+d.tables.length!==1)g.layers=d.layers,g.tables=d.tables,P&&d.layerInfos?.length&&(g.sublayerConstructorProvider=yield function Q(l){return N.apply(this,arguments)}(d.layerInfos));else if(P||v){const T=d.layerInfos?.[0]??d.tableInfos?.[0];g.layerId=d.layers[0]?.id??d.tables[0]?.id,g.sourceJSON=T,P&&"Oriented Imagery Layer"===T?.type&&(o="OrientedImageryLayer")}}return g.Constructor=yield L(o),g}),D.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(l,a){const e=yield(0,S.T)(l,{customParameters:a});let u=null,f=null;const o=e.type;if("Feature Layer"===o||"Table"===o?(u="FeatureServer",f=e.id??null):"indexedVector"===o?u="VectorTileServer":e.hasOwnProperty("mapName")?u="MapServer":e.hasOwnProperty("bandCount")&&e.hasOwnProperty("pixelSizeX")?u="ImageServer":e.hasOwnProperty("maxRecordCount")&&e.hasOwnProperty("allowGeometryUpdates")?u="FeatureServer":e.hasOwnProperty("streamUrls")?u="StreamServer":C(e)?(u="SceneServer",f=e.id):e.hasOwnProperty("layers")&&C(e.layers?.[0])&&(u="SceneServer"),!u)return null;const c=null!=f?(0,s.DR)(l):null;return{title:null!=c&&e.name||(0,t.vt)(l),serverType:u,sublayer:f,url:{path:null!=c?c.serviceUrl:(0,t.mN)(l).path}}})).apply(this,arguments)}function C(l){return null!=l&&l.hasOwnProperty("store")&&l.hasOwnProperty("id")&&"number"==typeof l.id}function m(){return m=(0,r.Z)(function*(l,a,e){let u,f,o=!1;switch(a){case"FeatureServer":{const v=yield(0,E.V)(l,{customParameters:e});o=!!v.layersJSON,u=v.layersJSON||v.serviceJSON;break}case"SceneServer":{const v=yield function h(l,a){return y.apply(this,arguments)}(l,e);u=v.serviceInfo,f=v.tableServerUrl;break}default:u=yield(0,S.T)(l,{customParameters:e})}const c=u?.layers,P=u?.tables;return{layers:c?.map(v=>({id:v.id})).reverse()||[],tables:P?.map(v=>({serverUrl:f,id:v.id})).reverse()||[],layerInfos:o?c:[],tableInfos:o?P:[]}}),m.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(l,a){const e=yield(0,S.T)(l,{customParameters:a});if(!e.layers?.[0])return{serviceInfo:e};try{const{serverUrl:f}=yield(0,O.w)(l),o=yield(0,S.T)(f,{customParameters:a}).catch(()=>null);return o&&(e.tables=o.tables),{serviceInfo:e,tableServerUrl:f}}catch{return{serviceInfo:e}}})).apply(this,arguments)}function L(l){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(function*(l){return(0,V.T[l])()})).apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(l,a){return(yield(0,S.T)(l,{customParameters:a})).tileInfo})).apply(this,arguments)}function N(){return(N=(0,r.Z)(function*(l){const a=[],e=[];if(l.forEach(o=>{const{type:c}=o;"Oriented Imagery Layer"===c?(a.push(c),e.push(L("OrientedImageryLayer"))):(a.push(c),e.push(L("FeatureLayer")))}),!e.length)return;const u=yield Promise.all(e),f=new Map;return a.forEach((o,c)=>{f.set(o,u[c])}),o=>f.get(o.type)})).apply(this,arguments)}},63724:(z,I,n)=>{n.d(I,{w:()=>S});var r=n(15861),p=n(26152),t=n(66476),s=n(57964),O=n(79412),E=n(89713),U=n(61018),V=n(27835);function S(i,m){return W.apply(this,arguments)}function W(){return W=(0,r.Z)(function*(i,m){const h=(0,E.Qc)(i);if(!h)throw new s.Z("invalid-url","Invalid scene service url");const y={...m,sceneServerUrl:h.url.path,layerId:h.sublayer??void 0};if(y.sceneLayerItem??=(yield function $(i){return Z.apply(this,arguments)}(y)),null==y.sceneLayerItem)return D(y.sceneServerUrl.replace("/SceneServer","/FeatureServer"),y);const L=yield function F(i){return C.apply(this,arguments)}(y);if(!L?.url)throw new s.Z("related-service-not-found","Could not find feature service through portal item relationship");const M=yield D(L.url,y);return M.portalItem=L,M}),W.apply(this,arguments)}function Z(){return Z=(0,r.Z)(function*(i){const m=(yield j(i)).serviceItemId;if(!m)return null;const h=new V.default({id:m,apiKey:i.apiKey}),y=yield function K(i){return A.apply(this,arguments)}(i);null!=y&&(h.portal=new U.Z({url:y}));try{return h.load({signal:i.signal})}catch(L){return(0,O.r9)(L),null}}),Z.apply(this,arguments)}function j(i){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(function*(i){if(i.rootDocument)return i.rootDocument;const m={query:{f:"json",token:i.apiKey},responseType:"json",signal:i.signal};try{const h=yield(0,t.Z)(i.sceneServerUrl,m);i.rootDocument=h.data}catch{i.rootDocument={}}return i.rootDocument})).apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(i){const m=p.id?.findServerInfo(i.sceneServerUrl);if(m?.owningSystemUrl)return m.owningSystemUrl;const h=i.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const y=(yield(0,t.Z)(h,{query:{f:"json"},responseType:"json",signal:i.signal})).data.owningSystemUrl;if(y)return y}catch(y){(0,O.r9)(y)}return null})).apply(this,arguments)}function D(i,m){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(function*(i,m){const h=(0,E.Qc)(i);if(!h)throw new s.Z("invalid-feature-service-url","Invalid feature service url");const y=h.url.path,L=m.layerId;if(null==L)return{serverUrl:y};const M=j(m),J=e=>(0,t.Z)(y,{query:{f:"json"},responseType:"json",authMode:e,signal:m.signal}),G=J("anonymous").catch(()=>J("no-prompt")),[Q,N]=yield Promise.all([G,M]),l=N?.layers,a=Q.data&&Q.data.layers;if(!Array.isArray(a))throw new Error("expected layers array");if(Array.isArray(l)){for(let e=0;e<Math.min(l.length,a.length);e++)if(l[e].id===L)return{serverUrl:y,layerId:a[e].id}}else if(null!=L&&L<a.length)return{serverUrl:y,layerId:a[L].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function C(){return(C=(0,r.Z)(function*({sceneLayerItem:i,signal:m}){if(!i)return null;try{const h=(yield i.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:m})).find(L=>"Feature Service"===L.type)||null;if(!h)return null;const y=new V.default({portal:h.portal,id:h.id});return yield y.load(),y}catch(h){return(0,O.r9)(h),null}})).apply(this,arguments)}},79936:(z,I,n)=>{n.d(I,{T:()=>p});var r=n(15861);const p={BingMapsLayer:(t=(0,r.Z)(function*(){return(yield n.e(4499).then(n.bind(n,84499))).default}),function(){return t.apply(this,arguments)}),BuildingSceneLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8866),n.e(4612),n.e(9893),n.e(9269),n.e(3080)]).then(n.bind(n,23080))).default});return function(){return t.apply(this,arguments)}}(),CSVLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(257).then(n.bind(n,90257))).default});return function(){return t.apply(this,arguments)}}(),DimensionLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(9645)]).then(n.bind(n,59645))).default});return function(){return t.apply(this,arguments)}}(),ElevationLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(1753)]).then(n.bind(n,86069))).default});return function(){return t.apply(this,arguments)}}(),FeatureLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.resolve().then(n.bind(n,90373))).default});return function(){return t.apply(this,arguments)}}(),GeoJSONLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(59).then(n.bind(n,80059))).default});return function(){return t.apply(this,arguments)}}(),GeoRSSLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(9050).then(n.bind(n,39050))).default});return function(){return t.apply(this,arguments)}}(),GroupLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(782).then(n.bind(n,50782))).default});return function(){return t.apply(this,arguments)}}(),ImageryLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(842),n.e(2784),n.e(6062),n.e(3338),n.e(2616),n.e(5318),n.e(2861)]).then(n.bind(n,72861))).default});return function(){return t.apply(this,arguments)}}(),ImageryTileLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(6062),n.e(9350),n.e(3338),n.e(2616),n.e(3287),n.e(5318),n.e(8592),n.e(8505)]).then(n.bind(n,34208))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8866),n.e(8592),n.e(4092)]).then(n.bind(n,74092))).default});return function(){return t.apply(this,arguments)}}(),KMLLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(2858)]).then(n.bind(n,22858))).default});return function(){return t.apply(this,arguments)}}(),LineOfSightLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(6625)]).then(n.bind(n,17551))).default});return function(){return t.apply(this,arguments)}}(),LinkChartLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(842),n.e(3866),n.e(5904),n.e(1518),n.e(6518),n.e(2166),n.e(8592),n.e(9900)]).then(n.bind(n,49900))).default});return function(){return t.apply(this,arguments)}}(),MapImageLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(842),n.e(2784),n.e(9351),n.e(8592),n.e(5390)]).then(n.bind(n,37803))).default});return function(){return t.apply(this,arguments)}}(),MapNotesLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(8191)]).then(n.bind(n,18191))).default});return function(){return t.apply(this,arguments)}}(),MediaLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(4313)]).then(n.bind(n,69981))).default});return function(){return t.apply(this,arguments)}}(),OGCFeatureLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(842),n.e(2871),n.e(7960)]).then(n.bind(n,36019))).default});return function(){return t.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(4930)]).then(n.bind(n,22439))).default});return function(){return t.apply(this,arguments)}}(),OrientedImageryLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(617).then(n.bind(n,60617))).default});return function(){return t.apply(this,arguments)}}(),PointCloudLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8866),n.e(8592),n.e(265)]).then(n.bind(n,70265))).default});return function(){return t.apply(this,arguments)}}(),RouteLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(3301),n.e(5607)]).then(n.bind(n,25607))).default});return function(){return t.apply(this,arguments)}}(),SceneLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8866),n.e(4612),n.e(9893),n.e(9269),n.e(8592),n.e(724)]).then(n.bind(n,20724))).default});return function(){return t.apply(this,arguments)}}(),StreamLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(7157).then(n.bind(n,7157))).default});return function(){return t.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(6663).then(n.bind(n,46663))).default});return function(){return t.apply(this,arguments)}}(),TileLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(842),n.e(2784),n.e(9351),n.e(8592),n.e(1433)]).then(n.bind(n,77183))).default});return function(){return t.apply(this,arguments)}}(),UnknownLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(4850).then(n.bind(n,84850))).default});return function(){return t.apply(this,arguments)}}(),UnsupportedLayer:function(){var t=(0,r.Z)(function*(){return(yield n.e(4680).then(n.bind(n,60842))).default});return function(){return t.apply(this,arguments)}}(),VectorTileLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(7917),n.e(4433),n.e(8592),n.e(8622)]).then(n.bind(n,62003))).default});return function(){return t.apply(this,arguments)}}(),VoxelLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8866),n.e(8592),n.e(4691)]).then(n.bind(n,4691))).default});return function(){return t.apply(this,arguments)}}(),WFSLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(1970),n.e(6562)]).then(n.bind(n,18504))).default});return function(){return t.apply(this,arguments)}}(),WMSLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(616)]).then(n.bind(n,10616))).default});return function(){return t.apply(this,arguments)}}(),WMTSLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(7179)]).then(n.bind(n,67179))).default});return function(){return t.apply(this,arguments)}}(),WebTileLayer:function(){var t=(0,r.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(3715)]).then(n.bind(n,54556))).default});return function(){return t.apply(this,arguments)}}()};var t},6661:(z,I,n)=>{n.d(I,{T:()=>t});var r=n(15861),p=n(66476);function t(O,E){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(function*(O,E){const{data:U}=yield(0,p.Z)(O,{responseType:"json",query:{f:"json",...E?.customParameters,token:E?.apiKey}});return U})).apply(this,arguments)}}}]);